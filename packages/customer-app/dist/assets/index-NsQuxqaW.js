(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var oS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var My={exports:{}},Oh={},Vy={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yl=Symbol.for("react.element"),aS=Symbol.for("react.portal"),lS=Symbol.for("react.fragment"),uS=Symbol.for("react.strict_mode"),cS=Symbol.for("react.profiler"),hS=Symbol.for("react.provider"),dS=Symbol.for("react.context"),fS=Symbol.for("react.forward_ref"),pS=Symbol.for("react.suspense"),mS=Symbol.for("react.memo"),gS=Symbol.for("react.lazy"),Wg=Symbol.iterator;function _S(t){return t===null||typeof t!="object"?null:(t=Wg&&t[Wg]||t["@@iterator"],typeof t=="function"?t:null)}var Fy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zy=Object.assign,Uy={};function Yo(t,e,n){this.props=t,this.context=e,this.refs=Uy,this.updater=n||Fy}Yo.prototype.isReactComponent={};Yo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function By(){}By.prototype=Yo.prototype;function bp(t,e,n){this.props=t,this.context=e,this.refs=Uy,this.updater=n||Fy}var Op=bp.prototype=new By;Op.constructor=bp;zy(Op,Yo.prototype);Op.isPureReactComponent=!0;var qg=Array.isArray,jy=Object.prototype.hasOwnProperty,Dp={current:null},Hy={key:!0,ref:!0,__self:!0,__source:!0};function Wy(t,e,n){var i,s={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)jy.call(e,i)&&!Hy.hasOwnProperty(i)&&(s[i]=e[i]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var d=Array(h),m=0;m<h;m++)d[m]=arguments[m+2];s.children=d}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)s[i]===void 0&&(s[i]=h[i]);return{$$typeof:Yl,type:t,key:o,ref:l,props:s,_owner:Dp.current}}function vS(t,e){return{$$typeof:Yl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Mp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yl}function yS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $g=/\/+/g;function Sd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?yS(""+t.key):e.toString(36)}function wc(t,e,n,i,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Yl:case aS:l=!0}}if(l)return l=t,s=s(l),t=i===""?"."+Sd(l,0):i,qg(s)?(n="",t!=null&&(n=t.replace($g,"$&/")+"/"),wc(s,e,n,"",function(m){return m})):s!=null&&(Mp(s)&&(s=vS(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace($g,"$&/")+"/")+t)),e.push(s)),1;if(l=0,i=i===""?".":i+":",qg(t))for(var h=0;h<t.length;h++){o=t[h];var d=i+Sd(o,h);l+=wc(o,e,n,d,s)}else if(d=_S(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=i+Sd(o,h++),l+=wc(o,e,n,d,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Yu(t,e,n){if(t==null)return t;var i=[],s=0;return wc(t,i,"","",function(o){return e.call(n,o,s++)}),i}function wS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wt={current:null},Ec={transition:null},ES={ReactCurrentDispatcher:Wt,ReactCurrentBatchConfig:Ec,ReactCurrentOwner:Dp};function qy(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:Yu,forEach:function(t,e,n){Yu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yu(t,function(){e++}),e},toArray:function(t){return Yu(t,function(e){return e})||[]},only:function(t){if(!Mp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=Yo;Ie.Fragment=lS;Ie.Profiler=cS;Ie.PureComponent=bp;Ie.StrictMode=uS;Ie.Suspense=pS;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ES;Ie.act=qy;Ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=zy({},t.props),s=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=Dp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)jy.call(e,d)&&!Hy.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){h=Array(d);for(var m=0;m<d;m++)h[m]=arguments[m+2];i.children=h}return{$$typeof:Yl,type:t.type,key:s,ref:o,props:i,_owner:l}};Ie.createContext=function(t){return t={$$typeof:dS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:hS,_context:t},t.Consumer=t};Ie.createElement=Wy;Ie.createFactory=function(t){var e=Wy.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:fS,render:t}};Ie.isValidElement=Mp;Ie.lazy=function(t){return{$$typeof:gS,_payload:{_status:-1,_result:t},_init:wS}};Ie.memo=function(t,e){return{$$typeof:mS,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=Ec.transition;Ec.transition={};try{t()}finally{Ec.transition=e}};Ie.unstable_act=qy;Ie.useCallback=function(t,e){return Wt.current.useCallback(t,e)};Ie.useContext=function(t){return Wt.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return Wt.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return Wt.current.useEffect(t,e)};Ie.useId=function(){return Wt.current.useId()};Ie.useImperativeHandle=function(t,e,n){return Wt.current.useImperativeHandle(t,e,n)};Ie.useInsertionEffect=function(t,e){return Wt.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return Wt.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return Wt.current.useMemo(t,e)};Ie.useReducer=function(t,e,n){return Wt.current.useReducer(t,e,n)};Ie.useRef=function(t){return Wt.current.useRef(t)};Ie.useState=function(t){return Wt.current.useState(t)};Ie.useSyncExternalStore=function(t,e,n){return Wt.current.useSyncExternalStore(t,e,n)};Ie.useTransition=function(){return Wt.current.useTransition()};Ie.version="18.3.1";Vy.exports=Ie;var te=Vy.exports;const Jn=Dy(te);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TS=te,IS=Symbol.for("react.element"),SS=Symbol.for("react.fragment"),PS=Object.prototype.hasOwnProperty,CS=TS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AS={key:!0,ref:!0,__self:!0,__source:!0};function $y(t,e,n){var i,s={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)PS.call(e,i)&&!AS.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:IS,type:t,key:o,ref:l,props:s,_owner:CS.current}}Oh.Fragment=SS;Oh.jsx=$y;Oh.jsxs=$y;My.exports=Oh;var D=My.exports,uf={},Zy={exports:{}},cn={},Gy={exports:{}},Ky={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,he){var X=q.length;q.push(he);e:for(;0<X;){var de=X-1>>>1,ve=q[de];if(0<s(ve,he))q[de]=he,q[X]=ve,X=de;else break e}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var he=q[0],X=q.pop();if(X!==he){q[0]=X;e:for(var de=0,ve=q.length,Se=ve>>>1;de<Se;){var Le=2*(de+1)-1,we=q[Le],me=Le+1,ht=q[me];if(0>s(we,X))me<ve&&0>s(ht,we)?(q[de]=ht,q[me]=X,de=me):(q[de]=we,q[Le]=X,de=Le);else if(me<ve&&0>s(ht,X))q[de]=ht,q[me]=X,de=me;else break e}}return he}function s(q,he){var X=q.sortIndex-he.sortIndex;return X!==0?X:q.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],m=[],v=1,y=null,E=3,b=!1,V=!1,M=!1,W=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(q){for(var he=n(m);he!==null;){if(he.callback===null)i(m);else if(he.startTime<=q)i(m),he.sortIndex=he.expirationTime,e(d,he);else break;he=n(m)}}function H(q){if(M=!1,x(q),!V)if(n(d)!==null)V=!0,ct(Y);else{var he=n(m);he!==null&&zt(H,he.startTime-q)}}function Y(q,he){V=!1,M&&(M=!1,O(T),T=-1),b=!0;var X=E;try{for(x(he),y=n(d);y!==null&&(!(y.expirationTime>he)||q&&!k());){var de=y.callback;if(typeof de=="function"){y.callback=null,E=y.priorityLevel;var ve=de(y.expirationTime<=he);he=t.unstable_now(),typeof ve=="function"?y.callback=ve:y===n(d)&&i(d),x(he)}else i(d);y=n(d)}if(y!==null)var Se=!0;else{var Le=n(m);Le!==null&&zt(H,Le.startTime-he),Se=!1}return Se}finally{y=null,E=X,b=!1}}var K=!1,A=null,T=-1,P=5,C=-1;function k(){return!(t.unstable_now()-C<P)}function F(){if(A!==null){var q=t.unstable_now();C=q;var he=!0;try{he=A(!0,q)}finally{he?R():(K=!1,A=null)}}else K=!1}var R;if(typeof S=="function")R=function(){S(F)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,Hn=je.port2;je.port1.onmessage=F,R=function(){Hn.postMessage(null)}}else R=function(){W(F,0)};function ct(q){A=q,K||(K=!0,R())}function zt(q,he){T=W(function(){q(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){V||b||(V=!0,ct(Y))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(q){switch(E){case 1:case 2:case 3:var he=3;break;default:he=E}var X=E;E=he;try{return q()}finally{E=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,he){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var X=E;E=q;try{return he()}finally{E=X}},t.unstable_scheduleCallback=function(q,he,X){var de=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?de+X:de):X=de,q){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=X+ve,q={id:v++,callback:he,priorityLevel:q,startTime:X,expirationTime:ve,sortIndex:-1},X>de?(q.sortIndex=X,e(m,q),n(d)===null&&q===n(m)&&(M?(O(T),T=-1):M=!0,zt(H,X-de))):(q.sortIndex=ve,e(d,q),V||b||(V=!0,ct(Y))),q},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(q){var he=E;return function(){var X=E;E=he;try{return q.apply(this,arguments)}finally{E=X}}}})(Ky);Gy.exports=Ky;var kS=Gy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xS=te,un=kS;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qy=new Set,Tl={};function Is(t,e){Fo(t,e),Fo(t+"Capture",e)}function Fo(t,e){for(Tl[t]=e,t=0;t<e.length;t++)Qy.add(e[t])}var bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cf=Object.prototype.hasOwnProperty,RS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zg={},Gg={};function LS(t){return cf.call(Gg,t)?!0:cf.call(Zg,t)?!1:RS.test(t)?Gg[t]=!0:(Zg[t]=!0,!1)}function NS(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function bS(t,e,n,i){if(e===null||typeof e>"u"||NS(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qt(t,e,n,i,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){kt[t]=new qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];kt[e]=new qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){kt[t]=new qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){kt[t]=new qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){kt[t]=new qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){kt[t]=new qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){kt[t]=new qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){kt[t]=new qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){kt[t]=new qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Vp=/[\-:]([a-z])/g;function Fp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Vp,Fp);kt[e]=new qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Vp,Fp);kt[e]=new qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Vp,Fp);kt[e]=new qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){kt[t]=new qt(t,1,!1,t.toLowerCase(),null,!1,!1)});kt.xlinkHref=new qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){kt[t]=new qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function zp(t,e,n,i){var s=kt.hasOwnProperty(e)?kt[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(bS(e,n,s,i)&&(n=null),i||s===null?LS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Bi=xS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xu=Symbol.for("react.element"),po=Symbol.for("react.portal"),mo=Symbol.for("react.fragment"),Up=Symbol.for("react.strict_mode"),hf=Symbol.for("react.profiler"),Yy=Symbol.for("react.provider"),Xy=Symbol.for("react.context"),Bp=Symbol.for("react.forward_ref"),df=Symbol.for("react.suspense"),ff=Symbol.for("react.suspense_list"),jp=Symbol.for("react.memo"),tr=Symbol.for("react.lazy"),Jy=Symbol.for("react.offscreen"),Kg=Symbol.iterator;function ja(t){return t===null||typeof t!="object"?null:(t=Kg&&t[Kg]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,Pd;function Qa(t){if(Pd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Pd=e&&e[1]||""}return`
`+Pd+t}var Cd=!1;function Ad(t,e){if(!t||Cd)return"";Cd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var i=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){i=m}t.call(e.prototype)}else{try{throw Error()}catch(m){i=m}t()}}catch(m){if(m&&i&&typeof m.stack=="string"){for(var s=m.stack.split(`
`),o=i.stack.split(`
`),l=s.length-1,h=o.length-1;1<=l&&0<=h&&s[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(s[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||s[l]!==o[h]){var d=`
`+s[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{Cd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qa(t):""}function OS(t){switch(t.tag){case 5:return Qa(t.type);case 16:return Qa("Lazy");case 13:return Qa("Suspense");case 19:return Qa("SuspenseList");case 0:case 2:case 15:return t=Ad(t.type,!1),t;case 11:return t=Ad(t.type.render,!1),t;case 1:return t=Ad(t.type,!0),t;default:return""}}function pf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case mo:return"Fragment";case po:return"Portal";case hf:return"Profiler";case Up:return"StrictMode";case df:return"Suspense";case ff:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Xy:return(t.displayName||"Context")+".Consumer";case Yy:return(t._context.displayName||"Context")+".Provider";case Bp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jp:return e=t.displayName||null,e!==null?e:pf(t.type)||"Memo";case tr:e=t._payload,t=t._init;try{return pf(t(e))}catch{}}return null}function DS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pf(e);case 8:return e===Up?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ew(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function MS(t){var e=ew(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ju(t){t._valueTracker||(t._valueTracker=MS(t))}function tw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=ew(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Hc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mf(t,e){var n=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Qg(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Pr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nw(t,e){e=e.checked,e!=null&&zp(t,"checked",e,!1)}function gf(t,e){nw(t,e);var n=Pr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_f(t,e.type,n):e.hasOwnProperty("defaultValue")&&_f(t,e.type,Pr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Yg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _f(t,e,n){(e!=="number"||Hc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ya=Array.isArray;function Ao(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Pr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function vf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Xg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(Ya(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Pr(n)}}function iw(t,e){var n=Pr(e.value),i=Pr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Jg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ec,sw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ec=ec||document.createElement("div"),ec.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ec.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Il(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ol={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},VS=["Webkit","ms","Moz","O"];Object.keys(ol).forEach(function(t){VS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ol[e]=ol[t]})});function ow(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ol.hasOwnProperty(t)&&ol[t]?(""+e).trim():e+"px"}function aw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=ow(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var FS=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wf(t,e){if(e){if(FS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function Ef(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tf=null;function Hp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var If=null,ko=null,xo=null;function e_(t){if(t=eu(t)){if(typeof If!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=zh(e),If(t.stateNode,t.type,e))}}function lw(t){ko?xo?xo.push(t):xo=[t]:ko=t}function uw(){if(ko){var t=ko,e=xo;if(xo=ko=null,e_(t),e)for(t=0;t<e.length;t++)e_(e[t])}}function cw(t,e){return t(e)}function hw(){}var kd=!1;function dw(t,e,n){if(kd)return t(e,n);kd=!0;try{return cw(t,e,n)}finally{kd=!1,(ko!==null||xo!==null)&&(hw(),uw())}}function Sl(t,e){var n=t.stateNode;if(n===null)return null;var i=zh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var Sf=!1;if(bi)try{var Ha={};Object.defineProperty(Ha,"passive",{get:function(){Sf=!0}}),window.addEventListener("test",Ha,Ha),window.removeEventListener("test",Ha,Ha)}catch{Sf=!1}function zS(t,e,n,i,s,o,l,h,d){var m=Array.prototype.slice.call(arguments,3);try{e.apply(n,m)}catch(v){this.onError(v)}}var al=!1,Wc=null,qc=!1,Pf=null,US={onError:function(t){al=!0,Wc=t}};function BS(t,e,n,i,s,o,l,h,d){al=!1,Wc=null,zS.apply(US,arguments)}function jS(t,e,n,i,s,o,l,h,d){if(BS.apply(this,arguments),al){if(al){var m=Wc;al=!1,Wc=null}else throw Error(Q(198));qc||(qc=!0,Pf=m)}}function Ss(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function fw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function t_(t){if(Ss(t)!==t)throw Error(Q(188))}function HS(t){var e=t.alternate;if(!e){if(e=Ss(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return t_(s),t;if(o===i)return t_(s),e;o=o.sibling}throw Error(Q(188))}if(n.return!==i.return)n=s,i=o;else{for(var l=!1,h=s.child;h;){if(h===n){l=!0,n=s,i=o;break}if(h===i){l=!0,i=s,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,i=s;break}if(h===i){l=!0,i=o,n=s;break}h=h.sibling}if(!l)throw Error(Q(189))}}if(n.alternate!==i)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function pw(t){return t=HS(t),t!==null?mw(t):null}function mw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mw(t);if(e!==null)return e;t=t.sibling}return null}var gw=un.unstable_scheduleCallback,n_=un.unstable_cancelCallback,WS=un.unstable_shouldYield,qS=un.unstable_requestPaint,it=un.unstable_now,$S=un.unstable_getCurrentPriorityLevel,Wp=un.unstable_ImmediatePriority,_w=un.unstable_UserBlockingPriority,$c=un.unstable_NormalPriority,ZS=un.unstable_LowPriority,vw=un.unstable_IdlePriority,Dh=null,ei=null;function GS(t){if(ei&&typeof ei.onCommitFiberRoot=="function")try{ei.onCommitFiberRoot(Dh,t,void 0,(t.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:YS,KS=Math.log,QS=Math.LN2;function YS(t){return t>>>=0,t===0?32:31-(KS(t)/QS|0)|0}var tc=64,nc=4194304;function Xa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~s;h!==0?i=Xa(h):(o&=l,o!==0&&(i=Xa(o)))}else l=n&~s,l!==0?i=Xa(l):o!==0&&(i=Xa(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-zn(e),s=1<<n,i|=t[n],e&=~s;return i}function XS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JS(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-zn(o),h=1<<l,d=s[l];d===-1?(!(h&n)||h&i)&&(s[l]=XS(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function Cf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yw(){var t=tc;return tc<<=1,!(tc&4194240)&&(tc=64),t}function xd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zn(e),t[e]=n}function eP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-zn(n),o=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~o}}function qp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-zn(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var Oe=0;function ww(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ew,$p,Tw,Iw,Sw,Af=!1,ic=[],dr=null,fr=null,pr=null,Pl=new Map,Cl=new Map,ir=[],tP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function i_(t,e){switch(t){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":Pl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cl.delete(e.pointerId)}}function Wa(t,e,n,i,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=eu(e),e!==null&&$p(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function nP(t,e,n,i,s){switch(e){case"focusin":return dr=Wa(dr,t,e,n,i,s),!0;case"dragenter":return fr=Wa(fr,t,e,n,i,s),!0;case"mouseover":return pr=Wa(pr,t,e,n,i,s),!0;case"pointerover":var o=s.pointerId;return Pl.set(o,Wa(Pl.get(o)||null,t,e,n,i,s)),!0;case"gotpointercapture":return o=s.pointerId,Cl.set(o,Wa(Cl.get(o)||null,t,e,n,i,s)),!0}return!1}function Pw(t){var e=is(t.target);if(e!==null){var n=Ss(e);if(n!==null){if(e=n.tag,e===13){if(e=fw(n),e!==null){t.blockedOn=e,Sw(t.priority,function(){Tw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=kf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Tf=i,n.target.dispatchEvent(i),Tf=null}else return e=eu(n),e!==null&&$p(e),t.blockedOn=n,!1;e.shift()}return!0}function r_(t,e,n){Tc(t)&&n.delete(e)}function iP(){Af=!1,dr!==null&&Tc(dr)&&(dr=null),fr!==null&&Tc(fr)&&(fr=null),pr!==null&&Tc(pr)&&(pr=null),Pl.forEach(r_),Cl.forEach(r_)}function qa(t,e){t.blockedOn===e&&(t.blockedOn=null,Af||(Af=!0,un.unstable_scheduleCallback(un.unstable_NormalPriority,iP)))}function Al(t){function e(s){return qa(s,t)}if(0<ic.length){qa(ic[0],t);for(var n=1;n<ic.length;n++){var i=ic[n];i.blockedOn===t&&(i.blockedOn=null)}}for(dr!==null&&qa(dr,t),fr!==null&&qa(fr,t),pr!==null&&qa(pr,t),Pl.forEach(e),Cl.forEach(e),n=0;n<ir.length;n++)i=ir[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<ir.length&&(n=ir[0],n.blockedOn===null);)Pw(n),n.blockedOn===null&&ir.shift()}var Ro=Bi.ReactCurrentBatchConfig,Gc=!0;function rP(t,e,n,i){var s=Oe,o=Ro.transition;Ro.transition=null;try{Oe=1,Zp(t,e,n,i)}finally{Oe=s,Ro.transition=o}}function sP(t,e,n,i){var s=Oe,o=Ro.transition;Ro.transition=null;try{Oe=4,Zp(t,e,n,i)}finally{Oe=s,Ro.transition=o}}function Zp(t,e,n,i){if(Gc){var s=kf(t,e,n,i);if(s===null)zd(t,e,i,Kc,n),i_(t,i);else if(nP(s,t,e,n,i))i.stopPropagation();else if(i_(t,i),e&4&&-1<tP.indexOf(t)){for(;s!==null;){var o=eu(s);if(o!==null&&Ew(o),o=kf(t,e,n,i),o===null&&zd(t,e,i,Kc,n),o===s)break;s=o}s!==null&&i.stopPropagation()}else zd(t,e,i,null,n)}}var Kc=null;function kf(t,e,n,i){if(Kc=null,t=Hp(i),t=is(t),t!==null)if(e=Ss(t),e===null)t=null;else if(n=e.tag,n===13){if(t=fw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Kc=t,null}function Cw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($S()){case Wp:return 1;case _w:return 4;case $c:case ZS:return 16;case vw:return 536870912;default:return 16}default:return 16}}var ur=null,Gp=null,Ic=null;function Aw(){if(Ic)return Ic;var t,e=Gp,n=e.length,i,s="value"in ur?ur.value:ur.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===s[o-i];i++);return Ic=s.slice(t,1<i?1-i:void 0)}function Sc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rc(){return!0}function s_(){return!1}function hn(t){function e(n,i,s,o,l){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?rc:s_,this.isPropagationStopped=s_,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rc)},persist:function(){},isPersistent:rc}),e}var Xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kp=hn(Xo),Jl=Ye({},Xo,{view:0,detail:0}),oP=hn(Jl),Rd,Ld,$a,Mh=Ye({},Jl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$a&&($a&&t.type==="mousemove"?(Rd=t.screenX-$a.screenX,Ld=t.screenY-$a.screenY):Ld=Rd=0,$a=t),Rd)},movementY:function(t){return"movementY"in t?t.movementY:Ld}}),o_=hn(Mh),aP=Ye({},Mh,{dataTransfer:0}),lP=hn(aP),uP=Ye({},Jl,{relatedTarget:0}),Nd=hn(uP),cP=Ye({},Xo,{animationName:0,elapsedTime:0,pseudoElement:0}),hP=hn(cP),dP=Ye({},Xo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fP=hn(dP),pP=Ye({},Xo,{data:0}),a_=hn(pP),mP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_P={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_P[t])?!!e[t]:!1}function Qp(){return vP}var yP=Ye({},Jl,{key:function(t){if(t.key){var e=mP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Sc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qp,charCode:function(t){return t.type==="keypress"?Sc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Sc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wP=hn(yP),EP=Ye({},Mh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),l_=hn(EP),TP=Ye({},Jl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qp}),IP=hn(TP),SP=Ye({},Xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),PP=hn(SP),CP=Ye({},Mh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),AP=hn(CP),kP=[9,13,27,32],Yp=bi&&"CompositionEvent"in window,ll=null;bi&&"documentMode"in document&&(ll=document.documentMode);var xP=bi&&"TextEvent"in window&&!ll,kw=bi&&(!Yp||ll&&8<ll&&11>=ll),u_=" ",c_=!1;function xw(t,e){switch(t){case"keyup":return kP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var go=!1;function RP(t,e){switch(t){case"compositionend":return Rw(e);case"keypress":return e.which!==32?null:(c_=!0,u_);case"textInput":return t=e.data,t===u_&&c_?null:t;default:return null}}function LP(t,e){if(go)return t==="compositionend"||!Yp&&xw(t,e)?(t=Aw(),Ic=Gp=ur=null,go=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kw&&e.locale!=="ko"?null:e.data;default:return null}}var NP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function h_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!NP[t.type]:e==="textarea"}function Lw(t,e,n,i){lw(i),e=Qc(e,"onChange"),0<e.length&&(n=new Kp("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var ul=null,kl=null;function bP(t){jw(t,0)}function Vh(t){var e=yo(t);if(tw(e))return t}function OP(t,e){if(t==="change")return e}var Nw=!1;if(bi){var bd;if(bi){var Od="oninput"in document;if(!Od){var d_=document.createElement("div");d_.setAttribute("oninput","return;"),Od=typeof d_.oninput=="function"}bd=Od}else bd=!1;Nw=bd&&(!document.documentMode||9<document.documentMode)}function f_(){ul&&(ul.detachEvent("onpropertychange",bw),kl=ul=null)}function bw(t){if(t.propertyName==="value"&&Vh(kl)){var e=[];Lw(e,kl,t,Hp(t)),dw(bP,e)}}function DP(t,e,n){t==="focusin"?(f_(),ul=e,kl=n,ul.attachEvent("onpropertychange",bw)):t==="focusout"&&f_()}function MP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vh(kl)}function VP(t,e){if(t==="click")return Vh(e)}function FP(t,e){if(t==="input"||t==="change")return Vh(e)}function zP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Bn=typeof Object.is=="function"?Object.is:zP;function xl(t,e){if(Bn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!cf.call(e,s)||!Bn(t[s],e[s]))return!1}return!0}function p_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function m_(t,e){var n=p_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=p_(n)}}function Ow(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ow(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Dw(){for(var t=window,e=Hc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Hc(t.document)}return e}function Xp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function UP(t){var e=Dw(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ow(n.ownerDocument.documentElement,n)){if(i!==null&&Xp(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!t.extend&&o>i&&(s=i,i=o,o=s),s=m_(n,o);var l=m_(n,i);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var BP=bi&&"documentMode"in document&&11>=document.documentMode,_o=null,xf=null,cl=null,Rf=!1;function g_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rf||_o==null||_o!==Hc(i)||(i=_o,"selectionStart"in i&&Xp(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),cl&&xl(cl,i)||(cl=i,i=Qc(xf,"onSelect"),0<i.length&&(e=new Kp("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=_o)))}function sc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vo={animationend:sc("Animation","AnimationEnd"),animationiteration:sc("Animation","AnimationIteration"),animationstart:sc("Animation","AnimationStart"),transitionend:sc("Transition","TransitionEnd")},Dd={},Mw={};bi&&(Mw=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function Fh(t){if(Dd[t])return Dd[t];if(!vo[t])return t;var e=vo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Mw)return Dd[t]=e[n];return t}var Vw=Fh("animationend"),Fw=Fh("animationiteration"),zw=Fh("animationstart"),Uw=Fh("transitionend"),Bw=new Map,__="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(t,e){Bw.set(t,e),Is(e,[t])}for(var Md=0;Md<__.length;Md++){var Vd=__[Md],jP=Vd.toLowerCase(),HP=Vd[0].toUpperCase()+Vd.slice(1);Dr(jP,"on"+HP)}Dr(Vw,"onAnimationEnd");Dr(Fw,"onAnimationIteration");Dr(zw,"onAnimationStart");Dr("dblclick","onDoubleClick");Dr("focusin","onFocus");Dr("focusout","onBlur");Dr(Uw,"onTransitionEnd");Fo("onMouseEnter",["mouseout","mouseover"]);Fo("onMouseLeave",["mouseout","mouseover"]);Fo("onPointerEnter",["pointerout","pointerover"]);Fo("onPointerLeave",["pointerout","pointerover"]);Is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Is("onBeforeInput",["compositionend","keypress","textInput","paste"]);Is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ja));function v_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,jS(i,e,void 0,t),t.currentTarget=null}function jw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var h=i[l],d=h.instance,m=h.currentTarget;if(h=h.listener,d!==o&&s.isPropagationStopped())break e;v_(s,h,m),o=d}else for(l=0;l<i.length;l++){if(h=i[l],d=h.instance,m=h.currentTarget,h=h.listener,d!==o&&s.isPropagationStopped())break e;v_(s,h,m),o=d}}}if(qc)throw t=Pf,qc=!1,Pf=null,t}function ze(t,e){var n=e[Df];n===void 0&&(n=e[Df]=new Set);var i=t+"__bubble";n.has(i)||(Hw(e,t,2,!1),n.add(i))}function Fd(t,e,n){var i=0;e&&(i|=4),Hw(n,t,i,e)}var oc="_reactListening"+Math.random().toString(36).slice(2);function Rl(t){if(!t[oc]){t[oc]=!0,Qy.forEach(function(n){n!=="selectionchange"&&(WP.has(n)||Fd(n,!1,t),Fd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[oc]||(e[oc]=!0,Fd("selectionchange",!1,e))}}function Hw(t,e,n,i){switch(Cw(e)){case 1:var s=rP;break;case 4:s=sP;break;default:s=Zp}n=s.bind(null,e,n,t),s=void 0,!Sf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function zd(t,e,n,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var h=i.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;h!==null;){if(l=is(h),l===null)return;if(d=l.tag,d===5||d===6){i=o=l;continue e}h=h.parentNode}}i=i.return}dw(function(){var m=o,v=Hp(n),y=[];e:{var E=Bw.get(t);if(E!==void 0){var b=Kp,V=t;switch(t){case"keypress":if(Sc(n)===0)break e;case"keydown":case"keyup":b=wP;break;case"focusin":V="focus",b=Nd;break;case"focusout":V="blur",b=Nd;break;case"beforeblur":case"afterblur":b=Nd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=o_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=lP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=IP;break;case Vw:case Fw:case zw:b=hP;break;case Uw:b=PP;break;case"scroll":b=oP;break;case"wheel":b=AP;break;case"copy":case"cut":case"paste":b=fP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=l_}var M=(e&4)!==0,W=!M&&t==="scroll",O=M?E!==null?E+"Capture":null:E;M=[];for(var S=m,x;S!==null;){x=S;var H=x.stateNode;if(x.tag===5&&H!==null&&(x=H,O!==null&&(H=Sl(S,O),H!=null&&M.push(Ll(S,H,x)))),W)break;S=S.return}0<M.length&&(E=new b(E,V,null,n,v),y.push({event:E,listeners:M}))}}if(!(e&7)){e:{if(E=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",E&&n!==Tf&&(V=n.relatedTarget||n.fromElement)&&(is(V)||V[Oi]))break e;if((b||E)&&(E=v.window===v?v:(E=v.ownerDocument)?E.defaultView||E.parentWindow:window,b?(V=n.relatedTarget||n.toElement,b=m,V=V?is(V):null,V!==null&&(W=Ss(V),V!==W||V.tag!==5&&V.tag!==6)&&(V=null)):(b=null,V=m),b!==V)){if(M=o_,H="onMouseLeave",O="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(M=l_,H="onPointerLeave",O="onPointerEnter",S="pointer"),W=b==null?E:yo(b),x=V==null?E:yo(V),E=new M(H,S+"leave",b,n,v),E.target=W,E.relatedTarget=x,H=null,is(v)===m&&(M=new M(O,S+"enter",V,n,v),M.target=x,M.relatedTarget=W,H=M),W=H,b&&V)t:{for(M=b,O=V,S=0,x=M;x;x=lo(x))S++;for(x=0,H=O;H;H=lo(H))x++;for(;0<S-x;)M=lo(M),S--;for(;0<x-S;)O=lo(O),x--;for(;S--;){if(M===O||O!==null&&M===O.alternate)break t;M=lo(M),O=lo(O)}M=null}else M=null;b!==null&&y_(y,E,b,M,!1),V!==null&&W!==null&&y_(y,W,V,M,!0)}}e:{if(E=m?yo(m):window,b=E.nodeName&&E.nodeName.toLowerCase(),b==="select"||b==="input"&&E.type==="file")var Y=OP;else if(h_(E))if(Nw)Y=FP;else{Y=MP;var K=DP}else(b=E.nodeName)&&b.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(Y=VP);if(Y&&(Y=Y(t,m))){Lw(y,Y,n,v);break e}K&&K(t,E,m),t==="focusout"&&(K=E._wrapperState)&&K.controlled&&E.type==="number"&&_f(E,"number",E.value)}switch(K=m?yo(m):window,t){case"focusin":(h_(K)||K.contentEditable==="true")&&(_o=K,xf=m,cl=null);break;case"focusout":cl=xf=_o=null;break;case"mousedown":Rf=!0;break;case"contextmenu":case"mouseup":case"dragend":Rf=!1,g_(y,n,v);break;case"selectionchange":if(BP)break;case"keydown":case"keyup":g_(y,n,v)}var A;if(Yp)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else go?xw(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(kw&&n.locale!=="ko"&&(go||T!=="onCompositionStart"?T==="onCompositionEnd"&&go&&(A=Aw()):(ur=v,Gp="value"in ur?ur.value:ur.textContent,go=!0)),K=Qc(m,T),0<K.length&&(T=new a_(T,t,null,n,v),y.push({event:T,listeners:K}),A?T.data=A:(A=Rw(n),A!==null&&(T.data=A)))),(A=xP?RP(t,n):LP(t,n))&&(m=Qc(m,"onBeforeInput"),0<m.length&&(v=new a_("onBeforeInput","beforeinput",null,n,v),y.push({event:v,listeners:m}),v.data=A))}jw(y,e)})}function Ll(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Qc(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Sl(t,n),o!=null&&i.unshift(Ll(t,o,s)),o=Sl(t,e),o!=null&&i.push(Ll(t,o,s))),t=t.return}return i}function lo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function y_(t,e,n,i,s){for(var o=e._reactName,l=[];n!==null&&n!==i;){var h=n,d=h.alternate,m=h.stateNode;if(d!==null&&d===i)break;h.tag===5&&m!==null&&(h=m,s?(d=Sl(n,o),d!=null&&l.unshift(Ll(n,d,h))):s||(d=Sl(n,o),d!=null&&l.push(Ll(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var qP=/\r\n?/g,$P=/\u0000|\uFFFD/g;function w_(t){return(typeof t=="string"?t:""+t).replace(qP,`
`).replace($P,"")}function ac(t,e,n){if(e=w_(e),w_(t)!==e&&n)throw Error(Q(425))}function Yc(){}var Lf=null,Nf=null;function bf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Of=typeof setTimeout=="function"?setTimeout:void 0,ZP=typeof clearTimeout=="function"?clearTimeout:void 0,E_=typeof Promise=="function"?Promise:void 0,GP=typeof queueMicrotask=="function"?queueMicrotask:typeof E_<"u"?function(t){return E_.resolve(null).then(t).catch(KP)}:Of;function KP(t){setTimeout(function(){throw t})}function Ud(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),Al(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);Al(e)}function mr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function T_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Jo=Math.random().toString(36).slice(2),Xn="__reactFiber$"+Jo,Nl="__reactProps$"+Jo,Oi="__reactContainer$"+Jo,Df="__reactEvents$"+Jo,QP="__reactListeners$"+Jo,YP="__reactHandles$"+Jo;function is(t){var e=t[Xn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Oi]||n[Xn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=T_(t);t!==null;){if(n=t[Xn])return n;t=T_(t)}return e}t=n,n=t.parentNode}return null}function eu(t){return t=t[Xn]||t[Oi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function zh(t){return t[Nl]||null}var Mf=[],wo=-1;function Mr(t){return{current:t}}function Be(t){0>wo||(t.current=Mf[wo],Mf[wo]=null,wo--)}function Fe(t,e){wo++,Mf[wo]=t.current,t.current=e}var Cr={},Vt=Mr(Cr),Xt=Mr(!1),cs=Cr;function zo(t,e){var n=t.type.contextTypes;if(!n)return Cr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Jt(t){return t=t.childContextTypes,t!=null}function Xc(){Be(Xt),Be(Vt)}function I_(t,e,n){if(Vt.current!==Cr)throw Error(Q(168));Fe(Vt,e),Fe(Xt,n)}function Ww(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(Q(108,DS(t)||"Unknown",s));return Ye({},n,i)}function Jc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cr,cs=Vt.current,Fe(Vt,t),Fe(Xt,Xt.current),!0}function S_(t,e,n){var i=t.stateNode;if(!i)throw Error(Q(169));n?(t=Ww(t,e,cs),i.__reactInternalMemoizedMergedChildContext=t,Be(Xt),Be(Vt),Fe(Vt,t)):Be(Xt),Fe(Xt,n)}var Pi=null,Uh=!1,Bd=!1;function qw(t){Pi===null?Pi=[t]:Pi.push(t)}function XP(t){Uh=!0,qw(t)}function Vr(){if(!Bd&&Pi!==null){Bd=!0;var t=0,e=Oe;try{var n=Pi;for(Oe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Pi=null,Uh=!1}catch(s){throw Pi!==null&&(Pi=Pi.slice(t+1)),gw(Wp,Vr),s}finally{Oe=e,Bd=!1}}return null}var Eo=[],To=0,eh=null,th=0,wn=[],En=0,hs=null,Ci=1,Ai="";function es(t,e){Eo[To++]=th,Eo[To++]=eh,eh=t,th=e}function $w(t,e,n){wn[En++]=Ci,wn[En++]=Ai,wn[En++]=hs,hs=t;var i=Ci;t=Ai;var s=32-zn(i)-1;i&=~(1<<s),n+=1;var o=32-zn(e)+s;if(30<o){var l=s-s%5;o=(i&(1<<l)-1).toString(32),i>>=l,s-=l,Ci=1<<32-zn(e)+s|n<<s|i,Ai=o+t}else Ci=1<<o|n<<s|i,Ai=t}function Jp(t){t.return!==null&&(es(t,1),$w(t,1,0))}function em(t){for(;t===eh;)eh=Eo[--To],Eo[To]=null,th=Eo[--To],Eo[To]=null;for(;t===hs;)hs=wn[--En],wn[En]=null,Ai=wn[--En],wn[En]=null,Ci=wn[--En],wn[En]=null}var ln=null,an=null,qe=!1,Mn=null;function Zw(t,e){var n=Sn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function P_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ln=t,an=mr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ln=t,an=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=hs!==null?{id:Ci,overflow:Ai}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Sn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ln=t,an=null,!0):!1;default:return!1}}function Vf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ff(t){if(qe){var e=an;if(e){var n=e;if(!P_(t,e)){if(Vf(t))throw Error(Q(418));e=mr(n.nextSibling);var i=ln;e&&P_(t,e)?Zw(i,n):(t.flags=t.flags&-4097|2,qe=!1,ln=t)}}else{if(Vf(t))throw Error(Q(418));t.flags=t.flags&-4097|2,qe=!1,ln=t}}}function C_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ln=t}function lc(t){if(t!==ln)return!1;if(!qe)return C_(t),qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bf(t.type,t.memoizedProps)),e&&(e=an)){if(Vf(t))throw Gw(),Error(Q(418));for(;e;)Zw(t,e),e=mr(e.nextSibling)}if(C_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){an=mr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}an=null}}else an=ln?mr(t.stateNode.nextSibling):null;return!0}function Gw(){for(var t=an;t;)t=mr(t.nextSibling)}function Uo(){an=ln=null,qe=!1}function tm(t){Mn===null?Mn=[t]:Mn.push(t)}var JP=Bi.ReactCurrentBatchConfig;function Za(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var i=n.stateNode}if(!i)throw Error(Q(147,t));var s=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=s.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function uc(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function A_(t){var e=t._init;return e(t._payload)}function Kw(t){function e(O,S){if(t){var x=O.deletions;x===null?(O.deletions=[S],O.flags|=16):x.push(S)}}function n(O,S){if(!t)return null;for(;S!==null;)e(O,S),S=S.sibling;return null}function i(O,S){for(O=new Map;S!==null;)S.key!==null?O.set(S.key,S):O.set(S.index,S),S=S.sibling;return O}function s(O,S){return O=yr(O,S),O.index=0,O.sibling=null,O}function o(O,S,x){return O.index=x,t?(x=O.alternate,x!==null?(x=x.index,x<S?(O.flags|=2,S):x):(O.flags|=2,S)):(O.flags|=1048576,S)}function l(O){return t&&O.alternate===null&&(O.flags|=2),O}function h(O,S,x,H){return S===null||S.tag!==6?(S=Gd(x,O.mode,H),S.return=O,S):(S=s(S,x),S.return=O,S)}function d(O,S,x,H){var Y=x.type;return Y===mo?v(O,S,x.props.children,H,x.key):S!==null&&(S.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===tr&&A_(Y)===S.type)?(H=s(S,x.props),H.ref=Za(O,S,x),H.return=O,H):(H=Lc(x.type,x.key,x.props,null,O.mode,H),H.ref=Za(O,S,x),H.return=O,H)}function m(O,S,x,H){return S===null||S.tag!==4||S.stateNode.containerInfo!==x.containerInfo||S.stateNode.implementation!==x.implementation?(S=Kd(x,O.mode,H),S.return=O,S):(S=s(S,x.children||[]),S.return=O,S)}function v(O,S,x,H,Y){return S===null||S.tag!==7?(S=ls(x,O.mode,H,Y),S.return=O,S):(S=s(S,x),S.return=O,S)}function y(O,S,x){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Gd(""+S,O.mode,x),S.return=O,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Xu:return x=Lc(S.type,S.key,S.props,null,O.mode,x),x.ref=Za(O,null,S),x.return=O,x;case po:return S=Kd(S,O.mode,x),S.return=O,S;case tr:var H=S._init;return y(O,H(S._payload),x)}if(Ya(S)||ja(S))return S=ls(S,O.mode,x,null),S.return=O,S;uc(O,S)}return null}function E(O,S,x,H){var Y=S!==null?S.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return Y!==null?null:h(O,S,""+x,H);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Xu:return x.key===Y?d(O,S,x,H):null;case po:return x.key===Y?m(O,S,x,H):null;case tr:return Y=x._init,E(O,S,Y(x._payload),H)}if(Ya(x)||ja(x))return Y!==null?null:v(O,S,x,H,null);uc(O,x)}return null}function b(O,S,x,H,Y){if(typeof H=="string"&&H!==""||typeof H=="number")return O=O.get(x)||null,h(S,O,""+H,Y);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Xu:return O=O.get(H.key===null?x:H.key)||null,d(S,O,H,Y);case po:return O=O.get(H.key===null?x:H.key)||null,m(S,O,H,Y);case tr:var K=H._init;return b(O,S,x,K(H._payload),Y)}if(Ya(H)||ja(H))return O=O.get(x)||null,v(S,O,H,Y,null);uc(S,H)}return null}function V(O,S,x,H){for(var Y=null,K=null,A=S,T=S=0,P=null;A!==null&&T<x.length;T++){A.index>T?(P=A,A=null):P=A.sibling;var C=E(O,A,x[T],H);if(C===null){A===null&&(A=P);break}t&&A&&C.alternate===null&&e(O,A),S=o(C,S,T),K===null?Y=C:K.sibling=C,K=C,A=P}if(T===x.length)return n(O,A),qe&&es(O,T),Y;if(A===null){for(;T<x.length;T++)A=y(O,x[T],H),A!==null&&(S=o(A,S,T),K===null?Y=A:K.sibling=A,K=A);return qe&&es(O,T),Y}for(A=i(O,A);T<x.length;T++)P=b(A,O,T,x[T],H),P!==null&&(t&&P.alternate!==null&&A.delete(P.key===null?T:P.key),S=o(P,S,T),K===null?Y=P:K.sibling=P,K=P);return t&&A.forEach(function(k){return e(O,k)}),qe&&es(O,T),Y}function M(O,S,x,H){var Y=ja(x);if(typeof Y!="function")throw Error(Q(150));if(x=Y.call(x),x==null)throw Error(Q(151));for(var K=Y=null,A=S,T=S=0,P=null,C=x.next();A!==null&&!C.done;T++,C=x.next()){A.index>T?(P=A,A=null):P=A.sibling;var k=E(O,A,C.value,H);if(k===null){A===null&&(A=P);break}t&&A&&k.alternate===null&&e(O,A),S=o(k,S,T),K===null?Y=k:K.sibling=k,K=k,A=P}if(C.done)return n(O,A),qe&&es(O,T),Y;if(A===null){for(;!C.done;T++,C=x.next())C=y(O,C.value,H),C!==null&&(S=o(C,S,T),K===null?Y=C:K.sibling=C,K=C);return qe&&es(O,T),Y}for(A=i(O,A);!C.done;T++,C=x.next())C=b(A,O,T,C.value,H),C!==null&&(t&&C.alternate!==null&&A.delete(C.key===null?T:C.key),S=o(C,S,T),K===null?Y=C:K.sibling=C,K=C);return t&&A.forEach(function(F){return e(O,F)}),qe&&es(O,T),Y}function W(O,S,x,H){if(typeof x=="object"&&x!==null&&x.type===mo&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Xu:e:{for(var Y=x.key,K=S;K!==null;){if(K.key===Y){if(Y=x.type,Y===mo){if(K.tag===7){n(O,K.sibling),S=s(K,x.props.children),S.return=O,O=S;break e}}else if(K.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===tr&&A_(Y)===K.type){n(O,K.sibling),S=s(K,x.props),S.ref=Za(O,K,x),S.return=O,O=S;break e}n(O,K);break}else e(O,K);K=K.sibling}x.type===mo?(S=ls(x.props.children,O.mode,H,x.key),S.return=O,O=S):(H=Lc(x.type,x.key,x.props,null,O.mode,H),H.ref=Za(O,S,x),H.return=O,O=H)}return l(O);case po:e:{for(K=x.key;S!==null;){if(S.key===K)if(S.tag===4&&S.stateNode.containerInfo===x.containerInfo&&S.stateNode.implementation===x.implementation){n(O,S.sibling),S=s(S,x.children||[]),S.return=O,O=S;break e}else{n(O,S);break}else e(O,S);S=S.sibling}S=Kd(x,O.mode,H),S.return=O,O=S}return l(O);case tr:return K=x._init,W(O,S,K(x._payload),H)}if(Ya(x))return V(O,S,x,H);if(ja(x))return M(O,S,x,H);uc(O,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,S!==null&&S.tag===6?(n(O,S.sibling),S=s(S,x),S.return=O,O=S):(n(O,S),S=Gd(x,O.mode,H),S.return=O,O=S),l(O)):n(O,S)}return W}var Bo=Kw(!0),Qw=Kw(!1),nh=Mr(null),ih=null,Io=null,nm=null;function im(){nm=Io=ih=null}function rm(t){var e=nh.current;Be(nh),t._currentValue=e}function zf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Lo(t,e){ih=t,nm=Io=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qt=!0),t.firstContext=null)}function Cn(t){var e=t._currentValue;if(nm!==t)if(t={context:t,memoizedValue:e,next:null},Io===null){if(ih===null)throw Error(Q(308));Io=t,ih.dependencies={lanes:0,firstContext:t}}else Io=Io.next=t;return e}var rs=null;function sm(t){rs===null?rs=[t]:rs.push(t)}function Yw(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,sm(e)):(n.next=s.next,s.next=n),e.interleaved=n,Di(t,i)}function Di(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var nr=!1;function om(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ri(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Re&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Di(t,n)}return s=i.interleaved,s===null?(e.next=e,sm(i)):(e.next=s.next,s.next=e),i.interleaved=e,Di(t,n)}function Pc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,qp(t,n)}}function k_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function rh(t,e,n,i){var s=t.updateQueue;nr=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var d=h,m=d.next;d.next=null,l===null?o=m:l.next=m,l=d;var v=t.alternate;v!==null&&(v=v.updateQueue,h=v.lastBaseUpdate,h!==l&&(h===null?v.firstBaseUpdate=m:h.next=m,v.lastBaseUpdate=d))}if(o!==null){var y=s.baseState;l=0,v=m=d=null,h=o;do{var E=h.lane,b=h.eventTime;if((i&E)===E){v!==null&&(v=v.next={eventTime:b,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var V=t,M=h;switch(E=e,b=n,M.tag){case 1:if(V=M.payload,typeof V=="function"){y=V.call(b,y,E);break e}y=V;break e;case 3:V.flags=V.flags&-65537|128;case 0:if(V=M.payload,E=typeof V=="function"?V.call(b,y,E):V,E==null)break e;y=Ye({},y,E);break e;case 2:nr=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,E=s.effects,E===null?s.effects=[h]:E.push(h))}else b={eventTime:b,lane:E,tag:h.tag,payload:h.payload,callback:h.callback,next:null},v===null?(m=v=b,d=y):v=v.next=b,l|=E;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;E=h,h=E.next,E.next=null,s.lastBaseUpdate=E,s.shared.pending=null}}while(!0);if(v===null&&(d=y),s.baseState=d,s.firstBaseUpdate=m,s.lastBaseUpdate=v,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);fs|=l,t.lanes=l,t.memoizedState=y}}function x_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(Q(191,s));s.call(i)}}}var tu={},ti=Mr(tu),bl=Mr(tu),Ol=Mr(tu);function ss(t){if(t===tu)throw Error(Q(174));return t}function am(t,e){switch(Fe(Ol,e),Fe(bl,t),Fe(ti,tu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yf(e,t)}Be(ti),Fe(ti,e)}function jo(){Be(ti),Be(bl),Be(Ol)}function Jw(t){ss(Ol.current);var e=ss(ti.current),n=yf(e,t.type);e!==n&&(Fe(bl,t),Fe(ti,n))}function lm(t){bl.current===t&&(Be(ti),Be(bl))}var Ge=Mr(0);function sh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jd=[];function um(){for(var t=0;t<jd.length;t++)jd[t]._workInProgressVersionPrimary=null;jd.length=0}var Cc=Bi.ReactCurrentDispatcher,Hd=Bi.ReactCurrentBatchConfig,ds=0,Qe=null,dt=null,Et=null,oh=!1,hl=!1,Dl=0,e1=0;function Lt(){throw Error(Q(321))}function cm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Bn(t[n],e[n]))return!1;return!0}function hm(t,e,n,i,s,o){if(ds=o,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Cc.current=t===null||t.memoizedState===null?r1:s1,t=n(i,s),hl){o=0;do{if(hl=!1,Dl=0,25<=o)throw Error(Q(301));o+=1,Et=dt=null,e.updateQueue=null,Cc.current=o1,t=n(i,s)}while(hl)}if(Cc.current=ah,e=dt!==null&&dt.next!==null,ds=0,Et=dt=Qe=null,oh=!1,e)throw Error(Q(300));return t}function dm(){var t=Dl!==0;return Dl=0,t}function Qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Qe.memoizedState=Et=t:Et=Et.next=t,Et}function An(){if(dt===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var e=Et===null?Qe.memoizedState:Et.next;if(e!==null)Et=e,dt=t;else{if(t===null)throw Error(Q(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},Et===null?Qe.memoizedState=Et=t:Et=Et.next=t}return Et}function Ml(t,e){return typeof e=="function"?e(t):e}function Wd(t){var e=An(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var i=dt,s=i.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}i.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,i=i.baseState;var h=l=null,d=null,m=o;do{var v=m.lane;if((ds&v)===v)d!==null&&(d=d.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),i=m.hasEagerState?m.eagerState:t(i,m.action);else{var y={lane:v,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};d===null?(h=d=y,l=i):d=d.next=y,Qe.lanes|=v,fs|=v}m=m.next}while(m!==null&&m!==o);d===null?l=i:d.next=h,Bn(i,e.memoizedState)||(Qt=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do o=s.lane,Qe.lanes|=o,fs|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qd(t){var e=An(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=t(o,l.action),l=l.next;while(l!==s);Bn(o,e.memoizedState)||(Qt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function e0(){}function t0(t,e){var n=Qe,i=An(),s=e(),o=!Bn(i.memoizedState,s);if(o&&(i.memoizedState=s,Qt=!0),i=i.queue,fm(r0.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Et!==null&&Et.memoizedState.tag&1){if(n.flags|=2048,Vl(9,i0.bind(null,n,i,s,e),void 0,null),Tt===null)throw Error(Q(349));ds&30||n0(n,e,s)}return s}function n0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function i0(t,e,n,i){e.value=n,e.getSnapshot=i,s0(e)&&o0(t)}function r0(t,e,n){return n(function(){s0(e)&&o0(t)})}function s0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Bn(t,n)}catch{return!0}}function o0(t){var e=Di(t,1);e!==null&&Un(e,t,1,-1)}function R_(t){var e=Qn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ml,lastRenderedState:t},e.queue=t,t=t.dispatch=i1.bind(null,Qe,t),[e.memoizedState,t]}function Vl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function a0(){return An().memoizedState}function Ac(t,e,n,i){var s=Qn();Qe.flags|=t,s.memoizedState=Vl(1|e,n,void 0,i===void 0?null:i)}function Bh(t,e,n,i){var s=An();i=i===void 0?null:i;var o=void 0;if(dt!==null){var l=dt.memoizedState;if(o=l.destroy,i!==null&&cm(i,l.deps)){s.memoizedState=Vl(e,n,o,i);return}}Qe.flags|=t,s.memoizedState=Vl(1|e,n,o,i)}function L_(t,e){return Ac(8390656,8,t,e)}function fm(t,e){return Bh(2048,8,t,e)}function l0(t,e){return Bh(4,2,t,e)}function u0(t,e){return Bh(4,4,t,e)}function c0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function h0(t,e,n){return n=n!=null?n.concat([t]):null,Bh(4,4,c0.bind(null,e,t),n)}function pm(){}function d0(t,e){var n=An();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&cm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function f0(t,e){var n=An();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&cm(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function p0(t,e,n){return ds&21?(Bn(n,e)||(n=yw(),Qe.lanes|=n,fs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=n)}function t1(t,e){var n=Oe;Oe=n!==0&&4>n?n:4,t(!0);var i=Hd.transition;Hd.transition={};try{t(!1),e()}finally{Oe=n,Hd.transition=i}}function m0(){return An().memoizedState}function n1(t,e,n){var i=vr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},g0(t))_0(e,n);else if(n=Yw(t,e,n,i),n!==null){var s=Ht();Un(n,t,i,s),v0(n,e,i)}}function i1(t,e,n){var i=vr(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(g0(t))_0(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(s.hasEagerState=!0,s.eagerState=h,Bn(h,l)){var d=e.interleaved;d===null?(s.next=s,sm(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=Yw(t,e,s,i),n!==null&&(s=Ht(),Un(n,t,i,s),v0(n,e,i))}}function g0(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function _0(t,e){hl=oh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function v0(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,qp(t,n)}}var ah={readContext:Cn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},r1={readContext:Cn,useCallback:function(t,e){return Qn().memoizedState=[t,e===void 0?null:e],t},useContext:Cn,useEffect:L_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ac(4194308,4,c0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ac(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ac(4,2,t,e)},useMemo:function(t,e){var n=Qn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Qn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=n1.bind(null,Qe,t),[i.memoizedState,t]},useRef:function(t){var e=Qn();return t={current:t},e.memoizedState=t},useState:R_,useDebugValue:pm,useDeferredValue:function(t){return Qn().memoizedState=t},useTransition:function(){var t=R_(!1),e=t[0];return t=t1.bind(null,t[1]),Qn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Qe,s=Qn();if(qe){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),Tt===null)throw Error(Q(349));ds&30||n0(i,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,L_(r0.bind(null,i,o,t),[t]),i.flags|=2048,Vl(9,i0.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Qn(),e=Tt.identifierPrefix;if(qe){var n=Ai,i=Ci;n=(i&~(1<<32-zn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Dl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=e1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},s1={readContext:Cn,useCallback:d0,useContext:Cn,useEffect:fm,useImperativeHandle:h0,useInsertionEffect:l0,useLayoutEffect:u0,useMemo:f0,useReducer:Wd,useRef:a0,useState:function(){return Wd(Ml)},useDebugValue:pm,useDeferredValue:function(t){var e=An();return p0(e,dt.memoizedState,t)},useTransition:function(){var t=Wd(Ml)[0],e=An().memoizedState;return[t,e]},useMutableSource:e0,useSyncExternalStore:t0,useId:m0,unstable_isNewReconciler:!1},o1={readContext:Cn,useCallback:d0,useContext:Cn,useEffect:fm,useImperativeHandle:h0,useInsertionEffect:l0,useLayoutEffect:u0,useMemo:f0,useReducer:qd,useRef:a0,useState:function(){return qd(Ml)},useDebugValue:pm,useDeferredValue:function(t){var e=An();return dt===null?e.memoizedState=t:p0(e,dt.memoizedState,t)},useTransition:function(){var t=qd(Ml)[0],e=An().memoizedState;return[t,e]},useMutableSource:e0,useSyncExternalStore:t0,useId:m0,unstable_isNewReconciler:!1};function On(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Uf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var jh={isMounted:function(t){return(t=t._reactInternals)?Ss(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ht(),s=vr(t),o=Ri(i,s);o.payload=e,n!=null&&(o.callback=n),e=gr(t,o,s),e!==null&&(Un(e,t,s,i),Pc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ht(),s=vr(t),o=Ri(i,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=gr(t,o,s),e!==null&&(Un(e,t,s,i),Pc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ht(),i=vr(t),s=Ri(n,i);s.tag=2,e!=null&&(s.callback=e),e=gr(t,s,i),e!==null&&(Un(e,t,i,n),Pc(e,t,i))}};function N_(t,e,n,i,s,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!xl(n,i)||!xl(s,o):!0}function y0(t,e,n){var i=!1,s=Cr,o=e.contextType;return typeof o=="object"&&o!==null?o=Cn(o):(s=Jt(e)?cs:Vt.current,i=e.contextTypes,o=(i=i!=null)?zo(t,s):Cr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function b_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&jh.enqueueReplaceState(e,e.state,null)}function Bf(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},om(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Cn(o):(o=Jt(e)?cs:Vt.current,s.context=zo(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Uf(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&jh.enqueueReplaceState(s,s.state,null),rh(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ho(t,e){try{var n="",i=e;do n+=OS(i),i=i.return;while(i);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function $d(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function jf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var a1=typeof WeakMap=="function"?WeakMap:Map;function w0(t,e,n){n=Ri(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){uh||(uh=!0,Xf=i),jf(t,e)},n}function E0(t,e,n){n=Ri(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){jf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){jf(t,e),typeof i!="function"&&(_r===null?_r=new Set([this]):_r.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function O_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new a1;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=E1.bind(null,t,e,n),e.then(t,t))}function D_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function M_(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ri(-1,1),e.tag=2,gr(n,e,1))),n.lanes|=1),t)}var l1=Bi.ReactCurrentOwner,Qt=!1;function jt(t,e,n,i){e.child=t===null?Qw(e,null,n,i):Bo(e,t.child,n,i)}function V_(t,e,n,i,s){n=n.render;var o=e.ref;return Lo(e,s),i=hm(t,e,n,i,o,s),n=dm(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mi(t,e,s)):(qe&&n&&Jp(e),e.flags|=1,jt(t,e,i,s),e.child)}function F_(t,e,n,i,s){if(t===null){var o=n.type;return typeof o=="function"&&!Tm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,T0(t,e,o,i,s)):(t=Lc(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:xl,n(l,i)&&t.ref===e.ref)return Mi(t,e,s)}return e.flags|=1,t=yr(o,i),t.ref=e.ref,t.return=e,e.child=t}function T0(t,e,n,i,s){if(t!==null){var o=t.memoizedProps;if(xl(o,i)&&t.ref===e.ref)if(Qt=!1,e.pendingProps=i=o,(t.lanes&s)!==0)t.flags&131072&&(Qt=!0);else return e.lanes=t.lanes,Mi(t,e,s)}return Hf(t,e,n,i,s)}function I0(t,e,n){var i=e.pendingProps,s=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(Po,sn),sn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Fe(Po,sn),sn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,Fe(Po,sn),sn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,Fe(Po,sn),sn|=i;return jt(t,e,s,n),e.child}function S0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Hf(t,e,n,i,s){var o=Jt(n)?cs:Vt.current;return o=zo(e,o),Lo(e,s),n=hm(t,e,n,i,o,s),i=dm(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mi(t,e,s)):(qe&&i&&Jp(e),e.flags|=1,jt(t,e,n,s),e.child)}function z_(t,e,n,i,s){if(Jt(n)){var o=!0;Jc(e)}else o=!1;if(Lo(e,s),e.stateNode===null)kc(t,e),y0(e,n,i),Bf(e,n,i,s),i=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,m=n.contextType;typeof m=="object"&&m!==null?m=Cn(m):(m=Jt(n)?cs:Vt.current,m=zo(e,m));var v=n.getDerivedStateFromProps,y=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==i||d!==m)&&b_(e,l,i,m),nr=!1;var E=e.memoizedState;l.state=E,rh(e,i,l,s),d=e.memoizedState,h!==i||E!==d||Xt.current||nr?(typeof v=="function"&&(Uf(e,n,v,i),d=e.memoizedState),(h=nr||N_(e,n,h,i,E,d,m))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=m,i=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,Xw(t,e),h=e.memoizedProps,m=e.type===e.elementType?h:On(e.type,h),l.props=m,y=e.pendingProps,E=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=Cn(d):(d=Jt(n)?cs:Vt.current,d=zo(e,d));var b=n.getDerivedStateFromProps;(v=typeof b=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==y||E!==d)&&b_(e,l,i,d),nr=!1,E=e.memoizedState,l.state=E,rh(e,i,l,s);var V=e.memoizedState;h!==y||E!==V||Xt.current||nr?(typeof b=="function"&&(Uf(e,n,b,i),V=e.memoizedState),(m=nr||N_(e,n,m,i,E,V,d)||!1)?(v||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,V,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,V,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=V),l.props=i,l.state=V,l.context=d,i=m):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),i=!1)}return Wf(t,e,n,i,o,s)}function Wf(t,e,n,i,s,o){S0(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&S_(e,n,!1),Mi(t,e,o);i=e.stateNode,l1.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=Bo(e,t.child,null,o),e.child=Bo(e,null,h,o)):jt(t,e,h,o),e.memoizedState=i.state,s&&S_(e,n,!0),e.child}function P0(t){var e=t.stateNode;e.pendingContext?I_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&I_(t,e.context,!1),am(t,e.containerInfo)}function U_(t,e,n,i,s){return Uo(),tm(s),e.flags|=256,jt(t,e,n,i),e.child}var qf={dehydrated:null,treeContext:null,retryLane:0};function $f(t){return{baseLanes:t,cachePool:null,transitions:null}}function C0(t,e,n){var i=e.pendingProps,s=Ge.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Fe(Ge,s&1),t===null)return Ff(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=qh(l,i,0,null),t=ls(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=$f(n),e.memoizedState=qf,t):mm(e,l));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return u1(t,e,l,i,h,s,n);if(o){o=i.fallback,l=e.mode,s=t.child,h=s.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=yr(s,d),i.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=yr(h,o):(o=ls(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?$f(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=qf,i}return o=t.child,t=o.sibling,i=yr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function mm(t,e){return e=qh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cc(t,e,n,i){return i!==null&&tm(i),Bo(e,t.child,null,n),t=mm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function u1(t,e,n,i,s,o,l){if(n)return e.flags&256?(e.flags&=-257,i=$d(Error(Q(422))),cc(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=qh({mode:"visible",children:i.children},s,0,null),o=ls(o,s,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Bo(e,t.child,null,l),e.child.memoizedState=$f(l),e.memoizedState=qf,o);if(!(e.mode&1))return cc(t,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var h=i.dgst;return i=h,o=Error(Q(419)),i=$d(o,i,void 0),cc(t,e,l,i)}if(h=(l&t.childLanes)!==0,Qt||h){if(i=Tt,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Di(t,s),Un(i,t,s,-1))}return Em(),i=$d(Error(Q(421))),cc(t,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=T1.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,an=mr(s.nextSibling),ln=e,qe=!0,Mn=null,t!==null&&(wn[En++]=Ci,wn[En++]=Ai,wn[En++]=hs,Ci=t.id,Ai=t.overflow,hs=e),e=mm(e,i.children),e.flags|=4096,e)}function B_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),zf(t.return,e,n)}function Zd(t,e,n,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=s)}function A0(t,e,n){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(jt(t,e,i.children,n),i=Ge.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&B_(t,n,e);else if(t.tag===19)B_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Fe(Ge,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&sh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Zd(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&sh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Zd(e,!0,n,null,o);break;case"together":Zd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),fs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=yr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function c1(t,e,n){switch(e.tag){case 3:P0(e),Uo();break;case 5:Jw(e);break;case 1:Jt(e.type)&&Jc(e);break;case 4:am(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Fe(nh,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Fe(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?C0(t,e,n):(Fe(Ge,Ge.current&1),t=Mi(t,e,n),t!==null?t.sibling:null);Fe(Ge,Ge.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return A0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Fe(Ge,Ge.current),i)break;return null;case 22:case 23:return e.lanes=0,I0(t,e,n)}return Mi(t,e,n)}var k0,Zf,x0,R0;k0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zf=function(){};x0=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,ss(ti.current);var o=null;switch(n){case"input":s=mf(t,s),i=mf(t,i),o=[];break;case"select":s=Ye({},s,{value:void 0}),i=Ye({},i,{value:void 0}),o=[];break;case"textarea":s=vf(t,s),i=vf(t,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Yc)}wf(n,i);var l;n=null;for(m in s)if(!i.hasOwnProperty(m)&&s.hasOwnProperty(m)&&s[m]!=null)if(m==="style"){var h=s[m];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Tl.hasOwnProperty(m)?o||(o=[]):(o=o||[]).push(m,null));for(m in i){var d=i[m];if(h=s!=null?s[m]:void 0,i.hasOwnProperty(m)&&d!==h&&(d!=null||h!=null))if(m==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(m,n)),n=d;else m==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(m,d)):m==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(m,""+d):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Tl.hasOwnProperty(m)?(d!=null&&m==="onScroll"&&ze("scroll",t),o||h===d||(o=[])):(o=o||[]).push(m,d))}n&&(o=o||[]).push("style",n);var m=o;(e.updateQueue=m)&&(e.flags|=4)}};R0=function(t,e,n,i){n!==i&&(e.flags|=4)};function Ga(t,e){if(!qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function h1(t,e,n){var i=e.pendingProps;switch(em(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(e),null;case 1:return Jt(e.type)&&Xc(),Nt(e),null;case 3:return i=e.stateNode,jo(),Be(Xt),Be(Vt),um(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(lc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mn!==null&&(tp(Mn),Mn=null))),Zf(t,e),Nt(e),null;case 5:lm(e);var s=ss(Ol.current);if(n=e.type,t!==null&&e.stateNode!=null)x0(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Q(166));return Nt(e),null}if(t=ss(ti.current),lc(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[Xn]=e,i[Nl]=o,t=(e.mode&1)!==0,n){case"dialog":ze("cancel",i),ze("close",i);break;case"iframe":case"object":case"embed":ze("load",i);break;case"video":case"audio":for(s=0;s<Ja.length;s++)ze(Ja[s],i);break;case"source":ze("error",i);break;case"img":case"image":case"link":ze("error",i),ze("load",i);break;case"details":ze("toggle",i);break;case"input":Qg(i,o),ze("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},ze("invalid",i);break;case"textarea":Xg(i,o),ze("invalid",i)}wf(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?i.textContent!==h&&(o.suppressHydrationWarning!==!0&&ac(i.textContent,h,t),s=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&ac(i.textContent,h,t),s=["children",""+h]):Tl.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&ze("scroll",i)}switch(n){case"input":Ju(i),Yg(i,o,!0);break;case"textarea":Ju(i),Jg(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Yc)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[Xn]=e,t[Nl]=i,k0(t,e,!1,!1),e.stateNode=t;e:{switch(l=Ef(n,i),n){case"dialog":ze("cancel",t),ze("close",t),s=i;break;case"iframe":case"object":case"embed":ze("load",t),s=i;break;case"video":case"audio":for(s=0;s<Ja.length;s++)ze(Ja[s],t);s=i;break;case"source":ze("error",t),s=i;break;case"img":case"image":case"link":ze("error",t),ze("load",t),s=i;break;case"details":ze("toggle",t),s=i;break;case"input":Qg(t,i),s=mf(t,i),ze("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Ye({},i,{value:void 0}),ze("invalid",t);break;case"textarea":Xg(t,i),s=vf(t,i),ze("invalid",t);break;default:s=i}wf(n,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?aw(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&sw(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Il(t,d):typeof d=="number"&&Il(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Tl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&ze("scroll",t):d!=null&&zp(t,o,d,l))}switch(n){case"input":Ju(t),Yg(t,i,!1);break;case"textarea":Ju(t),Jg(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Pr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Ao(t,!!i.multiple,o,!1):i.defaultValue!=null&&Ao(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Yc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nt(e),null;case 6:if(t&&e.stateNode!=null)R0(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Q(166));if(n=ss(Ol.current),ss(ti.current),lc(e)){if(i=e.stateNode,n=e.memoizedProps,i[Xn]=e,(o=i.nodeValue!==n)&&(t=ln,t!==null))switch(t.tag){case 3:ac(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ac(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Xn]=e,e.stateNode=i}return Nt(e),null;case 13:if(Be(Ge),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qe&&an!==null&&e.mode&1&&!(e.flags&128))Gw(),Uo(),e.flags|=98560,o=!1;else if(o=lc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Q(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Q(317));o[Xn]=e}else Uo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nt(e),o=!1}else Mn!==null&&(tp(Mn),Mn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?pt===0&&(pt=3):Em())),e.updateQueue!==null&&(e.flags|=4),Nt(e),null);case 4:return jo(),Zf(t,e),t===null&&Rl(e.stateNode.containerInfo),Nt(e),null;case 10:return rm(e.type._context),Nt(e),null;case 17:return Jt(e.type)&&Xc(),Nt(e),null;case 19:if(Be(Ge),o=e.memoizedState,o===null)return Nt(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)Ga(o,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=sh(t),l!==null){for(e.flags|=128,Ga(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Fe(Ge,Ge.current&1|2),e.child}t=t.sibling}o.tail!==null&&it()>Wo&&(e.flags|=128,i=!0,Ga(o,!1),e.lanes=4194304)}else{if(!i)if(t=sh(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ga(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!qe)return Nt(e),null}else 2*it()-o.renderingStartTime>Wo&&n!==1073741824&&(e.flags|=128,i=!0,Ga(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=it(),e.sibling=null,n=Ge.current,Fe(Ge,i?n&1|2:n&1),e):(Nt(e),null);case 22:case 23:return wm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?sn&1073741824&&(Nt(e),e.subtreeFlags&6&&(e.flags|=8192)):Nt(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function d1(t,e){switch(em(e),e.tag){case 1:return Jt(e.type)&&Xc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return jo(),Be(Xt),Be(Vt),um(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lm(e),null;case 13:if(Be(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Uo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Be(Ge),null;case 4:return jo(),null;case 10:return rm(e.type._context),null;case 22:case 23:return wm(),null;case 24:return null;default:return null}}var hc=!1,Dt=!1,f1=typeof WeakSet=="function"?WeakSet:Set,ie=null;function So(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){et(t,e,i)}else n.current=null}function Gf(t,e,n){try{n()}catch(i){et(t,e,i)}}var j_=!1;function p1(t,e){if(Lf=Gc,t=Dw(),Xp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,m=0,v=0,y=t,E=null;t:for(;;){for(var b;y!==n||s!==0&&y.nodeType!==3||(h=l+s),y!==o||i!==0&&y.nodeType!==3||(d=l+i),y.nodeType===3&&(l+=y.nodeValue.length),(b=y.firstChild)!==null;)E=y,y=b;for(;;){if(y===t)break t;if(E===n&&++m===s&&(h=l),E===o&&++v===i&&(d=l),(b=y.nextSibling)!==null)break;y=E,E=y.parentNode}y=b}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Nf={focusedElem:t,selectionRange:n},Gc=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var V=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(V!==null){var M=V.memoizedProps,W=V.memoizedState,O=e.stateNode,S=O.getSnapshotBeforeUpdate(e.elementType===e.type?M:On(e.type,M),W);O.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(H){et(e,e.return,H)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return V=j_,j_=!1,V}function dl(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&Gf(e,n,o)}s=s.next}while(s!==i)}}function Hh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Kf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function L0(t){var e=t.alternate;e!==null&&(t.alternate=null,L0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xn],delete e[Nl],delete e[Df],delete e[QP],delete e[YP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function N0(t){return t.tag===5||t.tag===3||t.tag===4}function H_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||N0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yc));else if(i!==4&&(t=t.child,t!==null))for(Qf(t,e,n),t=t.sibling;t!==null;)Qf(t,e,n),t=t.sibling}function Yf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Yf(t,e,n),t=t.sibling;t!==null;)Yf(t,e,n),t=t.sibling}var St=null,Dn=!1;function Ji(t,e,n){for(n=n.child;n!==null;)b0(t,e,n),n=n.sibling}function b0(t,e,n){if(ei&&typeof ei.onCommitFiberUnmount=="function")try{ei.onCommitFiberUnmount(Dh,n)}catch{}switch(n.tag){case 5:Dt||So(n,e);case 6:var i=St,s=Dn;St=null,Ji(t,e,n),St=i,Dn=s,St!==null&&(Dn?(t=St,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):St.removeChild(n.stateNode));break;case 18:St!==null&&(Dn?(t=St,n=n.stateNode,t.nodeType===8?Ud(t.parentNode,n):t.nodeType===1&&Ud(t,n),Al(t)):Ud(St,n.stateNode));break;case 4:i=St,s=Dn,St=n.stateNode.containerInfo,Dn=!0,Ji(t,e,n),St=i,Dn=s;break;case 0:case 11:case 14:case 15:if(!Dt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&Gf(n,e,l),s=s.next}while(s!==i)}Ji(t,e,n);break;case 1:if(!Dt&&(So(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){et(n,e,h)}Ji(t,e,n);break;case 21:Ji(t,e,n);break;case 22:n.mode&1?(Dt=(i=Dt)||n.memoizedState!==null,Ji(t,e,n),Dt=i):Ji(t,e,n);break;default:Ji(t,e,n)}}function W_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new f1),e.forEach(function(i){var s=I1.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function bn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:St=h.stateNode,Dn=!1;break e;case 3:St=h.stateNode.containerInfo,Dn=!0;break e;case 4:St=h.stateNode.containerInfo,Dn=!0;break e}h=h.return}if(St===null)throw Error(Q(160));b0(o,l,s),St=null,Dn=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(m){et(s,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)O0(e,t),e=e.sibling}function O0(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(bn(e,t),Kn(t),i&4){try{dl(3,t,t.return),Hh(3,t)}catch(M){et(t,t.return,M)}try{dl(5,t,t.return)}catch(M){et(t,t.return,M)}}break;case 1:bn(e,t),Kn(t),i&512&&n!==null&&So(n,n.return);break;case 5:if(bn(e,t),Kn(t),i&512&&n!==null&&So(n,n.return),t.flags&32){var s=t.stateNode;try{Il(s,"")}catch(M){et(t,t.return,M)}}if(i&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&nw(s,o),Ef(h,l);var m=Ef(h,o);for(l=0;l<d.length;l+=2){var v=d[l],y=d[l+1];v==="style"?aw(s,y):v==="dangerouslySetInnerHTML"?sw(s,y):v==="children"?Il(s,y):zp(s,v,y,m)}switch(h){case"input":gf(s,o);break;case"textarea":iw(s,o);break;case"select":var E=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var b=o.value;b!=null?Ao(s,!!o.multiple,b,!1):E!==!!o.multiple&&(o.defaultValue!=null?Ao(s,!!o.multiple,o.defaultValue,!0):Ao(s,!!o.multiple,o.multiple?[]:"",!1))}s[Nl]=o}catch(M){et(t,t.return,M)}}break;case 6:if(bn(e,t),Kn(t),i&4){if(t.stateNode===null)throw Error(Q(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(M){et(t,t.return,M)}}break;case 3:if(bn(e,t),Kn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Al(e.containerInfo)}catch(M){et(t,t.return,M)}break;case 4:bn(e,t),Kn(t);break;case 13:bn(e,t),Kn(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(vm=it())),i&4&&W_(t);break;case 22:if(v=n!==null&&n.memoizedState!==null,t.mode&1?(Dt=(m=Dt)||v,bn(e,t),Dt=m):bn(e,t),Kn(t),i&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!v&&t.mode&1)for(ie=t,v=t.child;v!==null;){for(y=ie=v;ie!==null;){switch(E=ie,b=E.child,E.tag){case 0:case 11:case 14:case 15:dl(4,E,E.return);break;case 1:So(E,E.return);var V=E.stateNode;if(typeof V.componentWillUnmount=="function"){i=E,n=E.return;try{e=i,V.props=e.memoizedProps,V.state=e.memoizedState,V.componentWillUnmount()}catch(M){et(i,n,M)}}break;case 5:So(E,E.return);break;case 22:if(E.memoizedState!==null){$_(y);continue}}b!==null?(b.return=E,ie=b):$_(y)}v=v.sibling}e:for(v=null,y=t;;){if(y.tag===5){if(v===null){v=y;try{s=y.stateNode,m?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=y.stateNode,d=y.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=ow("display",l))}catch(M){et(t,t.return,M)}}}else if(y.tag===6){if(v===null)try{y.stateNode.nodeValue=m?"":y.memoizedProps}catch(M){et(t,t.return,M)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;v===y&&(v=null),y=y.return}v===y&&(v=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:bn(e,t),Kn(t),i&4&&W_(t);break;case 21:break;default:bn(e,t),Kn(t)}}function Kn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(N0(n)){var i=n;break e}n=n.return}throw Error(Q(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Il(s,""),i.flags&=-33);var o=H_(t);Yf(t,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,h=H_(t);Qf(t,h,l);break;default:throw Error(Q(161))}}catch(d){et(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function m1(t,e,n){ie=t,D0(t)}function D0(t,e,n){for(var i=(t.mode&1)!==0;ie!==null;){var s=ie,o=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||hc;if(!l){var h=s.alternate,d=h!==null&&h.memoizedState!==null||Dt;h=hc;var m=Dt;if(hc=l,(Dt=d)&&!m)for(ie=s;ie!==null;)l=ie,d=l.child,l.tag===22&&l.memoizedState!==null?Z_(s):d!==null?(d.return=l,ie=d):Z_(s);for(;o!==null;)ie=o,D0(o),o=o.sibling;ie=s,hc=h,Dt=m}q_(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ie=o):q_(t)}}function q_(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dt||Hh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Dt)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:On(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&x_(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}x_(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var v=m.memoizedState;if(v!==null){var y=v.dehydrated;y!==null&&Al(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Dt||e.flags&512&&Kf(e)}catch(E){et(e,e.return,E)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function $_(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function Z_(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Hh(4,e)}catch(d){et(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(d){et(e,s,d)}}var o=e.return;try{Kf(e)}catch(d){et(e,o,d)}break;case 5:var l=e.return;try{Kf(e)}catch(d){et(e,l,d)}}}catch(d){et(e,e.return,d)}if(e===t){ie=null;break}var h=e.sibling;if(h!==null){h.return=e.return,ie=h;break}ie=e.return}}var g1=Math.ceil,lh=Bi.ReactCurrentDispatcher,gm=Bi.ReactCurrentOwner,Pn=Bi.ReactCurrentBatchConfig,Re=0,Tt=null,lt=null,At=0,sn=0,Po=Mr(0),pt=0,Fl=null,fs=0,Wh=0,_m=0,fl=null,Kt=null,vm=0,Wo=1/0,Si=null,uh=!1,Xf=null,_r=null,dc=!1,cr=null,ch=0,pl=0,Jf=null,xc=-1,Rc=0;function Ht(){return Re&6?it():xc!==-1?xc:xc=it()}function vr(t){return t.mode&1?Re&2&&At!==0?At&-At:JP.transition!==null?(Rc===0&&(Rc=yw()),Rc):(t=Oe,t!==0||(t=window.event,t=t===void 0?16:Cw(t.type)),t):1}function Un(t,e,n,i){if(50<pl)throw pl=0,Jf=null,Error(Q(185));Xl(t,n,i),(!(Re&2)||t!==Tt)&&(t===Tt&&(!(Re&2)&&(Wh|=n),pt===4&&rr(t,At)),en(t,i),n===1&&Re===0&&!(e.mode&1)&&(Wo=it()+500,Uh&&Vr()))}function en(t,e){var n=t.callbackNode;JS(t,e);var i=Zc(t,t===Tt?At:0);if(i===0)n!==null&&n_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&n_(n),e===1)t.tag===0?XP(G_.bind(null,t)):qw(G_.bind(null,t)),GP(function(){!(Re&6)&&Vr()}),n=null;else{switch(ww(i)){case 1:n=Wp;break;case 4:n=_w;break;case 16:n=$c;break;case 536870912:n=vw;break;default:n=$c}n=H0(n,M0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function M0(t,e){if(xc=-1,Rc=0,Re&6)throw Error(Q(327));var n=t.callbackNode;if(No()&&t.callbackNode!==n)return null;var i=Zc(t,t===Tt?At:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=hh(t,i);else{e=i;var s=Re;Re|=2;var o=F0();(Tt!==t||At!==e)&&(Si=null,Wo=it()+500,as(t,e));do try{y1();break}catch(h){V0(t,h)}while(!0);im(),lh.current=o,Re=s,lt!==null?e=0:(Tt=null,At=0,e=pt)}if(e!==0){if(e===2&&(s=Cf(t),s!==0&&(i=s,e=ep(t,s))),e===1)throw n=Fl,as(t,0),rr(t,i),en(t,it()),n;if(e===6)rr(t,i);else{if(s=t.current.alternate,!(i&30)&&!_1(s)&&(e=hh(t,i),e===2&&(o=Cf(t),o!==0&&(i=o,e=ep(t,o))),e===1))throw n=Fl,as(t,0),rr(t,i),en(t,it()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(Q(345));case 2:ts(t,Kt,Si);break;case 3:if(rr(t,i),(i&130023424)===i&&(e=vm+500-it(),10<e)){if(Zc(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){Ht(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Of(ts.bind(null,t,Kt,Si),e);break}ts(t,Kt,Si);break;case 4:if(rr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var l=31-zn(i);o=1<<l,l=e[l],l>s&&(s=l),i&=~o}if(i=s,i=it()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*g1(i/1960))-i,10<i){t.timeoutHandle=Of(ts.bind(null,t,Kt,Si),i);break}ts(t,Kt,Si);break;case 5:ts(t,Kt,Si);break;default:throw Error(Q(329))}}}return en(t,it()),t.callbackNode===n?M0.bind(null,t):null}function ep(t,e){var n=fl;return t.current.memoizedState.isDehydrated&&(as(t,e).flags|=256),t=hh(t,e),t!==2&&(e=Kt,Kt=n,e!==null&&tp(e)),t}function tp(t){Kt===null?Kt=t:Kt.push.apply(Kt,t)}function _1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],o=s.getSnapshot;s=s.value;try{if(!Bn(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function rr(t,e){for(e&=~_m,e&=~Wh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zn(e),i=1<<n;t[n]=-1,e&=~i}}function G_(t){if(Re&6)throw Error(Q(327));No();var e=Zc(t,0);if(!(e&1))return en(t,it()),null;var n=hh(t,e);if(t.tag!==0&&n===2){var i=Cf(t);i!==0&&(e=i,n=ep(t,i))}if(n===1)throw n=Fl,as(t,0),rr(t,e),en(t,it()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ts(t,Kt,Si),en(t,it()),null}function ym(t,e){var n=Re;Re|=1;try{return t(e)}finally{Re=n,Re===0&&(Wo=it()+500,Uh&&Vr())}}function ps(t){cr!==null&&cr.tag===0&&!(Re&6)&&No();var e=Re;Re|=1;var n=Pn.transition,i=Oe;try{if(Pn.transition=null,Oe=1,t)return t()}finally{Oe=i,Pn.transition=n,Re=e,!(Re&6)&&Vr()}}function wm(){sn=Po.current,Be(Po)}function as(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ZP(n)),lt!==null)for(n=lt.return;n!==null;){var i=n;switch(em(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Xc();break;case 3:jo(),Be(Xt),Be(Vt),um();break;case 5:lm(i);break;case 4:jo();break;case 13:Be(Ge);break;case 19:Be(Ge);break;case 10:rm(i.type._context);break;case 22:case 23:wm()}n=n.return}if(Tt=t,lt=t=yr(t.current,null),At=sn=e,pt=0,Fl=null,_m=Wh=fs=0,Kt=fl=null,rs!==null){for(e=0;e<rs.length;e++)if(n=rs[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,i.next=l}n.pending=i}rs=null}return t}function V0(t,e){do{var n=lt;try{if(im(),Cc.current=ah,oh){for(var i=Qe.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}oh=!1}if(ds=0,Et=dt=Qe=null,hl=!1,Dl=0,gm.current=null,n===null||n.return===null){pt=1,Fl=e,lt=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=At,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var m=d,v=h,y=v.tag;if(!(v.mode&1)&&(y===0||y===11||y===15)){var E=v.alternate;E?(v.updateQueue=E.updateQueue,v.memoizedState=E.memoizedState,v.lanes=E.lanes):(v.updateQueue=null,v.memoizedState=null)}var b=D_(l);if(b!==null){b.flags&=-257,M_(b,l,h,o,e),b.mode&1&&O_(o,m,e),e=b,d=m;var V=e.updateQueue;if(V===null){var M=new Set;M.add(d),e.updateQueue=M}else V.add(d);break e}else{if(!(e&1)){O_(o,m,e),Em();break e}d=Error(Q(426))}}else if(qe&&h.mode&1){var W=D_(l);if(W!==null){!(W.flags&65536)&&(W.flags|=256),M_(W,l,h,o,e),tm(Ho(d,h));break e}}o=d=Ho(d,h),pt!==4&&(pt=2),fl===null?fl=[o]:fl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var O=w0(o,d,e);k_(o,O);break e;case 1:h=d;var S=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof S.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(_r===null||!_r.has(x)))){o.flags|=65536,e&=-e,o.lanes|=e;var H=E0(o,h,e);k_(o,H);break e}}o=o.return}while(o!==null)}U0(n)}catch(Y){e=Y,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(!0)}function F0(){var t=lh.current;return lh.current=ah,t===null?ah:t}function Em(){(pt===0||pt===3||pt===2)&&(pt=4),Tt===null||!(fs&268435455)&&!(Wh&268435455)||rr(Tt,At)}function hh(t,e){var n=Re;Re|=2;var i=F0();(Tt!==t||At!==e)&&(Si=null,as(t,e));do try{v1();break}catch(s){V0(t,s)}while(!0);if(im(),Re=n,lh.current=i,lt!==null)throw Error(Q(261));return Tt=null,At=0,pt}function v1(){for(;lt!==null;)z0(lt)}function y1(){for(;lt!==null&&!WS();)z0(lt)}function z0(t){var e=j0(t.alternate,t,sn);t.memoizedProps=t.pendingProps,e===null?U0(t):lt=e,gm.current=null}function U0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=d1(n,e),n!==null){n.flags&=32767,lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,lt=null;return}}else if(n=h1(n,e,sn),n!==null){lt=n;return}if(e=e.sibling,e!==null){lt=e;return}lt=e=t}while(e!==null);pt===0&&(pt=5)}function ts(t,e,n){var i=Oe,s=Pn.transition;try{Pn.transition=null,Oe=1,w1(t,e,n,i)}finally{Pn.transition=s,Oe=i}return null}function w1(t,e,n,i){do No();while(cr!==null);if(Re&6)throw Error(Q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(eP(t,o),t===Tt&&(lt=Tt=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||dc||(dc=!0,H0($c,function(){return No(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Pn.transition,Pn.transition=null;var l=Oe;Oe=1;var h=Re;Re|=4,gm.current=null,p1(t,n),O0(n,t),UP(Nf),Gc=!!Lf,Nf=Lf=null,t.current=n,m1(n),qS(),Re=h,Oe=l,Pn.transition=o}else t.current=n;if(dc&&(dc=!1,cr=t,ch=s),o=t.pendingLanes,o===0&&(_r=null),GS(n.stateNode),en(t,it()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(uh)throw uh=!1,t=Xf,Xf=null,t;return ch&1&&t.tag!==0&&No(),o=t.pendingLanes,o&1?t===Jf?pl++:(pl=0,Jf=t):pl=0,Vr(),null}function No(){if(cr!==null){var t=ww(ch),e=Pn.transition,n=Oe;try{if(Pn.transition=null,Oe=16>t?16:t,cr===null)var i=!1;else{if(t=cr,cr=null,ch=0,Re&6)throw Error(Q(331));var s=Re;for(Re|=4,ie=t.current;ie!==null;){var o=ie,l=o.child;if(ie.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var m=h[d];for(ie=m;ie!==null;){var v=ie;switch(v.tag){case 0:case 11:case 15:dl(8,v,o)}var y=v.child;if(y!==null)y.return=v,ie=y;else for(;ie!==null;){v=ie;var E=v.sibling,b=v.return;if(L0(v),v===m){ie=null;break}if(E!==null){E.return=b,ie=E;break}ie=b}}}var V=o.alternate;if(V!==null){var M=V.child;if(M!==null){V.child=null;do{var W=M.sibling;M.sibling=null,M=W}while(M!==null)}}ie=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ie=l;else e:for(;ie!==null;){if(o=ie,o.flags&2048)switch(o.tag){case 0:case 11:case 15:dl(9,o,o.return)}var O=o.sibling;if(O!==null){O.return=o.return,ie=O;break e}ie=o.return}}var S=t.current;for(ie=S;ie!==null;){l=ie;var x=l.child;if(l.subtreeFlags&2064&&x!==null)x.return=l,ie=x;else e:for(l=S;ie!==null;){if(h=ie,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Hh(9,h)}}catch(Y){et(h,h.return,Y)}if(h===l){ie=null;break e}var H=h.sibling;if(H!==null){H.return=h.return,ie=H;break e}ie=h.return}}if(Re=s,Vr(),ei&&typeof ei.onPostCommitFiberRoot=="function")try{ei.onPostCommitFiberRoot(Dh,t)}catch{}i=!0}return i}finally{Oe=n,Pn.transition=e}}return!1}function K_(t,e,n){e=Ho(n,e),e=w0(t,e,1),t=gr(t,e,1),e=Ht(),t!==null&&(Xl(t,1,e),en(t,e))}function et(t,e,n){if(t.tag===3)K_(t,t,n);else for(;e!==null;){if(e.tag===3){K_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(_r===null||!_r.has(i))){t=Ho(n,t),t=E0(e,t,1),e=gr(e,t,1),t=Ht(),e!==null&&(Xl(e,1,t),en(e,t));break}}e=e.return}}function E1(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ht(),t.pingedLanes|=t.suspendedLanes&n,Tt===t&&(At&n)===n&&(pt===4||pt===3&&(At&130023424)===At&&500>it()-vm?as(t,0):_m|=n),en(t,e)}function B0(t,e){e===0&&(t.mode&1?(e=nc,nc<<=1,!(nc&130023424)&&(nc=4194304)):e=1);var n=Ht();t=Di(t,e),t!==null&&(Xl(t,e,n),en(t,n))}function T1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),B0(t,n)}function I1(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Q(314))}i!==null&&i.delete(e),B0(t,n)}var j0;j0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xt.current)Qt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qt=!1,c1(t,e,n);Qt=!!(t.flags&131072)}else Qt=!1,qe&&e.flags&1048576&&$w(e,th,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;kc(t,e),t=e.pendingProps;var s=zo(e,Vt.current);Lo(e,n),s=hm(null,e,i,t,s,n);var o=dm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jt(i)?(o=!0,Jc(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,om(e),s.updater=jh,e.stateNode=s,s._reactInternals=e,Bf(e,i,t,n),e=Wf(null,e,i,!0,o,n)):(e.tag=0,qe&&o&&Jp(e),jt(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(kc(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=P1(i),t=On(i,t),s){case 0:e=Hf(null,e,i,t,n);break e;case 1:e=z_(null,e,i,t,n);break e;case 11:e=V_(null,e,i,t,n);break e;case 14:e=F_(null,e,i,On(i.type,t),n);break e}throw Error(Q(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:On(i,s),Hf(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:On(i,s),z_(t,e,i,s,n);case 3:e:{if(P0(e),t===null)throw Error(Q(387));i=e.pendingProps,o=e.memoizedState,s=o.element,Xw(t,e),rh(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Ho(Error(Q(423)),e),e=U_(t,e,i,n,s);break e}else if(i!==s){s=Ho(Error(Q(424)),e),e=U_(t,e,i,n,s);break e}else for(an=mr(e.stateNode.containerInfo.firstChild),ln=e,qe=!0,Mn=null,n=Qw(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Uo(),i===s){e=Mi(t,e,n);break e}jt(t,e,i,n)}e=e.child}return e;case 5:return Jw(e),t===null&&Ff(e),i=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,l=s.children,bf(i,s)?l=null:o!==null&&bf(i,o)&&(e.flags|=32),S0(t,e),jt(t,e,l,n),e.child;case 6:return t===null&&Ff(e),null;case 13:return C0(t,e,n);case 4:return am(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Bo(e,null,i,n):jt(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:On(i,s),V_(t,e,i,s,n);case 7:return jt(t,e,e.pendingProps,n),e.child;case 8:return jt(t,e,e.pendingProps.children,n),e.child;case 12:return jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,Fe(nh,i._currentValue),i._currentValue=l,o!==null)if(Bn(o.value,l)){if(o.children===s.children&&!Xt.current){e=Mi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=Ri(-1,n&-n),d.tag=2;var m=o.updateQueue;if(m!==null){m=m.shared;var v=m.pending;v===null?d.next=d:(d.next=v.next,v.next=d),m.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),zf(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(Q(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),zf(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}jt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Lo(e,n),s=Cn(s),i=i(s),e.flags|=1,jt(t,e,i,n),e.child;case 14:return i=e.type,s=On(i,e.pendingProps),s=On(i.type,s),F_(t,e,i,s,n);case 15:return T0(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:On(i,s),kc(t,e),e.tag=1,Jt(i)?(t=!0,Jc(e)):t=!1,Lo(e,n),y0(e,i,s),Bf(e,i,s,n),Wf(null,e,i,!0,t,n);case 19:return A0(t,e,n);case 22:return I0(t,e,n)}throw Error(Q(156,e.tag))};function H0(t,e){return gw(t,e)}function S1(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(t,e,n,i){return new S1(t,e,n,i)}function Tm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function P1(t){if(typeof t=="function")return Tm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Bp)return 11;if(t===jp)return 14}return 2}function yr(t,e){var n=t.alternate;return n===null?(n=Sn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Lc(t,e,n,i,s,o){var l=2;if(i=t,typeof t=="function")Tm(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case mo:return ls(n.children,s,o,e);case Up:l=8,s|=8;break;case hf:return t=Sn(12,n,e,s|2),t.elementType=hf,t.lanes=o,t;case df:return t=Sn(13,n,e,s),t.elementType=df,t.lanes=o,t;case ff:return t=Sn(19,n,e,s),t.elementType=ff,t.lanes=o,t;case Jy:return qh(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Yy:l=10;break e;case Xy:l=9;break e;case Bp:l=11;break e;case jp:l=14;break e;case tr:l=16,i=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=Sn(l,n,e,s),e.elementType=t,e.type=i,e.lanes=o,e}function ls(t,e,n,i){return t=Sn(7,t,i,e),t.lanes=n,t}function qh(t,e,n,i){return t=Sn(22,t,i,e),t.elementType=Jy,t.lanes=n,t.stateNode={isHidden:!1},t}function Gd(t,e,n){return t=Sn(6,t,null,e),t.lanes=n,t}function Kd(t,e,n){return e=Sn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function C1(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xd(0),this.expirationTimes=xd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xd(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Im(t,e,n,i,s,o,l,h,d){return t=new C1(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Sn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},om(o),t}function A1(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:po,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function W0(t){if(!t)return Cr;t=t._reactInternals;e:{if(Ss(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(Jt(n))return Ww(t,n,e)}return e}function q0(t,e,n,i,s,o,l,h,d){return t=Im(n,i,!0,t,s,o,l,h,d),t.context=W0(null),n=t.current,i=Ht(),s=vr(n),o=Ri(i,s),o.callback=e??null,gr(n,o,s),t.current.lanes=s,Xl(t,s,i),en(t,i),t}function $h(t,e,n,i){var s=e.current,o=Ht(),l=vr(s);return n=W0(n),e.context===null?e.context=n:e.pendingContext=n,e=Ri(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=gr(s,e,l),t!==null&&(Un(t,s,l,o),Pc(t,s,l)),l}function dh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Q_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Sm(t,e){Q_(t,e),(t=t.alternate)&&Q_(t,e)}function k1(){return null}var $0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Pm(t){this._internalRoot=t}Zh.prototype.render=Pm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));$h(t,e,null,null)};Zh.prototype.unmount=Pm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ps(function(){$h(null,t,null,null)}),e[Oi]=null}};function Zh(t){this._internalRoot=t}Zh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Iw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ir.length&&e!==0&&e<ir[n].priority;n++);ir.splice(n,0,t),n===0&&Pw(t)}};function Cm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Gh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Y_(){}function x1(t,e,n,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var m=dh(l);o.call(m)}}var l=q0(e,i,t,0,null,!1,!1,"",Y_);return t._reactRootContainer=l,t[Oi]=l.current,Rl(t.nodeType===8?t.parentNode:t),ps(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var h=i;i=function(){var m=dh(d);h.call(m)}}var d=Im(t,0,!1,null,null,!1,!1,"",Y_);return t._reactRootContainer=d,t[Oi]=d.current,Rl(t.nodeType===8?t.parentNode:t),ps(function(){$h(e,d,n,i)}),d}function Kh(t,e,n,i,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var h=s;s=function(){var d=dh(l);h.call(d)}}$h(e,l,t,s)}else l=x1(n,e,t,s,i);return dh(l)}Ew=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Xa(e.pendingLanes);n!==0&&(qp(e,n|1),en(e,it()),!(Re&6)&&(Wo=it()+500,Vr()))}break;case 13:ps(function(){var i=Di(t,1);if(i!==null){var s=Ht();Un(i,t,1,s)}}),Sm(t,1)}};$p=function(t){if(t.tag===13){var e=Di(t,134217728);if(e!==null){var n=Ht();Un(e,t,134217728,n)}Sm(t,134217728)}};Tw=function(t){if(t.tag===13){var e=vr(t),n=Di(t,e);if(n!==null){var i=Ht();Un(n,t,e,i)}Sm(t,e)}};Iw=function(){return Oe};Sw=function(t,e){var n=Oe;try{return Oe=t,e()}finally{Oe=n}};If=function(t,e,n){switch(e){case"input":if(gf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=zh(i);if(!s)throw Error(Q(90));tw(i),gf(i,s)}}}break;case"textarea":iw(t,n);break;case"select":e=n.value,e!=null&&Ao(t,!!n.multiple,e,!1)}};cw=ym;hw=ps;var R1={usingClientEntryPoint:!1,Events:[eu,yo,zh,lw,uw,ym]},Ka={findFiberByHostInstance:is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},L1={bundleType:Ka.bundleType,version:Ka.version,rendererPackageName:Ka.rendererPackageName,rendererConfig:Ka.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pw(t),t===null?null:t.stateNode},findFiberByHostInstance:Ka.findFiberByHostInstance||k1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{Dh=fc.inject(L1),ei=fc}catch{}}cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R1;cn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cm(e))throw Error(Q(200));return A1(t,e,null,n)};cn.createRoot=function(t,e){if(!Cm(t))throw Error(Q(299));var n=!1,i="",s=$0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Im(t,1,!1,null,null,n,!1,i,s),t[Oi]=e.current,Rl(t.nodeType===8?t.parentNode:t),new Pm(e)};cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=pw(e),t=t===null?null:t.stateNode,t};cn.flushSync=function(t){return ps(t)};cn.hydrate=function(t,e,n){if(!Gh(e))throw Error(Q(200));return Kh(null,t,e,!0,n)};cn.hydrateRoot=function(t,e,n){if(!Cm(t))throw Error(Q(405));var i=n!=null&&n.hydratedSources||null,s=!1,o="",l=$0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=q0(e,null,t,1,n??null,s,!1,o,l),t[Oi]=e.current,Rl(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Zh(e)};cn.render=function(t,e,n){if(!Gh(e))throw Error(Q(200));return Kh(null,t,e,!1,n)};cn.unmountComponentAtNode=function(t){if(!Gh(t))throw Error(Q(40));return t._reactRootContainer?(ps(function(){Kh(null,null,t,!1,function(){t._reactRootContainer=null,t[Oi]=null})}),!0):!1};cn.unstable_batchedUpdates=ym;cn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Gh(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return Kh(t,e,n,!1,i)};cn.version="18.3.1-next-f1338f8080-20240426";function Z0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Z0)}catch(t){console.error(t)}}Z0(),Zy.exports=cn;var G0=Zy.exports,X_=G0;uf.createRoot=X_.createRoot,uf.hydrateRoot=X_.hydrateRoot;const N1=()=>{};var J_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},b1=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],h=t[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Q0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,h=l?t[s+1]:0,d=s+2<t.length,m=d?t[s+2]:0,v=o>>2,y=(o&3)<<4|h>>4;let E=(h&15)<<2|m>>6,b=m&63;d||(b=64,l||(E=64)),i.push(n[v],n[y],n[E],n[b])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(K0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):b1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const m=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||h==null||m==null||y==null)throw new O1;const E=o<<2|h>>4;if(i.push(E),m!==64){const b=h<<4&240|m>>2;if(i.push(b),y!==64){const V=m<<6&192|y;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class O1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const D1=function(t){const e=K0(t);return Q0.encodeByteArray(e,!0)},fh=function(t){return D1(t).replace(/\./g,"")},Y0=function(t){try{return Q0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=()=>M1().__FIREBASE_DEFAULTS__,F1=()=>{if(typeof process>"u"||typeof J_>"u")return;const t=J_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},z1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Y0(t[1]);return e&&JSON.parse(e)},Qh=()=>{try{return N1()||V1()||F1()||z1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},X0=t=>{var e,n;return(n=(e=Qh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},J0=t=>{const e=X0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},eE=()=>{var t;return(t=Qh())===null||t===void 0?void 0:t.config},tE=t=>{var e;return(e=Qh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Am(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fh(JSON.stringify(n)),fh(JSON.stringify(l)),""].join(".")}const ml={};function j1(){const t={prod:[],emulator:[]};for(const e of Object.keys(ml))ml[e]?t.emulator.push(e):t.prod.push(e);return t}function H1(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ev=!1;function km(t,e){if(typeof window>"u"||typeof document>"u"||!Ps(window.location.host)||ml[t]===e||ml[t]||ev)return;ml[t]=e;function n(E){return`__firebase__banner__${E}`}const i="__firebase__banner",o=j1().prod.length>0;function l(){const E=document.getElementById(i);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function d(E,b){E.setAttribute("width","24"),E.setAttribute("id",b),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function m(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{ev=!0,l()},E}function v(E,b){E.setAttribute("id",b),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function y(){const E=H1(i),b=n("text"),V=document.getElementById(b)||document.createElement("span"),M=n("learnmore"),W=document.getElementById(M)||document.createElement("a"),O=n("preprendIcon"),S=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const x=E.element;h(x),v(W,M);const H=m();d(S,O),x.append(S,V,W,H),document.body.appendChild(x)}o?(V.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function W1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function q1(){var t;const e=(t=Qh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Z1(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function G1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function K1(){const t=Ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Q1(){return!q1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Y1(){try{return typeof indexedDB=="object"}catch{return!1}}function X1(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="FirebaseError";class hi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=J1,Object.setPrototypeOf(this,hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nu.prototype.create)}}class nu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?eC(o,i):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new hi(s,h,i)}}function eC(t,e){return t.replace(tC,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const tC=/\{\$([^}]+)}/g;function nC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ms(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const o=t[s],l=e[s];if(tv(o)&&tv(l)){if(!ms(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function tv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function el(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function tl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function iC(t,e){const n=new rC(t,e);return n.subscribe.bind(n)}class rC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");sC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Qd),s.error===void 0&&(s.error=Qd),s.complete===void 0&&(s.complete=Qd);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Qd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t){return t&&t._delegate?t._delegate:t}class Ar{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new U1;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lC(e))try{this.getOrInitializeService({instanceIdentifier:ns})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ns){return this.instances.has(e)}getOptions(e=ns){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:aC(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ns){return this.component?this.component.multipleInstances?e:ns:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aC(t){return t===ns?void 0:t}function lC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new oC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const cC={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},hC=Ce.INFO,dC={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},fC=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=dC[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xm{constructor(e){this.name=e,this._logLevel=hC,this._logHandler=fC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const pC=(t,e)=>e.some(n=>t instanceof n);let nv,iv;function mC(){return nv||(nv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gC(){return iv||(iv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nE=new WeakMap,np=new WeakMap,iE=new WeakMap,Yd=new WeakMap,Rm=new WeakMap;function _C(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(wr(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&nE.set(n,t)}).catch(()=>{}),Rm.set(e,t),e}function vC(t){if(np.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});np.set(t,e)}let ip={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return np.get(t);if(e==="objectStoreNames")return t.objectStoreNames||iE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function yC(t){ip=t(ip)}function wC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Xd(this),e,...n);return iE.set(i,e.sort?e.sort():[e]),wr(i)}:gC().includes(t)?function(...e){return t.apply(Xd(this),e),wr(nE.get(this))}:function(...e){return wr(t.apply(Xd(this),e))}}function EC(t){return typeof t=="function"?wC(t):(t instanceof IDBTransaction&&vC(t),pC(t,mC())?new Proxy(t,ip):t)}function wr(t){if(t instanceof IDBRequest)return _C(t);if(Yd.has(t))return Yd.get(t);const e=EC(t);return e!==t&&(Yd.set(t,e),Rm.set(e,t)),e}const Xd=t=>Rm.get(t);function TC(t,e,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),h=wr(l);return i&&l.addEventListener("upgradeneeded",d=>{i(wr(l.result),d.oldVersion,d.newVersion,wr(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const IC=["get","getKey","getAll","getAllKeys","count"],SC=["put","add","delete","clear"],Jd=new Map;function rv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jd.get(e))return Jd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=SC.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||IC.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,s?"readwrite":"readonly");let m=d.store;return i&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),s&&d.done]))[0]};return Jd.set(e,o),o}yC(t=>({...t,get:(e,n,i)=>rv(e,n)||t.get(e,n,i),has:(e,n)=>!!rv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(CC(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function CC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rp="@firebase/app",sv="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi=new xm("@firebase/app"),AC="@firebase/app-compat",kC="@firebase/analytics-compat",xC="@firebase/analytics",RC="@firebase/app-check-compat",LC="@firebase/app-check",NC="@firebase/auth",bC="@firebase/auth-compat",OC="@firebase/database",DC="@firebase/data-connect",MC="@firebase/database-compat",VC="@firebase/functions",FC="@firebase/functions-compat",zC="@firebase/installations",UC="@firebase/installations-compat",BC="@firebase/messaging",jC="@firebase/messaging-compat",HC="@firebase/performance",WC="@firebase/performance-compat",qC="@firebase/remote-config",$C="@firebase/remote-config-compat",ZC="@firebase/storage",GC="@firebase/storage-compat",KC="@firebase/firestore",QC="@firebase/ai",YC="@firebase/firestore-compat",XC="firebase",JC="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="[DEFAULT]",eA={[rp]:"fire-core",[AC]:"fire-core-compat",[xC]:"fire-analytics",[kC]:"fire-analytics-compat",[LC]:"fire-app-check",[RC]:"fire-app-check-compat",[NC]:"fire-auth",[bC]:"fire-auth-compat",[OC]:"fire-rtdb",[DC]:"fire-data-connect",[MC]:"fire-rtdb-compat",[VC]:"fire-fn",[FC]:"fire-fn-compat",[zC]:"fire-iid",[UC]:"fire-iid-compat",[BC]:"fire-fcm",[jC]:"fire-fcm-compat",[HC]:"fire-perf",[WC]:"fire-perf-compat",[qC]:"fire-rc",[$C]:"fire-rc-compat",[ZC]:"fire-gcs",[GC]:"fire-gcs-compat",[KC]:"fire-fst",[YC]:"fire-fst-compat",[QC]:"fire-vertex","fire-js":"fire-js",[XC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=new Map,tA=new Map,op=new Map;function ov(t,e){try{t.container.addComponent(e)}catch(n){Vi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function gs(t){const e=t.name;if(op.has(e))return Vi.debug(`There were multiple attempts to register component ${e}.`),!1;op.set(e,t);for(const n of zl.values())ov(n,t);for(const n of tA.values())ov(n,t);return!0}function Yh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function on(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Er=new nu("app","Firebase",nA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=JC;function rE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:sp,automaticDataCollectionEnabled:!0},e),s=i.name;if(typeof s!="string"||!s)throw Er.create("bad-app-name",{appName:String(s)});if(n||(n=eE()),!n)throw Er.create("no-options");const o=zl.get(s);if(o){if(ms(n,o.options)&&ms(i,o.config))return o;throw Er.create("duplicate-app",{appName:s})}const l=new uC(s);for(const d of op.values())l.addComponent(d);const h=new iA(n,i,l);return zl.set(s,h),h}function Xh(t=sp){const e=zl.get(t);if(!e&&t===sp&&eE())return rE();if(!e)throw Er.create("no-app",{appName:t});return e}function rA(){return Array.from(zl.values())}function ni(t,e,n){var i;let s=(i=eA[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vi.warn(h.join(" "));return}gs(new Ar(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="firebase-heartbeat-database",oA=1,Ul="firebase-heartbeat-store";let ef=null;function sE(){return ef||(ef=TC(sA,oA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ul)}catch(n){console.warn(n)}}}}).catch(t=>{throw Er.create("idb-open",{originalErrorMessage:t.message})})),ef}async function aA(t){try{const n=(await sE()).transaction(Ul),i=await n.objectStore(Ul).get(oE(t));return await n.done,i}catch(e){if(e instanceof hi)Vi.warn(e.message);else{const n=Er.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vi.warn(n.message)}}}async function av(t,e){try{const i=(await sE()).transaction(Ul,"readwrite");await i.objectStore(Ul).put(e,oE(t)),await i.done}catch(n){if(n instanceof hi)Vi.warn(n.message);else{const i=Er.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vi.warn(i.message)}}}function oE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=1024,uA=30;class cA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=lv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>uA){const l=fA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Vi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=lv(),{heartbeatsToSend:i,unsentEntries:s}=hA(this._heartbeatsCache.heartbeats),o=fh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Vi.warn(n),""}}}function lv(){return new Date().toISOString().substring(0,10)}function hA(t,e=lA){const n=[];let i=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),uv(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),uv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class dA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Y1()?X1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await aA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return av(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return av(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function uv(t){return fh(JSON.stringify({version:2,heartbeats:t})).length}function fA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(t){gs(new Ar("platform-logger",e=>new PC(e),"PRIVATE")),gs(new Ar("heartbeat",e=>new cA(e),"PRIVATE")),ni(rp,sv,t),ni(rp,sv,"esm2017"),ni("fire-js","")}pA("");function Lm(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function aE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mA=aE,lE=new nu("auth","Firebase",aE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph=new xm("@firebase/auth");function gA(t,...e){ph.logLevel<=Ce.WARN&&ph.warn(`Auth (${ea}): ${t}`,...e)}function Nc(t,...e){ph.logLevel<=Ce.ERROR&&ph.error(`Auth (${ea}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(t,...e){throw Nm(t,...e)}function ii(t,...e){return Nm(t,...e)}function uE(t,e,n){const i=Object.assign(Object.assign({},mA()),{[e]:n});return new nu("auth","Firebase",i).create(e,{appName:t.name})}function Li(t){return uE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nm(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return lE.create(t,...e)}function ue(t,e,...n){if(!t)throw Nm(e,...n)}function ki(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nc(e),new Error(e)}function Fi(t,e){t||ki(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function _A(){return cv()==="http:"||cv()==="https:"}function cv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_A()||Z1()||"connection"in navigator)?navigator.onLine:!0}function yA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n){this.shortDelay=e,this.longDelay=n,Fi(n>e,"Short delay should be less than long delay!"),this.isMobile=W1()||G1()}get(){return vA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(t,e){Fi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TA=new ru(3e4,6e4);function Fr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function zr(t,e,n,i,s={}){return hE(t,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=iu(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:d},o);return $1()||(m.referrerPolicy="no-referrer"),t.emulatorConfig&&Ps(t.emulatorConfig.host)&&(m.credentials="include"),cE.fetch()(await dE(t,t.config.apiHost,n,h),m)})}async function hE(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},wA),e);try{const s=new SA(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw pc(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw pc(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw pc(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw pc(t,"user-disabled",l);const v=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw uE(t,v,m);jn(t,v)}}catch(s){if(s instanceof hi)throw s;jn(t,"network-request-failed",{message:String(s)})}}async function su(t,e,n,i,s={}){const o=await zr(t,e,n,i,s);return"mfaPendingCredential"in o&&jn(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function dE(t,e,n,i){const s=`${e}${n}?${i}`,o=t,l=o.config.emulator?bm(t.config,s):`${t.config.apiScheme}://${s}`;return EA.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function IA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ii(this.auth,"network-request-failed")),TA.get())})}}function pc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=ii(t,e,i);return s.customData._tokenResponse=n,s}function hv(t){return t!==void 0&&t.enterprise!==void 0}class PA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return IA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function CA(t,e){return zr(t,"GET","/v2/recaptchaConfig",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AA(t,e){return zr(t,"POST","/v1/accounts:delete",e)}async function mh(t,e){return zr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kA(t,e=!1){const n=xt(t),i=await n.getIdToken(e),s=Om(i);ue(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:gl(tf(s.auth_time)),issuedAtTime:gl(tf(s.iat)),expirationTime:gl(tf(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function tf(t){return Number(t)*1e3}function Om(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Nc("JWT malformed, contained fewer than 3 sections"),null;try{const s=Y0(n);return s?JSON.parse(s):(Nc("Failed to decode base64 JWT payload"),null)}catch(s){return Nc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function dv(t){const e=Om(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof hi&&xA(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function xA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gl(this.lastLoginAt),this.creationTime=gl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gh(t){var e;const n=t.auth,i=await t.getIdToken(),s=await Bl(t,mh(n,{idToken:i}));ue(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?fE(o.providerUserInfo):[],h=NA(t.providerData,l),d=t.isAnonymous,m=!(t.email&&o.passwordHash)&&!(h!=null&&h.length),v=d?m:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new lp(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(t,y)}async function LA(t){const e=xt(t);await gh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NA(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function fE(t){return t.map(e=>{var{providerId:n}=e,i=Lm(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bA(t,e){const n=await hE(t,{},async()=>{const i=iu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=await dE(t,s,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return t.emulatorConfig&&Ps(t.emulatorConfig.host)&&(d.credentials="include"),cE.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function OA(t,e){return zr(t,"POST","/v2/accounts:revokeToken",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=dv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:o}=await bA(e,n);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:o}=n,l=new bo;return i&&(ue(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(ue(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(ue(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bo,this.toJSON())}_performRefresh(){return ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vn{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,o=Lm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new RA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new lp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Bl(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return kA(this,e)}reload(){return LA(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await gh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(on(this.auth.app))return Promise.reject(Li(this.auth));const e=await this.getIdToken();return await Bl(this,AA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,o,l,h,d,m,v;const y=(i=n.displayName)!==null&&i!==void 0?i:void 0,E=(s=n.email)!==null&&s!==void 0?s:void 0,b=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,V=(l=n.photoURL)!==null&&l!==void 0?l:void 0,M=(h=n.tenantId)!==null&&h!==void 0?h:void 0,W=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,O=(m=n.createdAt)!==null&&m!==void 0?m:void 0,S=(v=n.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:x,emailVerified:H,isAnonymous:Y,providerData:K,stsTokenManager:A}=n;ue(x&&A,e,"internal-error");const T=bo.fromJSON(this.name,A);ue(typeof x=="string",e,"internal-error"),er(y,e.name),er(E,e.name),ue(typeof H=="boolean",e,"internal-error"),ue(typeof Y=="boolean",e,"internal-error"),er(b,e.name),er(V,e.name),er(M,e.name),er(W,e.name),er(O,e.name),er(S,e.name);const P=new Vn({uid:x,auth:e,email:E,emailVerified:H,displayName:y,isAnonymous:Y,photoURL:V,phoneNumber:b,tenantId:M,stsTokenManager:T,createdAt:O,lastLoginAt:S});return K&&Array.isArray(K)&&(P.providerData=K.map(C=>Object.assign({},C))),W&&(P._redirectEventId=W),P}static async _fromIdTokenResponse(e,n,i=!1){const s=new bo;s.updateFromServerResponse(n);const o=new Vn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await gh(o),o}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];ue(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?fE(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new bo;h.updateFromIdToken(i);const d=new Vn({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new lp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=new Map;function xi(t){Fi(t instanceof Function,"Expected a class definition");let e=fv.get(t);return e?(Fi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}pE.type="NONE";const pv=pE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(t,e,n){return`firebase:${t}:${e}:${n}`}class Oo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=bc(this.userKey,s.apiKey,o),this.fullPersistenceKey=bc("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await mh(this.auth,{idToken:e}).catch(()=>{});return n?Vn._fromGetAccountInfoResponse(this.auth,n,e):null}return Vn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Oo(xi(pv),e,i);const s=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=s[0]||xi(pv);const l=bc(i,e.config.apiKey,e.name);let h=null;for(const m of n)try{const v=await m._get(l);if(v){let y;if(typeof v=="string"){const E=await mh(e,{idToken:v}).catch(()=>{});if(!E)break;y=await Vn._fromGetAccountInfoResponse(e,E,v)}else y=Vn._fromJSON(e,v);m!==o&&(h=y),o=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Oo(o,e,i):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async m=>{if(m!==o)try{await m._remove(l)}catch{}})),new Oo(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wE(e))return"Blackberry";if(EE(e))return"Webos";if(gE(e))return"Safari";if((e.includes("chrome/")||_E(e))&&!e.includes("edge/"))return"Chrome";if(yE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function mE(t=Ft()){return/firefox\//i.test(t)}function gE(t=Ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _E(t=Ft()){return/crios\//i.test(t)}function vE(t=Ft()){return/iemobile/i.test(t)}function yE(t=Ft()){return/android/i.test(t)}function wE(t=Ft()){return/blackberry/i.test(t)}function EE(t=Ft()){return/webos/i.test(t)}function Dm(t=Ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function DA(t=Ft()){var e;return Dm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function MA(){return K1()&&document.documentMode===10}function TE(t=Ft()){return Dm(t)||yE(t)||EE(t)||wE(t)||/windows phone/i.test(t)||vE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(t,e=[]){let n;switch(t){case"Browser":n=mv(Ft());break;case"Worker":n=`${mv(Ft())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ea}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FA(t,e={}){return zr(t,"GET","/v2/passwordPolicy",Fr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=6;class UA{constructor(e){var n,i,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:zA,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,o,l,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gv(this),this.idTokenSubscription=new gv(this),this.beforeStateQueue=new VA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=xi(n)),this._initializationPromise=this.queue(async()=>{var i,s,o;if(!this._deleted&&(this.persistenceManager=await Oo.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await mh(this,{idToken:e}),i=await Vn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(on(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await gh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(on(this.app))return Promise.reject(Li(this));const n=e?xt(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return on(this.app)?Promise.reject(Li(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return on(this.app)?Promise.reject(Li(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FA(this),n=new UA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new nu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await OA(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&xi(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await Oo.create(this,[xi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=IE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(on(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&gA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Cs(t){return xt(t)}class gv{constructor(e){this.auth=e,this.observer=null,this.addObserver=iC(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jA(t){Jh=t}function SE(t){return Jh.loadJS(t)}function HA(){return Jh.recaptchaEnterpriseScript}function WA(){return Jh.gapiScript}function qA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class $A{constructor(){this.enterprise=new ZA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class ZA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const GA="recaptcha-enterprise",PE="NO_RECAPTCHA";class KA{constructor(e){this.type=GA,this.auth=Cs(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{CA(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new PA(d);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,l(m.siteKey)}}).catch(d=>{h(d)})})}function s(o,l,h){const d=window.grecaptcha;hv(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(m=>{l(m)}).catch(()=>{l(PE)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $A().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{i(this.auth).then(h=>{if(!n&&hv(window.grecaptcha))s(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=HA();d.length!==0&&(d+=h),SE(d).then(()=>{s(h,o,l)}).catch(m=>{l(m)})}}).catch(h=>{l(h)})})}}async function _v(t,e,n,i=!1,s=!1){const o=new KA(t);let l;if(s)l=PE;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const h=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:m,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function up(t,e,n,i,s){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await _v(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await _v(t,e,n,n==="getOobCode");return i(t,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(t,e){const n=Yh(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(ms(o,e??{}))return s;jn(s,"already-initialized")}return n.initialize({options:e})}function YA(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(xi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function XA(t,e,n){const i=Cs(t);ue(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=CE(e),{host:l,port:h}=JA(e),d=h===null?"":`:${h}`,m={url:`${o}//${l}${d}/`},v=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){ue(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ue(ms(m,i.config.emulator)&&ms(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,Ps(l)?(Am(`${o}//${l}${d}`),km("Auth",!0)):ek()}function CE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function JA(t){const e=CE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:vv(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:vv(l)}}}function vv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ek(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ki("not implemented")}_getIdTokenResponse(e){return ki("not implemented")}_linkToIdToken(e,n){return ki("not implemented")}_getReauthenticationResolver(e){return ki("not implemented")}}async function tk(t,e){return zr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nk(t,e){return su(t,"POST","/v1/accounts:signInWithPassword",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ik(t,e){return su(t,"POST","/v1/accounts:signInWithEmailLink",Fr(t,e))}async function rk(t,e){return su(t,"POST","/v1/accounts:signInWithEmailLink",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl extends Mm{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new jl(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new jl(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return up(e,n,"signInWithPassword",nk);case"emailLink":return ik(e,{email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return up(e,i,"signUpPassword",tk);case"emailLink":return rk(e,{idToken:n,email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Do(t,e){return su(t,"POST","/v1/accounts:signInWithIdp",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk="http://localhost";class _s extends Mm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _s(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):jn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,o=Lm(n,["providerId","signInMethod"]);if(!i||!s)return null;const l=new _s(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Do(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Do(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Do(e,n)}buildRequest(){const e={requestUri:sk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=iu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ak(t){const e=el(tl(t)).link,n=e?el(tl(e)).deep_link_id:null,i=el(tl(t)).deep_link_id;return(i?el(tl(i)).link:null)||i||n||e||t}class Vm{constructor(e){var n,i,s,o,l,h;const d=el(tl(e)),m=(n=d.apiKey)!==null&&n!==void 0?n:null,v=(i=d.oobCode)!==null&&i!==void 0?i:null,y=ok((s=d.mode)!==null&&s!==void 0?s:null);ue(m&&v&&y,"argument-error"),this.apiKey=m,this.operation=y,this.code=v,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.lang)!==null&&l!==void 0?l:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const n=ak(e);try{return new Vm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){this.providerId=ta.PROVIDER_ID}static credential(e,n){return jl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Vm.parseLink(n);return ue(i,"argument-error"),jl._fromEmailAndCode(e,i.code,i.tenantId)}}ta.PROVIDER_ID="password";ta.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ta.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou extends AE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends ou{constructor(){super("facebook.com")}static credential(e){return _s._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sr.credential(e.oauthAccessToken)}catch{return null}}}sr.FACEBOOK_SIGN_IN_METHOD="facebook.com";sr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends ou{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _s._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return or.credential(n,i)}catch{return null}}}or.GOOGLE_SIGN_IN_METHOD="google.com";or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends ou{constructor(){super("github.com")}static credential(e){return _s._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.GITHUB_SIGN_IN_METHOD="github.com";ar.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends ou{constructor(){super("twitter.com")}static credential(e,n){return _s._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return lr.credential(n,i)}catch{return null}}}lr.TWITTER_SIGN_IN_METHOD="twitter.com";lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lk(t,e){return su(t,"POST","/v1/accounts:signUp",Fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const o=await Vn._fromIdTokenResponse(e,i,s),l=yv(i);return new vs({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=yv(i);return new vs({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function yv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h extends hi{constructor(e,n,i,s){var o;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,_h.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new _h(e,n,i,s)}}function kE(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?_h._fromErrorAndOperation(t,o,e,i):o})}async function uk(t,e,n=!1){const i=await Bl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return vs._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ck(t,e,n=!1){const{auth:i}=t;if(on(i.app))return Promise.reject(Li(i));const s="reauthenticate";try{const o=await Bl(t,kE(i,s,e,t),n);ue(o.idToken,i,"internal-error");const l=Om(o.idToken);ue(l,i,"internal-error");const{sub:h}=l;return ue(t.uid===h,i,"user-mismatch"),vs._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&jn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xE(t,e,n=!1){if(on(t.app))return Promise.reject(Li(t));const i="signIn",s=await kE(t,i,e),o=await vs._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(o.user),o}async function hk(t,e){return xE(Cs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RE(t){const e=Cs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dk(t,e,n){if(on(t.app))return Promise.reject(Li(t));const i=Cs(t),l=await up(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lk).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&RE(t),d}),h=await vs._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(h.user),h}function fk(t,e,n){return on(t.app)?Promise.reject(Li(t)):hk(xt(t),ta.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&RE(t),i})}function pk(t,e,n,i){return xt(t).onIdTokenChanged(e,n,i)}function mk(t,e,n){return xt(t).beforeAuthStateChanged(e,n)}function LE(t,e,n,i){return xt(t).onAuthStateChanged(e,n,i)}function gk(t){return xt(t).signOut()}const vh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(vh,"1"),this.storage.removeItem(vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=1e3,vk=10;class bE extends NE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);MA()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,vk):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},_k)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}bE.type="LOCAL";const yk=bE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE extends NE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}OE.type="SESSION";const DE=OE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new ed(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(l).map(async m=>m(n.origin,o)),d=await wk(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ed.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const m=Fm("",20);s.port1.start();const v=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(y){const E=y;if(E.data.eventId===m)switch(E.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(E.data.response);break;default:clearTimeout(v),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(){return window}function Tk(t){ri().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(){return typeof ri().WorkerGlobalScope<"u"&&typeof ri().importScripts=="function"}async function Ik(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Sk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Pk(){return ME()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="firebaseLocalStorageDb",Ck=1,yh="firebaseLocalStorage",FE="fbase_key";class au{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function td(t,e){return t.transaction([yh],e?"readwrite":"readonly").objectStore(yh)}function Ak(){const t=indexedDB.deleteDatabase(VE);return new au(t).toPromise()}function cp(){const t=indexedDB.open(VE,Ck);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(yh,{keyPath:FE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(yh)?e(i):(i.close(),await Ak(),e(await cp()))})})}async function wv(t,e,n){const i=td(t,!0).put({[FE]:e,value:n});return new au(i).toPromise()}async function kk(t,e){const n=td(t,!1).get(e),i=await new au(n).toPromise();return i===void 0?null:i.value}function Ev(t,e){const n=td(t,!0).delete(e);return new au(n).toPromise()}const xk=800,Rk=3;class zE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>Rk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ME()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ed._getInstance(Pk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Ik(),!this.activeServiceWorker)return;this.sender=new Ek(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Sk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cp();return await wv(e,vh,"1"),await Ev(e,vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>wv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>kk(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ev(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=td(s,!1).getAll();return new au(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zE.type="LOCAL";const Lk=zE;new ru(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(t,e){return e?xi(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm extends Mm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Do(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Do(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Do(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function bk(t){return xE(t.auth,new zm(t),t.bypassAuthState)}function Ok(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),ck(n,new zm(t),t.bypassAuthState)}async function Dk(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),uk(n,new zm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,n,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bk;case"linkViaPopup":case"linkViaRedirect":return Dk;case"reauthViaPopup":case"reauthViaRedirect":return Ok;default:jn(this.auth,"internal-error")}}resolve(e){Fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=new ru(2e3,1e4);class Co extends UE{constructor(e,n,i,s,o){super(e,n,s,o),this.provider=i,this.authWindow=null,this.pollId=null,Co.currentPopupAction&&Co.currentPopupAction.cancel(),Co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){Fi(this.filter.length===1,"Popup operations only handle one event");const e=Fm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ii(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ii(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Co.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ii(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Mk.get())};e()}}Co.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk="pendingRedirect",Oc=new Map;class Fk extends UE{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Oc.get(this.auth._key());if(!e){try{const i=await zk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Oc.set(this.auth._key(),e)}return this.bypassAuthState||Oc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zk(t,e){const n=jk(e),i=Bk(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function Uk(t,e){Oc.set(t._key(),e)}function Bk(t){return xi(t._redirectPersistence)}function jk(t){return bc(Vk,t.config.apiKey,t.name)}async function Hk(t,e,n=!1){if(on(t.app))return Promise.reject(Li(t));const i=Cs(t),s=Nk(i,e),l=await new Fk(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=10*60*1e3;class qk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$k(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!BE(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(ii(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Wk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tv(e))}saveEventToCache(e){this.cachedEventUids.add(Tv(e)),this.lastProcessedEventTime=Date.now()}}function Tv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function BE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $k(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zk(t,e={}){return zr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Kk=/^https?/;async function Qk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Zk(t);for(const n of e)try{if(Yk(n))return}catch{}jn(t,"unauthorized-domain")}function Yk(t){const e=ap(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!Kk.test(n))return!1;if(Gk.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=new ru(3e4,6e4);function Iv(){const t=ri().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Jk(t){return new Promise((e,n)=>{var i,s,o;function l(){Iv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Iv(),n(ii(t,"network-request-failed"))},timeout:Xk.get()})}if(!((s=(i=ri().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=ri().gapi)===null||o===void 0)&&o.load)l();else{const h=qA("iframefcb");return ri()[h]=()=>{gapi.load?l():n(ii(t,"network-request-failed"))},SE(`${WA()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw Dc=null,e})}let Dc=null;function ex(t){return Dc=Dc||Jk(t),Dc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=new ru(5e3,15e3),nx="__/auth/iframe",ix="emulator/auth/iframe",rx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ox(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?bm(e,ix):`https://${t.config.authDomain}/${nx}`,i={apiKey:e.apiKey,appName:t.name,v:ea},s=sx.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${iu(i).slice(1)}`}async function ax(t){const e=await ex(t),n=ri().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:ox(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rx,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=ii(t,"network-request-failed"),h=ri().setTimeout(()=>{o(l)},tx.get());function d(){ri().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ux=500,cx=600,hx="_blank",dx="http://localhost";class Sv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fx(t,e,n,i=ux,s=cx){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d=Object.assign(Object.assign({},lx),{width:i.toString(),height:s.toString(),top:o,left:l}),m=Ft().toLowerCase();n&&(h=_E(m)?hx:n),mE(m)&&(e=e||dx,d.scrollbars="yes");const v=Object.entries(d).reduce((E,[b,V])=>`${E}${b}=${V},`,"");if(DA(m)&&h!=="_self")return px(e||"",h),new Sv(null);const y=window.open(e||"",h,v);ue(y,t,"popup-blocked");try{y.focus()}catch{}return new Sv(y)}function px(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="__/auth/handler",gx="emulator/auth/handler",_x=encodeURIComponent("fac");async function Pv(t,e,n,i,s,o){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ea,eventId:s};if(e instanceof AE){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",nC(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,y]of Object.entries({}))l[v]=y}if(e instanceof ou){const v=e.getScopes().filter(y=>y!=="");v.length>0&&(l.scopes=v.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const d=await t._getAppCheckToken(),m=d?`#${_x}=${encodeURIComponent(d)}`:"";return`${vx(t)}?${iu(h).slice(1)}${m}`}function vx({config:t}){return t.emulator?bm(t,gx):`https://${t.authDomain}/${mx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf="webStorageSupport";class yx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DE,this._completeRedirectFn=Hk,this._overrideRedirectResult=Uk}async _openPopup(e,n,i,s){var o;Fi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await Pv(e,n,i,ap(),s);return fx(e,l,Fm())}async _openRedirect(e,n,i,s){await this._originValidation(e);const o=await Pv(e,n,i,ap(),s);return Tk(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Fi(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await ax(e),i=new qk(e);return n.register("authEvent",s=>(ue(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(nf,{type:nf},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[nf];l!==void 0&&n(!!l),jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Qk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return TE()||gE()||Dm()}}const wx=yx;var Cv="@firebase/auth",Av="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ix(t){gs(new Ar("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;ue(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IE(t)},m=new BA(i,s,o,d);return YA(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),gs(new Ar("auth-internal",e=>{const n=Cs(e.getProvider("auth").getImmediate());return(i=>new Ex(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ni(Cv,Av,Tx(t)),ni(Cv,Av,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=5*60,Px=tE("authIdTokenMaxAge")||Sx;let kv=null;const Cx=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Px)return;const s=n==null?void 0:n.token;kv!==s&&(kv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Ax(t=Xh()){const e=Yh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=QA(t,{popupRedirectResolver:wx,persistence:[Lk,yk,DE]}),i=tE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=Cx(o.toString());mk(n,l,()=>l(n.currentUser)),pk(n,h=>l(h))}}const s=X0("auth");return s&&XA(n,`http://${s}`),n}function kx(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}jA({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=ii("internal-error");o.customData=s,n(o)},i.type="text/javascript",i.charset="UTF-8",kx().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ix("Browser");var xv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tr,jE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,T){function P(){}P.prototype=T.prototype,A.D=T.prototype,A.prototype=new P,A.prototype.constructor=A,A.C=function(C,k,F){for(var R=Array(arguments.length-2),je=2;je<arguments.length;je++)R[je-2]=arguments[je];return T.prototype[k].apply(C,R)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,T,P){P||(P=0);var C=Array(16);if(typeof T=="string")for(var k=0;16>k;++k)C[k]=T.charCodeAt(P++)|T.charCodeAt(P++)<<8|T.charCodeAt(P++)<<16|T.charCodeAt(P++)<<24;else for(k=0;16>k;++k)C[k]=T[P++]|T[P++]<<8|T[P++]<<16|T[P++]<<24;T=A.g[0],P=A.g[1],k=A.g[2];var F=A.g[3],R=T+(F^P&(k^F))+C[0]+3614090360&4294967295;T=P+(R<<7&4294967295|R>>>25),R=F+(k^T&(P^k))+C[1]+3905402710&4294967295,F=T+(R<<12&4294967295|R>>>20),R=k+(P^F&(T^P))+C[2]+606105819&4294967295,k=F+(R<<17&4294967295|R>>>15),R=P+(T^k&(F^T))+C[3]+3250441966&4294967295,P=k+(R<<22&4294967295|R>>>10),R=T+(F^P&(k^F))+C[4]+4118548399&4294967295,T=P+(R<<7&4294967295|R>>>25),R=F+(k^T&(P^k))+C[5]+1200080426&4294967295,F=T+(R<<12&4294967295|R>>>20),R=k+(P^F&(T^P))+C[6]+2821735955&4294967295,k=F+(R<<17&4294967295|R>>>15),R=P+(T^k&(F^T))+C[7]+4249261313&4294967295,P=k+(R<<22&4294967295|R>>>10),R=T+(F^P&(k^F))+C[8]+1770035416&4294967295,T=P+(R<<7&4294967295|R>>>25),R=F+(k^T&(P^k))+C[9]+2336552879&4294967295,F=T+(R<<12&4294967295|R>>>20),R=k+(P^F&(T^P))+C[10]+4294925233&4294967295,k=F+(R<<17&4294967295|R>>>15),R=P+(T^k&(F^T))+C[11]+2304563134&4294967295,P=k+(R<<22&4294967295|R>>>10),R=T+(F^P&(k^F))+C[12]+1804603682&4294967295,T=P+(R<<7&4294967295|R>>>25),R=F+(k^T&(P^k))+C[13]+4254626195&4294967295,F=T+(R<<12&4294967295|R>>>20),R=k+(P^F&(T^P))+C[14]+2792965006&4294967295,k=F+(R<<17&4294967295|R>>>15),R=P+(T^k&(F^T))+C[15]+1236535329&4294967295,P=k+(R<<22&4294967295|R>>>10),R=T+(k^F&(P^k))+C[1]+4129170786&4294967295,T=P+(R<<5&4294967295|R>>>27),R=F+(P^k&(T^P))+C[6]+3225465664&4294967295,F=T+(R<<9&4294967295|R>>>23),R=k+(T^P&(F^T))+C[11]+643717713&4294967295,k=F+(R<<14&4294967295|R>>>18),R=P+(F^T&(k^F))+C[0]+3921069994&4294967295,P=k+(R<<20&4294967295|R>>>12),R=T+(k^F&(P^k))+C[5]+3593408605&4294967295,T=P+(R<<5&4294967295|R>>>27),R=F+(P^k&(T^P))+C[10]+38016083&4294967295,F=T+(R<<9&4294967295|R>>>23),R=k+(T^P&(F^T))+C[15]+3634488961&4294967295,k=F+(R<<14&4294967295|R>>>18),R=P+(F^T&(k^F))+C[4]+3889429448&4294967295,P=k+(R<<20&4294967295|R>>>12),R=T+(k^F&(P^k))+C[9]+568446438&4294967295,T=P+(R<<5&4294967295|R>>>27),R=F+(P^k&(T^P))+C[14]+3275163606&4294967295,F=T+(R<<9&4294967295|R>>>23),R=k+(T^P&(F^T))+C[3]+4107603335&4294967295,k=F+(R<<14&4294967295|R>>>18),R=P+(F^T&(k^F))+C[8]+1163531501&4294967295,P=k+(R<<20&4294967295|R>>>12),R=T+(k^F&(P^k))+C[13]+2850285829&4294967295,T=P+(R<<5&4294967295|R>>>27),R=F+(P^k&(T^P))+C[2]+4243563512&4294967295,F=T+(R<<9&4294967295|R>>>23),R=k+(T^P&(F^T))+C[7]+1735328473&4294967295,k=F+(R<<14&4294967295|R>>>18),R=P+(F^T&(k^F))+C[12]+2368359562&4294967295,P=k+(R<<20&4294967295|R>>>12),R=T+(P^k^F)+C[5]+4294588738&4294967295,T=P+(R<<4&4294967295|R>>>28),R=F+(T^P^k)+C[8]+2272392833&4294967295,F=T+(R<<11&4294967295|R>>>21),R=k+(F^T^P)+C[11]+1839030562&4294967295,k=F+(R<<16&4294967295|R>>>16),R=P+(k^F^T)+C[14]+4259657740&4294967295,P=k+(R<<23&4294967295|R>>>9),R=T+(P^k^F)+C[1]+2763975236&4294967295,T=P+(R<<4&4294967295|R>>>28),R=F+(T^P^k)+C[4]+1272893353&4294967295,F=T+(R<<11&4294967295|R>>>21),R=k+(F^T^P)+C[7]+4139469664&4294967295,k=F+(R<<16&4294967295|R>>>16),R=P+(k^F^T)+C[10]+3200236656&4294967295,P=k+(R<<23&4294967295|R>>>9),R=T+(P^k^F)+C[13]+681279174&4294967295,T=P+(R<<4&4294967295|R>>>28),R=F+(T^P^k)+C[0]+3936430074&4294967295,F=T+(R<<11&4294967295|R>>>21),R=k+(F^T^P)+C[3]+3572445317&4294967295,k=F+(R<<16&4294967295|R>>>16),R=P+(k^F^T)+C[6]+76029189&4294967295,P=k+(R<<23&4294967295|R>>>9),R=T+(P^k^F)+C[9]+3654602809&4294967295,T=P+(R<<4&4294967295|R>>>28),R=F+(T^P^k)+C[12]+3873151461&4294967295,F=T+(R<<11&4294967295|R>>>21),R=k+(F^T^P)+C[15]+530742520&4294967295,k=F+(R<<16&4294967295|R>>>16),R=P+(k^F^T)+C[2]+3299628645&4294967295,P=k+(R<<23&4294967295|R>>>9),R=T+(k^(P|~F))+C[0]+4096336452&4294967295,T=P+(R<<6&4294967295|R>>>26),R=F+(P^(T|~k))+C[7]+1126891415&4294967295,F=T+(R<<10&4294967295|R>>>22),R=k+(T^(F|~P))+C[14]+2878612391&4294967295,k=F+(R<<15&4294967295|R>>>17),R=P+(F^(k|~T))+C[5]+4237533241&4294967295,P=k+(R<<21&4294967295|R>>>11),R=T+(k^(P|~F))+C[12]+1700485571&4294967295,T=P+(R<<6&4294967295|R>>>26),R=F+(P^(T|~k))+C[3]+2399980690&4294967295,F=T+(R<<10&4294967295|R>>>22),R=k+(T^(F|~P))+C[10]+4293915773&4294967295,k=F+(R<<15&4294967295|R>>>17),R=P+(F^(k|~T))+C[1]+2240044497&4294967295,P=k+(R<<21&4294967295|R>>>11),R=T+(k^(P|~F))+C[8]+1873313359&4294967295,T=P+(R<<6&4294967295|R>>>26),R=F+(P^(T|~k))+C[15]+4264355552&4294967295,F=T+(R<<10&4294967295|R>>>22),R=k+(T^(F|~P))+C[6]+2734768916&4294967295,k=F+(R<<15&4294967295|R>>>17),R=P+(F^(k|~T))+C[13]+1309151649&4294967295,P=k+(R<<21&4294967295|R>>>11),R=T+(k^(P|~F))+C[4]+4149444226&4294967295,T=P+(R<<6&4294967295|R>>>26),R=F+(P^(T|~k))+C[11]+3174756917&4294967295,F=T+(R<<10&4294967295|R>>>22),R=k+(T^(F|~P))+C[2]+718787259&4294967295,k=F+(R<<15&4294967295|R>>>17),R=P+(F^(k|~T))+C[9]+3951481745&4294967295,A.g[0]=A.g[0]+T&4294967295,A.g[1]=A.g[1]+(k+(R<<21&4294967295|R>>>11))&4294967295,A.g[2]=A.g[2]+k&4294967295,A.g[3]=A.g[3]+F&4294967295}i.prototype.u=function(A,T){T===void 0&&(T=A.length);for(var P=T-this.blockSize,C=this.B,k=this.h,F=0;F<T;){if(k==0)for(;F<=P;)s(this,A,F),F+=this.blockSize;if(typeof A=="string"){for(;F<T;)if(C[k++]=A.charCodeAt(F++),k==this.blockSize){s(this,C),k=0;break}}else for(;F<T;)if(C[k++]=A[F++],k==this.blockSize){s(this,C),k=0;break}}this.h=k,this.o+=T},i.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var T=1;T<A.length-8;++T)A[T]=0;var P=8*this.o;for(T=A.length-8;T<A.length;++T)A[T]=P&255,P/=256;for(this.u(A),A=Array(16),T=P=0;4>T;++T)for(var C=0;32>C;C+=8)A[P++]=this.g[T]>>>C&255;return A};function o(A,T){var P=h;return Object.prototype.hasOwnProperty.call(P,A)?P[A]:P[A]=T(A)}function l(A,T){this.h=T;for(var P=[],C=!0,k=A.length-1;0<=k;k--){var F=A[k]|0;C&&F==T||(P[k]=F,C=!1)}this.g=P}var h={};function d(A){return-128<=A&&128>A?o(A,function(T){return new l([T|0],0>T?-1:0)}):new l([A|0],0>A?-1:0)}function m(A){if(isNaN(A)||!isFinite(A))return y;if(0>A)return W(m(-A));for(var T=[],P=1,C=0;A>=P;C++)T[C]=A/P|0,P*=4294967296;return new l(T,0)}function v(A,T){if(A.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(A.charAt(0)=="-")return W(v(A.substring(1),T));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=m(Math.pow(T,8)),C=y,k=0;k<A.length;k+=8){var F=Math.min(8,A.length-k),R=parseInt(A.substring(k,k+F),T);8>F?(F=m(Math.pow(T,F)),C=C.j(F).add(m(R))):(C=C.j(P),C=C.add(m(R)))}return C}var y=d(0),E=d(1),b=d(16777216);t=l.prototype,t.m=function(){if(M(this))return-W(this).m();for(var A=0,T=1,P=0;P<this.g.length;P++){var C=this.i(P);A+=(0<=C?C:4294967296+C)*T,T*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(V(this))return"0";if(M(this))return"-"+W(this).toString(A);for(var T=m(Math.pow(A,6)),P=this,C="";;){var k=H(P,T).g;P=O(P,k.j(T));var F=((0<P.g.length?P.g[0]:P.h)>>>0).toString(A);if(P=k,V(P))return F+C;for(;6>F.length;)F="0"+F;C=F+C}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function V(A){if(A.h!=0)return!1;for(var T=0;T<A.g.length;T++)if(A.g[T]!=0)return!1;return!0}function M(A){return A.h==-1}t.l=function(A){return A=O(this,A),M(A)?-1:V(A)?0:1};function W(A){for(var T=A.g.length,P=[],C=0;C<T;C++)P[C]=~A.g[C];return new l(P,~A.h).add(E)}t.abs=function(){return M(this)?W(this):this},t.add=function(A){for(var T=Math.max(this.g.length,A.g.length),P=[],C=0,k=0;k<=T;k++){var F=C+(this.i(k)&65535)+(A.i(k)&65535),R=(F>>>16)+(this.i(k)>>>16)+(A.i(k)>>>16);C=R>>>16,F&=65535,R&=65535,P[k]=R<<16|F}return new l(P,P[P.length-1]&-2147483648?-1:0)};function O(A,T){return A.add(W(T))}t.j=function(A){if(V(this)||V(A))return y;if(M(this))return M(A)?W(this).j(W(A)):W(W(this).j(A));if(M(A))return W(this.j(W(A)));if(0>this.l(b)&&0>A.l(b))return m(this.m()*A.m());for(var T=this.g.length+A.g.length,P=[],C=0;C<2*T;C++)P[C]=0;for(C=0;C<this.g.length;C++)for(var k=0;k<A.g.length;k++){var F=this.i(C)>>>16,R=this.i(C)&65535,je=A.i(k)>>>16,Hn=A.i(k)&65535;P[2*C+2*k]+=R*Hn,S(P,2*C+2*k),P[2*C+2*k+1]+=F*Hn,S(P,2*C+2*k+1),P[2*C+2*k+1]+=R*je,S(P,2*C+2*k+1),P[2*C+2*k+2]+=F*je,S(P,2*C+2*k+2)}for(C=0;C<T;C++)P[C]=P[2*C+1]<<16|P[2*C];for(C=T;C<2*T;C++)P[C]=0;return new l(P,0)};function S(A,T){for(;(A[T]&65535)!=A[T];)A[T+1]+=A[T]>>>16,A[T]&=65535,T++}function x(A,T){this.g=A,this.h=T}function H(A,T){if(V(T))throw Error("division by zero");if(V(A))return new x(y,y);if(M(A))return T=H(W(A),T),new x(W(T.g),W(T.h));if(M(T))return T=H(A,W(T)),new x(W(T.g),T.h);if(30<A.g.length){if(M(A)||M(T))throw Error("slowDivide_ only works with positive integers.");for(var P=E,C=T;0>=C.l(A);)P=Y(P),C=Y(C);var k=K(P,1),F=K(C,1);for(C=K(C,2),P=K(P,2);!V(C);){var R=F.add(C);0>=R.l(A)&&(k=k.add(P),F=R),C=K(C,1),P=K(P,1)}return T=O(A,k.j(T)),new x(k,T)}for(k=y;0<=A.l(T);){for(P=Math.max(1,Math.floor(A.m()/T.m())),C=Math.ceil(Math.log(P)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),F=m(P),R=F.j(T);M(R)||0<R.l(A);)P-=C,F=m(P),R=F.j(T);V(F)&&(F=E),k=k.add(F),A=O(A,R)}return new x(k,A)}t.A=function(A){return H(this,A).h},t.and=function(A){for(var T=Math.max(this.g.length,A.g.length),P=[],C=0;C<T;C++)P[C]=this.i(C)&A.i(C);return new l(P,this.h&A.h)},t.or=function(A){for(var T=Math.max(this.g.length,A.g.length),P=[],C=0;C<T;C++)P[C]=this.i(C)|A.i(C);return new l(P,this.h|A.h)},t.xor=function(A){for(var T=Math.max(this.g.length,A.g.length),P=[],C=0;C<T;C++)P[C]=this.i(C)^A.i(C);return new l(P,this.h^A.h)};function Y(A){for(var T=A.g.length+1,P=[],C=0;C<T;C++)P[C]=A.i(C)<<1|A.i(C-1)>>>31;return new l(P,A.h)}function K(A,T){var P=T>>5;T%=32;for(var C=A.g.length-P,k=[],F=0;F<C;F++)k[F]=0<T?A.i(F+P)>>>T|A.i(F+P+1)<<32-T:A.i(F+P);return new l(k,A.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,jE=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=v,Tr=l}).apply(typeof xv<"u"?xv:typeof self<"u"?self:typeof window<"u"?window:{});var mc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HE,nl,WE,Mc,hp,qE,$E,ZE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,_){return u==Array.prototype||u==Object.prototype||(u[p]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof mc=="object"&&mc];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function s(u,p){if(p)e:{var _=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var z=u[I];if(!(z in _))break e;_=_[z]}u=u[u.length-1],I=_[u],p=p(I),p!=I&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}function o(u,p){u instanceof String&&(u+="");var _=0,I=!1,z={next:function(){if(!I&&_<u.length){var j=_++;return{value:p(j,u[j]),done:!1}}return I=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}s("Array.prototype.values",function(u){return u||function(){return o(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function d(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function m(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function v(u,p,_){return u.call.apply(u.bind,arguments)}function y(u,p,_){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,I),u.apply(p,z)}}return function(){return u.apply(p,arguments)}}function E(u,p,_){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:y,E.apply(null,arguments)}function b(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function V(u,p){function _(){}_.prototype=p.prototype,u.aa=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(I,z,j){for(var J=Array(arguments.length-2),be=2;be<arguments.length;be++)J[be-2]=arguments[be];return p.prototype[z].apply(I,J)}}function M(u){const p=u.length;if(0<p){const _=Array(p);for(let I=0;I<p;I++)_[I]=u[I];return _}return[]}function W(u,p){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(d(I)){const z=u.length||0,j=I.length||0;u.length=z+j;for(let J=0;J<j;J++)u[z+J]=I[J]}else u.push(I)}}class O{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function S(u){return/^[\s\xa0]*$/.test(u)}function x(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function H(u){return H[" "](u),u}H[" "]=function(){};var Y=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function K(u,p,_){for(const I in u)p.call(_,u[I],I,u)}function A(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function T(u){const p={};for(const _ in u)p[_]=u[_];return p}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,p){let _,I;for(let z=1;z<arguments.length;z++){I=arguments[z];for(_ in I)u[_]=I[_];for(let j=0;j<P.length;j++)_=P[j],Object.prototype.hasOwnProperty.call(I,_)&&(u[_]=I[_])}}function k(u){var p=1;u=u.split(":");const _=[];for(;0<p&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function F(u){h.setTimeout(()=>{throw u},0)}function R(){var u=he;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class je{constructor(){this.h=this.g=null}add(p,_){const I=Hn.get();I.set(p,_),this.h?this.h.next=I:this.g=I,this.h=I}}var Hn=new O(()=>new ct,u=>u.reset());class ct{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let zt,q=!1,he=new je,X=()=>{const u=h.Promise.resolve(void 0);zt=()=>{u.then(de)}};var de=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(_){F(_)}var p=Hn;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}q=!1};function ve(){this.s=this.s,this.C=this.C}ve.prototype.s=!1,ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var Le=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,p),h.removeEventListener("test",_,p)}catch{}return u}();function we(u,p){if(Se.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(Y){e:{try{H(p.nodeName);var z=!0;break e}catch{}z=!1}z||(p=null)}}else _=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement);this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:me[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&we.aa.h.call(this)}}V(we,Se);var me={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ht="closure_listenable_"+(1e6*Math.random()|0),Wn=0;function mu(u,p,_,I,z){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!I,this.ha=z,this.key=++Wn,this.da=this.fa=!1}function ji(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Hi(u){this.src=u,this.g={},this.h=0}Hi.prototype.add=function(u,p,_,I,z){var j=u.toString();u=this.g[j],u||(u=this.g[j]=[],this.h++);var J=Ur(u,p,I,z);return-1<J?(p=u[J],_||(p.fa=!1)):(p=new mu(p,this.src,j,!!I,z),p.fa=_,u.push(p)),p};function di(u,p){var _=p.type;if(_ in u.g){var I=u.g[_],z=Array.prototype.indexOf.call(I,p,void 0),j;(j=0<=z)&&Array.prototype.splice.call(I,z,1),j&&(ji(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Ur(u,p,_,I){for(var z=0;z<u.length;++z){var j=u[z];if(!j.da&&j.listener==p&&j.capture==!!_&&j.ha==I)return z}return-1}var oa="closure_lm_"+(1e6*Math.random()|0),Ls={};function aa(u,p,_,I,z){if(Array.isArray(p)){for(var j=0;j<p.length;j++)aa(u,p[j],_,I,z);return null}return _=vu(_),u&&u[ht]?u.K(p,_,m(I)?!!I.capture:!1,z):la(u,p,_,!1,I,z)}function la(u,p,_,I,z,j){if(!p)throw Error("Invalid event type");var J=m(z)?!!z.capture:!!z,be=Ds(u);if(be||(u[oa]=be=new Hi(u)),_=be.add(p,_,I,J,j),_.proxy)return _;if(I=Ns(),_.proxy=I,I.src=u,I.listener=_,u.addEventListener)Le||(z=J),z===void 0&&(z=!1),u.addEventListener(p.toString(),I,z);else if(u.attachEvent)u.attachEvent(Os(p.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ns(){function u(_){return p.call(u.src,u.listener,_)}const p=_u;return u}function gu(u,p,_,I,z){if(Array.isArray(p))for(var j=0;j<p.length;j++)gu(u,p[j],_,I,z);else I=m(I)?!!I.capture:!!I,_=vu(_),u&&u[ht]?(u=u.i,p=String(p).toString(),p in u.g&&(j=u.g[p],_=Ur(j,_,I,z),-1<_&&(ji(j[_]),Array.prototype.splice.call(j,_,1),j.length==0&&(delete u.g[p],u.h--)))):u&&(u=Ds(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Ur(p,_,I,z)),(_=-1<u?p[u]:null)&&bs(_))}function bs(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[ht])di(p.i,u);else{var _=u.type,I=u.proxy;p.removeEventListener?p.removeEventListener(_,I,u.capture):p.detachEvent?p.detachEvent(Os(_),I):p.addListener&&p.removeListener&&p.removeListener(I),(_=Ds(p))?(di(_,u),_.h==0&&(_.src=null,p[oa]=null)):ji(u)}}}function Os(u){return u in Ls?Ls[u]:Ls[u]="on"+u}function _u(u,p){if(u.da)u=!0;else{p=new we(p,this);var _=u.listener,I=u.ha||u.src;u.fa&&bs(u),u=_.call(I,p)}return u}function Ds(u){return u=u[oa],u instanceof Hi?u:null}var ua="__closure_events_fn_"+(1e9*Math.random()>>>0);function vu(u){return typeof u=="function"?u:(u[ua]||(u[ua]=function(p){return u.handleEvent(p)}),u[ua])}function rt(){ve.call(this),this.i=new Hi(this),this.M=this,this.F=null}V(rt,ve),rt.prototype[ht]=!0,rt.prototype.removeEventListener=function(u,p,_,I){gu(this,u,p,_,I)};function _t(u,p){var _,I=u.F;if(I)for(_=[];I;I=I.F)_.push(I);if(u=u.M,I=p.type||p,typeof p=="string")p=new Se(p,u);else if(p instanceof Se)p.target=p.target||u;else{var z=p;p=new Se(I,u),C(p,z)}if(z=!0,_)for(var j=_.length-1;0<=j;j--){var J=p.g=_[j];z=Br(J,I,!0,p)&&z}if(J=p.g=u,z=Br(J,I,!0,p)&&z,z=Br(J,I,!1,p)&&z,_)for(j=0;j<_.length;j++)J=p.g=_[j],z=Br(J,I,!1,p)&&z}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var _=u.g[p],I=0;I<_.length;I++)ji(_[I]);delete u.g[p],u.h--}}this.F=null},rt.prototype.K=function(u,p,_,I){return this.i.add(String(u),p,!1,_,I)},rt.prototype.L=function(u,p,_,I){return this.i.add(String(u),p,!0,_,I)};function Br(u,p,_,I){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var z=!0,j=0;j<p.length;++j){var J=p[j];if(J&&!J.da&&J.capture==_){var be=J.listener,st=J.ha||J.src;J.fa&&di(u.i,J),z=be.call(st,I)!==!1&&z}}return z&&!I.defaultPrevented}function yu(u,p,_){if(typeof u=="function")_&&(u=E(u,_));else if(u&&typeof u.handleEvent=="function")u=E(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:h.setTimeout(u,p||0)}function ca(u){u.g=yu(()=>{u.g=null,u.i&&(u.i=!1,ca(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class wu extends ve{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:ca(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jr(u){ve.call(this),this.h=u,this.g={}}V(jr,ve);var ha=[];function Ms(u){K(u.g,function(p,_){this.g.hasOwnProperty(_)&&bs(p)},u),u.g={}}jr.prototype.N=function(){jr.aa.N.call(this),Ms(this)},jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vs=h.JSON.stringify,gd=h.JSON.parse,Hr=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function da(){}da.prototype.h=null;function Eu(u){return u.h||(u.h=u.i())}function fa(){}var Wi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fs(){Se.call(this,"d")}V(Fs,Se);function pa(){Se.call(this,"c")}V(pa,Se);var fi={},Tu=null;function zs(){return Tu=Tu||new rt}fi.La="serverreachability";function Iu(u){Se.call(this,fi.La,u)}V(Iu,Se);function Wr(u){const p=zs();_t(p,new Iu(p))}fi.STAT_EVENT="statevent";function Us(u,p){Se.call(this,fi.STAT_EVENT,u),this.stat=p}V(Us,Se);function It(u){const p=zs();_t(p,new Us(p,u))}fi.Ma="timingevent";function Su(u,p){Se.call(this,fi.Ma,u),this.size=p}V(Su,Se);function qr(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},p)}function $r(){this.g=!0}$r.prototype.xa=function(){this.g=!1};function dn(u,p,_,I,z,j){u.info(function(){if(u.g)if(j)for(var J="",be=j.split("&"),st=0;st<be.length;st++){var ke=be[st].split("=");if(1<ke.length){var Me=ke[0];ke=ke[1];var Ze=Me.split("_");J=2<=Ze.length&&Ze[1]=="type"?J+(Me+"="+ke+"&"):J+(Me+"=redacted&")}}else J=null;else J=j;return"XMLHTTP REQ ("+I+") [attempt "+z+"]: "+p+`
`+_+`
`+J})}function re(u,p,_,I,z,j,J){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+z+"]: "+p+`
`+_+`
`+j+" "+J})}function pi(u,p,_,I){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Cu(u,_)+(I?" "+I:"")})}function Pu(u,p){u.info(function(){return"TIMEOUT: "+p})}$r.prototype.info=function(){};function Cu(u,p){if(!u.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var I=_[u];if(!(2>I.length)){var z=I[1];if(Array.isArray(z)&&!(1>z.length)){var j=z[0];if(j!="noop"&&j!="stop"&&j!="close")for(var J=1;J<z.length;J++)z[J]=""}}}}return Vs(_)}catch{return p}}var Zr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},js;function kn(){}V(kn,da),kn.prototype.g=function(){return new XMLHttpRequest},kn.prototype.i=function(){return{}},js=new kn;function xn(u,p,_,I){this.j=u,this.i=p,this.l=_,this.R=I||1,this.U=new jr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Au}function Au(){this.i=null,this.g="",this.h=!1}var ku={},ma={};function ga(u,p,_){u.L=1,u.v=pn(Je(p)),u.m=_,u.P=!0,_a(u,null)}function _a(u,p){u.F=Date.now(),Ws(u),u.A=Je(u.v);var _=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Lu(_.i,"t",I),u.C=0,_=u.j.J,u.h=new Au,u.g=Fu(u.j,_?p:null,!u.m),0<u.O&&(u.M=new wu(E(u.Y,u,u.g),u.O)),p=u.U,_=u.g,I=u.ca;var z="readystatechange";Array.isArray(z)||(z&&(ha[0]=z.toString()),z=ha);for(var j=0;j<z.length;j++){var J=aa(_,z[j],I||p.handleEvent,!1,p.h||p);if(!J)break;p.g[J.key]=J}p=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Wr(),dn(u.i,u.u,u.A,u.l,u.R,u.m)}xn.prototype.ca=function(u){u=u.target;const p=this.M;p&&Ut(u)==3?p.j():this.Y(u)},xn.prototype.Y=function(u){try{if(u==this.g)e:{const Ze=Ut(this.g);var p=this.g.Ba();const Yi=this.g.Z();if(!(3>Ze)&&(Ze!=3||this.g&&(this.h.h||this.g.oa()||ba(this.g)))){this.J||Ze!=4||p==7||(p==8||0>=Yi?Wr(3):Wr(2)),va(this);var _=this.g.Z();this.X=_;t:if(xu(this)){var I=ba(this.g);u="";var z=I.length,j=Ut(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mi(this),Gr(this);var J="";break t}this.h.i=new h.TextDecoder}for(p=0;p<z;p++)this.h.h=!0,u+=this.h.i.decode(I[p],{stream:!(j&&p==z-1)});I.length=0,this.h.g+=u,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=_==200,re(this.i,this.u,this.A,this.l,this.R,Ze,_),this.o){if(this.T&&!this.K){t:{if(this.g){var be,st=this.g;if((be=st.g?st.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(be)){var ke=be;break t}}ke=null}if(_=ke)pi(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kr(this,_);else{this.o=!1,this.s=3,It(12),mi(this),Gr(this);break e}}if(this.P){_=!0;let tt;for(;!this.J&&this.C<J.length;)if(tt=Hs(this,J),tt==ma){Ze==4&&(this.s=4,It(14),_=!1),pi(this.i,this.l,null,"[Incomplete Response]");break}else if(tt==ku){this.s=4,It(15),pi(this.i,this.l,J,"[Invalid Chunk]"),_=!1;break}else pi(this.i,this.l,tt,null),Kr(this,tt);if(xu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ze!=4||J.length!=0||this.h.h||(this.s=1,It(16),_=!1),this.o=this.o&&_,!_)pi(this.i,this.l,J,"[Invalid Chunked Response]"),mi(this),Gr(this);else if(0<J.length&&!this.W){this.W=!0;var Me=this.j;Me.g==this&&Me.ba&&!Me.M&&(Me.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Js(Me),Me.M=!0,It(11))}}else pi(this.i,this.l,J,null),Kr(this,J);Ze==4&&mi(this),this.o&&!this.J&&(Ze==4?Da(this.j,this):(this.o=!1,Ws(this)))}else _d(this.g),_==400&&0<J.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),mi(this),Gr(this)}}}catch{}finally{}};function xu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Hs(u,p){var _=u.C,I=p.indexOf(`
`,_);return I==-1?ma:(_=Number(p.substring(_,I)),isNaN(_)?ku:(I+=1,I+_>p.length?ma:(p=p.slice(I,I+_),u.C=I+_,p)))}xn.prototype.cancel=function(){this.J=!0,mi(this)};function Ws(u){u.S=Date.now()+u.I,Ru(u,u.I)}function Ru(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=qr(E(u.ba,u),p)}function va(u){u.B&&(h.clearTimeout(u.B),u.B=null)}xn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Pu(this.i,this.A),this.L!=2&&(Wr(),It(17)),mi(this),this.s=2,Gr(this)):Ru(this,this.S-u)};function Gr(u){u.j.G==0||u.J||Da(u.j,u)}function mi(u){va(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Ms(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Kr(u,p){try{var _=u.j;if(_.G!=0&&(_.g==u||Pe(_.h,u))){if(!u.K&&Pe(_.h,u)&&_.G==3){try{var I=_.Da.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var z=I;if(z[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)to(_),Ys(_);else break e;Xs(_),It(18)}}else _.za=z[1],0<_.za-_.T&&37500>z[2]&&_.F&&_.v==0&&!_.C&&(_.C=qr(E(_.Za,_),6e3));if(1>=qi(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else wi(_,11)}else if((u.K||_.g==u)&&to(_),!S(p))for(z=_.Da.g.parse(p),p=0;p<z.length;p++){let ke=z[p];if(_.T=ke[0],ke=ke[1],_.G==2)if(ke[0]=="c"){_.K=ke[1],_.ia=ke[2];const Me=ke[3];Me!=null&&(_.la=Me,_.j.info("VER="+_.la));const Ze=ke[4];Ze!=null&&(_.Aa=Ze,_.j.info("SVER="+_.Aa));const Yi=ke[5];Yi!=null&&typeof Yi=="number"&&0<Yi&&(I=1.5*Yi,_.L=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const tt=u.g;if(tt){const io=tt.g?tt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(io){var j=I.h;j.g||io.indexOf("spdy")==-1&&io.indexOf("quic")==-1&&io.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Ve(j,j.h),j.h=null))}if(I.D){const Zn=tt.g?tt.g.getResponseHeader("X-HTTP-Session-Id"):null;Zn&&(I.ya=Zn,fe(I.I,I.D,Zn))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),I=_;var J=u;if(I.qa=no(I,I.J?I.ia:null,I.W),J.K){Yr(I.h,J);var be=J,st=I.L;st&&(be.I=st),be.B&&(va(be),Ws(be)),I.g=J}else Nn(I);0<_.i.length&&Qi(_)}else ke[0]!="stop"&&ke[0]!="close"||wi(_,7);else _.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?wi(_,7):Qs(_):ke[0]!="noop"&&_.l&&_.l.ta(ke),_.v=0)}}Wr(4)}catch{}}var Qr=class{constructor(u,p){this.g=u,this.map=p}};function ya(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function qi(u){return u.h?1:u.g?u.g.size:0}function Pe(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Ve(u,p){u.g?u.g.add(p):u.h=p}function Yr(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}ya.prototype.cancel=function(){if(this.i=gi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function gi(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.D);return p}return M(u.i)}function $i(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(d(u)){for(var p=[],_=u.length,I=0;I<_;I++)p.push(u[I]);return p}p=[],_=0;for(I in u)p[_++]=u[I];return p}function Ea(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(d(u)||typeof u=="string"){var p=[];u=u.length;for(var _=0;_<u;_++)p.push(_);return p}p=[],_=0;for(const I in u)p[_++]=I;return p}}}function _e(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(d(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var _=Ea(u),I=$i(u),z=I.length,j=0;j<z;j++)p.call(void 0,I[j],_&&_[j],u)}var He=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ta(u,p){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var I=u[_].indexOf("="),z=null;if(0<=I){var j=u[_].substring(0,I);z=u[_].substring(I+1)}else j=u[_];p(j,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function fn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof fn){this.h=u.h,qs(this,u.j),this.o=u.o,this.g=u.g,_i(this,u.s),this.l=u.l;var p=u.i,_=new vi;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),qn(this,_),this.m=u.m}else u&&(p=String(u).match(He))?(this.h=!1,qs(this,p[1]||"",!0),this.o=Rn(p[2]||""),this.g=Rn(p[3]||"",!0),_i(this,p[4]),this.l=Rn(p[5]||"",!0),qn(this,p[6]||"",!0),this.m=Rn(p[7]||"")):(this.h=!1,this.i=new vi(null,this.h))}fn.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Ln(p,Zi,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Ln(p,Zi,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Ln(_,_.charAt(0)=="/"?Pa:Sa,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Ln(_,Ca)),u.join("")};function Je(u){return new fn(u)}function qs(u,p,_){u.j=_?Rn(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function _i(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function qn(u,p,_){p instanceof vi?(u.i=p,mn(u.i,u.h)):(_||(p=Ln(p,$s)),u.i=new vi(p,u.h))}function fe(u,p,_){u.i.set(p,_)}function pn(u){return fe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Rn(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ln(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,Ia),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ia(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Zi=/[#\/\?@]/g,Sa=/[#\?:]/g,Pa=/[#\?]/g,$s=/[#\?@]/g,Ca=/#/g;function vi(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function tn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ta(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}t=vi.prototype,t.add=function(u,p){tn(this),this.i=null,u=ae(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function Aa(u,p){tn(u),p=ae(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Zs(u,p){return tn(u),p=ae(u,p),u.g.has(p)}t.forEach=function(u,p){tn(this),this.g.forEach(function(_,I){_.forEach(function(z){u.call(p,z,I,this)},this)},this)},t.na=function(){tn(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let I=0;I<p.length;I++){const z=u[I];for(let j=0;j<z.length;j++)_.push(p[I])}return _},t.V=function(u){tn(this);let p=[];if(typeof u=="string")Zs(this,u)&&(p=p.concat(this.g.get(ae(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)p=p.concat(u[_])}return p},t.set=function(u,p){return tn(this),this.i=null,u=ae(this,u),Zs(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Lu(u,p,_){Aa(u,p),0<_.length&&(u.i=null,u.g.set(ae(u,p),M(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var I=p[_];const j=encodeURIComponent(String(I)),J=this.V(I);for(I=0;I<J.length;I++){var z=j;J[I]!==""&&(z+="="+encodeURIComponent(String(J[I]))),u.push(z)}}return this.i=u.join("&")};function ae(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function mn(u,p){p&&!u.j&&(tn(u),u.i=null,u.g.forEach(function(_,I){var z=I.toLowerCase();I!=z&&(Aa(this,I),Lu(this,z,_))},u)),u.j=p}function De(u,p){const _=new $r;if(h.Image){const I=new Image;I.onload=b(gn,_,"TestLoadImage: loaded",!0,p,I),I.onerror=b(gn,_,"TestLoadImage: error",!1,p,I),I.onabort=b(gn,_,"TestLoadImage: abort",!1,p,I),I.ontimeout=b(gn,_,"TestLoadImage: timeout",!1,p,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else p(!1)}function Nu(u,p){const _=new $r,I=new AbortController,z=setTimeout(()=>{I.abort(),gn(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:I.signal}).then(j=>{clearTimeout(z),j.ok?gn(_,"TestPingServer: ok",!0,p):gn(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(z),gn(_,"TestPingServer: error",!1,p)})}function gn(u,p,_,I,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),I(_)}catch{}}function ka(){this.g=new Hr}function xa(u,p,_){const I=_||"";try{_e(u,function(z,j){let J=z;m(z)&&(J=Vs(z)),p.push(I+j+"="+encodeURIComponent(J))})}catch(z){throw p.push(I+"type="+encodeURIComponent("_badmap")),z}}function _n(u){this.l=u.Ub||null,this.j=u.eb||!1}V(_n,da),_n.prototype.g=function(){return new Gi(this.l,this.j)},_n.prototype.i=function(u){return function(){return u}}({});function Gi(u,p){rt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(Gi,rt),t=Gi.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,nn(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||h).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$e(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,nn(this)),this.g&&(this.readyState=3,nn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ki(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ki(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?$e(this):nn(this),this.readyState==3&&Ki(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,$e(this))},t.Qa=function(u){this.g&&(this.response=u,$e(this))},t.ga=function(){this.g&&$e(this)};function $e(u){u.readyState=4,u.l=null,u.j=null,u.v=null,nn(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function nn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Gi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ra(u){let p="";return K(u,function(_,I){p+=I,p+=":",p+=_,p+=`\r
`}),p}function Gs(u,p,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=Ra(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):fe(u,p,_))}function We(u){rt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(We,rt);var bu=/^https?$/i,La=["POST","PUT"];t=We.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():js.g(),this.v=this.o?Eu(this.o):Eu(js),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(j){Ou(this,j);return}if(u=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var z in I)_.set(z,I[z]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const j of I.keys())_.set(j,I.get(j));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(j=>j.toLowerCase()=="content-type"),z=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(La,p,void 0))||I||z||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,J]of _)this.g.setRequestHeader(j,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$t(this),this.u=!0,this.g.send(u),this.u=!1}catch(j){Ou(this,j)}};function Ou(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Na(u),Ks(u)}function Na(u){u.A||(u.A=!0,_t(u,"complete"),_t(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,_t(this,"complete"),_t(this,"abort"),Ks(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ks(this,!0)),We.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Te(this):this.bb())},t.bb=function(){Te(this)};function Te(u){if(u.h&&typeof l<"u"&&(!u.v[1]||Ut(u)!=4||u.Z()!=2)){if(u.u&&Ut(u)==4)yu(u.Ea,0,u);else if(_t(u,"readystatechange"),Ut(u)==4){u.h=!1;try{const J=u.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var I;if(I=J===0){var z=String(u.D).match(He)[1]||null;!z&&h.self&&h.self.location&&(z=h.self.location.protocol.slice(0,-1)),I=!bu.test(z?z.toLowerCase():"")}_=I}if(_)_t(u,"complete"),_t(u,"success");else{u.m=6;try{var j=2<Ut(u)?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.Z()+"]",Na(u)}}finally{Ks(u)}}}}function Ks(u,p){if(u.g){$t(u);const _=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||_t(u,"ready");try{_.onreadystatechange=I}catch{}}}function $t(u){u.I&&(h.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Ut(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Ut(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),gd(p)}};function ba(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function _d(u){const p={};u=(u.g&&2<=Ut(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(S(u[I]))continue;var _=k(u[I]);const z=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const j=p[z]||[];p[z]=j,j.push(_)}A(p,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yi(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function Du(u){this.Aa=0,this.i=[],this.j=new $r,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yi("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yi("baseRetryDelayMs",5e3,u),this.cb=yi("retryDelaySeedMs",1e4,u),this.Wa=yi("forwardChannelMaxRetries",2,u),this.wa=yi("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ya(u&&u.concurrentRequestLimit),this.Da=new ka,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Du.prototype,t.la=8,t.G=1,t.connect=function(u,p,_,I){It(0),this.W=u,this.H=p||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=no(this,null,this.W),Qi(this)};function Qs(u){if(Mu(u),u.G==3){var p=u.U++,_=Je(u.I);if(fe(_,"SID",u.K),fe(_,"RID",p),fe(_,"TYPE","terminate"),Xr(u,_),p=new xn(u,u.j,p),p.L=2,p.v=pn(Je(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&h.Image&&(new Image().src=p.v,_=!0),_||(p.g=Fu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Ws(p)}Vu(u)}function Ys(u){u.g&&(Js(u),u.g.cancel(),u.g=null)}function Mu(u){Ys(u),u.u&&(h.clearTimeout(u.u),u.u=null),to(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function Qi(u){if(!wa(u.h)&&!u.s){u.s=!0;var p=u.Ga;zt||X(),q||(zt(),q=!0),he.add(p,u),u.B=0}}function vd(u,p){return qi(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=qr(E(u.Ga,u,p),Ma(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const z=new xn(this,this.j,u);let j=this.o;if(this.S&&(j?(j=T(j),C(j,this.S)):j=this.S),this.m!==null||this.O||(z.H=j,j=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(p+=I,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=Oa(this,z,p),_=Je(this.I),fe(_,"RID",u),fe(_,"CVER",22),this.D&&fe(_,"X-HTTP-Session-Id",this.D),Xr(this,_),j&&(this.O?p="headers="+encodeURIComponent(String(Ra(j)))+"&"+p:this.m&&Gs(_,this.m,j)),Ve(this.h,z),this.Ua&&fe(_,"TYPE","init"),this.P?(fe(_,"$req",p),fe(_,"SID","null"),z.T=!0,ga(z,_,null)):ga(z,_,p),this.G=2}}else this.G==3&&(u?rn(this,u):this.i.length==0||wa(this.h)||rn(this))};function rn(u,p){var _;p?_=p.l:_=u.U++;const I=Je(u.I);fe(I,"SID",u.K),fe(I,"RID",_),fe(I,"AID",u.T),Xr(u,I),u.m&&u.o&&Gs(I,u.m,u.o),_=new xn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Oa(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ve(u.h,_),ga(_,I,p)}function Xr(u,p){u.H&&K(u.H,function(_,I){fe(p,I,_)}),u.l&&_e({},function(_,I){fe(p,I,_)})}function Oa(u,p,_){_=Math.min(u.i.length,_);var I=u.l?E(u.l.Na,u.l,u):null;e:{var z=u.i;let j=-1;for(;;){const J=["count="+_];j==-1?0<_?(j=z[0].g,J.push("ofs="+j)):j=0:J.push("ofs="+j);let be=!0;for(let st=0;st<_;st++){let ke=z[st].g;const Me=z[st].map;if(ke-=j,0>ke)j=Math.max(0,z[st].g-100),be=!1;else try{xa(Me,J,"req"+ke+"_")}catch{I&&I(Me)}}if(be){I=J.join("&");break e}}}return u=u.i.splice(0,_),p.D=u,I}function Nn(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;zt||X(),q||(zt(),q=!0),he.add(p,u),u.v=0}}function Xs(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=qr(E(u.Fa,u),Ma(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,eo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=qr(E(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),Ys(this),eo(this))};function Js(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function eo(u){u.g=new xn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Je(u.qa);fe(p,"RID","rpc"),fe(p,"SID",u.K),fe(p,"AID",u.T),fe(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&fe(p,"TO",u.ja),fe(p,"TYPE","xmlhttp"),Xr(u,p),u.m&&u.o&&Gs(p,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=pn(Je(p)),_.m=null,_.P=!0,_a(_,u)}t.Za=function(){this.C!=null&&(this.C=null,Ys(this),Xs(this),It(19))};function to(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Da(u,p){var _=null;if(u.g==p){to(u),Js(u),u.g=null;var I=2}else if(Pe(u.h,p))_=p.D,Yr(u.h,p),I=1;else return;if(u.G!=0){if(p.o)if(I==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var z=u.B;I=zs(),_t(I,new Su(I,_)),Qi(u)}else Nn(u);else if(z=p.s,z==3||z==0&&0<p.X||!(I==1&&vd(u,p)||I==2&&Xs(u)))switch(_&&0<_.length&&(p=u.h,p.i=p.i.concat(_)),z){case 1:wi(u,5);break;case 4:wi(u,10);break;case 3:wi(u,6);break;default:wi(u,2)}}}function Ma(u,p){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*p}function wi(u,p){if(u.j.info("Error code "+p),p==2){var _=E(u.fb,u),I=u.Xa;const z=!I;I=new fn(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||qs(I,"https"),pn(I),z?De(I.toString(),_):Nu(I.toString(),_)}else It(2);u.G=0,u.l&&u.l.sa(p),Vu(u),Mu(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Vu(u){if(u.G=0,u.ka=[],u.l){const p=gi(u.h);(p.length!=0||u.i.length!=0)&&(W(u.ka,p),W(u.ka,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.ra()}}function no(u,p,_){var I=_ instanceof fn?Je(_):new fn(_);if(I.g!="")p&&(I.g=p+"."+I.g),_i(I,I.s);else{var z=h.location;I=z.protocol,p=p?p+"."+z.hostname:z.hostname,z=+z.port;var j=new fn(null);I&&qs(j,I),p&&(j.g=p),z&&_i(j,z),_&&(j.l=_),I=j}return _=u.D,p=u.ya,_&&p&&fe(I,_,p),fe(I,"VER",u.la),Xr(u,I),I}function Fu(u,p,_){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new We(new _n({eb:_})):new We(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Va(){}t=Va.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Jr(){}Jr.prototype.g=function(u,p){return new vt(u,p)};function vt(u,p){rt.call(this),this.g=new Du(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!S(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!S(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new vn(this)}V(vt,rt),vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vt.prototype.close=function(){Qs(this.g)},vt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Vs(u),u=_);p.i.push(new Qr(p.Ya++,u)),p.G==3&&Qi(p)},vt.prototype.N=function(){this.g.l=null,delete this.j,Qs(this.g),delete this.g,vt.aa.N.call(this)};function $n(u){Fs.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}V($n,Fs);function zu(){pa.call(this),this.status=1}V(zu,pa);function vn(u){this.g=u}V(vn,Va),vn.prototype.ua=function(){_t(this.g,"a")},vn.prototype.ta=function(u){_t(this.g,new $n(u))},vn.prototype.sa=function(u){_t(this.g,new zu)},vn.prototype.ra=function(){_t(this.g,"b")},Jr.prototype.createWebChannel=Jr.prototype.g,vt.prototype.send=vt.prototype.o,vt.prototype.open=vt.prototype.m,vt.prototype.close=vt.prototype.close,ZE=function(){return new Jr},$E=function(){return zs()},qE=fi,hp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zr.NO_ERROR=0,Zr.TIMEOUT=8,Zr.HTTP_ERROR=6,Mc=Zr,Bs.COMPLETE="complete",WE=Bs,fa.EventType=Wi,Wi.OPEN="a",Wi.CLOSE="b",Wi.ERROR="c",Wi.MESSAGE="d",rt.prototype.listen=rt.prototype.K,nl=fa,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,HE=We}).apply(typeof mc<"u"?mc:typeof self<"u"?self:typeof window<"u"?window:{});const Rv="@firebase/firestore",Lv="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let na="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new xm("@firebase/firestore");function uo(){return ys.logLevel}function ne(t,...e){if(ys.logLevel<=Ce.DEBUG){const n=e.map(Um);ys.debug(`Firestore (${na}): ${t}`,...n)}}function zi(t,...e){if(ys.logLevel<=Ce.ERROR){const n=e.map(Um);ys.error(`Firestore (${na}): ${t}`,...n)}}function kr(t,...e){if(ys.logLevel<=Ce.WARN){const n=e.map(Um);ys.warn(`Firestore (${na}): ${t}`,...n)}}function Um(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,GE(t,i,n)}function GE(t,e,n){let i=`FIRESTORE (${na}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw zi(i),new Error(i)}function Ne(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||GE(e,s,i)}function ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends hi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class Rx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Lx{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ne(this.o===void 0,42304);let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Ir;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ir,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ir)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ne(typeof i.accessToken=="string",31837,{l:i}),new KE(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string",2055,{h:e}),new Ot(e)}}class Nx{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bx{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new Nx(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Nv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ox{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,on(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ne(this.o===void 0,3512);const i=o=>{o.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ne("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Nv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ne(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Nv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=Dx(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=e.charAt(s[o]%62))}return i}}function ye(t,e){return t<e?-1:t>e?1:0}function dp(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),s=e.codePointAt(n);if(i!==s){if(i<128&&s<128)return ye(i,s);{const o=QE(),l=Mx(o.encode(bv(t,n)),o.encode(bv(e,n)));return l!==0?l:ye(i,s)}}n+=i>65535?2:1}return ye(t.length,e.length)}function bv(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Mx(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ye(t[n],e[n]);return ye(t.length,e.length)}function qo(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="__name__";class Yn{constructor(e,n,i){n===void 0?n=0:n>e.length&&ce(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&ce(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Yn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Yn?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const o=Yn.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return ye(e.length,n.length)}static compareSegments(e,n){const i=Yn.isNumericId(e),s=Yn.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Yn.extractNumericId(e).compare(Yn.extractNumericId(n)):dp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Tr.fromString(e.substring(4,e.length-2))}}class Ke extends Yn{construct(e,n,i){return new Ke(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new se(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Ke(n)}static emptyPath(){return new Ke([])}}const Vx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends Yn{construct(e,n,i){return new Ct(e,n,i)}static isValidIdentifier(e){return Vx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ov}static keyField(){return new Ct([Ov])}static fromServerFormat(e){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new se(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new se(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new se(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(i+=h,s++):(o(),s++)}if(o(),l)throw new se(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(n)}static emptyPath(){return new Ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Ke.fromString(e))}static fromName(e){return new oe(Ke.fromString(e).popFirst(5))}static empty(){return new oe(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Ke(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(t,e,n){if(!n)throw new se(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function zx(t,e,n,i){if(e===!0&&i===!0)throw new se(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Dv(t){if(!oe.isDocumentKey(t))throw new se(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function YE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function jm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ce(12329,{type:typeof t})}function Sr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jm(t);throw new se(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(t,e){const n={typeString:t};return e&&(n.value=e),n}function lu(t,e){if(!YE(t))throw new se(G.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(s&&typeof l!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new se(G.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=-62135596800,Vv=1e6;class Ue{static now(){return Ue.fromMillis(Date.now())}static fromDate(e){return Ue.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Vv);return new Ue(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Mv)throw new se(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vv}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ue._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(lu(e,Ue._jsonSchema))return new Ue(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Mv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ue._jsonSchemaVersion="firestore/timestamp/1.0",Ue._jsonSchema={type:ut("string",Ue._jsonSchemaVersion),seconds:ut("number"),nanoseconds:ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{static fromTimestamp(e){return new pe(e)}static min(){return new pe(new Ue(0,0))}static max(){return new pe(new Ue(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=-1;function Ux(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=pe.fromTimestamp(i===1e9?new Ue(n+1,0):new Ue(n,i));return new xr(s,oe.empty(),e)}function Bx(t){return new xr(t.readTime,t.key,Hl)}class xr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new xr(pe.min(),oe.empty(),Hl)}static max(){return new xr(pe.max(),oe.empty(),Hl)}}function jx(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Wx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ia(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==Hx)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,i)=>{n(e)})}static reject(e){return new $((n,i)=>{i(e)})}static waitFor(e){return new $((n,i)=>{let s=0,o=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++o,l&&o===s&&n()},d=>i(d))}),l=!0,o===s&&n()})}static or(e){let n=$.resolve(!1);for(const i of e)n=n.next(s=>s?$.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,o)=>{i.push(n.call(this,s,o))}),this.waitFor(i)}static mapArray(e,n){return new $((i,s)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const m=d;n(e[m]).next(v=>{l[m]=v,++h,h===o&&i(l)},v=>s(v))}})}static doWhile(e,n){return new $((i,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):i()};o()})}}function qx(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ra(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}nd.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm=-1;function id(t){return t==null}function wh(t){return t===0&&1/t==-1/0}function $x(t){return typeof t=="number"&&Number.isInteger(t)&&!wh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="";function Zx(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Fv(e)),e=Gx(t.get(n),e);return Fv(e)}function Gx(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case XE:n+="";break;default:n+=o}}return n}function Fv(t){return t+XE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function As(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function JE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.comparator=e,this.root=n||Pt.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gc(this.root,e,this.comparator,!1)}getReverseIterator(){return new gc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gc(this.root,e,this.comparator,!0)}}class gc{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,n,i,s,o){this.key=e,this.value=n,this.color=i??Pt.RED,this.left=s??Pt.EMPTY,this.right=o??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,o){return new Pt(e??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Pt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ce(27949);return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw ce(57766)}get value(){throw ce(16141)}get color(){throw ce(16727)}get left(){throw ce(29726)}get right(){throw ce(36894)}copy(e,n,i,s,o){return this}insert(e,n,i){return new Pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Uv(this.data.getIterator())}getIteratorFrom(e){return new Uv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new gt(this.comparator);return n.data=e,n}}class Uv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new Fn([])}unionWith(e){let n=new gt(Ct.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Fn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qo(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new eT("Invalid base64 string: "+o):o}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const Kx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rr(t){if(Ne(!!t,39018),typeof t=="string"){let e=0;const n=Kx.exec(t);if(Ne(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Lr(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="server_timestamp",nT="__type__",iT="__previous_value__",rT="__local_write_time__";function Wm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[nT])===null||n===void 0?void 0:n.stringValue)===tT}function rd(t){const e=t.mapValue.fields[iT];return Wm(e)?rd(e):e}function Wl(t){const e=Rr(t.mapValue.fields[rT].timestampValue);return new Ue(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,n,i,s,o,l,h,d,m,v){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m,this.isUsingEmulator=v}}const Eh="(default)";class ql{constructor(e,n){this.projectId=e,this.database=n||Eh}static empty(){return new ql("","")}get isDefaultDatabase(){return this.database===Eh}isEqual(e){return e instanceof ql&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="__type__",Yx="__max__",_c={mapValue:{}},oT="__vector__",Th="value";function Nr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wm(t)?4:Jx(t)?9007199254740991:Xx(t)?10:11:ce(28295,{value:t})}function ui(t,e){if(t===e)return!0;const n=Nr(t);if(n!==Nr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wl(t).isEqual(Wl(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Rr(s.timestampValue),h=Rr(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Lr(s.bytesValue).isEqual(Lr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return nt(s.geoPointValue.latitude)===nt(o.geoPointValue.latitude)&&nt(s.geoPointValue.longitude)===nt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return nt(s.integerValue)===nt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=nt(s.doubleValue),h=nt(o.doubleValue);return l===h?wh(l)===wh(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return qo(t.arrayValue.values||[],e.arrayValue.values||[],ui);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(zv(l)!==zv(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!ui(l[d],h[d])))return!1;return!0}(t,e);default:return ce(52216,{left:t})}}function $l(t,e){return(t.values||[]).find(n=>ui(n,e))!==void 0}function $o(t,e){if(t===e)return 0;const n=Nr(t),i=Nr(e);if(n!==i)return ye(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=nt(o.integerValue||o.doubleValue),d=nt(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return Bv(t.timestampValue,e.timestampValue);case 4:return Bv(Wl(t),Wl(e));case 5:return dp(t.stringValue,e.stringValue);case 6:return function(o,l){const h=Lr(o),d=Lr(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let m=0;m<h.length&&m<d.length;m++){const v=ye(h[m],d[m]);if(v!==0)return v}return ye(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=ye(nt(o.latitude),nt(l.latitude));return h!==0?h:ye(nt(o.longitude),nt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return jv(t.arrayValue,e.arrayValue);case 10:return function(o,l){var h,d,m,v;const y=o.fields||{},E=l.fields||{},b=(h=y[Th])===null||h===void 0?void 0:h.arrayValue,V=(d=E[Th])===null||d===void 0?void 0:d.arrayValue,M=ye(((m=b==null?void 0:b.values)===null||m===void 0?void 0:m.length)||0,((v=V==null?void 0:V.values)===null||v===void 0?void 0:v.length)||0);return M!==0?M:jv(b,V)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===_c.mapValue&&l===_c.mapValue)return 0;if(o===_c.mapValue)return 1;if(l===_c.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),m=l.fields||{},v=Object.keys(m);d.sort(),v.sort();for(let y=0;y<d.length&&y<v.length;++y){const E=dp(d[y],v[y]);if(E!==0)return E;const b=$o(h[d[y]],m[v[y]]);if(b!==0)return b}return ye(d.length,v.length)}(t.mapValue,e.mapValue);default:throw ce(23264,{le:n})}}function Bv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);const n=Rr(t),i=Rr(e),s=ye(n.seconds,i.seconds);return s!==0?s:ye(n.nanos,i.nanos)}function jv(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const o=$o(n[s],i[s]);if(o)return o}return ye(n.length,i.length)}function Zo(t){return fp(t)}function fp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Rr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Lr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=fp(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${fp(n.fields[l])}`;return s+"}"}(t.mapValue):ce(61005,{value:t})}function Vc(t){switch(Nr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rd(t);return e?16+Vc(e):16;case 5:return 2*t.stringValue.length;case 6:return Lr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,o)=>s+Vc(o),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return As(i.fields,(o,l)=>{s+=o.length+Vc(l)}),s}(t.mapValue);default:throw ce(13486,{value:t})}}function pp(t){return!!t&&"integerValue"in t}function qm(t){return!!t&&"arrayValue"in t}function Hv(t){return!!t&&"nullValue"in t}function Wv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fc(t){return!!t&&"mapValue"in t}function Xx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[sT])===null||n===void 0?void 0:n.stringValue)===oT}function _l(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return As(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=_l(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_l(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Jx(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Yx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Fc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_l(n)}setAll(e){let n=Ct.emptyPath(),i={},s=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=h.popLast()}l?i[h.lastSegment()]=_l(l):s.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(e){const n=this.field(e.popLast());Fc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ui(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];Fc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){As(n,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new Tn(_l(this.value))}}function aT(t){const e=[];return As(t.fields,(n,i)=>{const s=new Ct([n]);if(Fc(i)){const o=aT(i.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new Fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n,i,s,o,l,h){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Mt(e,0,pe.min(),pe.min(),pe.min(),Tn.empty(),0)}static newFoundDocument(e,n,i,s){return new Mt(e,1,n,pe.min(),i,s,0)}static newNoDocument(e,n){return new Mt(e,2,n,pe.min(),pe.min(),Tn.empty(),0)}static newUnknownDocument(e,n){return new Mt(e,3,n,pe.min(),pe.min(),Tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n){this.position=e,this.inclusive=n}}function qv(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?i=oe.comparator(oe.fromName(l.referenceValue),n.key):i=$o(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function $v(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ui(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n="asc"){this.field=e,this.dir=n}}function eR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{}class ft extends lT{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new nR(e,n,i):n==="array-contains"?new sR(e,i):n==="in"?new oR(e,i):n==="not-in"?new aR(e,i):n==="array-contains-any"?new lR(e,i):new ft(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new iR(e,i):new rR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison($o(n,this.value)):n!==null&&Nr(this.value)===Nr(n)&&this.matchesComparison($o(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ci extends lT{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new ci(e,n)}matches(e){return uT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function uT(t){return t.op==="and"}function cT(t){return tR(t)&&uT(t)}function tR(t){for(const e of t.filters)if(e instanceof ci)return!1;return!0}function mp(t){if(t instanceof ft)return t.field.canonicalString()+t.op.toString()+Zo(t.value);if(cT(t))return t.filters.map(e=>mp(e)).join(",");{const e=t.filters.map(n=>mp(n)).join(",");return`${t.op}(${e})`}}function hT(t,e){return t instanceof ft?function(i,s){return s instanceof ft&&i.op===s.op&&i.field.isEqual(s.field)&&ui(i.value,s.value)}(t,e):t instanceof ci?function(i,s){return s instanceof ci&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,l,h)=>o&&hT(l,s.filters[h]),!0):!1}(t,e):void ce(19439)}function dT(t){return t instanceof ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Zo(n.value)}`}(t):t instanceof ci?function(n){return n.op.toString()+" {"+n.getFilters().map(dT).join(" ,")+"}"}(t):"Filter"}class nR extends ft{constructor(e,n,i){super(e,n,i),this.key=oe.fromName(i.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class iR extends ft{constructor(e,n){super(e,"in",n),this.keys=fT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class rR extends ft{constructor(e,n){super(e,"not-in",n),this.keys=fT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function fT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>oe.fromName(i.referenceValue))}class sR extends ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qm(n)&&$l(n.arrayValue,this.value)}}class oR extends ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$l(this.value.arrayValue,n)}}class aR extends ft{constructor(e,n){super(e,"not-in",n)}matches(e){if($l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!$l(this.value.arrayValue,n)}}class lR extends ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>$l(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,n=null,i=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.Pe=null}}function Zv(t,e=null,n=[],i=[],s=null,o=null,l=null){return new uR(t,e,n,i,s,o,l)}function $m(t){const e=ge(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>mp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),id(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Zo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Zo(i)).join(",")),e.Pe=n}return e.Pe}function Zm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!eR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$v(t.startAt,e.startAt)&&$v(t.endAt,e.endAt)}function gp(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n=null,i=[],s=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function cR(t,e,n,i,s,o,l,h){return new sd(t,e,n,i,s,o,l,h)}function od(t){return new sd(t)}function Gv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function hR(t){return t.collectionGroup!==null}function vl(t){const e=ge(t);if(e.Te===null){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new gt(Ct.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Sh(o,i))}),n.has(Ct.keyField().canonicalString())||e.Te.push(new Sh(Ct.keyField(),i))}return e.Te}function si(t){const e=ge(t);return e.Ie||(e.Ie=dR(e,vl(t))),e.Ie}function dR(t,e){if(t.limitType==="F")return Zv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Sh(s.field,o)});const n=t.endAt?new Ih(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ih(t.startAt.position,t.startAt.inclusive):null;return Zv(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function _p(t,e,n){return new sd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ad(t,e){return Zm(si(t),si(e))&&t.limitType===e.limitType}function pT(t){return`${$m(si(t))}|lt:${t.limitType}`}function co(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>dT(s)).join(", ")}]`),id(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>Zo(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>Zo(s)).join(",")),`Target(${i})`}(si(t))}; limitType=${t.limitType})`}function ld(t,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):oe.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,s){for(const o of vl(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(l,h,d){const m=qv(l,h,d);return l.inclusive?m<=0:m<0}(i.startAt,vl(i),s)||i.endAt&&!function(l,h,d){const m=qv(l,h,d);return l.inclusive?m>=0:m>0}(i.endAt,vl(i),s))}(t,e)}function fR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mT(t){return(e,n)=>{let i=!1;for(const s of vl(t)){const o=pR(s,e,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function pR(t,e,n){const i=t.field.isKeyField()?oe.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),m=h.data.field(o);return d!==null&&m!==null?$o(d,m):ce(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ce(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){As(this.inner,(n,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return JE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=new Xe(oe.comparator);function Ui(){return mR}const gT=new Xe(oe.comparator);function il(...t){let e=gT;for(const n of t)e=e.insert(n.key,n);return e}function _T(t){let e=gT;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function os(){return yl()}function vT(){return yl()}function yl(){return new ks(t=>t.toString(),(t,e)=>t.isEqual(e))}const gR=new Xe(oe.comparator),_R=new gt(oe.comparator);function Ae(...t){let e=_R;for(const n of t)e=e.add(n);return e}const vR=new gt(ye);function yR(){return vR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wh(e)?"-0":e}}function yT(t){return{integerValue:""+t}}function wR(t,e){return $x(e)?yT(e):Gm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(){this._=void 0}}function ER(t,e,n){return t instanceof Ph?function(s,o){const l={fields:{[nT]:{stringValue:tT},[rT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Wm(o)&&(o=rd(o)),o&&(l.fields[iT]=o),{mapValue:l}}(n,e):t instanceof Zl?ET(t,e):t instanceof Gl?TT(t,e):function(s,o){const l=wT(s,o),h=Kv(l)+Kv(s.Ee);return pp(l)&&pp(s.Ee)?yT(h):Gm(s.serializer,h)}(t,e)}function TR(t,e,n){return t instanceof Zl?ET(t,e):t instanceof Gl?TT(t,e):n}function wT(t,e){return t instanceof Ch?function(i){return pp(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Ph extends ud{}class Zl extends ud{constructor(e){super(),this.elements=e}}function ET(t,e){const n=IT(e);for(const i of t.elements)n.some(s=>ui(s,i))||n.push(i);return{arrayValue:{values:n}}}class Gl extends ud{constructor(e){super(),this.elements=e}}function TT(t,e){let n=IT(e);for(const i of t.elements)n=n.filter(s=>!ui(s,i));return{arrayValue:{values:n}}}class Ch extends ud{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Kv(t){return nt(t.integerValue||t.doubleValue)}function IT(t){return qm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function IR(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Zl&&s instanceof Zl||i instanceof Gl&&s instanceof Gl?qo(i.elements,s.elements,ui):i instanceof Ch&&s instanceof Ch?ui(i.Ee,s.Ee):i instanceof Ph&&s instanceof Ph}(t.transform,e.transform)}class SR{constructor(e,n){this.version=e,this.transformResults=n}}class Ni{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ni}static exists(e){return new Ni(void 0,e)}static updateTime(e){return new Ni(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class cd{}function ST(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new CT(t.key,Ni.none()):new uu(t.key,t.data,Ni.none());{const n=t.data,i=Tn.empty();let s=new gt(Ct.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new xs(t.key,i,new Fn(s.toArray()),Ni.none())}}function PR(t,e,n){t instanceof uu?function(s,o,l){const h=s.value.clone(),d=Yv(s.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof xs?function(s,o,l){if(!zc(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=Yv(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(PT(s)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function wl(t,e,n,i){return t instanceof uu?function(o,l,h,d){if(!zc(o.precondition,l))return h;const m=o.value.clone(),v=Xv(o.fieldTransforms,d,l);return m.setAll(v),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null}(t,e,n,i):t instanceof xs?function(o,l,h,d){if(!zc(o.precondition,l))return h;const m=Xv(o.fieldTransforms,d,l),v=l.data;return v.setAll(PT(o)),v.setAll(m),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,i):function(o,l,h){return zc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function CR(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),o=wT(i.transform,s||null);o!=null&&(n===null&&(n=Tn.empty()),n.set(i.field,o))}return n||null}function Qv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&qo(i,s,(o,l)=>IR(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class uu extends cd{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class xs extends cd{constructor(e,n,i,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function PT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Yv(t,e,n){const i=new Map;Ne(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,h=e.data.field(o.field);i.set(o.field,TR(l,h,n[s]))}return i}function Xv(t,e,n){const i=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);i.set(s.field,ER(o,l,e))}return i}class CT extends cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AR extends cd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&PR(o,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=wl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=wl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=vT();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(s.key)?null:h;const d=ST(l,h);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(pe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&qo(this.mutations,e.mutations,(n,i)=>Qv(n,i))&&qo(this.baseMutations,e.baseMutations,(n,i)=>Qv(n,i))}}class Km{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Ne(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let s=function(){return gR}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new Km(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,xe;function LR(t){switch(t){case G.OK:return ce(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return ce(15467,{code:t})}}function AT(t){if(t===void 0)return zi("GRPC error has no .code"),G.UNKNOWN;switch(t){case at.OK:return G.OK;case at.CANCELLED:return G.CANCELLED;case at.UNKNOWN:return G.UNKNOWN;case at.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case at.INTERNAL:return G.INTERNAL;case at.UNAVAILABLE:return G.UNAVAILABLE;case at.UNAUTHENTICATED:return G.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case at.NOT_FOUND:return G.NOT_FOUND;case at.ALREADY_EXISTS:return G.ALREADY_EXISTS;case at.PERMISSION_DENIED:return G.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case at.ABORTED:return G.ABORTED;case at.OUT_OF_RANGE:return G.OUT_OF_RANGE;case at.UNIMPLEMENTED:return G.UNIMPLEMENTED;case at.DATA_LOSS:return G.DATA_LOSS;default:return ce(39323,{code:t})}}(xe=at||(at={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=new Tr([4294967295,4294967295],0);function Jv(t){const e=QE().encode(t),n=new jE;return n.update(e),new Uint8Array(n.digest())}function ey(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Tr([n,i],0),new Tr([s,o],0)]}class Qm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new rl(`Invalid padding: ${n}`);if(i<0)throw new rl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new rl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new rl(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Tr.fromNumber(this.fe)}pe(e,n,i){let s=e.add(n.multiply(Tr.fromNumber(i)));return s.compare(NR)===1&&(s=new Tr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Jv(e),[i,s]=ey(n);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,s,o);if(!this.ye(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Qm(o,s,n);return i.forEach(h=>l.insert(h)),l}insert(e){if(this.fe===0)return;const n=Jv(e),[i,s]=ey(n);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,s,o);this.we(l)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n,i,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,cu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new hd(pe.min(),s,new Xe(ye),Ui(),Ae())}}class cu{constructor(e,n,i,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new cu(i,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,n,i,s){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=s}}class kT{constructor(e,n){this.targetId=e,this.De=n}}class xT{constructor(e,n,i=Rt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class ty{constructor(){this.ve=0,this.Ce=ny(),this.Fe=Rt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ae(),n=Ae(),i=Ae();return this.Ce.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:ce(38017,{changeType:o})}}),new cu(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=ny()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ne(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class bR{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ui(),this.je=vc(),this.Je=vc(),this.He=new Xe(ye)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:ce(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((i,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,i=e.De.count,s=this.st(n);if(s){const o=s.target;if(gp(o))if(i===0){const l=new oe(o.path);this.Xe(n,l,Mt.newNoDocument(l,pe.min()))}else Ne(i===1,20013,{expectedCount:i});else{const l=this.ot(n);if(l!==i){const h=this._t(e),d=h?this.ut(h,e,l):1;if(d!==0){this.rt(n);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,m)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let l,h;try{l=Lr(i).toUint8Array()}catch(d){if(d instanceof eT)return kr("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new Qm(l,s,o)}catch(d){return kr(d instanceof rl?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.fe===0?null:h}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let s=0;return i.forEach(o=>{const l=this.We.lt(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.Xe(n,o,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((o,l)=>{const h=this.st(l);if(h){if(o.current&&gp(h.target)){const d=new oe(h.target.path);this.Tt(d).has(l)||this.It(l,d)||this.Xe(l,d,Mt.newNoDocument(d,e))}o.Ne&&(n.set(l,o.Le()),o.ke())}});let i=Ae();this.Je.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const m=this.st(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.ze.forEach((o,l)=>l.setReadTime(e));const s=new hd(e,n,this.He,this.ze,i);return this.ze=Ui(),this.je=vc(),this.Je=vc(),this.He=new Xe(ye),s}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new ty,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new gt(ye),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new gt(ye),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new ty),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function vc(){return new Xe(oe.comparator)}function ny(){return new Xe(oe.comparator)}const OR={asc:"ASCENDING",desc:"DESCENDING"},DR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MR={and:"AND",or:"OR"};class VR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vp(t,e){return t.useProto3Json||id(e)?e:{value:e}}function Ah(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function FR(t,e){return Ah(t,e.toTimestamp())}function oi(t){return Ne(!!t,49232),pe.fromTimestamp(function(n){const i=Rr(n);return new Ue(i.seconds,i.nanos)}(t))}function Ym(t,e){return yp(t,e).canonicalString()}function yp(t,e){const n=function(s){return new Ke(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function LT(t){const e=Ke.fromString(t);return Ne(MT(e),10190,{key:e.toString()}),e}function wp(t,e){return Ym(t.databaseId,e.path)}function rf(t,e){const n=LT(e);if(n.get(1)!==t.databaseId.projectId)throw new se(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(bT(n))}function NT(t,e){return Ym(t.databaseId,e)}function zR(t){const e=LT(t);return e.length===4?Ke.emptyPath():bT(e)}function Ep(t){return new Ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bT(t){return Ne(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function iy(t,e,n){return{name:wp(t,e),fields:n.value.mapValue.fields}}function UR(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:ce(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(m,v){return m.useProto3Json?(Ne(v===void 0||typeof v=="string",58123),Rt.fromBase64String(v||"")):(Ne(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Rt.fromUint8Array(v||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(m){const v=m.code===void 0?G.UNKNOWN:AT(m.code);return new se(v,m.message||"")}(l);n=new xT(i,s,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=rf(t,i.document.name),o=oi(i.document.updateTime),l=i.document.createTime?oi(i.document.createTime):pe.min(),h=new Tn({mapValue:{fields:i.document.fields}}),d=Mt.newFoundDocument(s,o,l,h),m=i.targetIds||[],v=i.removedTargetIds||[];n=new Uc(m,v,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=rf(t,i.document),o=i.readTime?oi(i.readTime):pe.min(),l=Mt.newNoDocument(s,o),h=i.removedTargetIds||[];n=new Uc([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=rf(t,i.document),o=i.removedTargetIds||[];n=new Uc([],o,s,null)}else{if(!("filter"in e))return ce(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new RR(s,o),h=i.targetId;n=new kT(h,l)}}return n}function BR(t,e){let n;if(e instanceof uu)n={update:iy(t,e.key,e.value)};else if(e instanceof CT)n={delete:wp(t,e.key)};else if(e instanceof xs)n={update:iy(t,e.key,e.data),updateMask:QR(e.fieldMask)};else{if(!(e instanceof AR))return ce(16599,{Rt:e.type});n={verify:wp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,l){const h=l.transform;if(h instanceof Ph)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Zl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Gl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Ch)return{fieldPath:l.field.canonicalString(),increment:h.Ee};throw ce(20930,{transform:l.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:FR(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ce(27497)}(t,e.precondition)),n}function jR(t,e){return t&&t.length>0?(Ne(e!==void 0,14353),t.map(n=>function(s,o){let l=s.updateTime?oi(s.updateTime):oi(o);return l.isEqual(pe.min())&&(l=oi(o)),new SR(l,s.transformResults||[])}(n,e))):[]}function HR(t,e){return{documents:[NT(t,e.path)]}}function WR(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=NT(t,s);const o=function(m){if(m.length!==0)return DT(ci.create(m,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(m){if(m.length!==0)return m.map(v=>function(E){return{field:ho(E.field),direction:ZR(E.dir)}}(v))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=vp(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{Vt:n,parent:s}}function qR(t){let e=zR(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Ne(i===1,65062);const v=n.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let o=[];n.where&&(o=function(y){const E=OT(y);return E instanceof ci&&cT(E)?E.getFilters():[E]}(n.where));let l=[];n.orderBy&&(l=function(y){return y.map(E=>function(V){return new Sh(fo(V.field),function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(E))}(n.orderBy));let h=null;n.limit&&(h=function(y){let E;return E=typeof y=="object"?y.value:y,id(E)?null:E}(n.limit));let d=null;n.startAt&&(d=function(y){const E=!!y.before,b=y.values||[];return new Ih(b,E)}(n.startAt));let m=null;return n.endAt&&(m=function(y){const E=!y.before,b=y.values||[];return new Ih(b,E)}(n.endAt)),cR(e,s,l,o,h,"F",d,m)}function $R(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ce(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function OT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=fo(n.unaryFilter.field);return ft.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=fo(n.unaryFilter.field);return ft.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=fo(n.unaryFilter.field);return ft.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=fo(n.unaryFilter.field);return ft.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ce(61313);default:return ce(60726)}}(t):t.fieldFilter!==void 0?function(n){return ft.create(fo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ce(58110);default:return ce(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ci.create(n.compositeFilter.filters.map(i=>OT(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ce(1026)}}(n.compositeFilter.op))}(t):ce(30097,{filter:t})}function ZR(t){return OR[t]}function GR(t){return DR[t]}function KR(t){return MR[t]}function ho(t){return{fieldPath:t.canonicalString()}}function fo(t){return Ct.fromServerFormat(t.fieldPath)}function DT(t){return t instanceof ft?function(n){if(n.op==="=="){if(Wv(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NAN"}};if(Hv(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Wv(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NOT_NAN"}};if(Hv(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ho(n.field),op:GR(n.op),value:n.value}}}(t):t instanceof ci?function(n){const i=n.getFilters().map(s=>DT(s));return i.length===1?i[0]:{compositeFilter:{op:KR(n.op),filters:i}}}(t):ce(54877,{filter:t})}function QR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function MT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n,i,s,o=pe.min(),l=pe.min(),h=Rt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.gt=e}}function XR(t){const e=qR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_p(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(){this.Dn=new eL}addToCollectionParentIndex(e,n){return this.Dn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(xr.min())}updateCollectionGroup(e,n,i){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class eL{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new gt(Ke.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new gt(Ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VT=41943040;class Gt{static withCacheSize(e){return new Gt(e,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gt.DEFAULT_COLLECTION_PERCENTILE=10,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gt.DEFAULT=new Gt(VT,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gt.DISABLED=new Gt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Go(0)}static ur(){return new Go(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="LruGarbageCollector",tL=1048576;function oy([t,e],[n,i]){const s=ye(t,n);return s===0?ye(e,i):s}class nL{constructor(e){this.Tr=e,this.buffer=new gt(oy),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();oy(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class iL{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ne(sy,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ra(n)?ne(sy,"Ignoring IndexedDB error during garbage collection: ",n):await ia(n)}await this.Rr(3e5)})}}class rL{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return $.resolve(nd.ue);const i=new nL(n);return this.Vr.forEachTarget(e,s=>i.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>i.Er(s))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(ry)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ry):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,s,o,l,h,d,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,l=Date.now(),this.nthSequenceNumber(e,s))).next(y=>(i=y,h=Date.now(),this.removeTargets(e,i,n))).next(y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,i))).next(y=>(m=Date.now(),uo()<=Ce.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-v}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${o} targets in `+(d-h)+`ms
	Removed ${y} documents in `+(m-d)+`ms
Total Duration: ${m-v}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y})))}}function sL(t,e){return new rL(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(){this.changes=new ks(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?$.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&wl(i.mutation,s,Fn.empty(),Ue.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Ae()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Ae()){const s=os();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(o=>{let l=il();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=os();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Ae()))}populateOverlays(e,n,i){const s=[];return i.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,i,s){let o=Ui();const l=yl(),h=function(){return yl()}();return n.forEach((d,m)=>{const v=i.get(m.key);s.has(m.key)&&(v===void 0||v.mutation instanceof xs)?o=o.insert(m.key,m):v!==void 0?(l.set(m.key,v.mutation.getFieldMask()),wl(v.mutation,m,v.mutation.getFieldMask(),Ue.now())):l.set(m.key,Fn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((m,v)=>l.set(m,v)),n.forEach((m,v)=>{var y;return h.set(m,new aL(v,(y=l.get(m))!==null&&y!==void 0?y:null))}),h))}recalculateAndSaveOverlays(e,n){const i=yl();let s=new Xe((l,h)=>l-h),o=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const m=n.get(d);if(m===null)return;let v=i.get(d)||Fn.empty();v=h.applyToLocalView(m,v),i.set(d,v);const y=(s.get(h.batchId)||Ae()).add(d);s=s.insert(h.batchId,y)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),m=d.key,v=d.value,y=vT();v.forEach(E=>{if(!o.has(E)){const b=ST(n.get(E),i.get(E));b!==null&&y.set(E,b),o=o.add(E)}}),l.push(this.documentOverlayCache.saveOverlays(e,m,y))}return $.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(l){return oe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):hR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-o.size):$.resolve(os());let h=Hl,d=o;return l.next(m=>$.forEach(m,(v,y)=>(h<y.largestBatchId&&(h=y.largestBatchId),o.get(v)?$.resolve():this.remoteDocumentCache.getEntry(e,v).next(E=>{d=d.insert(v,E)}))).next(()=>this.populateOverlays(e,m,o)).next(()=>this.computeViews(e,d,m,Ae())).next(v=>({batchId:h,changes:_T(v)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(i=>{let s=il();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const o=n.collectionGroup;let l=il();return this.indexManager.getCollectionParents(e,o).next(h=>$.forEach(h,d=>{const m=function(y,E){return new sd(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,i,s).next(v=>{v.forEach((y,E)=>{l=l.insert(y,E)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,s))).next(l=>{o.forEach((d,m)=>{const v=m.getKey();l.get(v)===null&&(l=l.insert(v,Mt.newInvalidDocument(v)))});let h=il();return l.forEach((d,m)=>{const v=o.get(d);v!==void 0&&wl(v.mutation,m,Fn.empty(),Ue.now()),ld(n,m)&&(h=h.insert(d,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return $.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:oi(s.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:XR(s.bundledQuery),readTime:oi(s.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(){this.overlays=new Xe(oe.comparator),this.kr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const i=os();return $.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,o)=>{this.wt(e,n,o)}),$.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.kr.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(i)),$.resolve()}getOverlaysForCollection(e,n,i){const s=os(),o=n.length+1,l=new oe(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,m=d.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return $.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let o=new Xe((m,v)=>m-v);const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>i){let v=o.get(m.largestBatchId);v===null&&(v=os(),o=o.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const h=os(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((m,v)=>h.set(m,v)),!(h.size()>=s)););return $.resolve(h)}wt(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.kr.get(s.largestBatchId).delete(i.key);this.kr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new xR(n,i));let o=this.kr.get(n);o===void 0&&(o=Ae(),this.kr.set(n,o)),this.kr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(){this.qr=new gt(wt.Qr),this.$r=new gt(wt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new wt(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Wr(new wt(e,n))}Gr(e,n){e.forEach(i=>this.removeReference(i,n))}zr(e){const n=new oe(new Ke([])),i=new wt(n,e),s=new wt(n,e+1),o=[];return this.$r.forEachInRange([i,s],l=>{this.Wr(l),o.push(l.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new oe(new Ke([])),i=new wt(n,e),s=new wt(n,e+1);let o=Ae();return this.$r.forEachInRange([i,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new wt(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class wt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return oe.comparator(e.key,n.key)||ye(e.Hr,n.Hr)}static Ur(e,n){return ye(e.Hr,n.Hr)||oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new gt(wt.Qr)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new kR(o,n,i,s);this.mutationQueue.push(l);for(const h of s)this.Yr=this.Yr.add(new wt(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return $.resolve(l)}lookupMutationBatch(e,n){return $.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.Xr(i),o=s<0?0:s;return $.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Hm:this.er-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new wt(n,0),s=new wt(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([i,s],l=>{const h=this.Zr(l.Hr);o.push(h)}),$.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new gt(ye);return n.forEach(s=>{const o=new wt(s,0),l=new wt(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,l],h=>{i=i.add(h.Hr)})}),$.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let o=i;oe.isDocumentKey(o)||(o=o.child(""));const l=new wt(new oe(o),0);let h=new gt(ye);return this.Yr.forEachWhile(d=>{const m=d.key.path;return!!i.isPrefixOf(m)&&(m.length===s&&(h=h.add(d.Hr)),!0)},l),$.resolve(this.ei(h))}ei(e){const n=[];return e.forEach(i=>{const s=this.Zr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ne(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return $.forEach(n.mutations,s=>{const o=new wt(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,n){const i=new wt(n,0),s=this.Yr.firstAfterOrEqual(i);return $.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e){this.ni=e,this.docs=function(){return new Xe(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,l=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return $.resolve(i?i.document.mutableCopy():Mt.newInvalidDocument(n))}getEntries(e,n){let i=Ui();return n.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Mt.newInvalidDocument(s))}),$.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let o=Ui();const l=n.path,h=new oe(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:m,value:{document:v}}=d.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||jx(Bx(v),i)<=0||(s.has(v.key)||ld(n,v))&&(o=o.insert(v.key,v.mutableCopy()))}return $.resolve(o)}getAllFromCollectionGroup(e,n,i,s){ce(9500)}ri(e,n){return $.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new pL(this)}getSize(e){return $.resolve(this.size)}}class pL extends oL{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(i)}),$.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e){this.persistence=e,this.ii=new ks(n=>$m(n),Zm),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.si=0,this.oi=new Xm,this.targetCount=0,this._i=Go.ar()}forEachTarget(e,n){return this.ii.forEach((i,s)=>n(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),$.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Go(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.hr(n),$.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,i){let s=0;const o=[];return this.ii.forEach((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.ii.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),$.waitFor(o).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return $.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),$.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),$.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return $.resolve(i)}containsKey(e,n){return $.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,n){this.ai={},this.overlays={},this.ui=new nd(0),this.ci=!1,this.ci=!0,this.li=new hL,this.referenceDelegate=e(this),this.hi=new mL(this),this.indexManager=new JR,this.remoteDocumentCache=function(s){return new fL(s)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new YR(n),this.Ti=new uL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new cL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new dL(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){ne("MemoryPersistence","Starting transaction:",e);const s=new gL(this.ui.next());return this.referenceDelegate.Ii(),i(s).next(o=>this.referenceDelegate.di(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ei(e,n){return $.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,n)))}}class gL extends Wx{constructor(e){super(),this.currentSequenceNumber=e}}class Jm{constructor(e){this.persistence=e,this.Ai=new Xm,this.Ri=null}static Vi(e){return new Jm(e)}get mi(){if(this.Ri)return this.Ri;throw ce(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),$.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.mi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.mi,i=>{const s=oe.fromPath(i);return this.fi(e,s).next(o=>{o||n.removeEntry(s,pe.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return $.or([()=>$.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class kh{constructor(e,n){this.persistence=e,this.gi=new ks(i=>Zx(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=sL(this,n)}static Vi(e,n){return new kh(e,n)}Ii(){}di(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}yr(e){let n=0;return this.gr(e,i=>{n++}).next(()=>n)}gr(e,n){return $.forEach(this.gi,(i,s)=>this.Sr(e,i,s).next(o=>o?$.resolve():n(s)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ri(e,l=>this.Sr(e,l,n).next(h=>{h||(i++,o.removeEntry(l,pe.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),$.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),$.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Vc(e.data.value)),n}Sr(e,n,i){return $.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return $.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=s}static Es(e,n){let i=Ae(),s=Ae();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new eg(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return Q1()?8:qx(Ft())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,s){const o={result:null};return this.ps(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ys(e,n,s,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new _L;return this.ws(e,n,l).next(h=>{if(o.result=h,this.Rs)return this.Ss(e,n,l,h.size)})}).next(()=>o.result)}Ss(e,n,i,s){return i.documentReadCount<this.Vs?(uo()<=Ce.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",co(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),$.resolve()):(uo()<=Ce.DEBUG&&ne("QueryEngine","Query:",co(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.fs*s?(uo()<=Ce.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",co(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,si(n))):$.resolve())}ps(e,n){if(Gv(n))return $.resolve(null);let i=si(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=_p(n,null,"F"),i=si(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=Ae(...o);return this.gs.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(d=>{const m=this.bs(n,h);return this.Ds(n,m,l,d.readTime)?this.ps(e,_p(n,null,"F")):this.vs(e,m,n,d)}))})))}ys(e,n,i,s){return Gv(n)||s.isEqual(pe.min())?$.resolve(null):this.gs.getDocuments(e,i).next(o=>{const l=this.bs(n,o);return this.Ds(n,l,i,s)?$.resolve(null):(uo()<=Ce.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),co(n)),this.vs(e,l,n,Ux(s,Hl)).next(h=>h))})}bs(e,n){let i=new gt(mT(e));return n.forEach((s,o)=>{ld(e,o)&&(i=i.add(o))}),i}Ds(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ws(e,n,i){return uo()<=Ce.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",co(n)),this.gs.getDocumentsMatchingQuery(e,n,xr.min(),i)}vs(e,n,i,s){return this.gs.getDocumentsMatchingQuery(e,i,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="LocalStore",yL=3e8;class wL{constructor(e,n,i,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new Xe(ye),this.Ms=new ks(o=>$m(o),Zm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lL(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function EL(t,e,n,i){return new wL(t,e,n,i)}async function zT(t,e){const n=ge(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let d=Ae();for(const m of s){l.push(m.batchId);for(const v of m.mutations)d=d.add(v.key)}for(const m of o){h.push(m.batchId);for(const v of m.mutations)d=d.add(v.key)}return n.localDocuments.getDocuments(i,d).next(m=>({Bs:m,removedBatchIds:l,addedBatchIds:h}))})})}function TL(t,e){const n=ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(h,d,m,v){const y=m.batch,E=y.keys();let b=$.resolve();return E.forEach(V=>{b=b.next(()=>v.getEntry(d,V)).next(M=>{const W=m.docVersions.get(V);Ne(W!==null,48541),M.version.compareTo(W)<0&&(y.applyToRemoteDocument(M,m),M.isValidDocument()&&(M.setReadTime(m.commitVersion),v.addEntry(M)))})}),b.next(()=>h.mutationQueue.removeMutationBatch(d,y))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Ae();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(d=d.add(h.batch.mutations[m].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function UT(t){const e=ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function IL(t,e){const n=ge(t),i=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const h=[];e.targetChanges.forEach((v,y)=>{const E=s.get(y);if(!E)return;h.push(n.hi.removeMatchingKeys(o,v.removedDocuments,y).next(()=>n.hi.addMatchingKeys(o,v.addedDocuments,y)));let b=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?b=b.withResumeToken(Rt.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):v.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(v.resumeToken,i)),s=s.insert(y,b),function(M,W,O){return M.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=yL?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(E,b,v)&&h.push(n.hi.updateTargetData(o,b))});let d=Ui(),m=Ae();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,v))}),h.push(SL(o,l,e.documentUpdates).next(v=>{d=v.Ls,m=v.ks})),!i.isEqual(pe.min())){const v=n.hi.getLastRemoteSnapshotVersion(o).next(y=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(v)}return $.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,m)).next(()=>d)}).then(o=>(n.Fs=s,o))}function SL(t,e,n){let i=Ae(),s=Ae();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=Ui();return n.forEach((h,d)=>{const m=o.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(pe.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):ne(tg,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)}),{Ls:l,ks:s}})}function PL(t,e){const n=ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Hm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function CL(t,e){const n=ge(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.hi.getTargetData(i,e).next(o=>o?(s=o,$.resolve(s)):n.hi.allocateTargetId(i).next(l=>(s=new hr(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Fs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i})}async function Tp(t,e,n){const i=ge(t),s=i.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!ra(l))throw l;ne(tg,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(s.target)}function ay(t,e,n){const i=ge(t);let s=pe.min(),o=Ae();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,m,v){const y=ge(d),E=y.Ms.get(v);return E!==void 0?$.resolve(y.Fs.get(E)):y.hi.getTargetData(m,v)}(i,l,si(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>i.Cs.getDocumentsMatchingQuery(l,e,n?s:pe.min(),n?o:Ae())).next(h=>(AL(i,fR(e),h),{documents:h,qs:o})))}function AL(t,e,n){let i=t.xs.get(e)||pe.min();n.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.xs.set(e,i)}class ly{constructor(){this.activeTargetIds=yR()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kL{constructor(){this.Fo=new ly,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new ly,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy="ConnectivityMonitor";class cy{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ne(uy,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ne(uy,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yc=null;function Ip(){return yc===null?yc=function(){return 268435456+Math.round(2147483648*Math.random())}():yc++,"0x"+yc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="RestConnection",RL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LL{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${s}`,this.Ko=this.databaseId.database===Eh?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(e,n,i,s,o){const l=Ip(),h=this.Go(e,n.toUriEncodedString());ne(sf,`Sending RPC '${e}' ${l}:`,h,i);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,s,o);const{host:m}=new URL(h),v=Ps(m);return this.jo(e,h,d,i,v).then(y=>(ne(sf,`Received RPC '${e}' ${l}: `,y),y),y=>{throw kr(sf,`RPC '${e}' ${l} failed with error: `,y,"url: ",h,"request:",i),y})}Jo(e,n,i,s,o,l){return this.Wo(e,n,i,s,o)}zo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+na}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),i&&i.headers.forEach((s,o)=>e[o]=s)}Go(e,n){const i=RL[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt="WebChannelConnection";class bL extends LL{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,s,o){const l=Ip();return new Promise((h,d)=>{const m=new HE;m.setWithCredentials(!0),m.listenOnce(WE.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Mc.NO_ERROR:const y=m.getResponseJson();ne(bt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),h(y);break;case Mc.TIMEOUT:ne(bt,`RPC '${e}' ${l} timed out`),d(new se(G.DEADLINE_EXCEEDED,"Request time out"));break;case Mc.HTTP_ERROR:const E=m.getStatus();if(ne(bt,`RPC '${e}' ${l} failed with status:`,E,"response text:",m.getResponseText()),E>0){let b=m.getResponseJson();Array.isArray(b)&&(b=b[0]);const V=b==null?void 0:b.error;if(V&&V.status&&V.message){const M=function(O){const S=O.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(S)>=0?S:G.UNKNOWN}(V.status);d(new se(M,V.message))}else d(new se(G.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new se(G.UNAVAILABLE,"Connection failed."));break;default:ce(9055,{c_:e,streamId:l,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{ne(bt,`RPC '${e}' ${l} completed.`)}});const v=JSON.stringify(s);ne(bt,`RPC '${e}' ${l} sending request:`,s),m.send(n,"POST",v,i,15)})}P_(e,n,i){const s=Ip(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=ZE(),h=$E(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const v=o.join("");ne(bt,`Creating RPC '${e}' stream ${s}: ${v}`,d);const y=l.createWebChannel(v,d);this.T_(y);let E=!1,b=!1;const V=new NL({Ho:W=>{b?ne(bt,`Not sending because RPC '${e}' stream ${s} is closed:`,W):(E||(ne(bt,`Opening RPC '${e}' stream ${s} transport.`),y.open(),E=!0),ne(bt,`RPC '${e}' stream ${s} sending:`,W),y.send(W))},Yo:()=>y.close()}),M=(W,O,S)=>{W.listen(O,x=>{try{S(x)}catch(H){setTimeout(()=>{throw H},0)}})};return M(y,nl.EventType.OPEN,()=>{b||(ne(bt,`RPC '${e}' stream ${s} transport opened.`),V.s_())}),M(y,nl.EventType.CLOSE,()=>{b||(b=!0,ne(bt,`RPC '${e}' stream ${s} transport closed`),V.__(),this.I_(y))}),M(y,nl.EventType.ERROR,W=>{b||(b=!0,kr(bt,`RPC '${e}' stream ${s} transport errored. Name:`,W.name,"Message:",W.message),V.__(new se(G.UNAVAILABLE,"The operation could not be completed")))}),M(y,nl.EventType.MESSAGE,W=>{var O;if(!b){const S=W.data[0];Ne(!!S,16349);const x=S,H=(x==null?void 0:x.error)||((O=x[0])===null||O===void 0?void 0:O.error);if(H){ne(bt,`RPC '${e}' stream ${s} received error:`,H);const Y=H.status;let K=function(P){const C=at[P];if(C!==void 0)return AT(C)}(Y),A=H.message;K===void 0&&(K=G.INTERNAL,A="Unknown error status: "+Y+" with message "+H.message),b=!0,V.__(new se(K,A)),y.close()}else ne(bt,`RPC '${e}' stream ${s} received:`,S),V.a_(S)}}),M(h,qE.STAT_EVENT,W=>{W.stat===hp.PROXY?ne(bt,`RPC '${e}' stream ${s} detected buffering proxy`):W.stat===hp.NOPROXY&&ne(bt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{V.o_()},0),V}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function of(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(t){return new VR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,n,i=1e3,s=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=s,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-i);s>0&&ne("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy="PersistentStream";class jT{constructor(e,n,i,s,o,l,h,d){this.Fi=e,this.w_=i,this.S_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new BT(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(zi(n.toString()),zi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.b_===n&&this.W_(i,s)},i=>{e(()=>{const s=new se(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(s)})})}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{i(()=>this.G_(s))}),this.stream.onMessage(s=>{i(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ne(hy,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(ne(hy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OL extends jT{constructor(e,n,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=UR(this.serializer,e),i=function(o){if(!("targetChange"in o))return pe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?pe.min():l.readTime?oi(l.readTime):pe.min()}(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=Ep(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=gp(d)?{documents:HR(o,d)}:{query:WR(o,d).Vt},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=RT(o,l.resumeToken);const m=vp(o,l.expectedCount);m!==null&&(h.expectedCount=m)}else if(l.snapshotVersion.compareTo(pe.min())>0){h.readTime=Ah(o,l.snapshotVersion.toTimestamp());const m=vp(o,l.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);const i=$R(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=Ep(this.serializer),n.removeTarget=e,this.k_(n)}}class DL extends jT{constructor(e,n,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ne(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ne(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=jR(e.writeResults,e.commitTime),i=oi(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=Ep(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>BR(this.serializer,i))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{}class VL extends ML{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new se(G.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Wo(e,yp(n,i),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(G.UNKNOWN,o.toString())})}Jo(e,n,i,s,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Jo(e,yp(n,i),s,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new se(G.UNKNOWN,l.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class FL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(zi(n),this._a=!1):ne("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="RemoteStore";class zL{constructor(e,n,i,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(l=>{i.enqueueAndForget(async()=>{Rs(this)&&(ne(ws,"Restarting streams for network reachability change."),await async function(d){const m=ge(d);m.Ia.add(4),await hu(m),m.Aa.set("Unknown"),m.Ia.delete(4),await fd(m)}(this))})}),this.Aa=new FL(i,s)}}async function fd(t){if(Rs(t))for(const e of t.da)await e(!0)}async function hu(t){for(const e of t.da)await e(!1)}function HT(t,e){const n=ge(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),sg(n)?rg(n):sa(n).x_()&&ig(n,e))}function ng(t,e){const n=ge(t),i=sa(n);n.Ta.delete(e),i.x_()&&WT(n,e),n.Ta.size===0&&(i.x_()?i.B_():Rs(n)&&n.Aa.set("Unknown"))}function ig(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}sa(t).H_(e)}function WT(t,e){t.Ra.$e(e),sa(t).Y_(e)}function rg(t){t.Ra=new bR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),sa(t).start(),t.Aa.aa()}function sg(t){return Rs(t)&&!sa(t).M_()&&t.Ta.size>0}function Rs(t){return ge(t).Ia.size===0}function qT(t){t.Ra=void 0}async function UL(t){t.Aa.set("Online")}async function BL(t){t.Ta.forEach((e,n)=>{ig(t,e)})}async function jL(t,e){qT(t),sg(t)?(t.Aa.la(e),rg(t)):t.Aa.set("Unknown")}async function HL(t,e,n){if(t.Aa.set("Online"),e instanceof xT&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const h of o.targetIds)s.Ta.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.Ta.delete(h),s.Ra.removeTarget(h))}(t,e)}catch(i){ne(ws,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await xh(t,i)}else if(e instanceof Uc?t.Ra.Ye(e):e instanceof kT?t.Ra.it(e):t.Ra.et(e),!n.isEqual(pe.min()))try{const i=await UT(t.localStore);n.compareTo(i)>=0&&await function(o,l){const h=o.Ra.Pt(l);return h.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const v=o.Ta.get(m);v&&o.Ta.set(m,v.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,m)=>{const v=o.Ta.get(d);if(!v)return;o.Ta.set(d,v.withResumeToken(Rt.EMPTY_BYTE_STRING,v.snapshotVersion)),WT(o,d);const y=new hr(v.target,d,m,v.sequenceNumber);ig(o,y)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){ne(ws,"Failed to raise snapshot:",i),await xh(t,i)}}async function xh(t,e,n){if(!ra(e))throw e;t.Ia.add(1),await hu(t),t.Aa.set("Offline"),n||(n=()=>UT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne(ws,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await fd(t)})}function $T(t,e){return e().catch(n=>xh(t,n,e))}async function pd(t){const e=ge(t),n=br(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Hm;for(;WL(e);)try{const s=await PL(e.localStore,i);if(s===null){e.Pa.length===0&&n.B_();break}i=s.batchId,qL(e,s)}catch(s){await xh(e,s)}ZT(e)&&GT(e)}function WL(t){return Rs(t)&&t.Pa.length<10}function qL(t,e){t.Pa.push(e);const n=br(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function ZT(t){return Rs(t)&&!br(t).M_()&&t.Pa.length>0}function GT(t){br(t).start()}async function $L(t){br(t).na()}async function ZL(t){const e=br(t);for(const n of t.Pa)e.X_(n.mutations)}async function GL(t,e,n){const i=t.Pa.shift(),s=Km.from(i,e,n);await $T(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await pd(t)}async function KL(t,e){e&&br(t).Z_&&await async function(i,s){if(function(l){return LR(l)&&l!==G.ABORTED}(s.code)){const o=i.Pa.shift();br(i).N_(),await $T(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await pd(i)}}(t,e),ZT(t)&&GT(t)}async function dy(t,e){const n=ge(t);n.asyncQueue.verifyOperationInProgress(),ne(ws,"RemoteStore received new credentials");const i=Rs(n);n.Ia.add(3),await hu(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await fd(n)}async function QL(t,e){const n=ge(t);e?(n.Ia.delete(2),await fd(n)):e||(n.Ia.add(2),await hu(n),n.Aa.set("Unknown"))}function sa(t){return t.Va||(t.Va=function(n,i,s){const o=ge(n);return o.ia(),new OL(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Zo:UL.bind(null,t),e_:BL.bind(null,t),n_:jL.bind(null,t),J_:HL.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),sg(t)?rg(t):t.Aa.set("Unknown")):(await t.Va.stop(),qT(t))})),t.Va}function br(t){return t.ma||(t.ma=function(n,i,s){const o=ge(n);return o.ia(),new DL(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:$L.bind(null,t),n_:KL.bind(null,t),ea:ZL.bind(null,t),ta:GL.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await pd(t)):(await t.ma.stop(),t.Pa.length>0&&(ne(ws,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,n,i,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,o){const l=Date.now()+i,h=new og(e,n,l,s,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ag(t,e){if(zi("AsyncQueue",`${e}: ${t}`),ra(t))return new se(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{static emptySet(e){return new Mo(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||oe.comparator(n.key,i.key):(n,i)=>oe.comparator(n.key,i.key),this.keyedMap=il(),this.sortedSet=new Xe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Mo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(){this.fa=new Xe(oe.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):ce(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,i)=>{e.push(i)}),e}}class Ko{constructor(e,n,i,s,o,l,h,d,m){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,n,i,s,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new Ko(e,n,Mo.emptySet(n),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ad(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class XL{constructor(){this.queries=py(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const s=ge(n),o=s.queries;s.queries=py(),o.forEach((l,h)=>{for(const d of h.wa)d.onError(i)})})(this,new se(G.ABORTED,"Firestore shutting down"))}}function py(){return new ks(t=>pT(t),ad)}async function KT(t,e){const n=ge(t);let i=3;const s=e.query;let o=n.queries.get(s);o?!o.Sa()&&e.ba()&&(i=2):(o=new YL,i=e.ba()?0:1);try{switch(i){case 0:o.ya=await n.onListen(s,!0);break;case 1:o.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const h=ag(l,`Initialization of query '${co(e.query)}' failed`);return void e.onError(h)}n.queries.set(s,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&lg(n)}async function QT(t,e){const n=ge(t),i=e.query;let s=3;const o=n.queries.get(i);if(o){const l=o.wa.indexOf(e);l>=0&&(o.wa.splice(l,1),o.wa.length===0?s=e.ba()?0:1:!o.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function JL(t,e){const n=ge(t);let i=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const h of l.wa)h.Ca(s)&&(i=!0);l.ya=s}}i&&lg(n)}function e2(t,e,n){const i=ge(t),s=i.queries.get(e);if(s)for(const o of s.wa)o.onError(n);i.queries.delete(e)}function lg(t){t.Da.forEach(e=>{e.next()})}var Sp,my;(my=Sp||(Sp={})).Fa="default",my.Cache="cache";class YT{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Ko(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Sp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e){this.key=e}}class JT{constructor(e){this.key=e}}class t2{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ae(),this.mutatedKeys=Ae(),this.Xa=mT(e),this.eu=new Mo(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new fy,s=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((v,y)=>{const E=s.get(v),b=ld(this.query,y)?y:null,V=!!E&&this.mutatedKeys.has(E.key),M=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let W=!1;E&&b?E.data.isEqual(b.data)?V!==M&&(i.track({type:3,doc:b}),W=!0):this.iu(E,b)||(i.track({type:2,doc:b}),W=!0,(d&&this.Xa(b,d)>0||m&&this.Xa(b,m)<0)&&(h=!0)):!E&&b?(i.track({type:0,doc:b}),W=!0):E&&!b&&(i.track({type:1,doc:E}),W=!0,(d||m)&&(h=!0)),W&&(b?(l=l.add(b),o=M?o.add(v):o.delete(v)):(l=l.delete(v),o=o.delete(v)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),o=o.delete(v.key),i.track({type:1,doc:v})}return{eu:l,ru:i,Ds:h,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort((v,y)=>function(b,V){const M=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce(20277,{At:W})}};return M(b)-M(V)}(v.type,y.type)||this.Xa(v.doc,y.doc)),this.su(i),s=s!=null&&s;const h=n&&!s?this.ou():[],d=this.Za.size===0&&this.current&&!s?1:0,m=d!==this.Ya;return this.Ya=d,l.length!==0||m?{snapshot:new Ko(this.query,e.eu,o,l,e.mutatedKeys,d===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:h}:{_u:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new fy,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ae(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const n=[];return e.forEach(i=>{this.Za.has(i)||n.push(new JT(i))}),this.Za.forEach(i=>{e.has(i)||n.push(new XT(i))}),n}uu(e){this.Ha=e.qs,this.Za=Ae();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ko.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const ug="SyncEngine";class n2{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class i2{constructor(e){this.key=e,this.lu=!1}}class r2{constructor(e,n,i,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new ks(h=>pT(h),ad),this.Tu=new Map,this.Iu=new Set,this.du=new Xe(oe.comparator),this.Eu=new Map,this.Au=new Xm,this.Ru={},this.Vu=new Map,this.mu=Go.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function s2(t,e,n=!0){const i=sI(t);let s;const o=i.Pu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.cu()):s=await eI(i,e,n,!0),s}async function o2(t,e){const n=sI(t);await eI(n,e,!0,!1)}async function eI(t,e,n,i){const s=await CL(t.localStore,si(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return i&&(h=await a2(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&HT(t.remoteStore,s),h}async function a2(t,e,n,i,s){t.gu=(y,E,b)=>async function(M,W,O,S){let x=W.view.nu(O);x.Ds&&(x=await ay(M.localStore,W.query,!1).then(({documents:A})=>W.view.nu(A,x)));const H=S&&S.targetChanges.get(W.targetId),Y=S&&S.targetMismatches.get(W.targetId)!=null,K=W.view.applyChanges(x,M.isPrimaryClient,H,Y);return _y(M,W.targetId,K._u),K.snapshot}(t,y,E,b);const o=await ay(t.localStore,e,!0),l=new t2(e,o.qs),h=l.nu(o.documents),d=cu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),m=l.applyChanges(h,t.isPrimaryClient,d);_y(t,n,m._u);const v=new n2(e,n,l);return t.Pu.set(e,v),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),m.snapshot}async function l2(t,e,n){const i=ge(t),s=i.Pu.get(e),o=i.Tu.get(s.targetId);if(o.length>1)return i.Tu.set(s.targetId,o.filter(l=>!ad(l,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Tp(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&ng(i.remoteStore,s.targetId),Pp(i,s.targetId)}).catch(ia)):(Pp(i,s.targetId),await Tp(i.localStore,s.targetId,!0))}async function u2(t,e){const n=ge(t),i=n.Pu.get(e),s=n.Tu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),ng(n.remoteStore,i.targetId))}async function c2(t,e,n){const i=_2(t);try{const s=await function(l,h){const d=ge(l),m=Ue.now(),v=h.reduce((b,V)=>b.add(V.key),Ae());let y,E;return d.persistence.runTransaction("Locally write mutations","readwrite",b=>{let V=Ui(),M=Ae();return d.Os.getEntries(b,v).next(W=>{V=W,V.forEach((O,S)=>{S.isValidDocument()||(M=M.add(O))})}).next(()=>d.localDocuments.getOverlayedDocuments(b,V)).next(W=>{y=W;const O=[];for(const S of h){const x=CR(S,y.get(S.key).overlayedDocument);x!=null&&O.push(new xs(S.key,x,aT(x.value.mapValue),Ni.exists(!0)))}return d.mutationQueue.addMutationBatch(b,m,O,h)}).next(W=>{E=W;const O=W.applyToLocalDocumentSet(y,M);return d.documentOverlayCache.saveOverlays(b,W.batchId,O)})}).then(()=>({batchId:E.batchId,changes:_T(y)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(l,h,d){let m=l.Ru[l.currentUser.toKey()];m||(m=new Xe(ye)),m=m.insert(h,d),l.Ru[l.currentUser.toKey()]=m}(i,s.batchId,n),await du(i,s.changes),await pd(i.remoteStore)}catch(s){const o=ag(s,"Failed to persist write");n.reject(o)}}async function tI(t,e){const n=ge(t);try{const i=await IL(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Eu.get(o);l&&(Ne(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.lu=!0:s.modifiedDocuments.size>0?Ne(l.lu,14607):s.removedDocuments.size>0&&(Ne(l.lu,42227),l.lu=!1))}),await du(n,i,e)}catch(i){await ia(i)}}function gy(t,e,n){const i=ge(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Pu.forEach((o,l)=>{const h=l.view.va(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){const d=ge(l);d.onlineState=h;let m=!1;d.queries.forEach((v,y)=>{for(const E of y.wa)E.va(h)&&(m=!0)}),m&&lg(d)}(i.eventManager,e),s.length&&i.hu.J_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function h2(t,e,n){const i=ge(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Eu.get(e),o=s&&s.key;if(o){let l=new Xe(oe.comparator);l=l.insert(o,Mt.newNoDocument(o,pe.min()));const h=Ae().add(o),d=new hd(pe.min(),new Map,new Xe(ye),l,h);await tI(i,d),i.du=i.du.remove(o),i.Eu.delete(e),cg(i)}else await Tp(i.localStore,e,!1).then(()=>Pp(i,e,n)).catch(ia)}async function d2(t,e){const n=ge(t),i=e.batch.batchId;try{const s=await TL(n.localStore,e);iI(n,i,null),nI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await du(n,s)}catch(s){await ia(s)}}async function f2(t,e,n){const i=ge(t);try{const s=await function(l,h){const d=ge(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return d.mutationQueue.lookupMutationBatch(m,h).next(y=>(Ne(y!==null,37113),v=y.keys(),d.mutationQueue.removeMutationBatch(m,y))).next(()=>d.mutationQueue.performConsistencyCheck(m)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(m,v,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>d.localDocuments.getDocuments(m,v))})}(i.localStore,e);iI(i,e,n),nI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await du(i,s)}catch(s){await ia(s)}}function nI(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function iI(t,e,n){const i=ge(t);let s=i.Ru[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),i.Ru[i.currentUser.toKey()]=s}}function Pp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(i=>{t.Au.containsKey(i)||rI(t,i)})}function rI(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(ng(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),cg(t))}function _y(t,e,n){for(const i of n)i instanceof XT?(t.Au.addReference(i.key,e),p2(t,i)):i instanceof JT?(ne(ug,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||rI(t,i.key)):ce(19791,{yu:i})}function p2(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(ne(ug,"New document in limbo: "+n),t.Iu.add(i),cg(t))}function cg(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new oe(Ke.fromString(e)),i=t.mu.next();t.Eu.set(i,new i2(n)),t.du=t.du.insert(n,i),HT(t.remoteStore,new hr(si(od(n.path)),i,"TargetPurposeLimboResolution",nd.ue))}}async function du(t,e,n){const i=ge(t),s=[],o=[],l=[];i.Pu.isEmpty()||(i.Pu.forEach((h,d)=>{l.push(i.gu(d,e,n).then(m=>{var v;if((m||n)&&i.isPrimaryClient){const y=m?!m.fromCache:(v=n==null?void 0:n.targetChanges.get(d.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(m){s.push(m);const y=eg.Es(d.targetId,m);o.push(y)}}))}),await Promise.all(l),i.hu.J_(s),await async function(d,m){const v=ge(d);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>$.forEach(m,E=>$.forEach(E.Is,b=>v.persistence.referenceDelegate.addReference(y,E.targetId,b)).next(()=>$.forEach(E.ds,b=>v.persistence.referenceDelegate.removeReference(y,E.targetId,b)))))}catch(y){if(!ra(y))throw y;ne(tg,"Failed to update sequence numbers: "+y)}for(const y of m){const E=y.targetId;if(!y.fromCache){const b=v.Fs.get(E),V=b.snapshotVersion,M=b.withLastLimboFreeSnapshotVersion(V);v.Fs=v.Fs.insert(E,M)}}}(i.localStore,o))}async function m2(t,e){const n=ge(t);if(!n.currentUser.isEqual(e)){ne(ug,"User change. New user:",e.toKey());const i=await zT(n.localStore,e);n.currentUser=e,function(o,l){o.Vu.forEach(h=>{h.forEach(d=>{d.reject(new se(G.CANCELLED,l))})}),o.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await du(n,i.Bs)}}function g2(t,e){const n=ge(t),i=n.Eu.get(e);if(i&&i.lu)return Ae().add(i.key);{let s=Ae();const o=n.Tu.get(e);if(!o)return s;for(const l of o){const h=n.Pu.get(l);s=s.unionWith(h.view.tu)}return s}}function sI(t){const e=ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=g2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=h2.bind(null,e),e.hu.J_=JL.bind(null,e.eventManager),e.hu.pu=e2.bind(null,e.eventManager),e}function _2(t){const e=ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=d2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f2.bind(null,e),e}class Rh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return EL(this.persistence,new vL,e.initialUser,this.serializer)}Du(e){return new FT(Jm.Vi,this.serializer)}bu(e){return new kL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rh.provider={build:()=>new Rh};class v2 extends Rh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ne(this.persistence.referenceDelegate instanceof kh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new iL(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Gt.withCacheSize(this.cacheSizeBytes):Gt.DEFAULT;return new FT(i=>kh.Vi(i,n),this.serializer)}}class Cp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>gy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=m2.bind(null,this.syncEngine),await QL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new XL}()}createDatastore(e){const n=dd(e.databaseInfo.databaseId),i=function(o){return new bL(o)}(e.databaseInfo);return function(o,l,h,d){return new VL(o,l,h,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,o,l,h){return new zL(i,s,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>gy(this.syncEngine,n,0),function(){return cy.C()?new cy:new xL}())}createSyncEngine(e,n){return function(s,o,l,h,d,m,v){const y=new r2(s,o,l,h,d,m);return v&&(y.fu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=ge(s);ne(ws,"RemoteStore shutting down."),o.Ia.add(5),await hu(o),o.Ea.shutdown(),o.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Cp.provider={build:()=>new Cp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):zi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="FirestoreClient";class y2{constructor(e,n,i,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=Ot.UNAUTHENTICATED,this.clientId=Bm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{ne(Or,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(ne(Or,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=ag(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function af(t,e){t.asyncQueue.verifyOperationInProgress(),ne(Or,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await zT(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>{kr("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{ne("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{kr("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function vy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await w2(t);ne(Or,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>dy(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>dy(e.remoteStore,s)),t._onlineComponents=e}async function w2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne(Or,"Using user provided OfflineComponentProvider");try{await af(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===G.FAILED_PRECONDITION||s.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;kr("Error using user provided cache. Falling back to memory cache: "+n),await af(t,new Rh)}}else ne(Or,"Using default OfflineComponentProvider"),await af(t,new v2(void 0));return t._offlineComponents}async function aI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne(Or,"Using user provided OnlineComponentProvider"),await vy(t,t._uninitializedComponentsProvider._online)):(ne(Or,"Using default OnlineComponentProvider"),await vy(t,new Cp))),t._onlineComponents}function E2(t){return aI(t).then(e=>e.syncEngine)}async function Ap(t){const e=await aI(t),n=e.eventManager;return n.onListen=s2.bind(null,e.syncEngine),n.onUnlisten=l2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=o2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=u2.bind(null,e.syncEngine),n}function T2(t,e,n={}){const i=new Ir;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,m){const v=new oI({next:E=>{v.Ou(),l.enqueueAndForget(()=>QT(o,y));const b=E.docs.has(h);!b&&E.fromCache?m.reject(new se(G.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&E.fromCache&&d&&d.source==="server"?m.reject(new se(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),y=new YT(od(h.path),v,{includeMetadataChanges:!0,ka:!0});return KT(o,y)}(await Ap(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="firestore.googleapis.com",wy=!0;class Ey{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new se(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uI,this.ssl=wy}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:wy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tL)throw new se(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lI((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new se(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new se(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new se(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hg{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ey({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ey(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new xx;switch(i.type){case"firstParty":return new bx(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new se(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=yy.get(n);i&&(ne("ComponentProvider","Removing Datastore"),yy.delete(n),i.terminate())}(this),Promise.resolve()}}function I2(t,e,n,i={}){var s;t=Sr(t,hg);const o=Ps(e),l=t._getSettings(),h=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;o&&(Am(`https://${d}`),km("Firestore",!0)),l.host!==uI&&l.host!==d&&kr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},l),{host:d,ssl:o,emulatorOptions:i});if(!ms(m,h)&&(t._setSettings(m),i.mockUserToken)){let v,y;if(typeof i.mockUserToken=="string")v=i.mockUserToken,y=Ot.MOCK_USER;else{v=B1(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new se(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Ot(E)}t._authCredentials=new Rx(new KE(v,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new md(this.firestore,e,this._query)}}class mt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}toJSON(){return{type:mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(lu(n,mt._jsonSchema))return new mt(e,i||null,new oe(Ke.fromString(n.referencePath)))}}mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:ut("string",mt._jsonSchemaVersion),referencePath:ut("string")};class Kl extends md{constructor(e,n,i){super(e,n,od(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new oe(e))}withConverter(e){return new Kl(this.firestore,e,this._path)}}function kp(t,e,...n){if(t=xt(t),arguments.length===1&&(e=Bm.newId()),Fx("doc","path",e),t instanceof hg){const i=Ke.fromString(e,...n);return Dv(i),new mt(t,null,new oe(i))}{if(!(t instanceof mt||t instanceof Kl))throw new se(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ke.fromString(e,...n));return Dv(i),new mt(t.firestore,t instanceof Kl?t.converter:null,new oe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="AsyncQueue";class Iy{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new BT(this,"async_queue_retry"),this.oc=()=>{const i=of();i&&ne(Ty,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=of();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=of();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Ir;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ra(e))throw e;ne(Ty,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,zi("INTERNAL UNHANDLED ERROR: ",Sy(i)),i}).then(i=>(this.nc=!1,i))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=og.createAndSchedule(this,e,n,i,o=>this.lc(o));return this.ec.push(s),s}ac(){this.tc&&ce(47125,{hc:Sy(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Sy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const o of i)if(o in s&&typeof s[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Ql extends hg{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new Iy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Iy(e),this._firestoreClient=void 0,await e}}}function S2(t,e){const n=typeof t=="object"?t:Xh(),i=typeof t=="string"?t:Eh,s=Yh(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=J0("firestore");o&&I2(s,...o)}return s}function dg(t){if(t._terminated)throw new se(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||P2(t),t._firestoreClient}function P2(t){var e,n,i;const s=t._freezeSettings(),o=function(h,d,m,v){return new Qx(h,d,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,lI(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new y2(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this._byteString=e}static fromBase64String(e){try{return new In(Rt.fromBase64String(e))}catch(n){throw new se(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new In(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:In._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(lu(e,In._jsonSchema))return In.fromBase64String(e.bytes)}}In._jsonSchemaVersion="firestore/bytes/1.0",In._jsonSchema={type:ut("string",In._jsonSchemaVersion),bytes:ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ai._jsonSchemaVersion}}static fromJSON(e){if(lu(e,ai._jsonSchema))return new ai(e.latitude,e.longitude)}}ai._jsonSchemaVersion="firestore/geoPoint/1.0",ai._jsonSchema={type:ut("string",ai._jsonSchemaVersion),latitude:ut("number"),longitude:ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(lu(e,li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new li(e.vectorValues);throw new se(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}li._jsonSchemaVersion="firestore/vectorValue/1.0",li._jsonSchema={type:ut("string",li._jsonSchemaVersion),vectorValues:ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=/^__.*__$/;class A2{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new xs(e,this.data,this.fieldMask,n,this.fieldTransforms):new uu(e,this.data,n,this.fieldTransforms)}}function hI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce(40011,{Ec:t})}}class pg{constructor(e,n,i,s,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new pg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:i,mc:!1});return s.fc(e),s}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:i,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Lh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(hI(this.Ec)&&C2.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class k2{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||dd(e)}Dc(e,n,i,s=!1){return new pg({Ec:e,methodName:n,bc:i,path:Ct.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function x2(t){const e=t._freezeSettings(),n=dd(t._databaseId);return new k2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function R2(t,e,n,i,s,o={}){const l=t.Dc(o.merge||o.mergeFields?2:0,e,n,s);mI("Data must be an object, but it was:",l,i);const h=fI(i,l);let d,m;if(o.merge)d=new Fn(l.fieldMask),m=l.fieldTransforms;else if(o.mergeFields){const v=[];for(const y of o.mergeFields){const E=L2(e,y,n);if(!l.contains(E))throw new se(G.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);b2(v,E)||v.push(E)}d=new Fn(v),m=l.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,m=l.fieldTransforms;return new A2(new Tn(h),d,m)}function dI(t,e){if(pI(t=xt(t)))return mI("Unsupported field value:",e,t),fI(t,e);if(t instanceof cI)return function(i,s){if(!hI(s.Ec))throw s.wc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(i,s){const o=[];let l=0;for(const h of i){let d=dI(h,s.yc(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(i,s){if((i=xt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return wR(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Ue.fromDate(i);return{timestampValue:Ah(s.serializer,o)}}if(i instanceof Ue){const o=new Ue(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ah(s.serializer,o)}}if(i instanceof ai)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof In)return{bytesValue:RT(s.serializer,i._byteString)};if(i instanceof mt){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ym(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof li)return function(l,h){return{mapValue:{fields:{[sT]:{stringValue:oT},[Th]:{arrayValue:{values:l.toArray().map(m=>{if(typeof m!="number")throw h.wc("VectorValues must only contain numeric values.");return Gm(h.serializer,m)})}}}}}}(i,s);throw s.wc(`Unsupported field value: ${jm(i)}`)}(t,e)}function fI(t,e){const n={};return JE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):As(t,(i,s)=>{const o=dI(s,e.Vc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function pI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ue||t instanceof ai||t instanceof In||t instanceof mt||t instanceof cI||t instanceof li)}function mI(t,e,n){if(!pI(n)||!YE(n)){const i=jm(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function L2(t,e,n){if((e=xt(e))instanceof fg)return e._internalPath;if(typeof e=="string")return gI(t,e);throw Lh("Field path arguments must be of type string or ",t,!1,void 0,n)}const N2=new RegExp("[~\\*/\\[\\]]");function gI(t,e,n){if(e.search(N2)>=0)throw Lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new fg(...e.split("."))._internalPath}catch{throw Lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Lh(t,e,n,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new se(G.INVALID_ARGUMENT,h+t+d)}function b2(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,n,i,s,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new O2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class O2 extends _I{data(){return super.data()}}function vI(t,e){return typeof e=="string"?gI(t,e):e instanceof fg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new se(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class M2{convertValue(e,n="none"){switch(Nr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ce(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return As(e,(s,o)=>{i[s]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,s;const o=(s=(i=(n=e.fields)===null||n===void 0?void 0:n[Th].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(l=>nt(l.doubleValue));return new li(o)}convertGeoPoint(e){return new ai(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=rd(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Wl(e));default:return null}}convertTimestamp(e){const n=Rr(e);return new Ue(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ke.fromString(e);Ne(MT(i),9688,{name:e});const s=new ql(i.get(1),i.get(3)),o=new oe(i.popFirst(5));return s.isEqual(n)||zi(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class sl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class us extends _I{constructor(e,n,i,s,o,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(vI("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=us._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}us._jsonSchemaVersion="firestore/documentSnapshot/1.0",us._jsonSchema={type:ut("string",us._jsonSchemaVersion),bundleSource:ut("string","DocumentSnapshot"),bundleName:ut("string"),bundle:ut("string")};class Bc extends us{data(e={}){return super.data(e)}}class Vo{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new sl(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Bc(this._firestore,this._userDataWriter,i.key,i,new sl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(h=>{const d=new Bc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new sl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new Bc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new sl(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,v=-1;return h.type!==0&&(m=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),v=l.indexOf(h.doc.key)),{type:F2(h.type),doc:d,oldIndex:m,newIndex:v}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function F2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(t){t=Sr(t,mt);const e=Sr(t.firestore,Ql);return T2(dg(e),t._key).then(n=>wI(e,t,n))}Vo._jsonSchemaVersion="firestore/querySnapshot/1.0",Vo._jsonSchema={type:ut("string",Vo._jsonSchemaVersion),bundleSource:ut("string","QuerySnapshot"),bundleName:ut("string"),bundle:ut("string")};class yI extends M2{constructor(e){super(),this.firestore=e}convertBytes(e){return new In(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}}function Ay(t,e,n){t=Sr(t,mt);const i=Sr(t.firestore,Ql),s=V2(t.converter,e);return U2(i,[R2(x2(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ni.none())])}function z2(t,...e){var n,i,s;t=xt(t);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||Py(e[l])||(o=e[l++]);const h={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Py(e[l])){const y=e[l];e[l]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[l+1]=(i=y.error)===null||i===void 0?void 0:i.bind(y),e[l+2]=(s=y.complete)===null||s===void 0?void 0:s.bind(y)}let d,m,v;if(t instanceof mt)m=Sr(t.firestore,Ql),v=od(t._key.path),d={next:y=>{e[l]&&e[l](wI(m,t,y))},error:e[l+1],complete:e[l+2]};else{const y=Sr(t,md);m=Sr(y.firestore,Ql),v=y._query;const E=new yI(m);d={next:b=>{e[l]&&e[l](new Vo(m,E,y,b))},error:e[l+1],complete:e[l+2]},D2(t._query)}return function(E,b,V,M){const W=new oI(M),O=new YT(b,W,V);return E.asyncQueue.enqueueAndForget(async()=>KT(await Ap(E),O)),()=>{W.Ou(),E.asyncQueue.enqueueAndForget(async()=>QT(await Ap(E),O))}}(dg(m),v,h,d)}function U2(t,e){return function(i,s){const o=new Ir;return i.asyncQueue.enqueueAndForget(async()=>c2(await E2(i),s,o)),o.promise}(dg(t),e)}function wI(t,e,n){const i=n.docs.get(e._key),s=new yI(t);return new us(t,s,e._key,i,new sl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){na=s})(ea),gs(new Ar("firestore",(i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new Ql(new Lx(i.getProvider("auth-internal")),new Ox(l,i.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new se(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ql(m.options.projectId,v)}(l,s),l);return o=Object.assign({useFetchStreams:n},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),ni(Rv,Lv,e),ni(Rv,Lv,"esm2017")})();var B2="firebase",j2="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ni(B2,j2,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="type.googleapis.com/google.protobuf.Int64Value",W2="type.googleapis.com/google.protobuf.UInt64Value";function EI(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function Nh(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Nh(e));if(typeof t=="function"||typeof t=="object")return EI(t,e=>Nh(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Qo(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case H2:case W2:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Qo(e)):typeof t=="function"||typeof t=="object"?EI(t,e=>Qo(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Yt extends hi{constructor(e,n,i){super(`${mg}/${e}`,n||""),this.details=i,Object.setPrototypeOf(this,Yt.prototype)}}function q2(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function bh(t,e){let n=q2(t),i=n,s;try{const o=e&&e.error;if(o){const l=o.status;if(typeof l=="string"){if(!ky[l])return new Yt("internal","internal");n=ky[l],i=l}const h=o.message;typeof h=="string"&&(i=h),s=o.details,s!==void 0&&(s=Qo(s))}}catch{}return n==="ok"?null:new Yt(n,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n,i,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,on(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||i.get().then(o=>this.messaging=o,()=>{}),this.appCheck||s==null||s.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="us-central1",Z2=/^data: (.*?)(?:\n|$)/;function G2(t){let e=null;return{promise:new Promise((n,i)=>{e=setTimeout(()=>{i(new Yt("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class K2{constructor(e,n,i,s,o=xp,l=(...h)=>fetch(...h)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new $2(e,n,i,s),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(o);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=xp}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function Q2(t,e,n){const i=Ps(e);t.emulatorOrigin=`http${i?"s":""}://${e}:${n}`,i&&(Am(t.emulatorOrigin),km("Functions",!0))}function Y2(t,e,n){const i=s=>J2(t,e,s,{});return i.stream=(s,o)=>tN(t,e,s,o),i}async function X2(t,e,n,i){n["Content-Type"]="application/json";let s;try{s=await i(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}async function TI(t,e){const n={},i=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(n.Authorization="Bearer "+i.authToken),i.messagingToken&&(n["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=i.appCheckToken),n}function J2(t,e,n,i){const s=t._url(e);return eN(t,s,n,i)}async function eN(t,e,n,i){n=Nh(n);const s={data:n},o=await TI(t,i),l=i.timeout||7e4,h=G2(l),d=await Promise.race([X2(e,s,o,t.fetchImpl),h.promise,t.cancelAllRequests]);if(h.cancel(),!d)throw new Yt("cancelled","Firebase Functions instance was deleted.");const m=bh(d.status,d.json);if(m)throw m;if(!d.json)throw new Yt("internal","Response is not valid JSON object.");let v=d.json.data;if(typeof v>"u"&&(v=d.json.result),typeof v>"u")throw new Yt("internal","Response is missing data field.");return{data:Qo(v)}}function tN(t,e,n,i){const s=t._url(e);return nN(t,s,n,i||{})}async function nN(t,e,n,i){var s;n=Nh(n);const o={data:n},l=await TI(t,i);l["Content-Type"]="application/json",l.Accept="text/event-stream";let h;try{h=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:l,signal:i==null?void 0:i.signal})}catch(b){if(b instanceof Error&&b.name==="AbortError"){const M=new Yt("cancelled","Request was cancelled.");return{data:Promise.reject(M),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(M)}}}}}}const V=bh(0,null);return{data:Promise.reject(V),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(V)}}}}}}let d,m;const v=new Promise((b,V)=>{d=b,m=V});(s=i==null?void 0:i.signal)===null||s===void 0||s.addEventListener("abort",()=>{const b=new Yt("cancelled","Request was cancelled.");m(b)});const y=h.body.getReader(),E=iN(y,d,m,i==null?void 0:i.signal);return{stream:{[Symbol.asyncIterator](){const b=E.getReader();return{async next(){const{value:V,done:M}=await b.read();return{value:V,done:M}},async return(){return await b.cancel(),{done:!0,value:void 0}}}}},data:v}}function iN(t,e,n,i){const s=(l,h)=>{const d=l.match(Z2);if(!d)return;const m=d[1];try{const v=JSON.parse(m);if("result"in v){e(Qo(v.result));return}if("message"in v){h.enqueue(Qo(v.message));return}if("error"in v){const y=bh(0,v);h.error(y),n(y);return}}catch(v){if(v instanceof Yt){h.error(v),n(v);return}}},o=new TextDecoder;return new ReadableStream({start(l){let h="";return d();async function d(){if(i!=null&&i.aborted){const m=new Yt("cancelled","Request was cancelled");return l.error(m),n(m),Promise.resolve()}try{const{value:m,done:v}=await t.read();if(v){h.trim()&&s(h.trim(),l),l.close();return}if(i!=null&&i.aborted){const E=new Yt("cancelled","Request was cancelled");l.error(E),n(E),await t.cancel();return}h+=o.decode(m,{stream:!0});const y=h.split(`
`);h=y.pop()||"";for(const E of y)E.trim()&&s(E.trim(),l);return d()}catch(m){const v=m instanceof Yt?m:bh(0,null);l.error(v),n(v)}}},cancel(){return t.cancel()}})}const xy="@firebase/functions",Ry="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN="auth-internal",sN="app-check-internal",oN="messaging-internal";function aN(t){const e=(n,{instanceIdentifier:i})=>{const s=n.getProvider("app").getImmediate(),o=n.getProvider(rN),l=n.getProvider(oN),h=n.getProvider(sN);return new K2(s,o,l,h,i)};gs(new Ar(mg,e,"PUBLIC").setMultipleInstances(!0)),ni(xy,Ry,t),ni(xy,Ry,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(t=Xh(),e=xp){const i=Yh(xt(t),mg).getImmediate({identifier:e}),s=J0("functions");return s&&uN(i,...s),i}function uN(t,e,n){Q2(xt(t),e,n)}function Es(t,e,n){return Y2(xt(t),e)}aN();const cN={apiKey:"demo",authDomain:"demo-no-project.firebaseapp.com",projectId:"demo-no-project"},gg=rA().length?Xh():rE(cN,"shiftx-customer-app"),jc=Ax(gg),Rp=S2(gg),Ts=lN(gg),II=Jn.createContext({toasts:[],show:()=>{},dismiss:()=>{}});function Ly({children:t}){const[e,n]=te.useState([]),i=(o,l="info")=>{const h=`toast-${Date.now()}`;n(d=>[...d,{id:h,message:o,type:l}]),setTimeout(()=>s(h),4e3)},s=o=>{n(l=>l.filter(h=>h.id!==o))};return D.jsxs(II.Provider,{value:{toasts:e,show:i,dismiss:s},children:[t,D.jsx(hN,{toasts:e,dismiss:s})]})}function fu(){const t=Jn.useContext(II);if(!t)throw new Error("useToast must be used within ToastProvider");return t}function hN({toasts:t,dismiss:e}){return D.jsx("div",{className:"toast-container",children:t.map(n=>D.jsx("div",{className:`toast toast-${n.type}`,onClick:()=>e(n.id),children:n.message},n.id))})}function Ny({user:t,auth:e,loading:n=!1,children:i}){const{show:s}=fu(),[o,l]=Jn.useState(!1),[h,d]=Jn.useState(!1),[m,v]=Jn.useState(""),[y,E]=Jn.useState(""),b=async M=>{if(M.preventDefault(),!m||!y){s("Email and password required","error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m)){s("Please enter a valid email address","error");return}if(h&&y.length<6){s("Password must be at least 6 characters","error");return}l(!0);try{h?(await dk(e,m,y),s("Account created successfully","success")):(await fk(e,m,y),s("Signed in successfully","success"))}catch(O){const S=O;S.code==="auth/user-not-found"||S.code==="auth/wrong-password"?s("Invalid email or password","error"):S.code==="auth/email-already-in-use"?s("Email already in use","error"):S.code==="auth/weak-password"?s("Password must be at least 6 characters","error"):S.code==="auth/invalid-email"?s("Invalid email format","error"):s(`Authentication failed: ${S.message}`,"error")}finally{l(!1)}},V=async()=>{try{await gk(e),s("Signed out","info")}catch(M){s(`Sign out failed: ${M.message}`,"error")}};return n?D.jsx("div",{className:"auth-gate",children:D.jsx("div",{className:"spinner",children:"Loading..."})}):t?D.jsxs("div",{className:"auth-wrapper",children:[D.jsxs("div",{className:"app-header",children:[D.jsx("h1",{children:"ShiftX Customer"}),D.jsx("button",{onClick:V,style:{padding:"8px 16px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",background:"rgba(255,255,255,0.05)",color:"#e1e6ef",cursor:"pointer",fontSize:"14px"},children:"Sign Out"})]}),D.jsx("div",{className:"app-content",children:i})]}):D.jsx("div",{className:"auth-gate",children:D.jsxs("div",{className:"auth-card",children:[D.jsx("h1",{children:"ShiftX Customer"}),D.jsx("p",{children:h?"Create your customer account":"Sign in to request a ride"}),D.jsxs("form",{onSubmit:b,style:{width:"100%"},children:[D.jsx("input",{type:"email",placeholder:"Email",value:m,onChange:M=>v(M.target.value),style:{width:"100%",padding:"12px",marginBottom:"12px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(255,255,255,0.05)",color:"#fff",fontSize:"14px"}}),D.jsx("input",{type:"password",placeholder:"Password",value:y,onChange:M=>E(M.target.value),style:{width:"100%",padding:"12px",marginBottom:"20px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(255,255,255,0.05)",color:"#fff",fontSize:"14px"}}),D.jsx("button",{type:"submit",disabled:o,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"none",background:"linear-gradient(135deg, #ffb703, #fb8b24)",color:"#000",fontSize:"16px",fontWeight:"600",cursor:o?"not-allowed":"pointer",opacity:o?.7:1},children:o?"Please wait...":h?"Sign Up":"Sign In"})]}),D.jsx("button",{onClick:()=>d(!h),style:{background:"none",border:"none",color:"rgba(255,255,255,0.6)",cursor:"pointer",marginTop:"16px",fontSize:"14px",textDecoration:"underline"},children:h?"Already have an account? Sign in":"Don't have an account? Sign up"})]})})}function SI(t,e){const n=te.useRef(e);te.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const dN=1;function fN(t){return Object.freeze({__version:dN,map:t})}function pN(t,e){return Object.freeze({...t,...e})}const PI=te.createContext(null),CI=PI.Provider;function _g(){const t=te.useContext(PI);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function mN(t){function e(n,i){const{instance:s,context:o}=t(n).current;return te.useImperativeHandle(i,()=>s),n.children==null?null:Jn.createElement(CI,{value:o},n.children)}return te.forwardRef(e)}function gN(t){function e(n,i){const[s,o]=te.useState(!1),{instance:l}=t(n,o).current;te.useImperativeHandle(i,()=>l),te.useEffect(function(){s&&l.update()},[l,s,n.children]);const h=l._contentNode;return h?G0.createPortal(n.children,h):null}return te.forwardRef(e)}function _N(t){function e(n,i){const{instance:s}=t(n).current;return te.useImperativeHandle(i,()=>s),null}return te.forwardRef(e)}function AI(t,e){const n=te.useRef();te.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function vg(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function vN(t,e){return function(i,s){const o=_g(),l=t(vg(i,o),o);return SI(o.map,i.attribution),AI(l.current,i.eventHandlers),e(l.current,o,i,s),l}}var Lp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(oS,function(n){var i="1.9.4";function s(r){var a,c,f,g;for(c=1,f=arguments.length;c<f;c++){g=arguments[c];for(a in g)r[a]=g[a]}return r}var o=Object.create||function(){function r(){}return function(a){return r.prototype=a,new r}}();function l(r,a){var c=Array.prototype.slice;if(r.bind)return r.bind.apply(r,c.call(arguments,1));var f=c.call(arguments,2);return function(){return r.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(r){return"_leaflet_id"in r||(r._leaflet_id=++h),r._leaflet_id}function m(r,a,c){var f,g,w,N;return N=function(){f=!1,g&&(w.apply(c,g),g=!1)},w=function(){f?g=arguments:(r.apply(c,arguments),setTimeout(N,a),f=!0)},w}function v(r,a,c){var f=a[1],g=a[0],w=f-g;return r===f&&c?r:((r-g)%w+w)%w+g}function y(){return!1}function E(r,a){if(a===!1)return r;var c=Math.pow(10,a===void 0?6:a);return Math.round(r*c)/c}function b(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function V(r){return b(r).split(/\s+/)}function M(r,a){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?o(r.options):{});for(var c in a)r.options[c]=a[c];return r.options}function W(r,a,c){var f=[];for(var g in r)f.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(r[g]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var O=/\{ *([\w_ -]+) *\}/g;function S(r,a){return r.replace(O,function(c,f){var g=a[f];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(a)),g})}var x=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function H(r,a){for(var c=0;c<r.length;c++)if(r[c]===a)return c;return-1}var Y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function K(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var A=0;function T(r){var a=+new Date,c=Math.max(0,16-(a-A));return A=a+c,window.setTimeout(r,c)}var P=window.requestAnimationFrame||K("RequestAnimationFrame")||T,C=window.cancelAnimationFrame||K("CancelAnimationFrame")||K("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function k(r,a,c){if(c&&P===T)r.call(a);else return P.call(window,l(r,a))}function F(r){r&&C.call(window,r)}var R={__proto__:null,extend:s,create:o,bind:l,get lastId(){return h},stamp:d,throttle:m,wrapNum:v,falseFn:y,formatNum:E,trim:b,splitWords:V,setOptions:M,getParamString:W,template:S,isArray:x,indexOf:H,emptyImageUrl:Y,requestFn:P,cancelFn:C,requestAnimFrame:k,cancelAnimFrame:F};function je(){}je.extend=function(r){var a=function(){M(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(a[g]=this[g]);return r.statics&&s(a,r.statics),r.includes&&(Hn(r.includes),s.apply(null,[f].concat(r.includes))),s(f,r),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},s(f.options,r.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,N=f._initHooks.length;w<N;w++)f._initHooks[w].call(this)}},a},je.include=function(r){var a=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=a,this.mergeOptions(r.options)),this},je.mergeOptions=function(r){return s(this.prototype.options,r),this},je.addInitHook=function(r){var a=Array.prototype.slice.call(arguments,1),c=typeof r=="function"?r:function(){this[r].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function Hn(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=x(r)?r:[r];for(var a=0;a<r.length;a++)r[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ct={on:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a);else{r=V(r);for(var g=0,w=r.length;g<w;g++)this._on(r[g],a,c)}return this},off:function(r,a,c){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var f in r)this._off(f,r[f],a);else{r=V(r);for(var g=arguments.length===1,w=0,N=r.length;w<N;w++)g?this._off(r[w]):this._off(r[w],a,c)}return this},_on:function(r,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(r,a,c)===!1){c===this&&(c=void 0);var g={fn:a,ctx:c};f&&(g.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(g)}},_off:function(r,a,c){var f,g,w;if(this._events&&(f=this._events[r],!!f)){if(arguments.length===1){if(this._firingCount)for(g=0,w=f.length;g<w;g++)f[g].fn=y;delete this._events[r];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var N=this._listens(r,a,c);if(N!==!1){var U=f[N];this._firingCount&&(U.fn=y,this._events[r]=f=f.slice()),f.splice(N,1)}}},fire:function(r,a,c){if(!this.listens(r,c))return this;var f=s({},a,{type:r,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var g=this._events[r];if(g){this._firingCount=this._firingCount+1||1;for(var w=0,N=g.length;w<N;w++){var U=g[w],B=U.fn;U.once&&this.off(r,B,U.ctx),B.call(U.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(r,a,c,f){typeof r!="string"&&console.warn('"string" type argument expected');var g=a;typeof a!="function"&&(f=!!a,g=void 0,c=void 0);var w=this._events&&this._events[r];if(w&&w.length&&this._listens(r,g,c)!==!1)return!0;if(f){for(var N in this._eventParents)if(this._eventParents[N].listens(r,a,c,f))return!0}return!1},_listens:function(r,a,c){if(!this._events)return!1;var f=this._events[r]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var g=0,w=f.length;g<w;g++)if(f[g].fn===a&&f[g].ctx===c)return g;return!1},once:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a,!0);else{r=V(r);for(var g=0,w=r.length;g<w;g++)this._on(r[g],a,c,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[d(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[d(r)],this},_propagateEvent:function(r){for(var a in this._eventParents)this._eventParents[a].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};ct.addEventListener=ct.on,ct.removeEventListener=ct.clearAllEventListeners=ct.off,ct.addOneTimeEventListener=ct.once,ct.fireEvent=ct.fire,ct.hasEventListeners=ct.listens;var zt=je.extend(ct);function q(r,a,c){this.x=c?Math.round(r):r,this.y=c?Math.round(a):a}var he=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};q.prototype={clone:function(){return new q(this.x,this.y)},add:function(r){return this.clone()._add(X(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(X(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new q(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new q(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=he(this.x),this.y=he(this.y),this},distanceTo:function(r){r=X(r);var a=r.x-this.x,c=r.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(r){return r=X(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=X(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+E(this.x)+", "+E(this.y)+")"}};function X(r,a,c){return r instanceof q?r:x(r)?new q(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new q(r.x,r.y):new q(r,a,c)}function de(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}de.prototype={extend:function(r){var a,c;if(!r)return this;if(r instanceof q||typeof r[0]=="number"||"x"in r)a=c=X(r);else if(r=ve(r),a=r.min,c=r.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(r){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var a,c;return typeof r[0]=="number"||r instanceof q?r=X(r):r=ve(r),r instanceof de?(a=r.min,c=r.max):a=c=r,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(r){r=ve(r);var a=this.min,c=this.max,f=r.min,g=r.max,w=g.x>=a.x&&f.x<=c.x,N=g.y>=a.y&&f.y<=c.y;return w&&N},overlaps:function(r){r=ve(r);var a=this.min,c=this.max,f=r.min,g=r.max,w=g.x>a.x&&f.x<c.x,N=g.y>a.y&&f.y<c.y;return w&&N},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*r,g=Math.abs(a.y-c.y)*r;return ve(X(a.x-f,a.y-g),X(c.x+f,c.y+g))},equals:function(r){return r?(r=ve(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function ve(r,a){return!r||r instanceof de?r:new de(r,a)}function Se(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}Se.prototype={extend:function(r){var a=this._southWest,c=this._northEast,f,g;if(r instanceof we)f=r,g=r;else if(r instanceof Se){if(f=r._southWest,g=r._northEast,!f||!g)return this}else return r?this.extend(me(r)||Le(r)):this;return!a&&!c?(this._southWest=new we(f.lat,f.lng),this._northEast=new we(g.lat,g.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(r){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*r,g=Math.abs(a.lng-c.lng)*r;return new Se(new we(a.lat-f,a.lng-g),new we(c.lat+f,c.lng+g))},getCenter:function(){return new we((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new we(this.getNorth(),this.getWest())},getSouthEast:function(){return new we(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof we||"lat"in r?r=me(r):r=Le(r);var a=this._southWest,c=this._northEast,f,g;return r instanceof Se?(f=r.getSouthWest(),g=r.getNorthEast()):f=g=r,f.lat>=a.lat&&g.lat<=c.lat&&f.lng>=a.lng&&g.lng<=c.lng},intersects:function(r){r=Le(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),w=g.lat>=a.lat&&f.lat<=c.lat,N=g.lng>=a.lng&&f.lng<=c.lng;return w&&N},overlaps:function(r){r=Le(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),w=g.lat>a.lat&&f.lat<c.lat,N=g.lng>a.lng&&f.lng<c.lng;return w&&N},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,a){return r?(r=Le(r),this._southWest.equals(r.getSouthWest(),a)&&this._northEast.equals(r.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Le(r,a){return r instanceof Se?r:new Se(r,a)}function we(r,a,c){if(isNaN(r)||isNaN(a))throw new Error("Invalid LatLng object: ("+r+", "+a+")");this.lat=+r,this.lng=+a,c!==void 0&&(this.alt=+c)}we.prototype={equals:function(r,a){if(!r)return!1;r=me(r);var c=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return c<=(a===void 0?1e-9:a)},toString:function(r){return"LatLng("+E(this.lat,r)+", "+E(this.lng,r)+")"},distanceTo:function(r){return Wn.distance(this,me(r))},wrap:function(){return Wn.wrapLatLng(this)},toBounds:function(r){var a=180*r/40075017,c=a/Math.cos(Math.PI/180*this.lat);return Le([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new we(this.lat,this.lng,this.alt)}};function me(r,a,c){return r instanceof we?r:x(r)&&typeof r[0]!="object"?r.length===3?new we(r[0],r[1],r[2]):r.length===2?new we(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new we(r.lat,"lng"in r?r.lng:r.lon,r.alt):a===void 0?null:new we(r,a,c)}var ht={latLngToPoint:function(r,a){var c=this.projection.project(r),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(r,a){var c=this.scale(a),f=this.transformation.untransform(r,c);return this.projection.unproject(f)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(r),f=this.transformation.transform(a.min,c),g=this.transformation.transform(a.max,c);return new de(f,g)},infinite:!1,wrapLatLng:function(r){var a=this.wrapLng?v(r.lng,this.wrapLng,!0):r.lng,c=this.wrapLat?v(r.lat,this.wrapLat,!0):r.lat,f=r.alt;return new we(c,a,f)},wrapLatLngBounds:function(r){var a=r.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,g=a.lng-c.lng;if(f===0&&g===0)return r;var w=r.getSouthWest(),N=r.getNorthEast(),U=new we(w.lat-f,w.lng-g),B=new we(N.lat-f,N.lng-g);return new Se(U,B)}},Wn=s({},ht,{wrapLng:[-180,180],R:6371e3,distance:function(r,a){var c=Math.PI/180,f=r.lat*c,g=a.lat*c,w=Math.sin((a.lat-r.lat)*c/2),N=Math.sin((a.lng-r.lng)*c/2),U=w*w+Math.cos(f)*Math.cos(g)*N*N,B=2*Math.atan2(Math.sqrt(U),Math.sqrt(1-U));return this.R*B}}),mu=6378137,ji={R:mu,MAX_LATITUDE:85.0511287798,project:function(r){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,r.lat),-c),g=Math.sin(f*a);return new q(this.R*r.lng*a,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(r){var a=180/Math.PI;return new we((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*a,r.x*a/this.R)},bounds:function(){var r=mu*Math.PI;return new de([-r,-r],[r,r])}()};function Hi(r,a,c,f){if(x(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=a,this._c=c,this._d=f}Hi.prototype={transform:function(r,a){return this._transform(r.clone(),a)},_transform:function(r,a){return a=a||1,r.x=a*(this._a*r.x+this._b),r.y=a*(this._c*r.y+this._d),r},untransform:function(r,a){return a=a||1,new q((r.x/a-this._b)/this._a,(r.y/a-this._d)/this._c)}};function di(r,a,c,f){return new Hi(r,a,c,f)}var Ur=s({},Wn,{code:"EPSG:3857",projection:ji,transformation:function(){var r=.5/(Math.PI*ji.R);return di(r,.5,-r,.5)}()}),oa=s({},Ur,{code:"EPSG:900913"});function Ls(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function aa(r,a){var c="",f,g,w,N,U,B;for(f=0,w=r.length;f<w;f++){for(U=r[f],g=0,N=U.length;g<N;g++)B=U[g],c+=(g?"L":"M")+B.x+" "+B.y;c+=a?re.svg?"z":"x":""}return c||"M0 0"}var la=document.documentElement.style,Ns="ActiveXObject"in window,gu=Ns&&!document.addEventListener,bs="msLaunchUri"in navigator&&!("documentMode"in document),Os=dn("webkit"),_u=dn("android"),Ds=dn("android 2")||dn("android 3"),ua=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),vu=_u&&dn("Google")&&ua<537&&!("AudioNode"in window),rt=!!window.opera,_t=!bs&&dn("chrome"),Br=dn("gecko")&&!Os&&!rt&&!Ns,yu=!_t&&dn("safari"),ca=dn("phantom"),wu="OTransition"in la,jr=navigator.platform.indexOf("Win")===0,ha=Ns&&"transition"in la,Ms="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ds,Vs="MozPerspective"in la,gd=!window.L_DISABLE_3D&&(ha||Ms||Vs)&&!wu&&!ca,Hr=typeof orientation<"u"||dn("mobile"),da=Hr&&Os,Eu=Hr&&Ms,fa=!window.PointerEvent&&window.MSPointerEvent,Wi=!!(window.PointerEvent||fa),Fs="ontouchstart"in window||!!window.TouchEvent,pa=!window.L_NO_TOUCH&&(Fs||Wi),fi=Hr&&rt,Tu=Hr&&Br,zs=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Iu=function(){var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",y,a),window.removeEventListener("testPassiveEventSupport",y,a)}catch{}return r}(),Wr=function(){return!!document.createElement("canvas").getContext}(),Us=!!(document.createElementNS&&Ls("svg").createSVGRect),It=!!Us&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Su=!Us&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var a=r.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),qr=navigator.platform.indexOf("Mac")===0,$r=navigator.platform.indexOf("Linux")===0;function dn(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var re={ie:Ns,ielt9:gu,edge:bs,webkit:Os,android:_u,android23:Ds,androidStock:vu,opera:rt,chrome:_t,gecko:Br,safari:yu,phantom:ca,opera12:wu,win:jr,ie3d:ha,webkit3d:Ms,gecko3d:Vs,any3d:gd,mobile:Hr,mobileWebkit:da,mobileWebkit3d:Eu,msPointer:fa,pointer:Wi,touch:pa,touchNative:Fs,mobileOpera:fi,mobileGecko:Tu,retina:zs,passiveEvents:Iu,canvas:Wr,svg:Us,vml:Su,inlineSvg:It,mac:qr,linux:$r},pi=re.msPointer?"MSPointerDown":"pointerdown",Pu=re.msPointer?"MSPointerMove":"pointermove",Cu=re.msPointer?"MSPointerUp":"pointerup",Zr=re.msPointer?"MSPointerCancel":"pointercancel",Bs={touchstart:pi,touchmove:Pu,touchend:Cu,touchcancel:Zr},js={touchstart:Ws,touchmove:Hs,touchend:Hs,touchcancel:Hs},kn={},xn=!1;function Au(r,a,c){return a==="touchstart"&&xu(),js[a]?(c=js[a].bind(this,c),r.addEventListener(Bs[a],c,!1),c):(console.warn("wrong event specified:",a),y)}function ku(r,a,c){if(!Bs[a]){console.warn("wrong event specified:",a);return}r.removeEventListener(Bs[a],c,!1)}function ma(r){kn[r.pointerId]=r}function ga(r){kn[r.pointerId]&&(kn[r.pointerId]=r)}function _a(r){delete kn[r.pointerId]}function xu(){xn||(document.addEventListener(pi,ma,!0),document.addEventListener(Pu,ga,!0),document.addEventListener(Cu,_a,!0),document.addEventListener(Zr,_a,!0),xn=!0)}function Hs(r,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in kn)a.touches.push(kn[c]);a.changedTouches=[a],r(a)}}function Ws(r,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&$e(a),Hs(r,a)}function Ru(r){var a={},c,f;for(f in r)c=r[f],a[f]=c&&c.bind?c.bind(r):c;return r=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var va=200;function Gr(r,a){r.addEventListener("dblclick",a);var c=0,f;function g(w){if(w.detail!==1){f=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var N=Ra(w);if(!(N.some(function(B){return B instanceof HTMLLabelElement&&B.attributes.for})&&!N.some(function(B){return B instanceof HTMLInputElement||B instanceof HTMLSelectElement}))){var U=Date.now();U-c<=va?(f++,f===2&&a(Ru(w))):f=1,c=U}}}return r.addEventListener("click",g),{dblclick:a,simDblclick:g}}function mi(r,a){r.removeEventListener("dblclick",a.dblclick),r.removeEventListener("click",a.simDblclick)}var Kr=_i(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Qr=_i(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ya=Qr==="webkitTransition"||Qr==="OTransition"?Qr+"End":"transitionend";function wa(r){return typeof r=="string"?document.getElementById(r):r}function qi(r,a){var c=r.style[a]||r.currentStyle&&r.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(r,null);c=f?f[a]:null}return c==="auto"?null:c}function Pe(r,a,c){var f=document.createElement(r);return f.className=a||"",c&&c.appendChild(f),f}function Ve(r){var a=r.parentNode;a&&a.removeChild(r)}function Yr(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function gi(r){var a=r.parentNode;a&&a.lastChild!==r&&a.appendChild(r)}function $i(r){var a=r.parentNode;a&&a.firstChild!==r&&a.insertBefore(r,a.firstChild)}function Ea(r,a){if(r.classList!==void 0)return r.classList.contains(a);var c=fn(r);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function _e(r,a){if(r.classList!==void 0)for(var c=V(a),f=0,g=c.length;f<g;f++)r.classList.add(c[f]);else if(!Ea(r,a)){var w=fn(r);Ta(r,(w?w+" ":"")+a)}}function He(r,a){r.classList!==void 0?r.classList.remove(a):Ta(r,b((" "+fn(r)+" ").replace(" "+a+" "," ")))}function Ta(r,a){r.className.baseVal===void 0?r.className=a:r.className.baseVal=a}function fn(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function Je(r,a){"opacity"in r.style?r.style.opacity=a:"filter"in r.style&&qs(r,a)}function qs(r,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=r.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):r.style.filter+=" progid:"+f+"(opacity="+a+")"}function _i(r){for(var a=document.documentElement.style,c=0;c<r.length;c++)if(r[c]in a)return r[c];return!1}function qn(r,a,c){var f=a||new q(0,0);r.style[Kr]=(re.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function fe(r,a){r._leaflet_pos=a,re.any3d?qn(r,a):(r.style.left=a.x+"px",r.style.top=a.y+"px")}function pn(r){return r._leaflet_pos||new q(0,0)}var Rn,Ln,Ia;if("onselectstart"in document)Rn=function(){ae(window,"selectstart",$e)},Ln=function(){De(window,"selectstart",$e)};else{var Zi=_i(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Rn=function(){if(Zi){var r=document.documentElement.style;Ia=r[Zi],r[Zi]="none"}},Ln=function(){Zi&&(document.documentElement.style[Zi]=Ia,Ia=void 0)}}function Sa(){ae(window,"dragstart",$e)}function Pa(){De(window,"dragstart",$e)}var $s,Ca;function vi(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(tn(),$s=r,Ca=r.style.outlineStyle,r.style.outlineStyle="none",ae(window,"keydown",tn))}function tn(){$s&&($s.style.outlineStyle=Ca,$s=void 0,Ca=void 0,De(window,"keydown",tn))}function Aa(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function Zs(r){var a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}var Lu={__proto__:null,TRANSFORM:Kr,TRANSITION:Qr,TRANSITION_END:ya,get:wa,getStyle:qi,create:Pe,remove:Ve,empty:Yr,toFront:gi,toBack:$i,hasClass:Ea,addClass:_e,removeClass:He,setClass:Ta,getClass:fn,setOpacity:Je,testProp:_i,setTransform:qn,setPosition:fe,getPosition:pn,get disableTextSelection(){return Rn},get enableTextSelection(){return Ln},disableImageDrag:Sa,enableImageDrag:Pa,preventOutline:vi,restoreOutline:tn,getSizedParentNode:Aa,getScale:Zs};function ae(r,a,c,f){if(a&&typeof a=="object")for(var g in a)ka(r,g,a[g],c);else{a=V(a);for(var w=0,N=a.length;w<N;w++)ka(r,a[w],c,f)}return this}var mn="_leaflet_events";function De(r,a,c,f){if(arguments.length===1)Nu(r),delete r[mn];else if(a&&typeof a=="object")for(var g in a)xa(r,g,a[g],c);else if(a=V(a),arguments.length===2)Nu(r,function(U){return H(a,U)!==-1});else for(var w=0,N=a.length;w<N;w++)xa(r,a[w],c,f);return this}function Nu(r,a){for(var c in r[mn]){var f=c.split(/\d/)[0];(!a||a(f))&&xa(r,f,null,null,c)}}var gn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ka(r,a,c,f){var g=a+d(c)+(f?"_"+d(f):"");if(r[mn]&&r[mn][g])return this;var w=function(U){return c.call(f||r,U||window.event)},N=w;!re.touchNative&&re.pointer&&a.indexOf("touch")===0?w=Au(r,a,w):re.touch&&a==="dblclick"?w=Gr(r,w):"addEventListener"in r?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?r.addEventListener(gn[a]||a,w,re.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(w=function(U){U=U||window.event,La(r,U)&&N(U)},r.addEventListener(gn[a],w,!1)):r.addEventListener(a,N,!1):r.attachEvent("on"+a,w),r[mn]=r[mn]||{},r[mn][g]=w}function xa(r,a,c,f,g){g=g||a+d(c)+(f?"_"+d(f):"");var w=r[mn]&&r[mn][g];if(!w)return this;!re.touchNative&&re.pointer&&a.indexOf("touch")===0?ku(r,a,w):re.touch&&a==="dblclick"?mi(r,w):"removeEventListener"in r?r.removeEventListener(gn[a]||a,w,!1):r.detachEvent("on"+a,w),r[mn][g]=null}function _n(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function Gi(r){return ka(r,"wheel",_n),this}function Ki(r){return ae(r,"mousedown touchstart dblclick contextmenu",_n),r._leaflet_disable_click=!0,this}function $e(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function nn(r){return $e(r),_n(r),this}function Ra(r){if(r.composedPath)return r.composedPath();for(var a=[],c=r.target;c;)a.push(c),c=c.parentNode;return a}function Gs(r,a){if(!a)return new q(r.clientX,r.clientY);var c=Zs(a),f=c.boundingClientRect;return new q((r.clientX-f.left)/c.x-a.clientLeft,(r.clientY-f.top)/c.y-a.clientTop)}var We=re.linux&&re.chrome?window.devicePixelRatio:re.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function bu(r){return re.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/We:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function La(r,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==r;)c=c.parentNode}catch{return!1}return c!==r}var Ou={__proto__:null,on:ae,off:De,stopPropagation:_n,disableScrollPropagation:Gi,disableClickPropagation:Ki,preventDefault:$e,stop:nn,getPropagationPath:Ra,getMousePosition:Gs,getWheelDelta:bu,isExternalTarget:La,addListener:ae,removeListener:De},Na=zt.extend({run:function(r,a,c,f){this.stop(),this._el=r,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=pn(r),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=k(this._animate,this),this._step()},_step:function(r){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),r):(this._runFrame(1),this._complete())},_runFrame:function(r,a){var c=this._startPos.add(this._offset.multiplyBy(r));a&&c._round(),fe(this._el,c),this.fire("step")},_complete:function(){F(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Te=zt.extend({options:{crs:Ur,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,a){a=M(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(me(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Qr&&re.any3d&&!re.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ae(this._proxy,ya,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),r=this._limitCenter(me(r),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,a,c.zoom):this._tryAnimatedPan(r,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(r,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(r,a){return this._loaded?this.setView(this.getCenter(),r,{zoom:a}):(this._zoom=r,this)},zoomIn:function(r,a){return r=r||(re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,a)},zoomOut:function(r,a){return r=r||(re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,a)},setZoomAround:function(r,a,c){var f=this.getZoomScale(a),g=this.getSize().divideBy(2),w=r instanceof q?r:this.latLngToContainerPoint(r),N=w.subtract(g).multiplyBy(1-1/f),U=this.containerPointToLatLng(g.add(N));return this.setView(U,a,{zoom:c})},_getBoundsCenterZoom:function(r,a){a=a||{},r=r.getBounds?r.getBounds():Le(r);var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),g=this.getBoundsZoom(r,!1,c.add(f));if(g=typeof a.maxZoom=="number"?Math.min(a.maxZoom,g):g,g===1/0)return{center:r.getCenter(),zoom:g};var w=f.subtract(c).divideBy(2),N=this.project(r.getSouthWest(),g),U=this.project(r.getNorthEast(),g),B=this.unproject(N.add(U).divideBy(2).add(w),g);return{center:B,zoom:g}},fitBounds:function(r,a){if(r=Le(r),!r.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(r,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,a){return this.setView(r,this._zoom,{pan:a})},panBy:function(r,a){if(r=X(r).round(),a=a||{},!r.x&&!r.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Na,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){_e(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,a,c){if(c=c||{},c.animate===!1||!re.any3d)return this.setView(r,a,c);this._stop();var f=this.project(this.getCenter()),g=this.project(r),w=this.getSize(),N=this._zoom;r=me(r),a=a===void 0?N:a;var U=Math.max(w.x,w.y),B=U*this.getZoomScale(N,a),Z=g.distanceTo(f)||1,ee=1.42,le=ee*ee;function Ee(ot){var Qu=ot?-1:1,nS=ot?B:U,iS=B*B-U*U+Qu*le*le*Z*Z,rS=2*nS*le*Z,Id=iS/rS,Hg=Math.sqrt(Id*Id+1)-Id,sS=Hg<1e-9?-18:Math.log(Hg);return sS}function Bt(ot){return(Math.exp(ot)-Math.exp(-ot))/2}function yt(ot){return(Math.exp(ot)+Math.exp(-ot))/2}function yn(ot){return Bt(ot)/yt(ot)}var Zt=Ee(0);function ao(ot){return U*(yt(Zt)/yt(Zt+ee*ot))}function XI(ot){return U*(yt(Zt)*yn(Zt+ee*ot)-Bt(Zt))/le}function JI(ot){return 1-Math.pow(1-ot,1.5)}var eS=Date.now(),Bg=(Ee(1)-Zt)/ee,tS=c.duration?1e3*c.duration:1e3*Bg*.8;function jg(){var ot=(Date.now()-eS)/tS,Qu=JI(ot)*Bg;ot<=1?(this._flyToFrame=k(jg,this),this._move(this.unproject(f.add(g.subtract(f).multiplyBy(XI(Qu)/Z)),N),this.getScaleZoom(U/ao(Qu),N),{flyTo:!0})):this._move(r,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),jg.call(this),this},flyToBounds:function(r,a){var c=this._getBoundsCenterZoom(r,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(r){return r=Le(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var a=this.options.minZoom;return this.options.minZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var a=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,Le(r));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(r,a){a=a||{};var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),g=this.project(this.getCenter()),w=this.project(r),N=this.getPixelBounds(),U=ve([N.min.add(c),N.max.subtract(f)]),B=U.getSize();if(!U.contains(w)){this._enforcingBounds=!0;var Z=w.subtract(U.getCenter()),ee=U.extend(w).getSize().subtract(B);g.x+=Z.x<0?-ee.x:ee.x,g.y+=Z.y<0?-ee.y:ee.y,this.panTo(this.unproject(g),a),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),g=c.divideBy(2).round(),w=f.subtract(g);return!w.x&&!w.y?this:(r.animate&&r.pan?this.panBy(w):(r.pan&&this._rawPanBy(w),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,r):navigator.geolocation.getCurrentPosition(a,c,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var a=r.code,c=r.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var a=r.coords.latitude,c=r.coords.longitude,f=new we(a,c),g=f.toBounds(r.coords.accuracy*2),w=this._locateOptions;if(w.setView){var N=this.getBoundsZoom(g);this.setView(f,w.maxZoom?Math.min(N,w.maxZoom):N)}var U={latlng:f,bounds:g,timestamp:r.timestamp};for(var B in r.coords)typeof r.coords[B]=="number"&&(U[B]=r.coords[B]);this.fire("locationfound",U)}},addHandler:function(r,a){if(!a)return this;var c=this[r]=new a(this);return this._handlers.push(c),this.options[r]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ve(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(F(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)Ve(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,a){var c="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),f=Pe("div",c,a||this._mapPane);return r&&(this._panes[r]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),a=this.unproject(r.getBottomLeft()),c=this.unproject(r.getTopRight());return new Se(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,a,c){r=Le(r),c=X(c||[0,0]);var f=this.getZoom()||0,g=this.getMinZoom(),w=this.getMaxZoom(),N=r.getNorthWest(),U=r.getSouthEast(),B=this.getSize().subtract(c),Z=ve(this.project(U,f),this.project(N,f)).getSize(),ee=re.any3d?this.options.zoomSnap:1,le=B.x/Z.x,Ee=B.y/Z.y,Bt=a?Math.max(le,Ee):Math.min(le,Ee);return f=this.getScaleZoom(Bt,f),ee&&(f=Math.round(f/(ee/100))*(ee/100),f=a?Math.ceil(f/ee)*ee:Math.floor(f/ee)*ee),Math.max(g,Math.min(w,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,a){var c=this._getTopLeftPoint(r,a);return new de(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(r)/c.scale(a)},getScaleZoom:function(r,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(r*c.scale(a));return isNaN(f)?1/0:f},project:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(me(r),a)},unproject:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(X(r),a)},layerPointToLatLng:function(r){var a=X(r).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(r){var a=this.project(me(r))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(me(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(Le(r))},distance:function(r,a){return this.options.crs.distance(me(r),me(a))},containerPointToLayerPoint:function(r){return X(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return X(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var a=this.containerPointToLayerPoint(X(r));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(me(r)))},mouseEventToContainerPoint:function(r){return Gs(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var a=this._container=wa(r);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ae(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&re.any3d,_e(r,"leaflet-container"+(re.touch?" leaflet-touch":"")+(re.retina?" leaflet-retina":"")+(re.ielt9?" leaflet-oldie":"")+(re.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=qi(r,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),fe(this._mapPane,new q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(_e(r.markerPane,"leaflet-zoom-hide"),_e(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,a,c){fe(this._mapPane,new q(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var g=this._zoom!==a;this._moveStart(g,c)._move(r,a)._moveEnd(g),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(r,a){return r&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(r,a,c,f){a===void 0&&(a=this._zoom);var g=this._zoom!==a;return this._zoom=a,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),f?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return F(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){fe(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[d(this._container)]=this;var a=r?De:ae;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),re.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){F(this._resizeRequest),this._resizeRequest=k(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,a){for(var c=[],f,g=a==="mouseout"||a==="mouseover",w=r.target||r.srcElement,N=!1;w;){if(f=this._targets[d(w)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){N=!0;break}if(f&&f.listens(a,!0)&&(g&&!La(w,r)||(c.push(f),g))||w===this._container)break;w=w.parentNode}return!c.length&&!N&&!g&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var a=r.target||r.srcElement;if(!(!this._loaded||a._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(a))){var c=r.type;c==="mousedown"&&vi(a),this._fireDOMEvent(r,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,a,c){if(r.type==="click"){var f=s({},r);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var g=this._findEventTargets(r,a);if(c){for(var w=[],N=0;N<c.length;N++)c[N].listens(a,!0)&&w.push(c[N]);g=w.concat(g)}if(g.length){a==="contextmenu"&&$e(r);var U=g[0],B={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var Z=U.getLatLng&&(!U._radius||U._radius<=10);B.containerPoint=Z?this.latLngToContainerPoint(U.getLatLng()):this.mouseEventToContainerPoint(r),B.layerPoint=this.containerPointToLayerPoint(B.containerPoint),B.latlng=Z?U.getLatLng():this.layerPointToLatLng(B.layerPoint)}for(N=0;N<g.length;N++)if(g[N].fire(a,B,!0),B.originalEvent._stopped||g[N].options.bubblingMouseEvents===!1&&H(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,a=this._handlers.length;r<a;r++)this._handlers[r].disable()},whenReady:function(r,a){return this._loaded?r.call(a||this,{target:this}):this.on("load",r,a),this},_getMapPanePos:function(){return pn(this._mapPane)||new q(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,a){var c=r&&a!==void 0?this._getNewPixelOrigin(r,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,a){var c=this.getSize()._divideBy(2);return this.project(r,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(r,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return ve([this.project(r.getSouthWest(),a)._subtract(f),this.project(r.getNorthWest(),a)._subtract(f),this.project(r.getSouthEast(),a)._subtract(f),this.project(r.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,a,c){if(!c)return r;var f=this.project(r,a),g=this.getSize().divideBy(2),w=new de(f.subtract(g),f.add(g)),N=this._getBoundsOffset(w,c,a);return Math.abs(N.x)<=1&&Math.abs(N.y)<=1?r:this.unproject(f.add(N),a)},_limitOffset:function(r,a){if(!a)return r;var c=this.getPixelBounds(),f=new de(c.min.add(r),c.max.add(r));return r.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(r,a,c){var f=ve(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),g=f.min.subtract(r.min),w=f.max.subtract(r.max),N=this._rebound(g.x,-w.x),U=this._rebound(g.y,-w.y);return new q(N,U)},_rebound:function(r,a){return r+a>0?Math.round(r-a)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(a))},_limitZoom:function(r){var a=this.getMinZoom(),c=this.getMaxZoom(),f=re.any3d?this.options.zoomSnap:1;return f&&(r=Math.round(r/f)*f),Math.max(a,Math.min(c,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){He(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,a){var c=this._getCenterOffset(r)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var r=this._proxy=Pe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(a){var c=Kr,f=this._proxy.style[c];qn(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ve(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),a=this.getZoom();qn(this._proxy,this.project(r,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),g=this._getCenterOffset(r)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(g)?!1:(k(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(r,a,!0)},this),!0)},_animateZoom:function(r,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=a,_e(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&He(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ks(r,a){return new Te(r,a)}var $t=je.extend({options:{position:"topright"},initialize:function(r){M(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var a=this._map;return a&&a.removeControl(this),this.options.position=r,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var a=this._container=this.onAdd(r),c=this.getPosition(),f=r._controlCorners[c];return _e(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ve(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),Ut=function(r){return new $t(r)};Te.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},a="leaflet-",c=this._controlContainer=Pe("div",a+"control-container",this._container);function f(g,w){var N=a+g+" "+a+w;r[g+w]=Pe("div",N,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)Ve(this._controlCorners[r]);Ve(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ba=$t.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(r,a,c){M(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in r)this._addLayer(r[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return $t.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,a){return this._addLayer(r,a),this._map?this._update():this},addOverlay:function(r,a){return this._addLayer(r,a,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(r));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){_e(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(_e(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):He(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return He(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",a=this._container=Pe("div",r),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),Ki(a),Gi(a);var f=this._section=Pe("section",r+"-list");c&&(this._map.on("click",this.collapse,this),ae(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Pe("a",r+"-toggle",a);g.href="#",g.title="Layers",g.setAttribute("role","button"),ae(g,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){$e(w),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Pe("div",r+"-base",f),this._separator=Pe("div",r+"-separator",f),this._overlaysList=Pe("div",r+"-overlays",f),a.appendChild(f)},_getLayer:function(r){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===r)return this._layers[a]},_addLayer:function(r,a,c){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,g){return this.options.sortFunction(f.layer,g.layer,f.name,g.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Yr(this._baseLayersList),Yr(this._overlaysList),this._layerControlInputs=[];var r,a,c,f,g=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,r=r||!f.overlay,g+=f.overlay?0:1;return this.options.hideSingleBase&&(r=r&&g>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=a&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var a=this._getLayer(d(r.target)),c=a.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(r,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(r){var a=document.createElement("label"),c=this._map.hasLayer(r.layer),f;r.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(r.layer),ae(f,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+r.name;var w=document.createElement("span");a.appendChild(w),w.appendChild(f),w.appendChild(g);var N=r.overlay?this._overlaysList:this._baseLayersList;return N.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,a,c,f=[],g=[];this._handlingClick=!0;for(var w=r.length-1;w>=0;w--)a=r[w],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||g.push(c);for(w=0;w<g.length;w++)this._map.hasLayer(g[w])&&this._map.removeLayer(g[w]);for(w=0;w<f.length;w++)this._map.hasLayer(f[w])||this._map.addLayer(f[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,a,c,f=this._map.getZoom(),g=r.length-1;g>=0;g--)a=r[g],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,ae(r,"click",$e),this.expand();var a=this;setTimeout(function(){De(r,"click",$e),a._preventClick=!1})}}),_d=function(r,a,c){return new ba(r,a,c)},yi=$t.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var a="leaflet-control-zoom",c=Pe("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,a,c,f,g){var w=Pe("a",c,f);return w.innerHTML=r,w.href="#",w.title=a,w.setAttribute("role","button"),w.setAttribute("aria-label",a),Ki(w),ae(w,"click",nn),ae(w,"click",g,this),ae(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var r=this._map,a="leaflet-disabled";He(this._zoomInButton,a),He(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(_e(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(_e(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Te.mergeOptions({zoomControl:!0}),Te.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new yi,this.addControl(this.zoomControl))});var Du=function(r){return new yi(r)},Qs=$t.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var a="leaflet-control-scale",c=Pe("div",a),f=this.options;return this._addScales(f,a+"-line",c),r.on(f.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),c},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,a,c){r.metric&&(this._mScale=Pe("div",a,c)),r.imperial&&(this._iScale=Pe("div",a,c))},_update:function(){var r=this._map,a=r.getSize().y/2,c=r.distance(r.containerPointToLatLng([0,a]),r.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var a=this._getRoundNum(r),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/r)},_updateImperial:function(r){var a=r*3.2808399,c,f,g;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(g=this._getRoundNum(a),this._updateScale(this._iScale,g+" ft",g/a))},_updateScale:function(r,a,c){r.style.width=Math.round(this.options.maxWidth*c)+"px",r.innerHTML=a},_getRoundNum:function(r){var a=Math.pow(10,(Math.floor(r)+"").length-1),c=r/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),Ys=function(r){return new Qs(r)},Mu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Qi=$t.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(re.inlineSvg?Mu+" ":"")+"Leaflet</a>"},initialize:function(r){M(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=Pe("div","leaflet-control-attribution"),Ki(this._container);for(var a in r._layers)r._layers[a].getAttribution&&this.addAttribution(r._layers[a].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var a in this._attributions)this._attributions[a]&&r.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),r.length&&c.push(r.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Te.mergeOptions({attributionControl:!0}),Te.addInitHook(function(){this.options.attributionControl&&new Qi().addTo(this)});var vd=function(r){return new Qi(r)};$t.Layers=ba,$t.Zoom=yi,$t.Scale=Qs,$t.Attribution=Qi,Ut.layers=_d,Ut.zoom=Du,Ut.scale=Ys,Ut.attribution=vd;var rn=je.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});rn.addTo=function(r,a){return r.addHandler(a,this),this};var Xr={Events:ct},Oa=re.touch?"touchstart mousedown":"mousedown",Nn=zt.extend({options:{clickTolerance:3},initialize:function(r,a,c,f){M(this,f),this._element=r,this._dragStartTarget=a||r,this._preventOutline=c},enable:function(){this._enabled||(ae(this._dragStartTarget,Oa,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Nn._dragging===this&&this.finishDrag(!0),De(this._dragStartTarget,Oa,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!Ea(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Nn._dragging===this&&this.finishDrag();return}if(!(Nn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Nn._dragging=this,this._preventOutline&&vi(this._element),Sa(),Rn(),!this._moving)){this.fire("down");var a=r.touches?r.touches[0]:r,c=Aa(this._element);this._startPoint=new q(a.clientX,a.clientY),this._startPos=pn(this._element),this._parentScale=Zs(c);var f=r.type==="mousedown";ae(document,f?"mousemove":"touchmove",this._onMove,this),ae(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var a=r.touches&&r.touches.length===1?r.touches[0]:r,c=new q(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,$e(r),this._moved||(this.fire("dragstart"),this._moved=!0,_e(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),_e(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),fe(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){He(document.body,"leaflet-dragging"),this._lastTarget&&(He(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),De(document,"mousemove touchmove",this._onMove,this),De(document,"mouseup touchend touchcancel",this._onUp,this),Pa(),Ln();var a=this._moved&&this._moving;this._moving=!1,Nn._dragging=!1,a&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function Xs(r,a,c){var f,g=[1,4,2,8],w,N,U,B,Z,ee,le,Ee;for(w=0,ee=r.length;w<ee;w++)r[w]._code=$n(r[w],a);for(U=0;U<4;U++){for(le=g[U],f=[],w=0,ee=r.length,N=ee-1;w<ee;N=w++)B=r[w],Z=r[N],B._code&le?Z._code&le||(Ee=vt(Z,B,le,a,c),Ee._code=$n(Ee,a),f.push(Ee)):(Z._code&le&&(Ee=vt(Z,B,le,a,c),Ee._code=$n(Ee,a),f.push(Ee)),f.push(B));r=f}return r}function Js(r,a){var c,f,g,w,N,U,B,Z,ee;if(!r||r.length===0)throw new Error("latlngs not passed");u(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var le=me([0,0]),Ee=Le(r),Bt=Ee.getNorthWest().distanceTo(Ee.getSouthWest())*Ee.getNorthEast().distanceTo(Ee.getNorthWest());Bt<1700&&(le=eo(r));var yt=r.length,yn=[];for(c=0;c<yt;c++){var Zt=me(r[c]);yn.push(a.project(me([Zt.lat-le.lat,Zt.lng-le.lng])))}for(U=B=Z=0,c=0,f=yt-1;c<yt;f=c++)g=yn[c],w=yn[f],N=g.y*w.x-w.y*g.x,B+=(g.x+w.x)*N,Z+=(g.y+w.y)*N,U+=N*3;U===0?ee=yn[0]:ee=[B/U,Z/U];var ao=a.unproject(X(ee));return me([ao.lat+le.lat,ao.lng+le.lng])}function eo(r){for(var a=0,c=0,f=0,g=0;g<r.length;g++){var w=me(r[g]);a+=w.lat,c+=w.lng,f++}return me([a/f,c/f])}var to={__proto__:null,clipPolygon:Xs,polygonCenter:Js,centroid:eo};function Da(r,a){if(!a||!r.length)return r.slice();var c=a*a;return r=Fu(r,c),r=Vu(r,c),r}function Ma(r,a,c){return Math.sqrt(vn(r,a,c,!0))}function wi(r,a,c){return vn(r,a,c)}function Vu(r,a){var c=r.length,f=typeof Uint8Array<"u"?Uint8Array:Array,g=new f(c);g[0]=g[c-1]=1,no(r,g,a,0,c-1);var w,N=[];for(w=0;w<c;w++)g[w]&&N.push(r[w]);return N}function no(r,a,c,f,g){var w=0,N,U,B;for(U=f+1;U<=g-1;U++)B=vn(r[U],r[f],r[g],!0),B>w&&(N=U,w=B);w>c&&(a[N]=1,no(r,a,c,f,N),no(r,a,c,N,g))}function Fu(r,a){for(var c=[r[0]],f=1,g=0,w=r.length;f<w;f++)zu(r[f],r[g])>a&&(c.push(r[f]),g=f);return g<w-1&&c.push(r[w-1]),c}var Va;function Jr(r,a,c,f,g){var w=f?Va:$n(r,c),N=$n(a,c),U,B,Z;for(Va=N;;){if(!(w|N))return[r,a];if(w&N)return!1;U=w||N,B=vt(r,a,U,c,g),Z=$n(B,c),U===w?(r=B,w=Z):(a=B,N=Z)}}function vt(r,a,c,f,g){var w=a.x-r.x,N=a.y-r.y,U=f.min,B=f.max,Z,ee;return c&8?(Z=r.x+w*(B.y-r.y)/N,ee=B.y):c&4?(Z=r.x+w*(U.y-r.y)/N,ee=U.y):c&2?(Z=B.x,ee=r.y+N*(B.x-r.x)/w):c&1&&(Z=U.x,ee=r.y+N*(U.x-r.x)/w),new q(Z,ee,g)}function $n(r,a){var c=0;return r.x<a.min.x?c|=1:r.x>a.max.x&&(c|=2),r.y<a.min.y?c|=4:r.y>a.max.y&&(c|=8),c}function zu(r,a){var c=a.x-r.x,f=a.y-r.y;return c*c+f*f}function vn(r,a,c,f){var g=a.x,w=a.y,N=c.x-g,U=c.y-w,B=N*N+U*U,Z;return B>0&&(Z=((r.x-g)*N+(r.y-w)*U)/B,Z>1?(g=c.x,w=c.y):Z>0&&(g+=N*Z,w+=U*Z)),N=r.x-g,U=r.y-w,f?N*N+U*U:new q(g,w)}function u(r){return!x(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function p(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),u(r)}function _(r,a){var c,f,g,w,N,U,B,Z;if(!r||r.length===0)throw new Error("latlngs not passed");u(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var ee=me([0,0]),le=Le(r),Ee=le.getNorthWest().distanceTo(le.getSouthWest())*le.getNorthEast().distanceTo(le.getNorthWest());Ee<1700&&(ee=eo(r));var Bt=r.length,yt=[];for(c=0;c<Bt;c++){var yn=me(r[c]);yt.push(a.project(me([yn.lat-ee.lat,yn.lng-ee.lng])))}for(c=0,f=0;c<Bt-1;c++)f+=yt[c].distanceTo(yt[c+1])/2;if(f===0)Z=yt[0];else for(c=0,w=0;c<Bt-1;c++)if(N=yt[c],U=yt[c+1],g=N.distanceTo(U),w+=g,w>f){B=(w-f)/g,Z=[U.x-B*(U.x-N.x),U.y-B*(U.y-N.y)];break}var Zt=a.unproject(X(Z));return me([Zt.lat+ee.lat,Zt.lng+ee.lng])}var I={__proto__:null,simplify:Da,pointToSegmentDistance:Ma,closestPointOnSegment:wi,clipSegment:Jr,_getEdgeIntersection:vt,_getBitCode:$n,_sqClosestPointOnSegment:vn,isFlat:u,_flat:p,polylineCenter:_},z={project:function(r){return new q(r.lng,r.lat)},unproject:function(r){return new we(r.y,r.x)},bounds:new de([-180,-90],[180,90])},j={R:6378137,R_MINOR:6356752314245179e-9,bounds:new de([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var a=Math.PI/180,c=this.R,f=r.lat*a,g=this.R_MINOR/c,w=Math.sqrt(1-g*g),N=w*Math.sin(f),U=Math.tan(Math.PI/4-f/2)/Math.pow((1-N)/(1+N),w/2);return f=-c*Math.log(Math.max(U,1e-10)),new q(r.lng*a*c,f)},unproject:function(r){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),w=Math.exp(-r.y/c),N=Math.PI/2-2*Math.atan(w),U=0,B=.1,Z;U<15&&Math.abs(B)>1e-7;U++)Z=g*Math.sin(N),Z=Math.pow((1-Z)/(1+Z),g/2),B=Math.PI/2-2*Math.atan(w*Z)-N,N+=B;return new we(N*a,r.x*a/c)}},J={__proto__:null,LonLat:z,Mercator:j,SphericalMercator:ji},be=s({},Wn,{code:"EPSG:3395",projection:j,transformation:function(){var r=.5/(Math.PI*j.R);return di(r,.5,-r,.5)}()}),st=s({},Wn,{code:"EPSG:4326",projection:z,transformation:di(1/180,1,-1/180,.5)}),ke=s({},ht,{projection:z,transformation:di(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,a){var c=a.lng-r.lng,f=a.lat-r.lat;return Math.sqrt(c*c+f*f)},infinite:!0});ht.Earth=Wn,ht.EPSG3395=be,ht.EPSG3857=Ur,ht.EPSG900913=oa,ht.EPSG4326=st,ht.Simple=ke;var Me=zt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[d(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[d(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var a=r.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Te.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(r);return this._layers[a]?this:(this._layers[a]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var a=d(r);return this._layers[a]?(this._loaded&&r.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return d(r)in this._layers},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},_addLayers:function(r){r=r?x(r)?r:[r]:[];for(var a=0,c=r.length;a<c;a++)this.addLayer(r[a])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[d(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var a=d(r);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var g=this._zoomBoundLayers[f].options;r=g.minZoom===void 0?r:Math.min(r,g.minZoom),a=g.maxZoom===void 0?a:Math.max(a,g.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=r===1/0?void 0:r,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ze=Me.extend({initialize:function(r,a){M(this,a),this._layers={};var c,f;if(r)for(c=0,f=r.length;c<f;c++)this.addLayer(r[c])},addLayer:function(r){var a=this.getLayerId(r);return this._layers[a]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var a=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(r){var a=typeof r=="number"?r:this.getLayerId(r);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[r]&&f[r].apply(f,a);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return d(r)}}),Yi=function(r,a){return new Ze(r,a)},tt=Ze.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),Ze.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),Ze.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new Se;for(var a in this._layers){var c=this._layers[a];r.extend(c.getBounds?c.getBounds():c.getLatLng())}return r}}),io=function(r,a){return new tt(r,a)},Zn=je.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){M(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,a){var c=this._getIconUrl(r);if(!c){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(r,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var g=X(f),w=X(a==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));r.className="leaflet-marker-"+a+" "+(c.className||""),w&&(r.style.marginLeft=-w.x+"px",r.style.marginTop=-w.y+"px"),g&&(r.style.width=g.x+"px",r.style.height=g.y+"px")},_createImg:function(r,a){return a=a||document.createElement("img"),a.src=r,a},_getIconUrl:function(r){return re.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function bI(r){return new Zn(r)}var Fa=Zn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof Fa.imagePath!="string"&&(Fa.imagePath=this._detectIconPath()),(this.options.imagePath||Fa.imagePath)+Zn.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var a=function(c,f,g){var w=f.exec(c);return w&&w[g]};return r=a(r,/^url\((['"])?(.+)\1\)$/,2),r&&a(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=Pe("div","leaflet-default-icon-path",document.body),a=qi(r,"background-image")||qi(r,"backgroundImage");if(document.body.removeChild(r),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),Tg=rn.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Nn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),_e(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&He(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,w=pn(a._icon),N=c.getPixelBounds(),U=c.getPixelOrigin(),B=ve(N.min._subtract(U).add(g),N.max._subtract(U).subtract(g));if(!B.contains(w)){var Z=X((Math.max(B.max.x,w.x)-B.max.x)/(N.max.x-B.max.x)-(Math.min(B.min.x,w.x)-B.min.x)/(N.min.x-B.min.x),(Math.max(B.max.y,w.y)-B.max.y)/(N.max.y-B.max.y)-(Math.min(B.min.y,w.y)-B.min.y)/(N.min.y-B.min.y)).multiplyBy(f);c.panBy(Z,{animate:!1}),this._draggable._newPos._add(Z),this._draggable._startPos._add(Z),fe(a._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=k(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(F(this._panRequest),this._panRequest=k(this._adjustPan.bind(this,r)))},_onDrag:function(r){var a=this._marker,c=a._shadow,f=pn(a._icon),g=a._map.layerPointToLatLng(f);c&&fe(c,f),a._latlng=g,r.latlng=g,r.oldLatLng=this._oldLatLng,a.fire("move",r).fire("drag",r)},_onDragEnd:function(r){F(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Uu=Me.extend({options:{icon:new Fa,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,a){M(this,a),this._latlng=me(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var a=this._latlng;return this._latlng=me(r),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=r.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,r.title&&(c.title=r.title),c.tagName==="IMG"&&(c.alt=r.alt||"")),_e(c,a),r.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ae(c,"focus",this._panOnFocus,this);var g=r.icon.createShadow(this._shadow),w=!1;g!==this._shadow&&(this._removeShadow(),w=!0),g&&(_e(g,a),g.alt=""),this._shadow=g,r.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&w&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&De(this._icon,"focus",this._panOnFocus,this),Ve(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ve(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&fe(this._icon,r),this._shadow&&fe(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(_e(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Tg)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Tg(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&Je(this._icon,r),this._shadow&&Je(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var a=this.options.icon.options,c=a.iconSize?X(a.iconSize):X(0,0),f=a.iconAnchor?X(a.iconAnchor):X(0,0);r.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function OI(r,a){return new Uu(r,a)}var Xi=Me.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return M(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Bu=Xi.extend({options:{fill:!0,radius:10},initialize:function(r,a){M(this,a),this._latlng=me(r),this._radius=this.options.radius},setLatLng:function(r){var a=this._latlng;return this._latlng=me(r),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var a=r&&r.radius||this._radius;return Xi.prototype.setStyle.call(this,r),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,a=this._radiusY||r,c=this._clickTolerance(),f=[r+c,a+c];this._pxBounds=new de(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function DI(r,a){return new Bu(r,a)}var yd=Bu.extend({initialize:function(r,a,c){if(typeof a=="number"&&(a=s({},c,{radius:a})),M(this,a),this._latlng=me(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new Se(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:Xi.prototype.setStyle,_project:function(){var r=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===Wn.distance){var g=Math.PI/180,w=this._mRadius/Wn.R/g,N=c.project([a+w,r]),U=c.project([a-w,r]),B=N.add(U).divideBy(2),Z=c.unproject(B).lat,ee=Math.acos((Math.cos(w*g)-Math.sin(a*g)*Math.sin(Z*g))/(Math.cos(a*g)*Math.cos(Z*g)))/g;(isNaN(ee)||ee===0)&&(ee=w/Math.cos(Math.PI/180*a)),this._point=B.subtract(c.getPixelOrigin()),this._radius=isNaN(ee)?0:B.x-c.project([Z,r-ee]).x,this._radiusY=B.y-N.y}else{var le=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(le).x}this._updateBounds()}});function MI(r,a,c){return new yd(r,a,c)}var Ei=Xi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,a){M(this,a),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var a=1/0,c=null,f=vn,g,w,N=0,U=this._parts.length;N<U;N++)for(var B=this._parts[N],Z=1,ee=B.length;Z<ee;Z++){g=B[Z-1],w=B[Z];var le=f(r,g,w,!0);le<a&&(a=le,c=f(r,g,w))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,a){return a=a||this._defaultShape(),r=me(r),a.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new Se,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return u(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var a=[],c=u(r),f=0,g=r.length;f<g;f++)c?(a[f]=me(r[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(r[f]);return a},_project:function(){var r=new de;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),a=new q(r,r);this._rawPxBounds&&(this._pxBounds=new de([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(r,a,c){var f=r[0]instanceof we,g=r.length,w,N;if(f){for(N=[],w=0;w<g;w++)N[w]=this._map.latLngToLayerPoint(r[w]),c.extend(N[w]);a.push(N)}else for(w=0;w<g;w++)this._projectLatlngs(r[w],a,c)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,g,w,N,U,B;for(c=0,g=0,w=this._rings.length;c<w;c++)for(B=this._rings[c],f=0,N=B.length;f<N-1;f++)U=Jr(B[f],B[f+1],r,f,!0),U&&(a[g]=a[g]||[],a[g].push(U[0]),(U[1]!==B[f+1]||f===N-2)&&(a[g].push(U[1]),g++))}},_simplifyPoints:function(){for(var r=this._parts,a=this.options.smoothFactor,c=0,f=r.length;c<f;c++)r[c]=Da(r[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,a){var c,f,g,w,N,U,B=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(c=0,w=this._parts.length;c<w;c++)for(U=this._parts[c],f=0,N=U.length,g=N-1;f<N;g=f++)if(!(!a&&f===0)&&Ma(r,U[g],U[f])<=B)return!0;return!1}});function VI(r,a){return new Ei(r,a)}Ei._flat=p;var ro=Ei.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Js(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var a=Ei.prototype._convertLatLngs.call(this,r),c=a.length;return c>=2&&a[0]instanceof we&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(r){Ei.prototype._setLatLngs.call(this,r),u(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return u(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,a=this.options.weight,c=new q(a,a);if(r=new de(r.min.subtract(c),r.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,g=this._rings.length,w;f<g;f++)w=Xs(this._rings[f],r,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var a=!1,c,f,g,w,N,U,B,Z;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(w=0,B=this._parts.length;w<B;w++)for(c=this._parts[w],N=0,Z=c.length,U=Z-1;N<Z;U=N++)f=c[N],g=c[U],f.y>r.y!=g.y>r.y&&r.x<(g.x-f.x)*(r.y-f.y)/(g.y-f.y)+f.x&&(a=!a);return a||Ei.prototype._containsPoint.call(this,r,!0)}});function FI(r,a){return new ro(r,a)}var Ti=tt.extend({initialize:function(r,a){M(this,a),this._layers={},r&&this.addData(r)},addData:function(r){var a=x(r)?r:r.features,c,f,g;if(a){for(c=0,f=a.length;c<f;c++)g=a[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var w=this.options;if(w.filter&&!w.filter(r))return this;var N=ju(r,w);return N?(N.feature=qu(r),N.defaultOptions=N.options,this.resetStyle(N),w.onEachFeature&&w.onEachFeature(r,N),this.addLayer(N)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(a){this._setLayerStyle(a,r)},this)},_setLayerStyle:function(r,a){r.setStyle&&(typeof a=="function"&&(a=a(r.feature)),r.setStyle(a))}});function ju(r,a){var c=r.type==="Feature"?r.geometry:r,f=c?c.coordinates:null,g=[],w=a&&a.pointToLayer,N=a&&a.coordsToLatLng||wd,U,B,Z,ee;if(!f&&!c)return null;switch(c.type){case"Point":return U=N(f),Ig(w,r,U,a);case"MultiPoint":for(Z=0,ee=f.length;Z<ee;Z++)U=N(f[Z]),g.push(Ig(w,r,U,a));return new tt(g);case"LineString":case"MultiLineString":return B=Hu(f,c.type==="LineString"?0:1,N),new Ei(B,a);case"Polygon":case"MultiPolygon":return B=Hu(f,c.type==="Polygon"?1:2,N),new ro(B,a);case"GeometryCollection":for(Z=0,ee=c.geometries.length;Z<ee;Z++){var le=ju({geometry:c.geometries[Z],type:"Feature",properties:r.properties},a);le&&g.push(le)}return new tt(g);case"FeatureCollection":for(Z=0,ee=c.features.length;Z<ee;Z++){var Ee=ju(c.features[Z],a);Ee&&g.push(Ee)}return new tt(g);default:throw new Error("Invalid GeoJSON object.")}}function Ig(r,a,c,f){return r?r(a,c):new Uu(c,f&&f.markersInheritOptions&&f)}function wd(r){return new we(r[1],r[0],r[2])}function Hu(r,a,c){for(var f=[],g=0,w=r.length,N;g<w;g++)N=a?Hu(r[g],a-1,c):(c||wd)(r[g]),f.push(N);return f}function Ed(r,a){return r=me(r),r.alt!==void 0?[E(r.lng,a),E(r.lat,a),E(r.alt,a)]:[E(r.lng,a),E(r.lat,a)]}function Wu(r,a,c,f){for(var g=[],w=0,N=r.length;w<N;w++)g.push(a?Wu(r[w],u(r[w])?0:a-1,c,f):Ed(r[w],f));return!a&&c&&g.length>0&&g.push(g[0].slice()),g}function so(r,a){return r.feature?s({},r.feature,{geometry:a}):qu(a)}function qu(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var Td={toGeoJSON:function(r){return so(this,{type:"Point",coordinates:Ed(this.getLatLng(),r)})}};Uu.include(Td),yd.include(Td),Bu.include(Td),Ei.include({toGeoJSON:function(r){var a=!u(this._latlngs),c=Wu(this._latlngs,a?1:0,!1,r);return so(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),ro.include({toGeoJSON:function(r){var a=!u(this._latlngs),c=a&&!u(this._latlngs[0]),f=Wu(this._latlngs,c?2:a?1:0,!0,r);return a||(f=[f]),so(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),Ze.include({toMultiPoint:function(r){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(r).geometry.coordinates)}),so(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(r){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(r);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(g){if(g.toGeoJSON){var w=g.toGeoJSON(r);if(c)f.push(w.geometry);else{var N=qu(w);N.type==="FeatureCollection"?f.push.apply(f,N.features):f.push(N)}}}),c?so(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function Sg(r,a){return new Ti(r,a)}var zI=Sg,$u=Me.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,a,c){this._url=r,this._bounds=Le(a),M(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(_e(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ve(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&gi(this._image),this},bringToBack:function(){return this._map&&$i(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=Le(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",a=this._image=r?this._url:Pe("img");if(_e(a,"leaflet-image-layer"),this._zoomAnimated&&_e(a,"leaflet-zoom-animated"),this.options.className&&_e(a,this.options.className),a.onselectstart=y,a.onmousemove=y,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(r){var a=this._map.getZoomScale(r.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;qn(this._image,c,a)},_reset:function(){var r=this._image,a=new de(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();fe(r,a.min),r.style.width=c.x+"px",r.style.height=c.y+"px"},_updateOpacity:function(){Je(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),UI=function(r,a,c){return new $u(r,a,c)},Pg=$u.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",a=this._image=r?this._url:Pe("video");if(_e(a,"leaflet-image-layer"),this._zoomAnimated&&_e(a,"leaflet-zoom-animated"),this.options.className&&_e(a,this.options.className),a.onselectstart=y,a.onmousemove=y,a.onloadeddata=l(this.fire,this,"load"),r){for(var c=a.getElementsByTagName("source"),f=[],g=0;g<c.length;g++)f.push(c[g].src);this._url=c.length>0?f:[a.src];return}x(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var N=Pe("source");N.src=this._url[w],a.appendChild(N)}}});function BI(r,a,c){return new Pg(r,a,c)}var Cg=$u.extend({_initImage:function(){var r=this._image=this._url;_e(r,"leaflet-image-layer"),this._zoomAnimated&&_e(r,"leaflet-zoom-animated"),this.options.className&&_e(r,this.options.className),r.onselectstart=y,r.onmousemove=y}});function jI(r,a,c){return new Cg(r,a,c)}var Gn=Me.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,a){r&&(r instanceof we||x(r))?(this._latlng=me(r),M(this,a)):(M(this,r),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&Je(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&Je(this._container,1),this.bringToFront(),this.options.interactive&&(_e(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(Je(this._container,0),this._removeTimeout=setTimeout(l(Ve,void 0,this._container),200)):Ve(this._container),this.options.interactive&&(He(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=me(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gi(this._container),this},bringToBack:function(){return this._map&&$i(this._container),this},_prepareOpen:function(r){var a=this._source;if(!a._map)return!1;if(a instanceof tt){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!r)if(a.getCenter)r=a.getCenter();else if(a.getLatLng)r=a.getLatLng();else if(a.getBounds)r=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")r.innerHTML=a;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),a=X(this.options.offset),c=this._getAnchor();this._zoomAnimated?fe(this._container,r.add(c)):a=a.add(r).add(c);var f=this._containerBottom=-a.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Te.include({_initOverlay:function(r,a,c,f){var g=a;return g instanceof r||(g=new r(f).setContent(a)),c&&g.setLatLng(c),g}}),Me.include({_initOverlay:function(r,a,c,f){var g=c;return g instanceof r?(M(g,f),g._source=this):(g=a&&!f?a:new r(f,this),g.setContent(c)),g}});var Zu=Gn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,Gn.prototype.openOn.call(this,r)},onAdd:function(r){Gn.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Xi||this._source.on("preclick",_n))},onRemove:function(r){Gn.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Xi||this._source.off("preclick",_n))},getEvents:function(){var r=Gn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",a=this._container=Pe("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Pe("div",r+"-content-wrapper",a);if(this._contentNode=Pe("div",r+"-content",c),Ki(a),Gi(this._contentNode),ae(a,"contextmenu",_n),this._tipContainer=Pe("div",r+"-tip-container",a),this._tip=Pe("div",r+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Pe("a",r+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',ae(f,"click",function(g){$e(g),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,a=r.style;a.width="",a.whiteSpace="nowrap";var c=r.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=r.offsetHeight,g=this.options.maxHeight,w="leaflet-popup-scrolled";g&&f>g?(a.height=g+"px",_e(r,w)):He(r,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),c=this._getAnchor();fe(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,a=parseInt(qi(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,g=new q(this._containerLeft,-c-this._containerBottom);g._add(pn(this._container));var w=r.layerPointToContainerPoint(g),N=X(this.options.autoPanPadding),U=X(this.options.autoPanPaddingTopLeft||N),B=X(this.options.autoPanPaddingBottomRight||N),Z=r.getSize(),ee=0,le=0;w.x+f+B.x>Z.x&&(ee=w.x+f-Z.x+B.x),w.x-ee-U.x<0&&(ee=w.x-U.x),w.y+c+B.y>Z.y&&(le=w.y+c-Z.y+B.y),w.y-le-U.y<0&&(le=w.y-U.y),(ee||le)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([ee,le]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),HI=function(r,a){return new Zu(r,a)};Te.mergeOptions({closePopupOnClick:!0}),Te.include({openPopup:function(r,a,c){return this._initOverlay(Zu,r,a,c).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Me.include({bindPopup:function(r,a){return this._popup=this._initOverlay(Zu,this._popup,r,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof tt||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){nn(r);var a=r.layer||r.target;if(this._popup._source===a&&!(a instanceof Xi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=a,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Gu=Gn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){Gn.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){Gn.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=Gn.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",a=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Pe("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var a,c,f=this._map,g=this._container,w=f.latLngToContainerPoint(f.getCenter()),N=f.layerPointToContainerPoint(r),U=this.options.direction,B=g.offsetWidth,Z=g.offsetHeight,ee=X(this.options.offset),le=this._getAnchor();U==="top"?(a=B/2,c=Z):U==="bottom"?(a=B/2,c=0):U==="center"?(a=B/2,c=Z/2):U==="right"?(a=0,c=Z/2):U==="left"?(a=B,c=Z/2):N.x<w.x?(U="right",a=0,c=Z/2):(U="left",a=B+(ee.x+le.x)*2,c=Z/2),r=r.subtract(X(a,c,!0)).add(ee).add(le),He(g,"leaflet-tooltip-right"),He(g,"leaflet-tooltip-left"),He(g,"leaflet-tooltip-top"),He(g,"leaflet-tooltip-bottom"),_e(g,"leaflet-tooltip-"+U),fe(g,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&Je(this._container,r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(a)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),WI=function(r,a){return new Gu(r,a)};Te.include({openTooltip:function(r,a,c){return this._initOverlay(Gu,r,a,c).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Me.include({bindTooltip:function(r,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Gu,this._tooltip,r,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var a=r?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof tt||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&(ae(a,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),ae(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var a=r.latlng,c,f;this._tooltip.options.sticky&&r.originalEvent&&(c=this._map.mouseEventToContainerPoint(r.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var Ag=Zn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var a=r&&r.tagName==="DIV"?r:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Yr(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=X(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function qI(r){return new Ag(r)}Zn.Default=Fa;var za=Me.extend({options:{tileSize:256,opacity:1,updateWhenIdle:re.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){M(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),Ve(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&($i(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof q?r:new q(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var a=this.getPane().children,c=-r(-1/0,1/0),f=0,g=a.length,w;f<g;f++)w=a[f].style.zIndex,a[f]!==this._container&&w&&(c=r(c,+w));isFinite(c)&&(this.options.zIndex=c+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!re.ielt9){Je(this._container,this.options.opacity);var r=+new Date,a=!1,c=!1;for(var f in this._tiles){var g=this._tiles[f];if(!(!g.current||!g.loaded)){var w=Math.min(1,(r-g.loaded)/200);Je(g.el,w),w<1?a=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(F(this._fadeFrame),this._fadeFrame=k(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Pe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,a=this.options.maxZoom;if(r!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===r?(this._levels[c].el.style.zIndex=a-Math.abs(r-c),this._onUpdateLevel(c)):(Ve(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[r],g=this._map;return f||(f=this._levels[r]={},f.el=Pe("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=g.project(g.unproject(g.getPixelOrigin()),r).round(),f.zoom=r,this._setZoomTransform(f,g.getCenter(),g.getZoom()),y(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(this._map){var r,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)a=this._tiles[r],a.retain=a.current;for(r in this._tiles)if(a=this._tiles[r],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var a in this._tiles)this._tiles[a].coords.z===r&&this._removeTile(a)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)Ve(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,a,c,f){var g=Math.floor(r/2),w=Math.floor(a/2),N=c-1,U=new q(+g,+w);U.z=+N;var B=this._tileCoordsToKey(U),Z=this._tiles[B];return Z&&Z.active?(Z.retain=!0,!0):(Z&&Z.loaded&&(Z.retain=!0),N>f?this._retainParent(g,w,N,f):!1)},_retainChildren:function(r,a,c,f){for(var g=2*r;g<2*r+2;g++)for(var w=2*a;w<2*a+2;w++){var N=new q(g,w);N.z=c+1;var U=this._tileCoordsToKey(N),B=this._tiles[U];if(B&&B.active){B.retain=!0;continue}else B&&B.loaded&&(B.retain=!0);c+1<f&&this._retainChildren(g,w,c+1,f)}},_resetView:function(r){var a=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var a=this.options;return a.minNativeZoom!==void 0&&r<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<r?a.maxNativeZoom:r},_setView:function(r,a,c,f){var g=Math.round(a);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var w=this.options.updateWhenZooming&&g!==this._tileZoom;(!f||w)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(r),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(r,a)},_setZoomTransforms:function(r,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],r,a)},_setZoomTransform:function(r,a,c){var f=this._map.getZoomScale(c,r.zoom),g=r.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();re.any3d?qn(r.el,g,f):fe(r.el,g)},_resetGrid:function(){var r=this._map,a=r.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(r.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(r.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),g=a.project(r,this._tileZoom).floor(),w=a.getSize().divideBy(f*2);return new de(g.subtract(w),g.add(w))},_update:function(r){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(r===void 0&&(r=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(r),g=this._pxBoundsToTileRange(f),w=g.getCenter(),N=[],U=this.options.keepBuffer,B=new de(g.getBottomLeft().subtract([U,-U]),g.getTopRight().add([U,-U]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Z in this._tiles){var ee=this._tiles[Z].coords;(ee.z!==this._tileZoom||!B.contains(new q(ee.x,ee.y)))&&(this._tiles[Z].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(r,c);return}for(var le=g.min.y;le<=g.max.y;le++)for(var Ee=g.min.x;Ee<=g.max.x;Ee++){var Bt=new q(Ee,le);if(Bt.z=this._tileZoom,!!this._isValidTile(Bt)){var yt=this._tiles[this._tileCoordsToKey(Bt)];yt?yt.current=!0:N.push(Bt)}}if(N.sort(function(Zt,ao){return Zt.distanceTo(w)-ao.distanceTo(w)}),N.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var yn=document.createDocumentFragment();for(Ee=0;Ee<N.length;Ee++)this._addTile(N[Ee],yn);this._level.el.appendChild(yn)}}}},_isValidTile:function(r){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(r.x<c.min.x||r.x>c.max.x)||!a.wrapLat&&(r.y<c.min.y||r.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(r);return Le(this.options.bounds).overlaps(f)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var a=this._map,c=this.getTileSize(),f=r.scaleBy(c),g=f.add(c),w=a.unproject(f,r.z),N=a.unproject(g,r.z);return[w,N]},_tileCoordsToBounds:function(r){var a=this._tileCoordsToNwSe(r),c=new Se(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var a=r.split(":"),c=new q(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(r){var a=this._tiles[r];a&&(Ve(a.el),delete this._tiles[r],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){_e(r,"leaflet-tile");var a=this.getTileSize();r.style.width=a.x+"px",r.style.height=a.y+"px",r.onselectstart=y,r.onmousemove=y,re.ielt9&&this.options.opacity<1&&Je(r,this.options.opacity)},_addTile:function(r,a){var c=this._getTilePos(r),f=this._tileCoordsToKey(r),g=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(g),this.createTile.length<2&&k(l(this._tileReady,this,r,null,g)),fe(g,c),this._tiles[f]={el:g,coords:r,current:!0},a.appendChild(g),this.fire("tileloadstart",{tile:g,coords:r})},_tileReady:function(r,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:r});var f=this._tileCoordsToKey(r);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Je(c.el,0),F(this._fadeFrame),this._fadeFrame=k(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(_e(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),re.ielt9||!this._map._fadeAnimated?k(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var a=new q(this._wrapX?v(r.x,this._wrapX):r.x,this._wrapY?v(r.y,this._wrapY):r.y);return a.z=r.z,a},_pxBoundsToTileRange:function(r){var a=this.getTileSize();return new de(r.min.unscaleBy(a).floor(),r.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function $I(r){return new za(r)}var oo=za.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,a){this._url=r,a=M(this,a),a.detectRetina&&re.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,a){return this._url===r&&a===void 0&&(a=!0),this._url=r,a||this.redraw(),this},createTile:function(r,a){var c=document.createElement("img");return ae(c,"load",l(this._tileOnLoad,this,a,c)),ae(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(r),c},getTileUrl:function(r){var a={r:re.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-r.y;this.options.tms&&(a.y=c),a["-y"]=c}return S(this._url,s(a,this.options))},_tileOnLoad:function(r,a){re.ielt9?setTimeout(l(r,this,null,a),0):r(null,a)},_tileOnError:function(r,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),r(c,a)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(r=a-r),r+f},_getSubdomain:function(r){var a=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var r,a;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(a=this._tiles[r].el,a.onload=y,a.onerror=y,!a.complete)){a.src=Y;var c=this._tiles[r].coords;Ve(a),delete this._tiles[r],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(r){var a=this._tiles[r];if(a)return a.el.setAttribute("src",Y),za.prototype._removeTile.call(this,r)},_tileReady:function(r,a,c){if(!(!this._map||c&&c.getAttribute("src")===Y))return za.prototype._tileReady.call(this,r,a,c)}});function kg(r,a){return new oo(r,a)}var xg=oo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,a){this._url=r;var c=s({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=M(this,a);var g=a.detectRetina&&re.retina?2:1,w=this.getTileSize();c.width=w.x*g,c.height=w.y*g,this.wmsParams=c},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,oo.prototype.onAdd.call(this,r)},getTileUrl:function(r){var a=this._tileCoordsToNwSe(r),c=this._crs,f=ve(c.project(a[0]),c.project(a[1])),g=f.min,w=f.max,N=(this._wmsVersion>=1.3&&this._crs===st?[g.y,g.x,w.y,w.x]:[g.x,g.y,w.x,w.y]).join(","),U=oo.prototype.getTileUrl.call(this,r);return U+W(this.wmsParams,U,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+N},setParams:function(r,a){return s(this.wmsParams,r),a||this.redraw(),this}});function ZI(r,a){return new xg(r,a)}oo.WMS=xg,kg.wms=ZI;var Ii=Me.extend({options:{padding:.1},initialize:function(r){M(this,r),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),_e(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),w=f.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(r,a));re.any3d?qn(this._container,w,c):fe(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-r)).round();this._bounds=new de(c,c.add(a.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Rg=Ii.extend({options:{tolerance:0},getEvents:function(){var r=Ii.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ii.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");ae(r,"mousemove",this._onMouseMove,this),ae(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ae(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){F(this._redrawRequest),delete this._ctx,Ve(this._container),De(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var a in this._layers)r=this._layers[a],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ii.prototype._update.call(this);var r=this._bounds,a=this._container,c=r.getSize(),f=re.retina?2:1;fe(a,r.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",re.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){Ii.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[d(r)]=r;var a=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var a=r._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete r._order,delete this._layers[d(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var a=r.options.dashArray.split(/[, ]+/),c=[],f,g;for(g=0;g<a.length;g++){if(f=Number(a[g]),isNaN(f))return;c.push(f)}r.options._dashArray=c}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||k(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var a=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new de,this._redrawBounds.extend(r._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(r._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var a=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)r=f.layer,(!a||r._pxBounds&&r._pxBounds.intersects(a))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,a){if(this._drawing){var c,f,g,w,N=r._parts,U=N.length,B=this._ctx;if(U){for(B.beginPath(),c=0;c<U;c++){for(f=0,g=N[c].length;f<g;f++)w=N[c][f],B[f?"lineTo":"moveTo"](w.x,w.y);a&&B.closePath()}this._fillStroke(B,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var a=r._point,c=this._ctx,f=Math.max(Math.round(r._radius),1),g=(Math.max(Math.round(r._radiusY),1)||f)/f;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(a.x,a.y/g,f,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,r)}},_fillStroke:function(r,a){var c=a.options;c.fill&&(r.globalAlpha=c.fillOpacity,r.fillStyle=c.fillColor||c.color,r.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(r.setLineDash&&r.setLineDash(a.options&&a.options._dashArray||[]),r.globalAlpha=c.opacity,r.lineWidth=c.weight,r.strokeStyle=c.color,r.lineCap=c.lineCap,r.lineJoin=c.lineJoin,r.stroke())},_onClick:function(r){for(var a=this._map.mouseEventToLayerPoint(r),c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,a)}},_handleMouseOut:function(r){var a=this._hoveredLayer;a&&(He(this._container,"leaflet-interactive"),this._fireEvent([a],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,a){if(!this._mouseHoverThrottled){for(var c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(r),f&&(_e(this._container,"leaflet-interactive"),this._fireEvent([f],r,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,a,c){this._map._fireDOMEvent(a,c||a.type,r)},_bringToFront:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(r)}},_bringToBack:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(r)}}});function Lg(r){return re.canvas?new Rg(r):null}var Ua=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),GI={_initContainer:function(){this._container=Pe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ii.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var a=r._container=Ua("shape");_e(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",r._path=Ua("path"),a.appendChild(r._path),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){var a=r._container;this._container.appendChild(a),r.options.interactive&&r.addInteractiveTarget(a)},_removePath:function(r){var a=r._container;Ve(a),r.removeInteractiveTarget(a),delete this._layers[d(r)]},_updateStyle:function(r){var a=r._stroke,c=r._fill,f=r.options,g=r._container;g.stroked=!!f.stroke,g.filled=!!f.fill,f.stroke?(a||(a=r._stroke=Ua("stroke")),g.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=x(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(g.removeChild(a),r._stroke=null),f.fill?(c||(c=r._fill=Ua("fill")),g.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(g.removeChild(c),r._fill=null)},_updateCircle:function(r){var a=r._point.round(),c=Math.round(r._radius),f=Math.round(r._radiusY||c);this._setPath(r,r._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(r,a){r._path.v=a},_bringToFront:function(r){gi(r._container)},_bringToBack:function(r){$i(r._container)}},Ku=re.vml?Ua:Ls,Ba=Ii.extend({_initContainer:function(){this._container=Ku("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ku("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ve(this._container),De(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ii.prototype._update.call(this);var r=this._bounds,a=r.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),fe(c,r.min),c.setAttribute("viewBox",[r.min.x,r.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(r){var a=r._path=Ku("path");r.options.className&&_e(a,r.options.className),r.options.interactive&&_e(a,"leaflet-interactive"),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){Ve(r._path),r.removeInteractiveTarget(r._path),delete this._layers[d(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var a=r._path,c=r.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(r,a){this._setPath(r,aa(r._parts,a))},_updateCircle:function(r){var a=r._point,c=Math.max(Math.round(r._radius),1),f=Math.max(Math.round(r._radiusY),1)||c,g="a"+c+","+f+" 0 1,0 ",w=r._empty()?"M0 0":"M"+(a.x-c)+","+a.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(r,w)},_setPath:function(r,a){r._path.setAttribute("d",a)},_bringToFront:function(r){gi(r._path)},_bringToBack:function(r){$i(r._path)}});re.vml&&Ba.include(GI);function Ng(r){return re.svg||re.vml?new Ba(r):null}Te.include({getRenderer:function(r){var a=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var a=this._paneRenderers[r];return a===void 0&&(a=this._createRenderer({pane:r}),this._paneRenderers[r]=a),a},_createRenderer:function(r){return this.options.preferCanvas&&Lg(r)||Ng(r)}});var bg=ro.extend({initialize:function(r,a){ro.prototype.initialize.call(this,this._boundsToLatLngs(r),a)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=Le(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function KI(r,a){return new bg(r,a)}Ba.create=Ku,Ba.pointsToPath=aa,Ti.geometryToLayer=ju,Ti.coordsToLatLng=wd,Ti.coordsToLatLngs=Hu,Ti.latLngToCoords=Ed,Ti.latLngsToCoords=Wu,Ti.getFeature=so,Ti.asFeature=qu,Te.mergeOptions({boxZoom:!0});var Og=rn.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){ae(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){De(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ve(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Rn(),Sa(),this._startPoint=this._map.mouseEventToContainerPoint(r),ae(document,{contextmenu:nn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=Pe("div","leaflet-zoom-box",this._container),_e(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var a=new de(this._point,this._startPoint),c=a.getSize();fe(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Ve(this._box),He(this._container,"leaflet-crosshair")),Ln(),Pa(),De(document,{contextmenu:nn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Se(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Te.addInitHook("addHandler","boxZoom",Og),Te.mergeOptions({doubleClickZoom:!0});var Dg=rn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,g=r.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(g):a.setZoomAround(r.containerPoint,g)}});Te.addInitHook("addHandler","doubleClickZoom",Dg),Te.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Mg=rn.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Nn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}_e(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){He(this._map._container,"leaflet-grab"),He(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=Le(this._map.options.maxBounds);this._offsetLimit=ve(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,a){return r-(r-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;r.x<a.min.x&&(r.x=this._viscousLimit(r.x,a.min.x)),r.y<a.min.y&&(r.y=this._viscousLimit(r.y,a.min.y)),r.x>a.max.x&&(r.x=this._viscousLimit(r.x,a.max.x)),r.y>a.max.y&&(r.y=this._viscousLimit(r.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,a=Math.round(r/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,g=(f-a+c)%r+a-c,w=(f+a+c)%r-a-c,N=Math.abs(g+c)<Math.abs(w+c)?g:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=N},_onDragEnd:function(r){var a=this._map,c=a.options,f=!c.inertia||r.noInertia||this._times.length<2;if(a.fire("dragend",r),f)a.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,N=c.easeLinearity,U=g.multiplyBy(N/w),B=U.distanceTo([0,0]),Z=Math.min(c.inertiaMaxSpeed,B),ee=U.multiplyBy(Z/B),le=Z/(c.inertiaDeceleration*N),Ee=ee.multiplyBy(-le/2).round();!Ee.x&&!Ee.y?a.fire("moveend"):(Ee=a._limitOffset(Ee,a.options.maxBounds),k(function(){a.panBy(Ee,{duration:le,easeLinearity:N,noMoveStart:!0,animate:!0})}))}}});Te.addInitHook("addHandler","dragging",Mg),Te.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Vg=rn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),ae(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),De(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,a=document.documentElement,c=r.scrollTop||a.scrollTop,f=r.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var a=this._panKeys={},c=this.keyCodes,f,g;for(f=0,g=c.left.length;f<g;f++)a[c.left[f]]=[-1*r,0];for(f=0,g=c.right.length;f<g;f++)a[c.right[f]]=[r,0];for(f=0,g=c.down.length;f<g;f++)a[c.down[f]]=[0,r];for(f=0,g=c.up.length;f<g;f++)a[c.up[f]]=[0,-1*r]},_setZoomDelta:function(r){var a=this._zoomKeys={},c=this.keyCodes,f,g;for(f=0,g=c.zoomIn.length;f<g;f++)a[c.zoomIn[f]]=r;for(f=0,g=c.zoomOut.length;f<g;f++)a[c.zoomOut[f]]=-r},_addHooks:function(){ae(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){De(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var a=r.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],r.shiftKey&&(f=X(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(X(f),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(g)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;nn(r)}}});Te.addInitHook("addHandler","keyboard",Vg),Te.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Fg=rn.extend({addHooks:function(){ae(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){De(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var a=bu(r),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),nn(r)},_performZoom:function(){var r=this._map,a=r.getZoom(),c=this._map.options.zoomSnap||0;r._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,w=c?Math.ceil(g/c)*c:g,N=r._limitZoom(a+(this._delta>0?w:-w))-a;this._delta=0,this._startTime=null,N&&(r.options.scrollWheelZoom==="center"?r.setZoom(a+N):r.setZoomAround(this._lastMousePos,a+N))}});Te.addInitHook("addHandler","scrollWheelZoom",Fg);var QI=600;Te.mergeOptions({tapHold:re.touchNative&&re.safari&&re.mobile,tapTolerance:15});var zg=rn.extend({addHooks:function(){ae(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){De(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var a=r.touches[0];this._startPos=this._newPos=new q(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(ae(document,"touchend",$e),ae(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),QI),ae(document,"touchend touchcancel contextmenu",this._cancel,this),ae(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){De(document,"touchend",$e),De(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),De(document,"touchend touchcancel contextmenu",this._cancel,this),De(document,"touchmove",this._onMove,this)},_onMove:function(r){var a=r.touches[0];this._newPos=new q(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,a){var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Te.addInitHook("addHandler","tapHold",zg),Te.mergeOptions({touchZoom:re.touch,bounceAtZoomLimits:!0});var Ug=rn.extend({addHooks:function(){_e(this._map._container,"leaflet-touch-zoom"),ae(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){He(this._map._container,"leaflet-touch-zoom"),De(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var a=this._map;if(!(!r.touches||r.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),ae(document,"touchmove",this._onTouchMove,this),ae(document,"touchend touchcancel",this._onTouchEnd,this),$e(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]),g=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(g,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&g<1||this._zoom>a.getMaxZoom()&&g>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var w=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(g===1&&w.x===0&&w.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),F(this._animRequest);var N=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=k(N,this,!0),$e(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,F(this._animRequest),De(document,"touchmove",this._onTouchMove,this),De(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Te.addInitHook("addHandler","touchZoom",Ug),Te.BoxZoom=Og,Te.DoubleClickZoom=Dg,Te.Drag=Mg,Te.Keyboard=Vg,Te.ScrollWheelZoom=Fg,Te.TapHold=zg,Te.TouchZoom=Ug,n.Bounds=de,n.Browser=re,n.CRS=ht,n.Canvas=Rg,n.Circle=yd,n.CircleMarker=Bu,n.Class=je,n.Control=$t,n.DivIcon=Ag,n.DivOverlay=Gn,n.DomEvent=Ou,n.DomUtil=Lu,n.Draggable=Nn,n.Evented=zt,n.FeatureGroup=tt,n.GeoJSON=Ti,n.GridLayer=za,n.Handler=rn,n.Icon=Zn,n.ImageOverlay=$u,n.LatLng=we,n.LatLngBounds=Se,n.Layer=Me,n.LayerGroup=Ze,n.LineUtil=I,n.Map=Te,n.Marker=Uu,n.Mixin=Xr,n.Path=Xi,n.Point=q,n.PolyUtil=to,n.Polygon=ro,n.Polyline=Ei,n.Popup=Zu,n.PosAnimation=Na,n.Projection=J,n.Rectangle=bg,n.Renderer=Ii,n.SVG=Ba,n.SVGOverlay=Cg,n.TileLayer=oo,n.Tooltip=Gu,n.Transformation=Hi,n.Util=R,n.VideoOverlay=Pg,n.bind=l,n.bounds=ve,n.canvas=Lg,n.circle=MI,n.circleMarker=DI,n.control=Ut,n.divIcon=qI,n.extend=s,n.featureGroup=io,n.geoJSON=Sg,n.geoJson=zI,n.gridLayer=$I,n.icon=bI,n.imageOverlay=UI,n.latLng=me,n.latLngBounds=Le,n.layerGroup=Yi,n.map=Ks,n.marker=OI,n.point=X,n.polygon=FI,n.polyline=VI,n.popup=HI,n.rectangle=KI,n.setOptions=M,n.stamp=d,n.svg=Ng,n.svgOverlay=jI,n.tileLayer=kg,n.tooltip=WI,n.transformation=di,n.version=i,n.videoOverlay=BI;var YI=window.L;n.noConflict=function(){return window.L=YI,this},window.L=n})})(Lp,Lp.exports);var pu=Lp.exports;const yg=Dy(pu);function wg(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Eg(t,e){return e==null?function(i,s){const o=te.useRef();return o.current||(o.current=t(i,s)),o}:function(i,s){const o=te.useRef();o.current||(o.current=t(i,s));const l=te.useRef(i),{instance:h}=o.current;return te.useEffect(function(){l.current!==i&&(e(h,i,l.current),l.current=i)},[h,i,s]),o}}function yN(t,e){te.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function kI(t){return function(n){const i=_g(),s=t(vg(n,i),i);return SI(i.map,n.attribution),AI(s.current,n.eventHandlers),yN(s.current,i),s}}function wN(t,e){const n=Eg(t,e),i=kI(n);return mN(i)}function EN(t,e){const n=Eg(t),i=vN(n,e);return gN(i)}function TN(t,e){const n=Eg(t,e),i=kI(n);return _N(i)}function IN(t,e,n){const{opacity:i,zIndex:s}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function SN(){return _g().map}function PN(t){const e=SN();return te.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function Np(){return Np=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Np.apply(this,arguments)}function CN({bounds:t,boundsOptions:e,center:n,children:i,className:s,id:o,placeholder:l,style:h,whenReady:d,zoom:m,...v},y){const[E]=te.useState({className:s,id:o,style:h}),[b,V]=te.useState(null);te.useImperativeHandle(y,()=>(b==null?void 0:b.map)??null,[b]);const M=te.useCallback(O=>{if(O!==null&&b===null){const S=new pu.Map(O,v);n!=null&&m!=null?S.setView(n,m):t!=null&&S.fitBounds(t,e),d!=null&&S.whenReady(d),V(fN(S))}},[]);te.useEffect(()=>()=>{b==null||b.map.remove()},[b]);const W=b?Jn.createElement(CI,{value:b},i):l??null;return Jn.createElement("div",Np({},E,{ref:M}),W)}const xI=te.forwardRef(CN),El=wN(function({position:e,...n},i){const s=new pu.Marker(e,n);return wg(s,pN(i,{overlayContainer:s}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),lf=EN(function(e,n){const i=new pu.Popup(e,n.overlayContainer);return wg(i,n)},function(e,n,{position:i},s){te.useEffect(function(){const{instance:l}=e;function h(m){m.popup===l&&(l.update(),s(!0))}function d(m){m.popup===l&&s(!1)}return n.map.on({popupopen:h,popupclose:d}),n.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var v;n.map.off({popupopen:h,popupclose:d}),(v=n.overlayContainer)==null||v.unbindPopup(),n.map.removeLayer(l)}},[e,n,s,i])}),RI=TN(function({url:e,...n},i){const s=new pu.TileLayer(e,vg(n,i));return wg(s,i)},function(e,n,i){IN(e,n,i);const{url:s}=n;s!=null&&s!==i.url&&e.setUrl(s)}),AN=yg.divIcon({className:"",html:`
    <div style="
      width: 34px; height: 34px;
      border-radius: 999px;
      background: rgba(255,255,255,0.95);
      box-shadow: 0 6px 16px rgba(0,0,0,0.35);
      display:flex; align-items:center; justify-content:center;
      border: 2px solid rgba(0,0,0,0.15);
    ">
      <div style="font-size:18px; line-height:18px;"></div>
    </div>
  `,iconSize:[34,34],iconAnchor:[17,17]}),LI=yg.divIcon({className:"",html:`
    <div style="
      width: 18px; height: 18px;
      border-radius: 999px;
      background: rgba(0,255,140,0.95);
      border: 3px solid rgba(0,0,0,0.25);
      box-shadow: 0 6px 16px rgba(0,0,0,0.25);
    "></div>
  `,iconSize:[18,18],iconAnchor:[9,9]}),NI=yg.divIcon({className:"",html:`
    <div style="
      width: 18px; height: 18px;
      border-radius: 999px;
      background: rgba(80,160,255,0.95);
      border: 3px solid rgba(0,0,0,0.25);
      box-shadow: 0 6px 16px rgba(0,0,0,0.25);
    "></div>
  `,iconSize:[18,18],iconAnchor:[9,9]});function kN({pickup:t,onSetPickup:e,onSetDropoff:n}){return PN({click:i=>{const s={lat:i.latlng.lat,lng:i.latlng.lng};t?n(s):e(s)}}),null}function xN({onRideRequested:t}){const{show:e}=fu(),[n,i]=te.useState(!1),[s,o]=te.useState(null),[l,h]=te.useState(null),[d,m]=te.useState("2500"),[v,y]=te.useState(""),[E,b]=te.useState(!1),[V,M]=te.useState(""),[W,O]=te.useState(""),[S,x]=te.useState(!1),H=()=>{const C={lat:38.8976,lng:-77.0369},k={lat:38.9072,lng:-77.0589};o(C),h(k)},Y=()=>{o(null),h(null)},K=()=>{s&&l&&(o(l),h(s))},A=C=>{const k=parseInt(C);return isNaN(k)?"$0.00":`$${(k/100).toFixed(2)}`},T=async C=>{if(C.preventDefault(),!s||!l){e("Please set pickup and dropoff locations on the map","error");return}i(!0);try{const k={pickup:s,dropoff:l,...d&&{priceCents:parseInt(d)},...v&&{metadata:JSON.parse(v)}};let F;if(E){if(!V||!W){e("Please select a date and time for scheduled ride","error"),i(!1);return}const R=new Date(`${V}T${W}`).getTime();if(R<Date.now()){e("Scheduled time must be in the future","error"),i(!1);return}F=(await Es(Ts,"scheduleRide")({...k,scheduledForMs:R})).data.rideId,e(`Ride scheduled for ${new Date(R).toLocaleString()}`,"success")}else F=(await Es(Ts,"tripRequest")(k)).data.rideId,e(`Ride requested! ID: ${F}`,"success");localStorage.setItem("rideId",F),t(F)}catch(k){e(`Failed to ${E?"schedule":"request"} ride: ${k.message}`,"error")}finally{i(!1)}},P=s||l||{lat:38.8976,lng:-77.0369};return D.jsx("div",{className:"screen-container",children:D.jsxs("div",{className:"card",children:[D.jsx("h2",{children:"Request a Ride"}),D.jsx("div",{className:"demo-button-container",style:{marginBottom:"1rem"},children:D.jsx("button",{type:"button",onClick:H,className:"btn-demo",children:"Use Demo Coordinates (DC Area)"})}),D.jsxs("form",{onSubmit:T,children:[D.jsxs("div",{style:{marginBottom:"1rem",display:"flex",gap:"1rem"},children:[D.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[D.jsx("input",{type:"radio",checked:!E,onChange:()=>b(!1),style:{marginRight:"0.5rem"}}),"Immediate"]}),D.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[D.jsx("input",{type:"radio",checked:E,onChange:()=>b(!0),style:{marginRight:"0.5rem"}}),"Scheduled"]})]}),D.jsxs("div",{style:{marginBottom:"1rem",padding:"1rem",background:"rgba(255,255,255,0.05)",borderRadius:"8px"},children:[D.jsxs("div",{style:{marginBottom:"0.75rem"},children:[D.jsx("strong",{style:{color:"rgba(0,255,140,0.95)"},children:" Pickup:"})," ",s?D.jsxs("span",{style:{fontSize:"0.9rem",color:"rgba(255,255,255,0.7)"},children:[s.lat.toFixed(4),", ",s.lng.toFixed(4)]}):D.jsx("span",{style:{fontSize:"0.9rem",color:"rgba(255,255,255,0.4)"},children:"(tap map to set)"})]}),D.jsxs("div",{children:[D.jsx("strong",{style:{color:"rgba(80,160,255,0.95)"},children:" Dropoff:"})," ",l?D.jsxs("span",{style:{fontSize:"0.9rem",color:"rgba(255,255,255,0.7)"},children:[l.lat.toFixed(4),", ",l.lng.toFixed(4)]}):D.jsx("span",{style:{fontSize:"0.9rem",color:"rgba(255,255,255,0.4)"},children:"(tap map to set)"})]}),D.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.75rem"},children:[D.jsx("button",{type:"button",onClick:Y,disabled:!s&&!l,className:"secondary-button",style:{fontSize:"0.8rem",padding:"4px 12px"},children:"Clear"}),D.jsx("button",{type:"button",onClick:K,disabled:!s||!l,className:"secondary-button",style:{fontSize:"0.8rem",padding:"4px 12px"},children:" Swap"})]})]}),D.jsx("div",{style:{height:"300px",borderRadius:"8px",overflow:"hidden",marginBottom:"1rem",border:"1px solid rgba(255,255,255,0.1)"},children:D.jsxs(xI,{center:[P.lat,P.lng],zoom:13,style:{height:"100%",width:"100%"},children:[D.jsx(RI,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>  <a href="https://carto.com/attributions">CARTO</a>'}),D.jsx(kN,{pickup:s,dropoff:l,onSetPickup:o,onSetDropoff:h}),s&&D.jsx(El,{position:[s.lat,s.lng],icon:LI}),l&&D.jsx(El,{position:[l.lat,l.lng],icon:NI})]})}),D.jsxs("div",{className:"form-group",children:[D.jsxs("label",{children:["Price (cents)"," ",D.jsx("span",{style:{color:"rgba(255,255,255,0.5)",fontSize:"0.9rem"},children:A(d)})]}),D.jsx("input",{type:"number",placeholder:"e.g., 2500",value:d,onChange:C=>m(C.target.value)})]}),E&&D.jsxs(D.Fragment,{children:[D.jsxs("div",{className:"form-group",children:[D.jsx("label",{children:"Scheduled Date"}),D.jsx("input",{type:"date",value:V,onChange:C=>M(C.target.value),required:E})]}),D.jsxs("div",{className:"form-group",children:[D.jsx("label",{children:"Scheduled Time"}),D.jsx("input",{type:"time",value:W,onChange:C=>O(C.target.value),required:E})]}),D.jsx("p",{style:{fontSize:"0.85rem",color:"rgba(255,255,255,0.6)",marginTop:"-0.5rem",marginBottom:"1rem"},children:"Requires a preferred driver with available hours"})]}),D.jsxs("div",{style:{marginBottom:"1rem"},children:[D.jsxs("button",{type:"button",onClick:()=>x(!S),style:{background:"transparent",border:"none",color:"rgba(255,255,255,0.6)",cursor:"pointer",fontSize:"0.85rem",padding:0,textDecoration:"underline"},children:[S?"":""," Advanced (Metadata)"]}),S&&D.jsxs("div",{className:"form-group",style:{marginTop:"0.5rem"},children:[D.jsx("label",{children:"Metadata (JSON)"}),D.jsx("textarea",{placeholder:'e.g., {"notes": "Handle with care"}',value:v,onChange:C=>y(C.target.value),style:{minHeight:"80px"}})]})]}),D.jsx("button",{type:"submit",disabled:n||!s||!l,className:"button-primary",children:n?E?"Scheduling...":"Requesting...":E?"Schedule Ride":"Request Ride"})]})]})})}const RN={ride_created:" Ride Created",matching_started:" Searching for Driver",offer_created:" Offer Sent to Driver",offer_declined:" Driver Declined",offer_expired:" Offer Expired",offer_accepted:" Offer Accepted",ride_accepted:" Driver Accepted",ride_started:" Ride Started",ride_completed:" Ride Completed",ride_cancelled:" Ride Cancelled",search_timeout:" Search Timed Out",driver_online_triggered_match:" Driver Came Online"};function LN({rideId:t}){const[e,n]=te.useState([]),[i,s]=te.useState(!0),[o,l]=te.useState(null);return te.useEffect(()=>{const h=async()=>{try{s(!0);const v=await Es(Ts,"getRideEvents")({rideId:t});n(v.data.events),l(null)}catch(m){console.error("Failed to fetch ride events:",m),l("Failed to load timeline")}finally{s(!1)}};h();const d=setInterval(h,2e3);return()=>clearInterval(d)},[t]),i&&e.length===0?D.jsx("div",{className:"timeline-loading",children:"Loading timeline..."}):o?D.jsx("div",{className:"timeline-error",children:o}):D.jsxs("div",{className:"ride-timeline",children:[D.jsx("h3",{children:" Ride Timeline"}),D.jsx("div",{className:"timeline-events",children:e.map((h,d)=>D.jsxs("div",{className:"timeline-event",children:[D.jsx("div",{className:"event-marker"}),D.jsxs("div",{className:"event-content",children:[D.jsx("div",{className:"event-type",children:RN[h.type]||h.type}),D.jsx("div",{className:"event-time",children:new Date(h.atMs).toLocaleTimeString()}),h.meta&&Object.keys(h.meta).length>0&&D.jsxs("div",{className:"event-meta",children:[h.type==="offer_created"&&h.meta.driverId&&D.jsxs("span",{className:"meta-detail",children:["Driver: ",h.meta.driverId.substring(0,8),"..."]}),h.type==="matching_started"&&D.jsxs("span",{className:"meta-detail",children:["Attempt ",h.meta.dispatchAttempt||1]}),h.type==="search_timeout"&&D.jsxs("span",{className:"meta-detail",children:["After ",Math.round((h.meta.searchDurationMs||0)/1e3),"s"]}),h.type==="driver_online_triggered_match"&&h.meta.driverId&&D.jsxs("span",{className:"meta-detail",children:[h.meta.driverId.substring(0,8),"... came online"]})]})]})]},h.id||d))})]})}const by=["requested","dispatching","offered","accepted","started","in_progress","completed"],NN=["requested","dispatching","offered"];function Oy({rideId:t,onRideCompleted:e,onRideRetry:n}){const{show:i}=fu(),[s,o]=te.useState(!1),[l,h]=te.useState(null),[d,m]=te.useState(null),[v,y]=te.useState(!1),[E,b]=te.useState(!1),[V,M]=te.useState(null),[W,O]=te.useState(!1),[S,x]=te.useState(null);te.useEffect(()=>LE(jc,T=>{h(T),o(!0)}),[]),te.useEffect(()=>{if(!s)return;if(!l){m(null);return}const T=kp(Rp,"rides",t),P=z2(T,C=>{if(C.exists()){const k=C.data();m({...k,id:t}),b(NN.includes(k.status)),M(null),k.status==="completed"?setTimeout(()=>e(),2e3):k.status==="cancelled"&&k.cancelReason!=="no_drivers"&&setTimeout(()=>e(),2e3)}},C=>{i(`Error loading ride: ${C.message}`,"error")});return()=>P()},[s,l,t,e,i]),te.useEffect(()=>{if(!d||!["requested","dispatching","offered"].includes(d.status)){x(null);return}const T=()=>{const C=d.searchExpiresAtMs||d.createdAtMs+12e4,k=Math.max(0,C-Date.now());x(k),k<=0&&x(null)};T();const P=setInterval(T,1e3);return()=>clearInterval(P)},[d]);const H=async()=>{if(!E){const T="Cannot cancel ride in current state";M(T),i(T,"error");return}y(!0),M(null);try{await Es(Ts,"cancelRide")({rideId:t,reason:"Customer cancelled"}),i("Ride cancellation requested","success"),b(!1)}catch(T){const P=T,C=(P==null?void 0:P.message)||"Unknown error";let k=C;C.includes("PERMISSION_DENIED")?k="No permission to cancel this ride":C.includes("NOT_FOUND")?k="Ride not found":C.includes("FAILED_PRECONDITION")&&(k="Ride cannot be cancelled in its current state"),M(k),i(`Failed to cancel ride: ${k}`,"error")}finally{y(!1)}},Y=async()=>{O(!0);try{if(!d)return;const C=(await Es(Ts,"tripRequest")({pickup:d.pickup,dropoff:d.dropoff,priceCents:d.priceCents})).data.rideId;i(`New ride requested! ID: ${C}`,"success"),localStorage.setItem("rideId",C),n&&n(C)}catch(T){const P=T,C=(P==null?void 0:P.message)||"Unknown error";i(`Failed to request ride: ${C}`,"error")}finally{O(!1)}},K=T=>({requested:"#4caf50",dispatching:"#2196f3",offered:"#ff9800",accepted:"#9c27b0",started:"#ff5722",in_progress:"#ff5722",completed:"#4caf50",cancelled:"#f44336"})[T]||"#e1e6ef",A=T=>by.indexOf(T);return d?D.jsx("div",{className:"screen-container",children:D.jsxs("div",{className:"card",children:[D.jsx("h2",{children:"Ride Status"}),d.status==="cancelled"&&(d.cancelReason==="no_drivers"||d.cancelReason==="search_timeout")&&D.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#ff6b6b",marginBottom:"2rem",borderRadius:"0.5rem",backgroundColor:"rgba(244, 67, 54, 0.1)",border:"1px solid rgba(244, 67, 54, 0.3)"},children:[D.jsx("h3",{style:{marginBottom:"0.5rem"},children:d.cancelReason==="search_timeout"?"Search Timed Out":"No Drivers Available"}),D.jsx("p",{style:{fontSize:"0.9rem",marginBottom:"1.5rem",color:"rgba(255,255,255,0.7)"},children:d.cancelReason==="search_timeout"?"We couldn't find a driver within 2 minutes. Please try again.":"We couldn't find any available drivers for your ride. Please try again."}),D.jsx("button",{onClick:Y,disabled:W,style:{background:"#4caf50",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",cursor:W?"not-allowed":"pointer",opacity:W?.6:1,fontSize:"1rem",fontWeight:"bold",transition:"all 0.3s ease"},children:W?"Requesting...":"Request Again"})]}),d.pickup&&d.dropoff&&["accepted","started","in_progress"].includes(d.status)&&D.jsx("div",{style:{height:"300px",borderRadius:"8px",overflow:"hidden",marginBottom:"16px",border:"1px solid rgba(255,255,255,0.1)"},children:D.jsxs(xI,{center:[d.pickup.lat,d.pickup.lng],zoom:13,style:{height:"100%",width:"100%"},children:[D.jsx(RI,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>  <a href="https://carto.com/attributions">CARTO</a>'}),D.jsx(El,{position:[d.pickup.lat,d.pickup.lng],icon:LI,children:D.jsx(lf,{children:"Pickup Location"})}),D.jsx(El,{position:[d.dropoff.lat,d.dropoff.lng],icon:NI,children:D.jsx(lf,{children:"Dropoff Location"})}),d.driverLocation&&D.jsx(El,{position:[d.driverLocation.lat,d.driverLocation.lng],icon:AN,children:D.jsx(lf,{children:"Driver Location"})})]})}),D.jsx("div",{className:"timeline-container",style:{marginBottom:"32px"},children:D.jsx("div",{className:"timeline",children:by.map((T,P)=>{const C=A((d==null?void 0:d.status)||"")>=P,k=(d==null?void 0:d.status)===T;return D.jsxs("div",{className:"timeline-item",style:{opacity:C?1:.3},children:[D.jsx("div",{className:"timeline-dot",style:{backgroundColor:k?K(T):C?"#4caf50":"#666",boxShadow:k?`0 0 12px ${K(T)}`:"none"}}),D.jsx("span",{className:"timeline-label",children:T})]},T)})})}),D.jsxs("div",{className:"ride-status-grid",children:[D.jsxs("div",{className:"status-item",children:[D.jsx("span",{className:"label",children:"Current Status"}),D.jsx("span",{className:"value status-badge",style:{backgroundColor:K(d.status)},children:d.status.replace(/_/g," ")})]}),d.driverId&&D.jsxs("div",{className:"status-item",children:[D.jsx("span",{className:"label",children:"Driver ID"}),D.jsx("span",{className:"value",children:d.driverId})]}),d.priceCents!==void 0&&D.jsxs("div",{className:"status-item",children:[D.jsx("span",{className:"label",children:"Price"}),D.jsxs("span",{className:"value",children:["$",(d.priceCents/100).toFixed(2)]})]}),S!==null&&S>0&&D.jsxs("div",{className:"status-item",style:{background:"rgba(33, 150, 243, 0.1)",padding:"1rem",borderRadius:"0.5rem",border:"1px solid rgba(33, 150, 243, 0.3)"},children:[D.jsx("span",{className:"label",children:" Searching for drivers..."}),D.jsxs("span",{className:"value",style:{color:"#2196f3",fontWeight:"bold",fontSize:"1.1rem"},children:[Math.floor(S/6e4),":",String(Math.floor(S%6e4/1e3)).padStart(2,"0")," remaining"]})]}),D.jsxs("div",{className:"status-item",children:[D.jsx("span",{className:"label",children:"Created At"}),D.jsx("span",{className:"value",children:d.createdAtMs?new Date(d.createdAtMs).toLocaleString():"N/A"})]}),d.acceptedAtMs&&D.jsxs("div",{className:"status-item",children:[D.jsx("span",{className:"label",children:"Accepted At"}),D.jsx("span",{className:"value",children:new Date(d.acceptedAtMs).toLocaleString()})]}),d.startedAtMs&&D.jsxs("div",{className:"status-item",children:[D.jsx("span",{className:"label",children:"Started At"}),D.jsx("span",{className:"value",children:new Date(d.startedAtMs).toLocaleString()})]}),d.completedAtMs&&D.jsxs("div",{className:"status-item",children:[D.jsx("span",{className:"label",children:"Completed At"}),D.jsx("span",{className:"value",children:new Date(d.completedAtMs).toLocaleString()})]}),d.cancelledAtMs&&D.jsxs("div",{className:"status-item",children:[D.jsx("span",{className:"label",children:"Cancelled At"}),D.jsx("span",{className:"value",children:new Date(d.cancelledAtMs).toLocaleString()})]}),d.pickup&&D.jsxs("div",{className:"status-item",children:[D.jsx("span",{className:"label",children:"Pickup"}),D.jsxs("span",{className:"value",children:[d.pickup.lat.toFixed(4),", ",d.pickup.lng.toFixed(4)]})]}),d.dropoff&&D.jsxs("div",{className:"status-item",children:[D.jsx("span",{className:"label",children:"Dropoff"}),D.jsxs("span",{className:"value",children:[d.dropoff.lat.toFixed(4),", ",d.dropoff.lng.toFixed(4)]})]})]}),E&&D.jsxs("div",{style:{marginTop:"24px"},children:[V&&D.jsx("div",{style:{padding:"12px",marginBottom:"12px",borderRadius:"8px",backgroundColor:"rgba(244, 67, 54, 0.2)",borderLeft:"3px solid #f44336",color:"#ff8a80",fontSize:"14px"},children:V}),D.jsx("button",{onClick:H,disabled:v,className:"button-danger",children:v?"Cancelling...":"Cancel Ride"})]}),!E&&!d.cancelledAtMs&&D.jsxs("div",{style:{marginTop:"24px",padding:"12px",borderRadius:"8px",backgroundColor:"rgba(255, 152, 0, 0.2)",borderLeft:"3px solid #ff9800",color:"#ffb74d",fontSize:"14px"},children:["Ride cannot be cancelled in the ",D.jsx("strong",{children:d.status})," state"]}),D.jsx(LN,{rideId:t})]})}):D.jsx("div",{className:"screen-container",children:D.jsx("div",{className:"card",children:D.jsx("div",{className:"spinner",children:"Loading ride details..."})})})}function bN({onSelectRide:t}){const{show:e}=fu(),[n,i]=te.useState([]),[s,o]=te.useState(!0);te.useEffect(()=>{l()},[]);const l=async()=>{o(!0);try{const E=(await Es(Ts,"getRideHistory")({limit:10})).data;i(E.rides)}catch(v){e(`Failed to load ride history: ${v.message}`,"error")}finally{o(!1)}},h=v=>({completed:"#4caf50",cancelled:"#f44336",requested:"#2196f3",dispatching:"#2196f3",offered:"#ff9800",accepted:"#9c27b0",started:"#ff5722",in_progress:"#ff5722"})[v]||"#e1e6ef",d=v=>v.status==="cancelled"?v.cancelReason==="no_drivers"?"No Drivers":v.cancelReason==="search_timeout"?"Timed Out":"Cancelled":v.status.charAt(0).toUpperCase()+v.status.slice(1),m=v=>{const y=new Date(v),E=new Date,b=new Date(E.getFullYear(),E.getMonth(),E.getDate()),V=new Date(y.getFullYear(),y.getMonth(),y.getDate());if(V.getTime()===b.getTime())return`Today at ${y.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`;const M=new Date(b);return M.setDate(M.getDate()-1),V.getTime()===M.getTime()?`Yesterday at ${y.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:y.toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return s?D.jsxs("div",{className:"card",children:[D.jsx("h2",{children:"Ride History"}),D.jsx("div",{className:"spinner",children:"Loading..."})]}):n.length===0?D.jsxs("div",{className:"card",children:[D.jsx("h2",{children:"Ride History"}),D.jsx("p",{style:{textAlign:"center",color:"rgba(255,255,255,0.5)",padding:"2rem"},children:"No rides yet. Request your first ride!"})]}):D.jsxs("div",{className:"card",children:[D.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[D.jsx("h2",{children:"Ride History"}),D.jsx("button",{onClick:l,style:{background:"transparent",border:"1px solid rgba(255,255,255,0.2)",color:"white",padding:"0.5rem 1rem",borderRadius:"0.5rem",cursor:"pointer",fontSize:"0.9rem"},children:"Refresh"})]}),D.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:n.map(v=>D.jsxs("div",{onClick:()=>t(v.rideId),style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"0.5rem",padding:"1rem",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:y=>{y.currentTarget.style.background="rgba(255,255,255,0.1)",y.currentTarget.style.borderColor="rgba(255,255,255,0.2)"},onMouseLeave:y=>{y.currentTarget.style.background="rgba(255,255,255,0.05)",y.currentTarget.style.borderColor="rgba(255,255,255,0.1)"},children:[D.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"0.5rem"},children:[D.jsxs("div",{children:[D.jsx("div",{style:{display:"inline-block",padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.85rem",fontWeight:"bold",backgroundColor:h(v.status),color:"white",marginBottom:"0.5rem"},children:d(v)}),D.jsx("div",{style:{fontSize:"0.9rem",color:"rgba(255,255,255,0.6)"},children:m(v.createdAtMs)})]}),D.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"white"},children:["$",(v.priceCents/100).toFixed(2)]})]}),v.pickup&&v.dropoff&&D.jsxs("div",{style:{fontSize:"0.85rem",color:"rgba(255,255,255,0.5)"},children:[D.jsxs("div",{children:[" ",v.pickup.lat.toFixed(4),", ",v.pickup.lng.toFixed(4)]}),D.jsxs("div",{children:[" ",v.dropoff.lat.toFixed(4),", ",v.dropoff.lng.toFixed(4)]})]})]},v.rideId))})]})}function ON({driverId:t,onComplete:e}){const[n,i]=te.useState(!1),[s,o]=te.useState(null),{show:l}=fu();te.useEffect(()=>{if(!t){l("No driver ID provided","error");return}o({email:t})},[t,l]);const h=async()=>{if(!t){l("No driver ID provided","error");return}i(!0);try{await Es(Ts,"setPreferredDriver")({driverId:t}),l("Preferred driver set successfully!","success"),setTimeout(e,1500)}catch(d){console.error("Failed to set preferred driver:",d),l(d.message||"Failed to set preferred driver","error"),i(!1)}};return t?D.jsx("div",{className:"screen-container",children:D.jsxs("div",{className:"card",children:[D.jsx("h2",{children:" Driver Invite"}),D.jsxs("div",{style:{marginTop:"1.5rem",marginBottom:"1.5rem"},children:[D.jsx("p",{style:{marginBottom:"1rem",color:"rgba(255,255,255,0.8)"},children:"You've been invited to set a preferred driver."}),s&&D.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1rem"},children:[D.jsx("strong",{children:"Driver ID:"})," ",t]}),D.jsx("p",{style:{fontSize:"0.9rem",color:"rgba(255,255,255,0.6)"},children:"Setting a preferred driver allows you to schedule rides with them directly."})]}),D.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1.5rem"},children:[D.jsx("button",{onClick:h,disabled:n,style:{flex:1,opacity:n?.6:1,cursor:n?"not-allowed":"pointer"},children:n?"Setting...":"Accept & Set Preferred Driver"}),D.jsx("button",{onClick:e,disabled:n,style:{flex:1,background:"transparent",border:"1px solid rgba(255,255,255,0.2)",opacity:n?.6:1,cursor:n?"not-allowed":"pointer"},children:"Cancel"})]})]})}):D.jsx("div",{className:"screen-container",children:D.jsxs("div",{className:"card",children:[D.jsx("h2",{children:"Invalid Invite"}),D.jsx("p",{children:"No driver ID found in the invite link."}),D.jsx("button",{onClick:e,style:{marginTop:"1rem"},children:"Go to Home"})]})})}function DN(){const[t,e]=te.useState(null),[n,i]=te.useState("request-ride"),[s,o]=te.useState(!0),[l,h]=te.useState(null),[d,m]=te.useState(null),[v,y]=te.useState(null);te.useEffect(()=>{const H=new URLSearchParams(window.location.search).get("driverId");H&&(y(H),i("invite"),window.history.replaceState({},"",window.location.pathname))},[]),te.useEffect(()=>{const x=LE(jc,async H=>{var Y;if(e(H),o(!1),H)try{const K=kp(Rp,"users",H.uid);(await Cy(K)).exists()||await Ay(K,{email:H.email,createdAtMs:Date.now(),role:"customer"});const T=kp(Rp,"customers",H.uid),P=await Cy(T);if(!P.exists())await Ay(T,{onboardingStatus:"active",createdAtMs:Date.now(),updatedAtMs:Date.now()}),h("active");else{const C=((Y=P.data())==null?void 0:Y.onboardingStatus)||"active";h(C)}}catch(K){console.error("Failed to create user/customer docs:",K)}else localStorage.removeItem("rideId"),m(null),h(null)});return()=>x()},[]),te.useEffect(()=>{const x=localStorage.getItem("rideId");x&&t&&l==="active"&&(m(x),i("ride-status"))},[t,l]);const E=x=>{m(x),i("ride-status")},b=x=>{m(x),i("ride-status")},V=()=>{y(null),i("request-ride")},M=()=>{localStorage.removeItem("rideId"),m(null),i("request-ride")},W=()=>{i("ride-history")},O=()=>{i("request-ride")},S=x=>{m(x)};return t&&l&&l!=="active"?D.jsx(Ly,{children:D.jsx(Ny,{user:t,auth:jc,loading:s,children:D.jsx("div",{className:"screen-container",children:D.jsxs("div",{className:"card",children:[D.jsxs("h2",{children:["Account Status: ",l]}),D.jsxs("p",{style:{color:"rgba(255,255,255,0.6)"},children:[l==="pending"&&"Your account is being set up. Please wait...",l==="suspended"&&"Your account has been suspended. Please contact support."]})]})})})}):D.jsx(Ly,{children:D.jsxs(Ny,{user:t,auth:jc,loading:s,children:[n==="invite"&&D.jsx(ON,{driverId:v,onComplete:V}),t&&l==="active"&&D.jsxs(D.Fragment,{children:[n==="request-ride"&&D.jsxs(D.Fragment,{children:[D.jsx(xN,{onRideRequested:E}),D.jsx("div",{style:{marginTop:"1rem",textAlign:"center"},children:D.jsx("button",{onClick:W,style:{background:"transparent",border:"1px solid rgba(255,255,255,0.2)",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",cursor:"pointer",fontSize:"1rem"},children:" View Ride History"})})]}),n==="ride-history"&&D.jsxs(D.Fragment,{children:[D.jsx("div",{style:{marginBottom:"1rem"},children:D.jsx("button",{onClick:O,style:{background:"transparent",border:"1px solid rgba(255,255,255,0.2)",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",cursor:"pointer",fontSize:"1rem"},children:" Back to Request"})}),D.jsx(bN,{onSelectRide:S}),d&&D.jsx("div",{style:{marginTop:"2rem"},children:D.jsx(Oy,{rideId:d,onRideCompleted:()=>m(null),onRideRetry:b})})]}),n==="ride-status"&&d&&D.jsxs(D.Fragment,{children:[D.jsx("div",{style:{marginBottom:"1rem"},children:D.jsx("button",{onClick:O,style:{background:"transparent",border:"1px solid rgba(255,255,255,0.2)",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",cursor:"pointer",fontSize:"1rem"},children:" Back to Request"})}),D.jsx(Oy,{rideId:d,onRideCompleted:M,onRideRetry:b})]})]})]})})}uf.createRoot(document.getElementById("root")).render(D.jsx(Jn.StrictMode,{children:D.jsx(DN,{})}));
