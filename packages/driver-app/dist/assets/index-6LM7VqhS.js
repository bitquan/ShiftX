(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var uP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mw={exports:{}},Gh={},gw={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var au=Symbol.for("react.element"),cP=Symbol.for("react.portal"),hP=Symbol.for("react.fragment"),dP=Symbol.for("react.strict_mode"),fP=Symbol.for("react.profiler"),pP=Symbol.for("react.provider"),mP=Symbol.for("react.context"),gP=Symbol.for("react.forward_ref"),_P=Symbol.for("react.suspense"),vP=Symbol.for("react.memo"),yP=Symbol.for("react.lazy"),y_=Symbol.iterator;function wP(t){return t===null||typeof t!="object"?null:(t=y_&&t[y_]||t["@@iterator"],typeof t=="function"?t:null)}var _w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vw=Object.assign,yw={};function ua(t,e,n){this.props=t,this.context=e,this.refs=yw,this.updater=n||_w}ua.prototype.isReactComponent={};ua.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ua.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ww(){}ww.prototype=ua.prototype;function om(t,e,n){this.props=t,this.context=e,this.refs=yw,this.updater=n||_w}var am=om.prototype=new ww;am.constructor=om;vw(am,ua.prototype);am.isPureReactComponent=!0;var w_=Array.isArray,Ew=Object.prototype.hasOwnProperty,lm={current:null},Tw={key:!0,ref:!0,__self:!0,__source:!0};function Iw(t,e,n){var i,r={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)Ew.call(e,i)&&!Tw.hasOwnProperty(i)&&(r[i]=e[i]);var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){for(var h=Array(d),f=0;f<d;f++)h[f]=arguments[f+2];r.children=h}if(t&&t.defaultProps)for(i in d=t.defaultProps,d)r[i]===void 0&&(r[i]=d[i]);return{$$typeof:au,type:t,key:o,ref:l,props:r,_owner:lm.current}}function EP(t,e){return{$$typeof:au,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function um(t){return typeof t=="object"&&t!==null&&t.$$typeof===au}function TP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var E_=/\/+/g;function qd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?TP(""+t.key):e.toString(36)}function bc(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case au:case cP:l=!0}}if(l)return l=t,r=r(l),t=i===""?"."+qd(l,0):i,w_(r)?(n="",t!=null&&(n=t.replace(E_,"$&/")+"/"),bc(r,e,n,"",function(f){return f})):r!=null&&(um(r)&&(r=EP(r,n+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(E_,"$&/")+"/")+t)),e.push(r)),1;if(l=0,i=i===""?".":i+":",w_(t))for(var d=0;d<t.length;d++){o=t[d];var h=i+qd(o,d);l+=bc(o,e,n,h,r)}else if(h=wP(t),typeof h=="function")for(t=h.call(t),d=0;!(o=t.next()).done;)o=o.value,h=i+qd(o,d++),l+=bc(o,e,n,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function cc(t,e,n){if(t==null)return t;var i=[],r=0;return bc(t,i,"","",function(o){return e.call(n,o,r++)}),i}function IP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Kt={current:null},Oc={transition:null},SP={ReactCurrentDispatcher:Kt,ReactCurrentBatchConfig:Oc,ReactCurrentOwner:lm};function Sw(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:cc,forEach:function(t,e,n){cc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return cc(t,function(){e++}),e},toArray:function(t){return cc(t,function(e){return e})||[]},only:function(t){if(!um(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ce.Component=ua;Ce.Fragment=hP;Ce.Profiler=fP;Ce.PureComponent=om;Ce.StrictMode=dP;Ce.Suspense=_P;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SP;Ce.act=Sw;Ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=vw({},t.props),r=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=lm.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var d=t.type.defaultProps;for(h in e)Ew.call(e,h)&&!Tw.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&d!==void 0?d[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){d=Array(h);for(var f=0;f<h;f++)d[f]=arguments[f+2];i.children=d}return{$$typeof:au,type:t.type,key:r,ref:o,props:i,_owner:l}};Ce.createContext=function(t){return t={$$typeof:mP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:pP,_context:t},t.Consumer=t};Ce.createElement=Iw;Ce.createFactory=function(t){var e=Iw.bind(null,t);return e.type=t,e};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(t){return{$$typeof:gP,render:t}};Ce.isValidElement=um;Ce.lazy=function(t){return{$$typeof:yP,_payload:{_status:-1,_result:t},_init:IP}};Ce.memo=function(t,e){return{$$typeof:vP,type:t,compare:e===void 0?null:e}};Ce.startTransition=function(t){var e=Oc.transition;Oc.transition={};try{t()}finally{Oc.transition=e}};Ce.unstable_act=Sw;Ce.useCallback=function(t,e){return Kt.current.useCallback(t,e)};Ce.useContext=function(t){return Kt.current.useContext(t)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(t){return Kt.current.useDeferredValue(t)};Ce.useEffect=function(t,e){return Kt.current.useEffect(t,e)};Ce.useId=function(){return Kt.current.useId()};Ce.useImperativeHandle=function(t,e,n){return Kt.current.useImperativeHandle(t,e,n)};Ce.useInsertionEffect=function(t,e){return Kt.current.useInsertionEffect(t,e)};Ce.useLayoutEffect=function(t,e){return Kt.current.useLayoutEffect(t,e)};Ce.useMemo=function(t,e){return Kt.current.useMemo(t,e)};Ce.useReducer=function(t,e,n){return Kt.current.useReducer(t,e,n)};Ce.useRef=function(t){return Kt.current.useRef(t)};Ce.useState=function(t){return Kt.current.useState(t)};Ce.useSyncExternalStore=function(t,e,n){return Kt.current.useSyncExternalStore(t,e,n)};Ce.useTransition=function(){return Kt.current.useTransition()};Ce.version="18.3.1";gw.exports=Ce;var J=gw.exports;const je=pw(J);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PP=J,AP=Symbol.for("react.element"),CP=Symbol.for("react.fragment"),RP=Object.prototype.hasOwnProperty,xP=PP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kP={key:!0,ref:!0,__self:!0,__source:!0};function Pw(t,e,n){var i,r={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)RP.call(e,i)&&!kP.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:AP,type:t,key:o,ref:l,props:r,_owner:xP.current}}Gh.Fragment=CP;Gh.jsx=Pw;Gh.jsxs=Pw;mw.exports=Gh;var D=mw.exports,bf={},Aw={exports:{}},_n={},Cw={exports:{}},Rw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,ae){var X=q.length;q.push(ae);e:for(;0<X;){var le=X-1>>>1,me=q[le];if(0<r(me,ae))q[le]=ae,q[X]=me,X=le;else break e}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var ae=q[0],X=q.pop();if(X!==ae){q[0]=X;e:for(var le=0,me=q.length,Ee=me>>>1;le<Ee;){var De=2*(le+1)-1,Ie=q[De],ve=De+1,yt=q[ve];if(0>r(Ie,X))ve<me&&0>r(yt,Ie)?(q[le]=yt,q[ve]=X,le=ve):(q[le]=Ie,q[De]=X,le=De);else if(ve<me&&0>r(yt,X))q[le]=yt,q[ve]=X,le=ve;else break e}}return ae}function r(q,ae){var X=q.sortIndex-ae.sortIndex;return X!==0?X:q.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var h=[],f=[],g=1,v=null,w=3,S=!1,C=!1,N=!1,z=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(q){for(var ae=n(f);ae!==null;){if(ae.callback===null)i(f);else if(ae.startTime<=q)i(f),ae.sortIndex=ae.expirationTime,e(h,ae);else break;ae=n(f)}}function j(q){if(N=!1,R(q),!C)if(n(h)!==null)C=!0,Le(K);else{var ae=n(f);ae!==null&&Ne(j,ae.startTime-q)}}function K(q,ae){C=!1,N&&(N=!1,k(T),T=-1),S=!0;var X=w;try{for(R(ae),v=n(h);v!==null&&(!(v.expirationTime>ae)||q&&!O());){var le=v.callback;if(typeof le=="function"){v.callback=null,w=v.priorityLevel;var me=le(v.expirationTime<=ae);ae=t.unstable_now(),typeof me=="function"?v.callback=me:v===n(h)&&i(h),R(ae)}else i(h);v=n(h)}if(v!==null)var Ee=!0;else{var De=n(f);De!==null&&Ne(j,De.startTime-ae),Ee=!1}return Ee}finally{v=null,w=X,S=!1}}var $=!1,A=null,T=-1,x=5,b=-1;function O(){return!(t.unstable_now()-b<x)}function F(){if(A!==null){var q=t.unstable_now();b=q;var ae=!0;try{ae=A(!0,q)}finally{ae?M():($=!1,A=null)}}else $=!1}var M;if(typeof P=="function")M=function(){P(F)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,ue=ce.port2;ce.port1.onmessage=F,M=function(){ue.postMessage(null)}}else M=function(){z(F,0)};function Le(q){A=q,$||($=!0,M())}function Ne(q,ae){T=z(function(){q(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){C||S||(C=!0,Le(K))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(q){switch(w){case 1:case 2:case 3:var ae=3;break;default:ae=w}var X=w;w=ae;try{return q()}finally{w=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,ae){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var X=w;w=q;try{return ae()}finally{w=X}},t.unstable_scheduleCallback=function(q,ae,X){var le=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?le+X:le):X=le,q){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=X+me,q={id:g++,callback:ae,priorityLevel:q,startTime:X,expirationTime:me,sortIndex:-1},X>le?(q.sortIndex=X,e(f,q),n(h)===null&&q===n(f)&&(N?(k(T),T=-1):N=!0,Ne(j,X-le))):(q.sortIndex=me,e(h,q),C||S||(C=!0,Le(K))),q},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(q){var ae=w;return function(){var X=w;w=ae;try{return q.apply(this,arguments)}finally{w=X}}}})(Rw);Cw.exports=Rw;var LP=Cw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NP=J,gn=LP;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xw=new Set,Dl={};function bs(t,e){Zo(t,e),Zo(t+"Capture",e)}function Zo(t,e){for(Dl[t]=e,t=0;t<e.length;t++)xw.add(e[t])}var Di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Of=Object.prototype.hasOwnProperty,bP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,T_={},I_={};function OP(t){return Of.call(I_,t)?!0:Of.call(T_,t)?!1:bP.test(t)?I_[t]=!0:(T_[t]=!0,!1)}function MP(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function DP(t,e,n,i){if(e===null||typeof e>"u"||MP(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qt(t,e,n,i,r,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var Mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mt[t]=new Qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mt[e]=new Qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mt[t]=new Qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mt[t]=new Qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mt[t]=new Qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mt[t]=new Qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mt[t]=new Qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mt[t]=new Qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mt[t]=new Qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var cm=/[\-:]([a-z])/g;function hm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cm,hm);Mt[e]=new Qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cm,hm);Mt[e]=new Qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cm,hm);Mt[e]=new Qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!1,!1)});Mt.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function dm(t,e,n,i){var r=Mt.hasOwnProperty(e)?Mt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(DP(e,n,r,i)&&(n=null),i||r===null?OP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var $i=NP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hc=Symbol.for("react.element"),Io=Symbol.for("react.portal"),So=Symbol.for("react.fragment"),fm=Symbol.for("react.strict_mode"),Mf=Symbol.for("react.profiler"),kw=Symbol.for("react.provider"),Lw=Symbol.for("react.context"),pm=Symbol.for("react.forward_ref"),Df=Symbol.for("react.suspense"),Vf=Symbol.for("react.suspense_list"),mm=Symbol.for("react.memo"),sr=Symbol.for("react.lazy"),Nw=Symbol.for("react.offscreen"),S_=Symbol.iterator;function nl(t){return t===null||typeof t!="object"?null:(t=S_&&t[S_]||t["@@iterator"],typeof t=="function"?t:null)}var nt=Object.assign,Gd;function cl(t){if(Gd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gd=e&&e[1]||""}return`
`+Gd+t}var Zd=!1;function Kd(t,e){if(!t||Zd)return"";Zd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),l=r.length-1,d=o.length-1;1<=l&&0<=d&&r[l]!==o[d];)d--;for(;1<=l&&0<=d;l--,d--)if(r[l]!==o[d]){if(l!==1||d!==1)do if(l--,d--,0>d||r[l]!==o[d]){var h=`
`+r[l].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=l&&0<=d);break}}}finally{Zd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?cl(t):""}function VP(t){switch(t.tag){case 5:return cl(t.type);case 16:return cl("Lazy");case 13:return cl("Suspense");case 19:return cl("SuspenseList");case 0:case 2:case 15:return t=Kd(t.type,!1),t;case 11:return t=Kd(t.type.render,!1),t;case 1:return t=Kd(t.type,!0),t;default:return""}}function Ff(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case So:return"Fragment";case Io:return"Portal";case Mf:return"Profiler";case fm:return"StrictMode";case Df:return"Suspense";case Vf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Lw:return(t.displayName||"Context")+".Consumer";case kw:return(t._context.displayName||"Context")+".Provider";case pm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mm:return e=t.displayName||null,e!==null?e:Ff(t.type)||"Memo";case sr:e=t._payload,t=t._init;try{return Ff(t(e))}catch{}}return null}function FP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ff(e);case 8:return e===fm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Nr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zP(t){var e=bw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function dc(t){t._valueTracker||(t._valueTracker=zP(t))}function Ow(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=bw(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function eh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zf(t,e){var n=e.checked;return nt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function P_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Nr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Mw(t,e){e=e.checked,e!=null&&dm(t,"checked",e,!1)}function Uf(t,e){Mw(t,e);var n=Nr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Bf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Bf(t,e.type,Nr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function A_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Bf(t,e,n){(e!=="number"||eh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var hl=Array.isArray;function Fo(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Nr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function jf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return nt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function C_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(hl(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Nr(n)}}function Dw(t,e){var n=Nr(e.value),i=Nr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function R_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Vw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Vw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fc,Fw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fc=fc||document.createElement("div"),fc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Vl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var yl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UP=["Webkit","ms","Moz","O"];Object.keys(yl).forEach(function(t){UP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yl[e]=yl[t]})});function zw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||yl.hasOwnProperty(t)&&yl[t]?(""+e).trim():e+"px"}function Uw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=zw(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var BP=nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wf(t,e){if(e){if(BP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function $f(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qf=null;function gm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gf=null,zo=null,Uo=null;function x_(t){if(t=cu(t)){if(typeof Gf!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=Xh(e),Gf(t.stateNode,t.type,e))}}function Bw(t){zo?Uo?Uo.push(t):Uo=[t]:zo=t}function jw(){if(zo){var t=zo,e=Uo;if(Uo=zo=null,x_(t),e)for(t=0;t<e.length;t++)x_(e[t])}}function Hw(t,e){return t(e)}function Ww(){}var Qd=!1;function $w(t,e,n){if(Qd)return t(e,n);Qd=!0;try{return Hw(t,e,n)}finally{Qd=!1,(zo!==null||Uo!==null)&&(Ww(),jw())}}function Fl(t,e){var n=t.stateNode;if(n===null)return null;var i=Xh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Zf=!1;if(Di)try{var il={};Object.defineProperty(il,"passive",{get:function(){Zf=!0}}),window.addEventListener("test",il,il),window.removeEventListener("test",il,il)}catch{Zf=!1}function jP(t,e,n,i,r,o,l,d,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(g){this.onError(g)}}var wl=!1,th=null,nh=!1,Kf=null,HP={onError:function(t){wl=!0,th=t}};function WP(t,e,n,i,r,o,l,d,h){wl=!1,th=null,jP.apply(HP,arguments)}function $P(t,e,n,i,r,o,l,d,h){if(WP.apply(this,arguments),wl){if(wl){var f=th;wl=!1,th=null}else throw Error(Y(198));nh||(nh=!0,Kf=f)}}function Os(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function qw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function k_(t){if(Os(t)!==t)throw Error(Y(188))}function qP(t){var e=t.alternate;if(!e){if(e=Os(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return k_(r),t;if(o===i)return k_(r),e;o=o.sibling}throw Error(Y(188))}if(n.return!==i.return)n=r,i=o;else{for(var l=!1,d=r.child;d;){if(d===n){l=!0,n=r,i=o;break}if(d===i){l=!0,i=r,n=o;break}d=d.sibling}if(!l){for(d=o.child;d;){if(d===n){l=!0,n=o,i=r;break}if(d===i){l=!0,i=o,n=r;break}d=d.sibling}if(!l)throw Error(Y(189))}}if(n.alternate!==i)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function Gw(t){return t=qP(t),t!==null?Zw(t):null}function Zw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Zw(t);if(e!==null)return e;t=t.sibling}return null}var Kw=gn.unstable_scheduleCallback,L_=gn.unstable_cancelCallback,GP=gn.unstable_shouldYield,ZP=gn.unstable_requestPaint,ct=gn.unstable_now,KP=gn.unstable_getCurrentPriorityLevel,_m=gn.unstable_ImmediatePriority,Qw=gn.unstable_UserBlockingPriority,ih=gn.unstable_NormalPriority,QP=gn.unstable_LowPriority,Yw=gn.unstable_IdlePriority,Zh=null,oi=null;function YP(t){if(oi&&typeof oi.onCommitFiberRoot=="function")try{oi.onCommitFiberRoot(Zh,t,void 0,(t.current.flags&128)===128)}catch{}}var Wn=Math.clz32?Math.clz32:e1,XP=Math.log,JP=Math.LN2;function e1(t){return t>>>=0,t===0?32:31-(XP(t)/JP|0)|0}var pc=64,mc=4194304;function dl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rh(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var d=l&~r;d!==0?i=dl(d):(o&=l,o!==0&&(i=dl(o)))}else l=n&~r,l!==0?i=dl(l):o!==0&&(i=dl(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Wn(e),r=1<<n,i|=t[n],e&=~r;return i}function t1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function n1(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-Wn(o),d=1<<l,h=r[l];h===-1?(!(d&n)||d&i)&&(r[l]=t1(d,e)):h<=e&&(t.expiredLanes|=d),o&=~d}}function Qf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Xw(){var t=pc;return pc<<=1,!(pc&4194240)&&(pc=64),t}function Yd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function lu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wn(e),t[e]=n}function i1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Wn(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function vm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Wn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var ze=0;function Jw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var e0,ym,t0,n0,i0,Yf=!1,gc=[],vr=null,yr=null,wr=null,zl=new Map,Ul=new Map,ar=[],r1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function N_(t,e){switch(t){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":zl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ul.delete(e.pointerId)}}function rl(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=cu(e),e!==null&&ym(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function s1(t,e,n,i,r){switch(e){case"focusin":return vr=rl(vr,t,e,n,i,r),!0;case"dragenter":return yr=rl(yr,t,e,n,i,r),!0;case"mouseover":return wr=rl(wr,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return zl.set(o,rl(zl.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Ul.set(o,rl(Ul.get(o)||null,t,e,n,i,r)),!0}return!1}function r0(t){var e=fs(t.target);if(e!==null){var n=Os(e);if(n!==null){if(e=n.tag,e===13){if(e=qw(n),e!==null){t.blockedOn=e,i0(t.priority,function(){t0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);qf=i,n.target.dispatchEvent(i),qf=null}else return e=cu(n),e!==null&&ym(e),t.blockedOn=n,!1;e.shift()}return!0}function b_(t,e,n){Mc(t)&&n.delete(e)}function o1(){Yf=!1,vr!==null&&Mc(vr)&&(vr=null),yr!==null&&Mc(yr)&&(yr=null),wr!==null&&Mc(wr)&&(wr=null),zl.forEach(b_),Ul.forEach(b_)}function sl(t,e){t.blockedOn===e&&(t.blockedOn=null,Yf||(Yf=!0,gn.unstable_scheduleCallback(gn.unstable_NormalPriority,o1)))}function Bl(t){function e(r){return sl(r,t)}if(0<gc.length){sl(gc[0],t);for(var n=1;n<gc.length;n++){var i=gc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(vr!==null&&sl(vr,t),yr!==null&&sl(yr,t),wr!==null&&sl(wr,t),zl.forEach(e),Ul.forEach(e),n=0;n<ar.length;n++)i=ar[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<ar.length&&(n=ar[0],n.blockedOn===null);)r0(n),n.blockedOn===null&&ar.shift()}var Bo=$i.ReactCurrentBatchConfig,sh=!0;function a1(t,e,n,i){var r=ze,o=Bo.transition;Bo.transition=null;try{ze=1,wm(t,e,n,i)}finally{ze=r,Bo.transition=o}}function l1(t,e,n,i){var r=ze,o=Bo.transition;Bo.transition=null;try{ze=4,wm(t,e,n,i)}finally{ze=r,Bo.transition=o}}function wm(t,e,n,i){if(sh){var r=Xf(t,e,n,i);if(r===null)lf(t,e,i,oh,n),N_(t,i);else if(s1(r,t,e,n,i))i.stopPropagation();else if(N_(t,i),e&4&&-1<r1.indexOf(t)){for(;r!==null;){var o=cu(r);if(o!==null&&e0(o),o=Xf(t,e,n,i),o===null&&lf(t,e,i,oh,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else lf(t,e,i,null,n)}}var oh=null;function Xf(t,e,n,i){if(oh=null,t=gm(i),t=fs(t),t!==null)if(e=Os(t),e===null)t=null;else if(n=e.tag,n===13){if(t=qw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return oh=t,null}function s0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KP()){case _m:return 1;case Qw:return 4;case ih:case QP:return 16;case Yw:return 536870912;default:return 16}default:return 16}}var fr=null,Em=null,Dc=null;function o0(){if(Dc)return Dc;var t,e=Em,n=e.length,i,r="value"in fr?fr.value:fr.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===r[o-i];i++);return Dc=r.slice(t,1<i?1-i:void 0)}function Vc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _c(){return!0}function O_(){return!1}function vn(t){function e(n,i,r,o,l){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var d in t)t.hasOwnProperty(d)&&(n=t[d],this[d]=n?n(o):o[d]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?_c:O_,this.isPropagationStopped=O_,this}return nt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_c)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_c)},persist:function(){},isPersistent:_c}),e}var ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tm=vn(ca),uu=nt({},ca,{view:0,detail:0}),u1=vn(uu),Xd,Jd,ol,Kh=nt({},uu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Im,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ol&&(ol&&t.type==="mousemove"?(Xd=t.screenX-ol.screenX,Jd=t.screenY-ol.screenY):Jd=Xd=0,ol=t),Xd)},movementY:function(t){return"movementY"in t?t.movementY:Jd}}),M_=vn(Kh),c1=nt({},Kh,{dataTransfer:0}),h1=vn(c1),d1=nt({},uu,{relatedTarget:0}),ef=vn(d1),f1=nt({},ca,{animationName:0,elapsedTime:0,pseudoElement:0}),p1=vn(f1),m1=nt({},ca,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),g1=vn(m1),_1=nt({},ca,{data:0}),D_=vn(_1),v1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},y1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},w1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=w1[t])?!!e[t]:!1}function Im(){return E1}var T1=nt({},uu,{key:function(t){if(t.key){var e=v1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?y1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Im,charCode:function(t){return t.type==="keypress"?Vc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),I1=vn(T1),S1=nt({},Kh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),V_=vn(S1),P1=nt({},uu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Im}),A1=vn(P1),C1=nt({},ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),R1=vn(C1),x1=nt({},Kh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),k1=vn(x1),L1=[9,13,27,32],Sm=Di&&"CompositionEvent"in window,El=null;Di&&"documentMode"in document&&(El=document.documentMode);var N1=Di&&"TextEvent"in window&&!El,a0=Di&&(!Sm||El&&8<El&&11>=El),F_=" ",z_=!1;function l0(t,e){switch(t){case"keyup":return L1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function u0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Po=!1;function b1(t,e){switch(t){case"compositionend":return u0(e);case"keypress":return e.which!==32?null:(z_=!0,F_);case"textInput":return t=e.data,t===F_&&z_?null:t;default:return null}}function O1(t,e){if(Po)return t==="compositionend"||!Sm&&l0(t,e)?(t=o0(),Dc=Em=fr=null,Po=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return a0&&e.locale!=="ko"?null:e.data;default:return null}}var M1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function U_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!M1[t.type]:e==="textarea"}function c0(t,e,n,i){Bw(i),e=ah(e,"onChange"),0<e.length&&(n=new Tm("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Tl=null,jl=null;function D1(t){E0(t,0)}function Qh(t){var e=Ro(t);if(Ow(e))return t}function V1(t,e){if(t==="change")return e}var h0=!1;if(Di){var tf;if(Di){var nf="oninput"in document;if(!nf){var B_=document.createElement("div");B_.setAttribute("oninput","return;"),nf=typeof B_.oninput=="function"}tf=nf}else tf=!1;h0=tf&&(!document.documentMode||9<document.documentMode)}function j_(){Tl&&(Tl.detachEvent("onpropertychange",d0),jl=Tl=null)}function d0(t){if(t.propertyName==="value"&&Qh(jl)){var e=[];c0(e,jl,t,gm(t)),$w(D1,e)}}function F1(t,e,n){t==="focusin"?(j_(),Tl=e,jl=n,Tl.attachEvent("onpropertychange",d0)):t==="focusout"&&j_()}function z1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qh(jl)}function U1(t,e){if(t==="click")return Qh(e)}function B1(t,e){if(t==="input"||t==="change")return Qh(e)}function j1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zn=typeof Object.is=="function"?Object.is:j1;function Hl(t,e){if(Zn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Of.call(e,r)||!Zn(t[r],e[r]))return!1}return!0}function H_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function W_(t,e){var n=H_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=H_(n)}}function f0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?f0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function p0(){for(var t=window,e=eh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=eh(t.document)}return e}function Pm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function H1(t){var e=p0(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&f0(n.ownerDocument.documentElement,n)){if(i!==null&&Pm(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=W_(n,o);var l=W_(n,i);r&&l&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var W1=Di&&"documentMode"in document&&11>=document.documentMode,Ao=null,Jf=null,Il=null,ep=!1;function $_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ep||Ao==null||Ao!==eh(i)||(i=Ao,"selectionStart"in i&&Pm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Il&&Hl(Il,i)||(Il=i,i=ah(Jf,"onSelect"),0<i.length&&(e=new Tm("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Ao)))}function vc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Co={animationend:vc("Animation","AnimationEnd"),animationiteration:vc("Animation","AnimationIteration"),animationstart:vc("Animation","AnimationStart"),transitionend:vc("Transition","TransitionEnd")},rf={},m0={};Di&&(m0=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function Yh(t){if(rf[t])return rf[t];if(!Co[t])return t;var e=Co[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in m0)return rf[t]=e[n];return t}var g0=Yh("animationend"),_0=Yh("animationiteration"),v0=Yh("animationstart"),y0=Yh("transitionend"),w0=new Map,q_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(t,e){w0.set(t,e),bs(e,[t])}for(var sf=0;sf<q_.length;sf++){var of=q_[sf],$1=of.toLowerCase(),q1=of[0].toUpperCase()+of.slice(1);Br($1,"on"+q1)}Br(g0,"onAnimationEnd");Br(_0,"onAnimationIteration");Br(v0,"onAnimationStart");Br("dblclick","onDoubleClick");Br("focusin","onFocus");Br("focusout","onBlur");Br(y0,"onTransitionEnd");Zo("onMouseEnter",["mouseout","mouseover"]);Zo("onMouseLeave",["mouseout","mouseover"]);Zo("onPointerEnter",["pointerout","pointerover"]);Zo("onPointerLeave",["pointerout","pointerover"]);bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bs("onBeforeInput",["compositionend","keypress","textInput","paste"]);bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G1=new Set("cancel close invalid load scroll toggle".split(" ").concat(fl));function G_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,$P(i,e,void 0,t),t.currentTarget=null}function E0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var d=i[l],h=d.instance,f=d.currentTarget;if(d=d.listener,h!==o&&r.isPropagationStopped())break e;G_(r,d,f),o=h}else for(l=0;l<i.length;l++){if(d=i[l],h=d.instance,f=d.currentTarget,d=d.listener,h!==o&&r.isPropagationStopped())break e;G_(r,d,f),o=h}}}if(nh)throw t=Kf,nh=!1,Kf=null,t}function qe(t,e){var n=e[sp];n===void 0&&(n=e[sp]=new Set);var i=t+"__bubble";n.has(i)||(T0(e,t,2,!1),n.add(i))}function af(t,e,n){var i=0;e&&(i|=4),T0(n,t,i,e)}var yc="_reactListening"+Math.random().toString(36).slice(2);function Wl(t){if(!t[yc]){t[yc]=!0,xw.forEach(function(n){n!=="selectionchange"&&(G1.has(n)||af(n,!1,t),af(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[yc]||(e[yc]=!0,af("selectionchange",!1,e))}}function T0(t,e,n,i){switch(s0(e)){case 1:var r=a1;break;case 4:r=l1;break;default:r=wm}n=r.bind(null,e,n,t),r=void 0,!Zf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function lf(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var d=i.stateNode.containerInfo;if(d===r||d.nodeType===8&&d.parentNode===r)break;if(l===4)for(l=i.return;l!==null;){var h=l.tag;if((h===3||h===4)&&(h=l.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;l=l.return}for(;d!==null;){if(l=fs(d),l===null)return;if(h=l.tag,h===5||h===6){i=o=l;continue e}d=d.parentNode}}i=i.return}$w(function(){var f=o,g=gm(n),v=[];e:{var w=w0.get(t);if(w!==void 0){var S=Tm,C=t;switch(t){case"keypress":if(Vc(n)===0)break e;case"keydown":case"keyup":S=I1;break;case"focusin":C="focus",S=ef;break;case"focusout":C="blur",S=ef;break;case"beforeblur":case"afterblur":S=ef;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=M_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=h1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=A1;break;case g0:case _0:case v0:S=p1;break;case y0:S=R1;break;case"scroll":S=u1;break;case"wheel":S=k1;break;case"copy":case"cut":case"paste":S=g1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=V_}var N=(e&4)!==0,z=!N&&t==="scroll",k=N?w!==null?w+"Capture":null:w;N=[];for(var P=f,R;P!==null;){R=P;var j=R.stateNode;if(R.tag===5&&j!==null&&(R=j,k!==null&&(j=Fl(P,k),j!=null&&N.push($l(P,j,R)))),z)break;P=P.return}0<N.length&&(w=new S(w,C,null,n,g),v.push({event:w,listeners:N}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",w&&n!==qf&&(C=n.relatedTarget||n.fromElement)&&(fs(C)||C[Vi]))break e;if((S||w)&&(w=g.window===g?g:(w=g.ownerDocument)?w.defaultView||w.parentWindow:window,S?(C=n.relatedTarget||n.toElement,S=f,C=C?fs(C):null,C!==null&&(z=Os(C),C!==z||C.tag!==5&&C.tag!==6)&&(C=null)):(S=null,C=f),S!==C)){if(N=M_,j="onMouseLeave",k="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(N=V_,j="onPointerLeave",k="onPointerEnter",P="pointer"),z=S==null?w:Ro(S),R=C==null?w:Ro(C),w=new N(j,P+"leave",S,n,g),w.target=z,w.relatedTarget=R,j=null,fs(g)===f&&(N=new N(k,P+"enter",C,n,g),N.target=R,N.relatedTarget=z,j=N),z=j,S&&C)t:{for(N=S,k=C,P=0,R=N;R;R=vo(R))P++;for(R=0,j=k;j;j=vo(j))R++;for(;0<P-R;)N=vo(N),P--;for(;0<R-P;)k=vo(k),R--;for(;P--;){if(N===k||k!==null&&N===k.alternate)break t;N=vo(N),k=vo(k)}N=null}else N=null;S!==null&&Z_(v,w,S,N,!1),C!==null&&z!==null&&Z_(v,z,C,N,!0)}}e:{if(w=f?Ro(f):window,S=w.nodeName&&w.nodeName.toLowerCase(),S==="select"||S==="input"&&w.type==="file")var K=V1;else if(U_(w))if(h0)K=B1;else{K=z1;var $=F1}else(S=w.nodeName)&&S.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(K=U1);if(K&&(K=K(t,f))){c0(v,K,n,g);break e}$&&$(t,w,f),t==="focusout"&&($=w._wrapperState)&&$.controlled&&w.type==="number"&&Bf(w,"number",w.value)}switch($=f?Ro(f):window,t){case"focusin":(U_($)||$.contentEditable==="true")&&(Ao=$,Jf=f,Il=null);break;case"focusout":Il=Jf=Ao=null;break;case"mousedown":ep=!0;break;case"contextmenu":case"mouseup":case"dragend":ep=!1,$_(v,n,g);break;case"selectionchange":if(W1)break;case"keydown":case"keyup":$_(v,n,g)}var A;if(Sm)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Po?l0(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(a0&&n.locale!=="ko"&&(Po||T!=="onCompositionStart"?T==="onCompositionEnd"&&Po&&(A=o0()):(fr=g,Em="value"in fr?fr.value:fr.textContent,Po=!0)),$=ah(f,T),0<$.length&&(T=new D_(T,t,null,n,g),v.push({event:T,listeners:$}),A?T.data=A:(A=u0(n),A!==null&&(T.data=A)))),(A=N1?b1(t,n):O1(t,n))&&(f=ah(f,"onBeforeInput"),0<f.length&&(g=new D_("onBeforeInput","beforeinput",null,n,g),v.push({event:g,listeners:f}),g.data=A))}E0(v,e)})}function $l(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ah(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Fl(t,n),o!=null&&i.unshift($l(t,o,r)),o=Fl(t,e),o!=null&&i.push($l(t,o,r))),t=t.return}return i}function vo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Z_(t,e,n,i,r){for(var o=e._reactName,l=[];n!==null&&n!==i;){var d=n,h=d.alternate,f=d.stateNode;if(h!==null&&h===i)break;d.tag===5&&f!==null&&(d=f,r?(h=Fl(n,o),h!=null&&l.unshift($l(n,h,d))):r||(h=Fl(n,o),h!=null&&l.push($l(n,h,d)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var Z1=/\r\n?/g,K1=/\u0000|\uFFFD/g;function K_(t){return(typeof t=="string"?t:""+t).replace(Z1,`
`).replace(K1,"")}function wc(t,e,n){if(e=K_(e),K_(t)!==e&&n)throw Error(Y(425))}function lh(){}var tp=null,np=null;function ip(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rp=typeof setTimeout=="function"?setTimeout:void 0,Q1=typeof clearTimeout=="function"?clearTimeout:void 0,Q_=typeof Promise=="function"?Promise:void 0,Y1=typeof queueMicrotask=="function"?queueMicrotask:typeof Q_<"u"?function(t){return Q_.resolve(null).then(t).catch(X1)}:rp;function X1(t){setTimeout(function(){throw t})}function uf(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Bl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Bl(e)}function Er(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Y_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ha=Math.random().toString(36).slice(2),si="__reactFiber$"+ha,ql="__reactProps$"+ha,Vi="__reactContainer$"+ha,sp="__reactEvents$"+ha,J1="__reactListeners$"+ha,eA="__reactHandles$"+ha;function fs(t){var e=t[si];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vi]||n[si]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Y_(t);t!==null;){if(n=t[si])return n;t=Y_(t)}return e}t=n,n=t.parentNode}return null}function cu(t){return t=t[si]||t[Vi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ro(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function Xh(t){return t[ql]||null}var op=[],xo=-1;function jr(t){return{current:t}}function Ze(t){0>xo||(t.current=op[xo],op[xo]=null,xo--)}function $e(t,e){xo++,op[xo]=t.current,t.current=e}var br={},jt=jr(br),rn=jr(!1),ws=br;function Ko(t,e){var n=t.type.contextTypes;if(!n)return br;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function sn(t){return t=t.childContextTypes,t!=null}function uh(){Ze(rn),Ze(jt)}function X_(t,e,n){if(jt.current!==br)throw Error(Y(168));$e(jt,e),$e(rn,n)}function I0(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Y(108,FP(t)||"Unknown",r));return nt({},n,i)}function ch(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||br,ws=jt.current,$e(jt,t),$e(rn,rn.current),!0}function J_(t,e,n){var i=t.stateNode;if(!i)throw Error(Y(169));n?(t=I0(t,e,ws),i.__reactInternalMemoizedMergedChildContext=t,Ze(rn),Ze(jt),$e(jt,t)):Ze(rn),$e(rn,n)}var xi=null,Jh=!1,cf=!1;function S0(t){xi===null?xi=[t]:xi.push(t)}function tA(t){Jh=!0,S0(t)}function Hr(){if(!cf&&xi!==null){cf=!0;var t=0,e=ze;try{var n=xi;for(ze=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}xi=null,Jh=!1}catch(r){throw xi!==null&&(xi=xi.slice(t+1)),Kw(_m,Hr),r}finally{ze=e,cf=!1}}return null}var ko=[],Lo=0,hh=null,dh=0,Cn=[],Rn=0,Es=null,ki=1,Li="";function us(t,e){ko[Lo++]=dh,ko[Lo++]=hh,hh=t,dh=e}function P0(t,e,n){Cn[Rn++]=ki,Cn[Rn++]=Li,Cn[Rn++]=Es,Es=t;var i=ki;t=Li;var r=32-Wn(i)-1;i&=~(1<<r),n+=1;var o=32-Wn(e)+r;if(30<o){var l=r-r%5;o=(i&(1<<l)-1).toString(32),i>>=l,r-=l,ki=1<<32-Wn(e)+r|n<<r|i,Li=o+t}else ki=1<<o|n<<r|i,Li=t}function Am(t){t.return!==null&&(us(t,1),P0(t,1,0))}function Cm(t){for(;t===hh;)hh=ko[--Lo],ko[Lo]=null,dh=ko[--Lo],ko[Lo]=null;for(;t===Es;)Es=Cn[--Rn],Cn[Rn]=null,Li=Cn[--Rn],Cn[Rn]=null,ki=Cn[--Rn],Cn[Rn]=null}var mn=null,fn=null,Ye=!1,jn=null;function A0(t,e){var n=xn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ev(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mn=t,fn=Er(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mn=t,fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Es!==null?{id:ki,overflow:Li}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=xn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mn=t,fn=null,!0):!1;default:return!1}}function ap(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lp(t){if(Ye){var e=fn;if(e){var n=e;if(!ev(t,e)){if(ap(t))throw Error(Y(418));e=Er(n.nextSibling);var i=mn;e&&ev(t,e)?A0(i,n):(t.flags=t.flags&-4097|2,Ye=!1,mn=t)}}else{if(ap(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Ye=!1,mn=t}}}function tv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mn=t}function Ec(t){if(t!==mn)return!1;if(!Ye)return tv(t),Ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ip(t.type,t.memoizedProps)),e&&(e=fn)){if(ap(t))throw C0(),Error(Y(418));for(;e;)A0(t,e),e=Er(e.nextSibling)}if(tv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){fn=Er(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}fn=null}}else fn=mn?Er(t.stateNode.nextSibling):null;return!0}function C0(){for(var t=fn;t;)t=Er(t.nextSibling)}function Qo(){fn=mn=null,Ye=!1}function Rm(t){jn===null?jn=[t]:jn.push(t)}var nA=$i.ReactCurrentBatchConfig;function al(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var i=n.stateNode}if(!i)throw Error(Y(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var d=r.refs;l===null?delete d[o]:d[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function Tc(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function nv(t){var e=t._init;return e(t._payload)}function R0(t){function e(k,P){if(t){var R=k.deletions;R===null?(k.deletions=[P],k.flags|=16):R.push(P)}}function n(k,P){if(!t)return null;for(;P!==null;)e(k,P),P=P.sibling;return null}function i(k,P){for(k=new Map;P!==null;)P.key!==null?k.set(P.key,P):k.set(P.index,P),P=P.sibling;return k}function r(k,P){return k=Pr(k,P),k.index=0,k.sibling=null,k}function o(k,P,R){return k.index=R,t?(R=k.alternate,R!==null?(R=R.index,R<P?(k.flags|=2,P):R):(k.flags|=2,P)):(k.flags|=1048576,P)}function l(k){return t&&k.alternate===null&&(k.flags|=2),k}function d(k,P,R,j){return P===null||P.tag!==6?(P=_f(R,k.mode,j),P.return=k,P):(P=r(P,R),P.return=k,P)}function h(k,P,R,j){var K=R.type;return K===So?g(k,P,R.props.children,j,R.key):P!==null&&(P.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===sr&&nv(K)===P.type)?(j=r(P,R.props),j.ref=al(k,P,R),j.return=k,j):(j=Wc(R.type,R.key,R.props,null,k.mode,j),j.ref=al(k,P,R),j.return=k,j)}function f(k,P,R,j){return P===null||P.tag!==4||P.stateNode.containerInfo!==R.containerInfo||P.stateNode.implementation!==R.implementation?(P=vf(R,k.mode,j),P.return=k,P):(P=r(P,R.children||[]),P.return=k,P)}function g(k,P,R,j,K){return P===null||P.tag!==7?(P=vs(R,k.mode,j,K),P.return=k,P):(P=r(P,R),P.return=k,P)}function v(k,P,R){if(typeof P=="string"&&P!==""||typeof P=="number")return P=_f(""+P,k.mode,R),P.return=k,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case hc:return R=Wc(P.type,P.key,P.props,null,k.mode,R),R.ref=al(k,null,P),R.return=k,R;case Io:return P=vf(P,k.mode,R),P.return=k,P;case sr:var j=P._init;return v(k,j(P._payload),R)}if(hl(P)||nl(P))return P=vs(P,k.mode,R,null),P.return=k,P;Tc(k,P)}return null}function w(k,P,R,j){var K=P!==null?P.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return K!==null?null:d(k,P,""+R,j);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case hc:return R.key===K?h(k,P,R,j):null;case Io:return R.key===K?f(k,P,R,j):null;case sr:return K=R._init,w(k,P,K(R._payload),j)}if(hl(R)||nl(R))return K!==null?null:g(k,P,R,j,null);Tc(k,R)}return null}function S(k,P,R,j,K){if(typeof j=="string"&&j!==""||typeof j=="number")return k=k.get(R)||null,d(P,k,""+j,K);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case hc:return k=k.get(j.key===null?R:j.key)||null,h(P,k,j,K);case Io:return k=k.get(j.key===null?R:j.key)||null,f(P,k,j,K);case sr:var $=j._init;return S(k,P,R,$(j._payload),K)}if(hl(j)||nl(j))return k=k.get(R)||null,g(P,k,j,K,null);Tc(P,j)}return null}function C(k,P,R,j){for(var K=null,$=null,A=P,T=P=0,x=null;A!==null&&T<R.length;T++){A.index>T?(x=A,A=null):x=A.sibling;var b=w(k,A,R[T],j);if(b===null){A===null&&(A=x);break}t&&A&&b.alternate===null&&e(k,A),P=o(b,P,T),$===null?K=b:$.sibling=b,$=b,A=x}if(T===R.length)return n(k,A),Ye&&us(k,T),K;if(A===null){for(;T<R.length;T++)A=v(k,R[T],j),A!==null&&(P=o(A,P,T),$===null?K=A:$.sibling=A,$=A);return Ye&&us(k,T),K}for(A=i(k,A);T<R.length;T++)x=S(A,k,T,R[T],j),x!==null&&(t&&x.alternate!==null&&A.delete(x.key===null?T:x.key),P=o(x,P,T),$===null?K=x:$.sibling=x,$=x);return t&&A.forEach(function(O){return e(k,O)}),Ye&&us(k,T),K}function N(k,P,R,j){var K=nl(R);if(typeof K!="function")throw Error(Y(150));if(R=K.call(R),R==null)throw Error(Y(151));for(var $=K=null,A=P,T=P=0,x=null,b=R.next();A!==null&&!b.done;T++,b=R.next()){A.index>T?(x=A,A=null):x=A.sibling;var O=w(k,A,b.value,j);if(O===null){A===null&&(A=x);break}t&&A&&O.alternate===null&&e(k,A),P=o(O,P,T),$===null?K=O:$.sibling=O,$=O,A=x}if(b.done)return n(k,A),Ye&&us(k,T),K;if(A===null){for(;!b.done;T++,b=R.next())b=v(k,b.value,j),b!==null&&(P=o(b,P,T),$===null?K=b:$.sibling=b,$=b);return Ye&&us(k,T),K}for(A=i(k,A);!b.done;T++,b=R.next())b=S(A,k,T,b.value,j),b!==null&&(t&&b.alternate!==null&&A.delete(b.key===null?T:b.key),P=o(b,P,T),$===null?K=b:$.sibling=b,$=b);return t&&A.forEach(function(F){return e(k,F)}),Ye&&us(k,T),K}function z(k,P,R,j){if(typeof R=="object"&&R!==null&&R.type===So&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case hc:e:{for(var K=R.key,$=P;$!==null;){if($.key===K){if(K=R.type,K===So){if($.tag===7){n(k,$.sibling),P=r($,R.props.children),P.return=k,k=P;break e}}else if($.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===sr&&nv(K)===$.type){n(k,$.sibling),P=r($,R.props),P.ref=al(k,$,R),P.return=k,k=P;break e}n(k,$);break}else e(k,$);$=$.sibling}R.type===So?(P=vs(R.props.children,k.mode,j,R.key),P.return=k,k=P):(j=Wc(R.type,R.key,R.props,null,k.mode,j),j.ref=al(k,P,R),j.return=k,k=j)}return l(k);case Io:e:{for($=R.key;P!==null;){if(P.key===$)if(P.tag===4&&P.stateNode.containerInfo===R.containerInfo&&P.stateNode.implementation===R.implementation){n(k,P.sibling),P=r(P,R.children||[]),P.return=k,k=P;break e}else{n(k,P);break}else e(k,P);P=P.sibling}P=vf(R,k.mode,j),P.return=k,k=P}return l(k);case sr:return $=R._init,z(k,P,$(R._payload),j)}if(hl(R))return C(k,P,R,j);if(nl(R))return N(k,P,R,j);Tc(k,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,P!==null&&P.tag===6?(n(k,P.sibling),P=r(P,R),P.return=k,k=P):(n(k,P),P=_f(R,k.mode,j),P.return=k,k=P),l(k)):n(k,P)}return z}var Yo=R0(!0),x0=R0(!1),fh=jr(null),ph=null,No=null,xm=null;function km(){xm=No=ph=null}function Lm(t){var e=fh.current;Ze(fh),t._currentValue=e}function up(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function jo(t,e){ph=t,xm=No=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(nn=!0),t.firstContext=null)}function Nn(t){var e=t._currentValue;if(xm!==t)if(t={context:t,memoizedValue:e,next:null},No===null){if(ph===null)throw Error(Y(308));No=t,ph.dependencies={lanes:0,firstContext:t}}else No=No.next=t;return e}var ps=null;function Nm(t){ps===null?ps=[t]:ps.push(t)}function k0(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Nm(e)):(n.next=r.next,r.next=n),e.interleaved=n,Fi(t,i)}function Fi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var or=!1;function bm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function L0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Oi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Tr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Me&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Fi(t,n)}return r=i.interleaved,r===null?(e.next=e,Nm(i)):(e.next=r.next,r.next=e),i.interleaved=e,Fi(t,n)}function Fc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,vm(t,n)}}function iv(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function mh(t,e,n,i){var r=t.updateQueue;or=!1;var o=r.firstBaseUpdate,l=r.lastBaseUpdate,d=r.shared.pending;if(d!==null){r.shared.pending=null;var h=d,f=h.next;h.next=null,l===null?o=f:l.next=f,l=h;var g=t.alternate;g!==null&&(g=g.updateQueue,d=g.lastBaseUpdate,d!==l&&(d===null?g.firstBaseUpdate=f:d.next=f,g.lastBaseUpdate=h))}if(o!==null){var v=r.baseState;l=0,g=f=h=null,d=o;do{var w=d.lane,S=d.eventTime;if((i&w)===w){g!==null&&(g=g.next={eventTime:S,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var C=t,N=d;switch(w=e,S=n,N.tag){case 1:if(C=N.payload,typeof C=="function"){v=C.call(S,v,w);break e}v=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=N.payload,w=typeof C=="function"?C.call(S,v,w):C,w==null)break e;v=nt({},v,w);break e;case 2:or=!0}}d.callback!==null&&d.lane!==0&&(t.flags|=64,w=r.effects,w===null?r.effects=[d]:w.push(d))}else S={eventTime:S,lane:w,tag:d.tag,payload:d.payload,callback:d.callback,next:null},g===null?(f=g=S,h=v):g=g.next=S,l|=w;if(d=d.next,d===null){if(d=r.shared.pending,d===null)break;w=d,d=w.next,w.next=null,r.lastBaseUpdate=w,r.shared.pending=null}}while(!0);if(g===null&&(h=v),r.baseState=h,r.firstBaseUpdate=f,r.lastBaseUpdate=g,e=r.shared.interleaved,e!==null){r=e;do l|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);Is|=l,t.lanes=l,t.memoizedState=v}}function rv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Y(191,r));r.call(i)}}}var hu={},ai=jr(hu),Gl=jr(hu),Zl=jr(hu);function ms(t){if(t===hu)throw Error(Y(174));return t}function Om(t,e){switch($e(Zl,e),$e(Gl,t),$e(ai,hu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Hf(e,t)}Ze(ai),$e(ai,e)}function Xo(){Ze(ai),Ze(Gl),Ze(Zl)}function N0(t){ms(Zl.current);var e=ms(ai.current),n=Hf(e,t.type);e!==n&&($e(Gl,t),$e(ai,n))}function Mm(t){Gl.current===t&&(Ze(ai),Ze(Gl))}var et=jr(0);function gh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hf=[];function Dm(){for(var t=0;t<hf.length;t++)hf[t]._workInProgressVersionPrimary=null;hf.length=0}var zc=$i.ReactCurrentDispatcher,df=$i.ReactCurrentBatchConfig,Ts=0,tt=null,wt=null,Ct=null,_h=!1,Sl=!1,Kl=0,iA=0;function Dt(){throw Error(Y(321))}function Vm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Zn(t[n],e[n]))return!1;return!0}function Fm(t,e,n,i,r,o){if(Ts=o,tt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zc.current=t===null||t.memoizedState===null?aA:lA,t=n(i,r),Sl){o=0;do{if(Sl=!1,Kl=0,25<=o)throw Error(Y(301));o+=1,Ct=wt=null,e.updateQueue=null,zc.current=uA,t=n(i,r)}while(Sl)}if(zc.current=vh,e=wt!==null&&wt.next!==null,Ts=0,Ct=wt=tt=null,_h=!1,e)throw Error(Y(300));return t}function zm(){var t=Kl!==0;return Kl=0,t}function ii(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?tt.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function bn(){if(wt===null){var t=tt.alternate;t=t!==null?t.memoizedState:null}else t=wt.next;var e=Ct===null?tt.memoizedState:Ct.next;if(e!==null)Ct=e,wt=t;else{if(t===null)throw Error(Y(310));wt=t,t={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},Ct===null?tt.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function Ql(t,e){return typeof e=="function"?e(t):e}function ff(t){var e=bn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=wt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var l=r.next;r.next=o.next,o.next=l}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var d=l=null,h=null,f=o;do{var g=f.lane;if((Ts&g)===g)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var v={lane:g,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(d=h=v,l=i):h=h.next=v,tt.lanes|=g,Is|=g}f=f.next}while(f!==null&&f!==o);h===null?l=i:h.next=d,Zn(i,e.memoizedState)||(nn=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,tt.lanes|=o,Is|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function pf(t){var e=bn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var l=r=r.next;do o=t(o,l.action),l=l.next;while(l!==r);Zn(o,e.memoizedState)||(nn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function b0(){}function O0(t,e){var n=tt,i=bn(),r=e(),o=!Zn(i.memoizedState,r);if(o&&(i.memoizedState=r,nn=!0),i=i.queue,Um(V0.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||Ct!==null&&Ct.memoizedState.tag&1){if(n.flags|=2048,Yl(9,D0.bind(null,n,i,r,e),void 0,null),xt===null)throw Error(Y(349));Ts&30||M0(n,e,r)}return r}function M0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function D0(t,e,n,i){e.value=n,e.getSnapshot=i,F0(e)&&z0(t)}function V0(t,e,n){return n(function(){F0(e)&&z0(t)})}function F0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Zn(t,n)}catch{return!0}}function z0(t){var e=Fi(t,1);e!==null&&$n(e,t,1,-1)}function sv(t){var e=ii();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ql,lastRenderedState:t},e.queue=t,t=t.dispatch=oA.bind(null,tt,t),[e.memoizedState,t]}function Yl(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=tt.updateQueue,e===null?(e={lastEffect:null,stores:null},tt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function U0(){return bn().memoizedState}function Uc(t,e,n,i){var r=ii();tt.flags|=t,r.memoizedState=Yl(1|e,n,void 0,i===void 0?null:i)}function ed(t,e,n,i){var r=bn();i=i===void 0?null:i;var o=void 0;if(wt!==null){var l=wt.memoizedState;if(o=l.destroy,i!==null&&Vm(i,l.deps)){r.memoizedState=Yl(e,n,o,i);return}}tt.flags|=t,r.memoizedState=Yl(1|e,n,o,i)}function ov(t,e){return Uc(8390656,8,t,e)}function Um(t,e){return ed(2048,8,t,e)}function B0(t,e){return ed(4,2,t,e)}function j0(t,e){return ed(4,4,t,e)}function H0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function W0(t,e,n){return n=n!=null?n.concat([t]):null,ed(4,4,H0.bind(null,e,t),n)}function Bm(){}function $0(t,e){var n=bn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Vm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function q0(t,e){var n=bn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Vm(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function G0(t,e,n){return Ts&21?(Zn(n,e)||(n=Xw(),tt.lanes|=n,Is|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,nn=!0),t.memoizedState=n)}function rA(t,e){var n=ze;ze=n!==0&&4>n?n:4,t(!0);var i=df.transition;df.transition={};try{t(!1),e()}finally{ze=n,df.transition=i}}function Z0(){return bn().memoizedState}function sA(t,e,n){var i=Sr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},K0(t))Q0(e,n);else if(n=k0(t,e,n,i),n!==null){var r=Zt();$n(n,t,i,r),Y0(n,e,i)}}function oA(t,e,n){var i=Sr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(K0(t))Q0(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,d=o(l,n);if(r.hasEagerState=!0,r.eagerState=d,Zn(d,l)){var h=e.interleaved;h===null?(r.next=r,Nm(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=k0(t,e,r,i),n!==null&&(r=Zt(),$n(n,t,i,r),Y0(n,e,i))}}function K0(t){var e=t.alternate;return t===tt||e!==null&&e===tt}function Q0(t,e){Sl=_h=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Y0(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,vm(t,n)}}var vh={readContext:Nn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},aA={readContext:Nn,useCallback:function(t,e){return ii().memoizedState=[t,e===void 0?null:e],t},useContext:Nn,useEffect:ov,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Uc(4194308,4,H0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Uc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Uc(4,2,t,e)},useMemo:function(t,e){var n=ii();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ii();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=sA.bind(null,tt,t),[i.memoizedState,t]},useRef:function(t){var e=ii();return t={current:t},e.memoizedState=t},useState:sv,useDebugValue:Bm,useDeferredValue:function(t){return ii().memoizedState=t},useTransition:function(){var t=sv(!1),e=t[0];return t=rA.bind(null,t[1]),ii().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=tt,r=ii();if(Ye){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),xt===null)throw Error(Y(349));Ts&30||M0(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,ov(V0.bind(null,i,o,t),[t]),i.flags|=2048,Yl(9,D0.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=ii(),e=xt.identifierPrefix;if(Ye){var n=Li,i=ki;n=(i&~(1<<32-Wn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Kl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lA={readContext:Nn,useCallback:$0,useContext:Nn,useEffect:Um,useImperativeHandle:W0,useInsertionEffect:B0,useLayoutEffect:j0,useMemo:q0,useReducer:ff,useRef:U0,useState:function(){return ff(Ql)},useDebugValue:Bm,useDeferredValue:function(t){var e=bn();return G0(e,wt.memoizedState,t)},useTransition:function(){var t=ff(Ql)[0],e=bn().memoizedState;return[t,e]},useMutableSource:b0,useSyncExternalStore:O0,useId:Z0,unstable_isNewReconciler:!1},uA={readContext:Nn,useCallback:$0,useContext:Nn,useEffect:Um,useImperativeHandle:W0,useInsertionEffect:B0,useLayoutEffect:j0,useMemo:q0,useReducer:pf,useRef:U0,useState:function(){return pf(Ql)},useDebugValue:Bm,useDeferredValue:function(t){var e=bn();return wt===null?e.memoizedState=t:G0(e,wt.memoizedState,t)},useTransition:function(){var t=pf(Ql)[0],e=bn().memoizedState;return[t,e]},useMutableSource:b0,useSyncExternalStore:O0,useId:Z0,unstable_isNewReconciler:!1};function Un(t,e){if(t&&t.defaultProps){e=nt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function cp(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:nt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var td={isMounted:function(t){return(t=t._reactInternals)?Os(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Zt(),r=Sr(t),o=Oi(i,r);o.payload=e,n!=null&&(o.callback=n),e=Tr(t,o,r),e!==null&&($n(e,t,r,i),Fc(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Zt(),r=Sr(t),o=Oi(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Tr(t,o,r),e!==null&&($n(e,t,r,i),Fc(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Zt(),i=Sr(t),r=Oi(n,i);r.tag=2,e!=null&&(r.callback=e),e=Tr(t,r,i),e!==null&&($n(e,t,i,n),Fc(e,t,i))}};function av(t,e,n,i,r,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!Hl(n,i)||!Hl(r,o):!0}function X0(t,e,n){var i=!1,r=br,o=e.contextType;return typeof o=="object"&&o!==null?o=Nn(o):(r=sn(e)?ws:jt.current,i=e.contextTypes,o=(i=i!=null)?Ko(t,r):br),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=td,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function lv(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&td.enqueueReplaceState(e,e.state,null)}function hp(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},bm(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=Nn(o):(o=sn(e)?ws:jt.current,r.context=Ko(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(cp(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&td.enqueueReplaceState(r,r.state,null),mh(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Jo(t,e){try{var n="",i=e;do n+=VP(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function mf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function dp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var cA=typeof WeakMap=="function"?WeakMap:Map;function J0(t,e,n){n=Oi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){wh||(wh=!0,Tp=i),dp(t,e)},n}function eE(t,e,n){n=Oi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){dp(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){dp(t,e),typeof i!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function uv(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new cA;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=SA.bind(null,t,e,n),e.then(t,t))}function cv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function hv(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Oi(-1,1),e.tag=2,Tr(n,e,1))),n.lanes|=1),t)}var hA=$i.ReactCurrentOwner,nn=!1;function qt(t,e,n,i){e.child=t===null?x0(e,null,n,i):Yo(e,t.child,n,i)}function dv(t,e,n,i,r){n=n.render;var o=e.ref;return jo(e,r),i=Fm(t,e,n,i,o,r),n=zm(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,zi(t,e,r)):(Ye&&n&&Am(e),e.flags|=1,qt(t,e,i,r),e.child)}function fv(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!Km(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,tE(t,e,o,i,r)):(t=Wc(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Hl,n(l,i)&&t.ref===e.ref)return zi(t,e,r)}return e.flags|=1,t=Pr(o,i),t.ref=e.ref,t.return=e,e.child=t}function tE(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Hl(o,i)&&t.ref===e.ref)if(nn=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(nn=!0);else return e.lanes=t.lanes,zi(t,e,r)}return fp(t,e,n,i,r)}function nE(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Oo,cn),cn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(Oo,cn),cn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,$e(Oo,cn),cn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,$e(Oo,cn),cn|=i;return qt(t,e,r,n),e.child}function iE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function fp(t,e,n,i,r){var o=sn(n)?ws:jt.current;return o=Ko(e,o),jo(e,r),n=Fm(t,e,n,i,o,r),i=zm(),t!==null&&!nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,zi(t,e,r)):(Ye&&i&&Am(e),e.flags|=1,qt(t,e,n,r),e.child)}function pv(t,e,n,i,r){if(sn(n)){var o=!0;ch(e)}else o=!1;if(jo(e,r),e.stateNode===null)Bc(t,e),X0(e,n,i),hp(e,n,i,r),i=!0;else if(t===null){var l=e.stateNode,d=e.memoizedProps;l.props=d;var h=l.context,f=n.contextType;typeof f=="object"&&f!==null?f=Nn(f):(f=sn(n)?ws:jt.current,f=Ko(e,f));var g=n.getDerivedStateFromProps,v=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function";v||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==i||h!==f)&&lv(e,l,i,f),or=!1;var w=e.memoizedState;l.state=w,mh(e,i,l,r),h=e.memoizedState,d!==i||w!==h||rn.current||or?(typeof g=="function"&&(cp(e,n,g,i),h=e.memoizedState),(d=or||av(e,n,d,i,w,h,f))?(v||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),l.props=i,l.state=h,l.context=f,i=d):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,L0(t,e),d=e.memoizedProps,f=e.type===e.elementType?d:Un(e.type,d),l.props=f,v=e.pendingProps,w=l.context,h=n.contextType,typeof h=="object"&&h!==null?h=Nn(h):(h=sn(n)?ws:jt.current,h=Ko(e,h));var S=n.getDerivedStateFromProps;(g=typeof S=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==v||w!==h)&&lv(e,l,i,h),or=!1,w=e.memoizedState,l.state=w,mh(e,i,l,r);var C=e.memoizedState;d!==v||w!==C||rn.current||or?(typeof S=="function"&&(cp(e,n,S,i),C=e.memoizedState),(f=or||av(e,n,f,i,w,C,h)||!1)?(g||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,C,h),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,C,h)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||d===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=C),l.props=i,l.state=C,l.context=h,i=f):(typeof l.componentDidUpdate!="function"||d===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),i=!1)}return pp(t,e,n,i,o,r)}function pp(t,e,n,i,r,o){iE(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return r&&J_(e,n,!1),zi(t,e,o);i=e.stateNode,hA.current=e;var d=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=Yo(e,t.child,null,o),e.child=Yo(e,null,d,o)):qt(t,e,d,o),e.memoizedState=i.state,r&&J_(e,n,!0),e.child}function rE(t){var e=t.stateNode;e.pendingContext?X_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&X_(t,e.context,!1),Om(t,e.containerInfo)}function mv(t,e,n,i,r){return Qo(),Rm(r),e.flags|=256,qt(t,e,n,i),e.child}var mp={dehydrated:null,treeContext:null,retryLane:0};function gp(t){return{baseLanes:t,cachePool:null,transitions:null}}function sE(t,e,n){var i=e.pendingProps,r=et.current,o=!1,l=(e.flags&128)!==0,d;if((d=l)||(d=t!==null&&t.memoizedState===null?!1:(r&2)!==0),d?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),$e(et,r&1),t===null)return lp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=rd(l,i,0,null),t=vs(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=gp(n),e.memoizedState=mp,t):jm(e,l));if(r=t.memoizedState,r!==null&&(d=r.dehydrated,d!==null))return dA(t,e,l,i,d,r,n);if(o){o=i.fallback,l=e.mode,r=t.child,d=r.sibling;var h={mode:"hidden",children:i.children};return!(l&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=Pr(r,h),i.subtreeFlags=r.subtreeFlags&14680064),d!==null?o=Pr(d,o):(o=vs(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?gp(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=mp,i}return o=t.child,t=o.sibling,i=Pr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function jm(t,e){return e=rd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ic(t,e,n,i){return i!==null&&Rm(i),Yo(e,t.child,null,n),t=jm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dA(t,e,n,i,r,o,l){if(n)return e.flags&256?(e.flags&=-257,i=mf(Error(Y(422))),Ic(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=rd({mode:"visible",children:i.children},r,0,null),o=vs(o,r,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Yo(e,t.child,null,l),e.child.memoizedState=gp(l),e.memoizedState=mp,o);if(!(e.mode&1))return Ic(t,e,l,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var d=i.dgst;return i=d,o=Error(Y(419)),i=mf(o,i,void 0),Ic(t,e,l,i)}if(d=(l&t.childLanes)!==0,nn||d){if(i=xt,i!==null){switch(l&-l){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|l)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Fi(t,r),$n(i,t,r,-1))}return Zm(),i=mf(Error(Y(421))),Ic(t,e,l,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=PA.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,fn=Er(r.nextSibling),mn=e,Ye=!0,jn=null,t!==null&&(Cn[Rn++]=ki,Cn[Rn++]=Li,Cn[Rn++]=Es,ki=t.id,Li=t.overflow,Es=e),e=jm(e,i.children),e.flags|=4096,e)}function gv(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),up(t.return,e,n)}function gf(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function oE(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(qt(t,e,i.children,n),i=et.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gv(t,n,e);else if(t.tag===19)gv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if($e(et,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&gh(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),gf(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&gh(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}gf(e,!0,n,null,o);break;case"together":gf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Is|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=Pr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Pr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function fA(t,e,n){switch(e.tag){case 3:rE(e),Qo();break;case 5:N0(e);break;case 1:sn(e.type)&&ch(e);break;case 4:Om(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;$e(fh,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?($e(et,et.current&1),e.flags|=128,null):n&e.child.childLanes?sE(t,e,n):($e(et,et.current&1),t=zi(t,e,n),t!==null?t.sibling:null);$e(et,et.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return oE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),$e(et,et.current),i)break;return null;case 22:case 23:return e.lanes=0,nE(t,e,n)}return zi(t,e,n)}var aE,_p,lE,uE;aE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_p=function(){};lE=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,ms(ai.current);var o=null;switch(n){case"input":r=zf(t,r),i=zf(t,i),o=[];break;case"select":r=nt({},r,{value:void 0}),i=nt({},i,{value:void 0}),o=[];break;case"textarea":r=jf(t,r),i=jf(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=lh)}Wf(n,i);var l;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var d=r[f];for(l in d)d.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Dl.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var h=i[f];if(d=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&h!==d&&(h!=null||d!=null))if(f==="style")if(d){for(l in d)!d.hasOwnProperty(l)||h&&h.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in h)h.hasOwnProperty(l)&&d[l]!==h[l]&&(n||(n={}),n[l]=h[l])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,d=d?d.__html:void 0,h!=null&&d!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Dl.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&qe("scroll",t),o||d===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};uE=function(t,e,n,i){n!==i&&(e.flags|=4)};function ll(t,e){if(!Ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function pA(t,e,n){var i=e.pendingProps;switch(Cm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(e),null;case 1:return sn(e.type)&&uh(),Vt(e),null;case 3:return i=e.stateNode,Xo(),Ze(rn),Ze(jt),Dm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Ec(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jn!==null&&(Pp(jn),jn=null))),_p(t,e),Vt(e),null;case 5:Mm(e);var r=ms(Zl.current);if(n=e.type,t!==null&&e.stateNode!=null)lE(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Y(166));return Vt(e),null}if(t=ms(ai.current),Ec(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[si]=e,i[ql]=o,t=(e.mode&1)!==0,n){case"dialog":qe("cancel",i),qe("close",i);break;case"iframe":case"object":case"embed":qe("load",i);break;case"video":case"audio":for(r=0;r<fl.length;r++)qe(fl[r],i);break;case"source":qe("error",i);break;case"img":case"image":case"link":qe("error",i),qe("load",i);break;case"details":qe("toggle",i);break;case"input":P_(i,o),qe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},qe("invalid",i);break;case"textarea":C_(i,o),qe("invalid",i)}Wf(n,o),r=null;for(var l in o)if(o.hasOwnProperty(l)){var d=o[l];l==="children"?typeof d=="string"?i.textContent!==d&&(o.suppressHydrationWarning!==!0&&wc(i.textContent,d,t),r=["children",d]):typeof d=="number"&&i.textContent!==""+d&&(o.suppressHydrationWarning!==!0&&wc(i.textContent,d,t),r=["children",""+d]):Dl.hasOwnProperty(l)&&d!=null&&l==="onScroll"&&qe("scroll",i)}switch(n){case"input":dc(i),A_(i,o,!0);break;case"textarea":dc(i),R_(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=lh)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Vw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[si]=e,t[ql]=i,aE(t,e,!1,!1),e.stateNode=t;e:{switch(l=$f(n,i),n){case"dialog":qe("cancel",t),qe("close",t),r=i;break;case"iframe":case"object":case"embed":qe("load",t),r=i;break;case"video":case"audio":for(r=0;r<fl.length;r++)qe(fl[r],t);r=i;break;case"source":qe("error",t),r=i;break;case"img":case"image":case"link":qe("error",t),qe("load",t),r=i;break;case"details":qe("toggle",t),r=i;break;case"input":P_(t,i),r=zf(t,i),qe("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=nt({},i,{value:void 0}),qe("invalid",t);break;case"textarea":C_(t,i),r=jf(t,i),qe("invalid",t);break;default:r=i}Wf(n,r),d=r;for(o in d)if(d.hasOwnProperty(o)){var h=d[o];o==="style"?Uw(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Fw(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Vl(t,h):typeof h=="number"&&Vl(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Dl.hasOwnProperty(o)?h!=null&&o==="onScroll"&&qe("scroll",t):h!=null&&dm(t,o,h,l))}switch(n){case"input":dc(t),A_(t,i,!1);break;case"textarea":dc(t),R_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Nr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Fo(t,!!i.multiple,o,!1):i.defaultValue!=null&&Fo(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=lh)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vt(e),null;case 6:if(t&&e.stateNode!=null)uE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Y(166));if(n=ms(Zl.current),ms(ai.current),Ec(e)){if(i=e.stateNode,n=e.memoizedProps,i[si]=e,(o=i.nodeValue!==n)&&(t=mn,t!==null))switch(t.tag){case 3:wc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wc(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[si]=e,e.stateNode=i}return Vt(e),null;case 13:if(Ze(et),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&fn!==null&&e.mode&1&&!(e.flags&128))C0(),Qo(),e.flags|=98560,o=!1;else if(o=Ec(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Y(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[si]=e}else Qo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vt(e),o=!1}else jn!==null&&(Pp(jn),jn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||et.current&1?Et===0&&(Et=3):Zm())),e.updateQueue!==null&&(e.flags|=4),Vt(e),null);case 4:return Xo(),_p(t,e),t===null&&Wl(e.stateNode.containerInfo),Vt(e),null;case 10:return Lm(e.type._context),Vt(e),null;case 17:return sn(e.type)&&uh(),Vt(e),null;case 19:if(Ze(et),o=e.memoizedState,o===null)return Vt(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)ll(o,!1);else{if(Et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=gh(t),l!==null){for(e.flags|=128,ll(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(et,et.current&1|2),e.child}t=t.sibling}o.tail!==null&&ct()>ea&&(e.flags|=128,i=!0,ll(o,!1),e.lanes=4194304)}else{if(!i)if(t=gh(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ll(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Ye)return Vt(e),null}else 2*ct()-o.renderingStartTime>ea&&n!==1073741824&&(e.flags|=128,i=!0,ll(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ct(),e.sibling=null,n=et.current,$e(et,i?n&1|2:n&1),e):(Vt(e),null);case 22:case 23:return Gm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?cn&1073741824&&(Vt(e),e.subtreeFlags&6&&(e.flags|=8192)):Vt(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function mA(t,e){switch(Cm(e),e.tag){case 1:return sn(e.type)&&uh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xo(),Ze(rn),Ze(jt),Dm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Mm(e),null;case 13:if(Ze(et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Qo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ze(et),null;case 4:return Xo(),null;case 10:return Lm(e.type._context),null;case 22:case 23:return Gm(),null;case 24:return null;default:return null}}var Sc=!1,Ut=!1,gA=typeof WeakSet=="function"?WeakSet:Set,re=null;function bo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ot(t,e,i)}else n.current=null}function vp(t,e,n){try{n()}catch(i){ot(t,e,i)}}var _v=!1;function _A(t,e){if(tp=sh,t=p0(),Pm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,d=-1,h=-1,f=0,g=0,v=t,w=null;t:for(;;){for(var S;v!==n||r!==0&&v.nodeType!==3||(d=l+r),v!==o||i!==0&&v.nodeType!==3||(h=l+i),v.nodeType===3&&(l+=v.nodeValue.length),(S=v.firstChild)!==null;)w=v,v=S;for(;;){if(v===t)break t;if(w===n&&++f===r&&(d=l),w===o&&++g===i&&(h=l),(S=v.nextSibling)!==null)break;v=w,w=v.parentNode}v=S}n=d===-1||h===-1?null:{start:d,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(np={focusedElem:t,selectionRange:n},sh=!1,re=e;re!==null;)if(e=re,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,re=t;else for(;re!==null;){e=re;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var N=C.memoizedProps,z=C.memoizedState,k=e.stateNode,P=k.getSnapshotBeforeUpdate(e.elementType===e.type?N:Un(e.type,N),z);k.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var R=e.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(j){ot(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,re=t;break}re=e.return}return C=_v,_v=!1,C}function Pl(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&vp(e,n,o)}r=r.next}while(r!==i)}}function nd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function yp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cE(t){var e=t.alternate;e!==null&&(t.alternate=null,cE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[si],delete e[ql],delete e[sp],delete e[J1],delete e[eA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hE(t){return t.tag===5||t.tag===3||t.tag===4}function vv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=lh));else if(i!==4&&(t=t.child,t!==null))for(wp(t,e,n),t=t.sibling;t!==null;)wp(t,e,n),t=t.sibling}function Ep(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Ep(t,e,n),t=t.sibling;t!==null;)Ep(t,e,n),t=t.sibling}var Nt=null,Bn=!1;function ir(t,e,n){for(n=n.child;n!==null;)dE(t,e,n),n=n.sibling}function dE(t,e,n){if(oi&&typeof oi.onCommitFiberUnmount=="function")try{oi.onCommitFiberUnmount(Zh,n)}catch{}switch(n.tag){case 5:Ut||bo(n,e);case 6:var i=Nt,r=Bn;Nt=null,ir(t,e,n),Nt=i,Bn=r,Nt!==null&&(Bn?(t=Nt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Nt.removeChild(n.stateNode));break;case 18:Nt!==null&&(Bn?(t=Nt,n=n.stateNode,t.nodeType===8?uf(t.parentNode,n):t.nodeType===1&&uf(t,n),Bl(t)):uf(Nt,n.stateNode));break;case 4:i=Nt,r=Bn,Nt=n.stateNode.containerInfo,Bn=!0,ir(t,e,n),Nt=i,Bn=r;break;case 0:case 11:case 14:case 15:if(!Ut&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&vp(n,e,l),r=r.next}while(r!==i)}ir(t,e,n);break;case 1:if(!Ut&&(bo(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(d){ot(n,e,d)}ir(t,e,n);break;case 21:ir(t,e,n);break;case 22:n.mode&1?(Ut=(i=Ut)||n.memoizedState!==null,ir(t,e,n),Ut=i):ir(t,e,n);break;default:ir(t,e,n)}}function yv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new gA),e.forEach(function(i){var r=AA.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function zn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,l=e,d=l;e:for(;d!==null;){switch(d.tag){case 5:Nt=d.stateNode,Bn=!1;break e;case 3:Nt=d.stateNode.containerInfo,Bn=!0;break e;case 4:Nt=d.stateNode.containerInfo,Bn=!0;break e}d=d.return}if(Nt===null)throw Error(Y(160));dE(o,l,r),Nt=null,Bn=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(f){ot(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fE(e,t),e=e.sibling}function fE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zn(e,t),ni(t),i&4){try{Pl(3,t,t.return),nd(3,t)}catch(N){ot(t,t.return,N)}try{Pl(5,t,t.return)}catch(N){ot(t,t.return,N)}}break;case 1:zn(e,t),ni(t),i&512&&n!==null&&bo(n,n.return);break;case 5:if(zn(e,t),ni(t),i&512&&n!==null&&bo(n,n.return),t.flags&32){var r=t.stateNode;try{Vl(r,"")}catch(N){ot(t,t.return,N)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,d=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{d==="input"&&o.type==="radio"&&o.name!=null&&Mw(r,o),$f(d,l);var f=$f(d,o);for(l=0;l<h.length;l+=2){var g=h[l],v=h[l+1];g==="style"?Uw(r,v):g==="dangerouslySetInnerHTML"?Fw(r,v):g==="children"?Vl(r,v):dm(r,g,v,f)}switch(d){case"input":Uf(r,o);break;case"textarea":Dw(r,o);break;case"select":var w=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?Fo(r,!!o.multiple,S,!1):w!==!!o.multiple&&(o.defaultValue!=null?Fo(r,!!o.multiple,o.defaultValue,!0):Fo(r,!!o.multiple,o.multiple?[]:"",!1))}r[ql]=o}catch(N){ot(t,t.return,N)}}break;case 6:if(zn(e,t),ni(t),i&4){if(t.stateNode===null)throw Error(Y(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(N){ot(t,t.return,N)}}break;case 3:if(zn(e,t),ni(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Bl(e.containerInfo)}catch(N){ot(t,t.return,N)}break;case 4:zn(e,t),ni(t);break;case 13:zn(e,t),ni(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||($m=ct())),i&4&&yv(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(Ut=(f=Ut)||g,zn(e,t),Ut=f):zn(e,t),ni(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!g&&t.mode&1)for(re=t,g=t.child;g!==null;){for(v=re=g;re!==null;){switch(w=re,S=w.child,w.tag){case 0:case 11:case 14:case 15:Pl(4,w,w.return);break;case 1:bo(w,w.return);var C=w.stateNode;if(typeof C.componentWillUnmount=="function"){i=w,n=w.return;try{e=i,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(N){ot(i,n,N)}}break;case 5:bo(w,w.return);break;case 22:if(w.memoizedState!==null){Ev(v);continue}}S!==null?(S.return=w,re=S):Ev(v)}g=g.sibling}e:for(g=null,v=t;;){if(v.tag===5){if(g===null){g=v;try{r=v.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(d=v.stateNode,h=v.memoizedProps.style,l=h!=null&&h.hasOwnProperty("display")?h.display:null,d.style.display=zw("display",l))}catch(N){ot(t,t.return,N)}}}else if(v.tag===6){if(g===null)try{v.stateNode.nodeValue=f?"":v.memoizedProps}catch(N){ot(t,t.return,N)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;g===v&&(g=null),v=v.return}g===v&&(g=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:zn(e,t),ni(t),i&4&&yv(t);break;case 21:break;default:zn(e,t),ni(t)}}function ni(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(hE(n)){var i=n;break e}n=n.return}throw Error(Y(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Vl(r,""),i.flags&=-33);var o=vv(t);Ep(t,o,r);break;case 3:case 4:var l=i.stateNode.containerInfo,d=vv(t);wp(t,d,l);break;default:throw Error(Y(161))}}catch(h){ot(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vA(t,e,n){re=t,pE(t)}function pE(t,e,n){for(var i=(t.mode&1)!==0;re!==null;){var r=re,o=r.child;if(r.tag===22&&i){var l=r.memoizedState!==null||Sc;if(!l){var d=r.alternate,h=d!==null&&d.memoizedState!==null||Ut;d=Sc;var f=Ut;if(Sc=l,(Ut=h)&&!f)for(re=r;re!==null;)l=re,h=l.child,l.tag===22&&l.memoizedState!==null?Tv(r):h!==null?(h.return=l,re=h):Tv(r);for(;o!==null;)re=o,pE(o),o=o.sibling;re=r,Sc=d,Ut=f}wv(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,re=o):wv(t)}}function wv(t){for(;re!==null;){var e=re;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ut||nd(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ut)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Un(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&rv(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}rv(e,l,n)}break;case 5:var d=e.stateNode;if(n===null&&e.flags&4){n=d;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var g=f.memoizedState;if(g!==null){var v=g.dehydrated;v!==null&&Bl(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Ut||e.flags&512&&yp(e)}catch(w){ot(e,e.return,w)}}if(e===t){re=null;break}if(n=e.sibling,n!==null){n.return=e.return,re=n;break}re=e.return}}function Ev(t){for(;re!==null;){var e=re;if(e===t){re=null;break}var n=e.sibling;if(n!==null){n.return=e.return,re=n;break}re=e.return}}function Tv(t){for(;re!==null;){var e=re;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{nd(4,e)}catch(h){ot(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){ot(e,r,h)}}var o=e.return;try{yp(e)}catch(h){ot(e,o,h)}break;case 5:var l=e.return;try{yp(e)}catch(h){ot(e,l,h)}}}catch(h){ot(e,e.return,h)}if(e===t){re=null;break}var d=e.sibling;if(d!==null){d.return=e.return,re=d;break}re=e.return}}var yA=Math.ceil,yh=$i.ReactCurrentDispatcher,Hm=$i.ReactCurrentOwner,kn=$i.ReactCurrentBatchConfig,Me=0,xt=null,gt=null,Ot=0,cn=0,Oo=jr(0),Et=0,Xl=null,Is=0,id=0,Wm=0,Al=null,en=null,$m=0,ea=1/0,Ri=null,wh=!1,Tp=null,Ir=null,Pc=!1,pr=null,Eh=0,Cl=0,Ip=null,jc=-1,Hc=0;function Zt(){return Me&6?ct():jc!==-1?jc:jc=ct()}function Sr(t){return t.mode&1?Me&2&&Ot!==0?Ot&-Ot:nA.transition!==null?(Hc===0&&(Hc=Xw()),Hc):(t=ze,t!==0||(t=window.event,t=t===void 0?16:s0(t.type)),t):1}function $n(t,e,n,i){if(50<Cl)throw Cl=0,Ip=null,Error(Y(185));lu(t,n,i),(!(Me&2)||t!==xt)&&(t===xt&&(!(Me&2)&&(id|=n),Et===4&&lr(t,Ot)),on(t,i),n===1&&Me===0&&!(e.mode&1)&&(ea=ct()+500,Jh&&Hr()))}function on(t,e){var n=t.callbackNode;n1(t,e);var i=rh(t,t===xt?Ot:0);if(i===0)n!==null&&L_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&L_(n),e===1)t.tag===0?tA(Iv.bind(null,t)):S0(Iv.bind(null,t)),Y1(function(){!(Me&6)&&Hr()}),n=null;else{switch(Jw(i)){case 1:n=_m;break;case 4:n=Qw;break;case 16:n=ih;break;case 536870912:n=Yw;break;default:n=ih}n=TE(n,mE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mE(t,e){if(jc=-1,Hc=0,Me&6)throw Error(Y(327));var n=t.callbackNode;if(Ho()&&t.callbackNode!==n)return null;var i=rh(t,t===xt?Ot:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Th(t,i);else{e=i;var r=Me;Me|=2;var o=_E();(xt!==t||Ot!==e)&&(Ri=null,ea=ct()+500,_s(t,e));do try{TA();break}catch(d){gE(t,d)}while(!0);km(),yh.current=o,Me=r,gt!==null?e=0:(xt=null,Ot=0,e=Et)}if(e!==0){if(e===2&&(r=Qf(t),r!==0&&(i=r,e=Sp(t,r))),e===1)throw n=Xl,_s(t,0),lr(t,i),on(t,ct()),n;if(e===6)lr(t,i);else{if(r=t.current.alternate,!(i&30)&&!wA(r)&&(e=Th(t,i),e===2&&(o=Qf(t),o!==0&&(i=o,e=Sp(t,o))),e===1))throw n=Xl,_s(t,0),lr(t,i),on(t,ct()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Y(345));case 2:cs(t,en,Ri);break;case 3:if(lr(t,i),(i&130023424)===i&&(e=$m+500-ct(),10<e)){if(rh(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Zt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=rp(cs.bind(null,t,en,Ri),e);break}cs(t,en,Ri);break;case 4:if(lr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var l=31-Wn(i);o=1<<l,l=e[l],l>r&&(r=l),i&=~o}if(i=r,i=ct()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*yA(i/1960))-i,10<i){t.timeoutHandle=rp(cs.bind(null,t,en,Ri),i);break}cs(t,en,Ri);break;case 5:cs(t,en,Ri);break;default:throw Error(Y(329))}}}return on(t,ct()),t.callbackNode===n?mE.bind(null,t):null}function Sp(t,e){var n=Al;return t.current.memoizedState.isDehydrated&&(_s(t,e).flags|=256),t=Th(t,e),t!==2&&(e=en,en=n,e!==null&&Pp(e)),t}function Pp(t){en===null?en=t:en.push.apply(en,t)}function wA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Zn(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function lr(t,e){for(e&=~Wm,e&=~id,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wn(e),i=1<<n;t[n]=-1,e&=~i}}function Iv(t){if(Me&6)throw Error(Y(327));Ho();var e=rh(t,0);if(!(e&1))return on(t,ct()),null;var n=Th(t,e);if(t.tag!==0&&n===2){var i=Qf(t);i!==0&&(e=i,n=Sp(t,i))}if(n===1)throw n=Xl,_s(t,0),lr(t,e),on(t,ct()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,cs(t,en,Ri),on(t,ct()),null}function qm(t,e){var n=Me;Me|=1;try{return t(e)}finally{Me=n,Me===0&&(ea=ct()+500,Jh&&Hr())}}function Ss(t){pr!==null&&pr.tag===0&&!(Me&6)&&Ho();var e=Me;Me|=1;var n=kn.transition,i=ze;try{if(kn.transition=null,ze=1,t)return t()}finally{ze=i,kn.transition=n,Me=e,!(Me&6)&&Hr()}}function Gm(){cn=Oo.current,Ze(Oo)}function _s(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Q1(n)),gt!==null)for(n=gt.return;n!==null;){var i=n;switch(Cm(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&uh();break;case 3:Xo(),Ze(rn),Ze(jt),Dm();break;case 5:Mm(i);break;case 4:Xo();break;case 13:Ze(et);break;case 19:Ze(et);break;case 10:Lm(i.type._context);break;case 22:case 23:Gm()}n=n.return}if(xt=t,gt=t=Pr(t.current,null),Ot=cn=e,Et=0,Xl=null,Wm=id=Is=0,en=Al=null,ps!==null){for(e=0;e<ps.length;e++)if(n=ps[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=r,i.next=l}n.pending=i}ps=null}return t}function gE(t,e){do{var n=gt;try{if(km(),zc.current=vh,_h){for(var i=tt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}_h=!1}if(Ts=0,Ct=wt=tt=null,Sl=!1,Kl=0,Hm.current=null,n===null||n.return===null){Et=1,Xl=e,gt=null;break}e:{var o=t,l=n.return,d=n,h=e;if(e=Ot,d.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,g=d,v=g.tag;if(!(g.mode&1)&&(v===0||v===11||v===15)){var w=g.alternate;w?(g.updateQueue=w.updateQueue,g.memoizedState=w.memoizedState,g.lanes=w.lanes):(g.updateQueue=null,g.memoizedState=null)}var S=cv(l);if(S!==null){S.flags&=-257,hv(S,l,d,o,e),S.mode&1&&uv(o,f,e),e=S,h=f;var C=e.updateQueue;if(C===null){var N=new Set;N.add(h),e.updateQueue=N}else C.add(h);break e}else{if(!(e&1)){uv(o,f,e),Zm();break e}h=Error(Y(426))}}else if(Ye&&d.mode&1){var z=cv(l);if(z!==null){!(z.flags&65536)&&(z.flags|=256),hv(z,l,d,o,e),Rm(Jo(h,d));break e}}o=h=Jo(h,d),Et!==4&&(Et=2),Al===null?Al=[o]:Al.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var k=J0(o,h,e);iv(o,k);break e;case 1:d=h;var P=o.type,R=o.stateNode;if(!(o.flags&128)&&(typeof P.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Ir===null||!Ir.has(R)))){o.flags|=65536,e&=-e,o.lanes|=e;var j=eE(o,d,e);iv(o,j);break e}}o=o.return}while(o!==null)}yE(n)}catch(K){e=K,gt===n&&n!==null&&(gt=n=n.return);continue}break}while(!0)}function _E(){var t=yh.current;return yh.current=vh,t===null?vh:t}function Zm(){(Et===0||Et===3||Et===2)&&(Et=4),xt===null||!(Is&268435455)&&!(id&268435455)||lr(xt,Ot)}function Th(t,e){var n=Me;Me|=2;var i=_E();(xt!==t||Ot!==e)&&(Ri=null,_s(t,e));do try{EA();break}catch(r){gE(t,r)}while(!0);if(km(),Me=n,yh.current=i,gt!==null)throw Error(Y(261));return xt=null,Ot=0,Et}function EA(){for(;gt!==null;)vE(gt)}function TA(){for(;gt!==null&&!GP();)vE(gt)}function vE(t){var e=EE(t.alternate,t,cn);t.memoizedProps=t.pendingProps,e===null?yE(t):gt=e,Hm.current=null}function yE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=mA(n,e),n!==null){n.flags&=32767,gt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Et=6,gt=null;return}}else if(n=pA(n,e,cn),n!==null){gt=n;return}if(e=e.sibling,e!==null){gt=e;return}gt=e=t}while(e!==null);Et===0&&(Et=5)}function cs(t,e,n){var i=ze,r=kn.transition;try{kn.transition=null,ze=1,IA(t,e,n,i)}finally{kn.transition=r,ze=i}return null}function IA(t,e,n,i){do Ho();while(pr!==null);if(Me&6)throw Error(Y(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(i1(t,o),t===xt&&(gt=xt=null,Ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pc||(Pc=!0,TE(ih,function(){return Ho(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=kn.transition,kn.transition=null;var l=ze;ze=1;var d=Me;Me|=4,Hm.current=null,_A(t,n),fE(n,t),H1(np),sh=!!tp,np=tp=null,t.current=n,vA(n),ZP(),Me=d,ze=l,kn.transition=o}else t.current=n;if(Pc&&(Pc=!1,pr=t,Eh=r),o=t.pendingLanes,o===0&&(Ir=null),YP(n.stateNode),on(t,ct()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(wh)throw wh=!1,t=Tp,Tp=null,t;return Eh&1&&t.tag!==0&&Ho(),o=t.pendingLanes,o&1?t===Ip?Cl++:(Cl=0,Ip=t):Cl=0,Hr(),null}function Ho(){if(pr!==null){var t=Jw(Eh),e=kn.transition,n=ze;try{if(kn.transition=null,ze=16>t?16:t,pr===null)var i=!1;else{if(t=pr,pr=null,Eh=0,Me&6)throw Error(Y(331));var r=Me;for(Me|=4,re=t.current;re!==null;){var o=re,l=o.child;if(re.flags&16){var d=o.deletions;if(d!==null){for(var h=0;h<d.length;h++){var f=d[h];for(re=f;re!==null;){var g=re;switch(g.tag){case 0:case 11:case 15:Pl(8,g,o)}var v=g.child;if(v!==null)v.return=g,re=v;else for(;re!==null;){g=re;var w=g.sibling,S=g.return;if(cE(g),g===f){re=null;break}if(w!==null){w.return=S,re=w;break}re=S}}}var C=o.alternate;if(C!==null){var N=C.child;if(N!==null){C.child=null;do{var z=N.sibling;N.sibling=null,N=z}while(N!==null)}}re=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,re=l;else e:for(;re!==null;){if(o=re,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Pl(9,o,o.return)}var k=o.sibling;if(k!==null){k.return=o.return,re=k;break e}re=o.return}}var P=t.current;for(re=P;re!==null;){l=re;var R=l.child;if(l.subtreeFlags&2064&&R!==null)R.return=l,re=R;else e:for(l=P;re!==null;){if(d=re,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:nd(9,d)}}catch(K){ot(d,d.return,K)}if(d===l){re=null;break e}var j=d.sibling;if(j!==null){j.return=d.return,re=j;break e}re=d.return}}if(Me=r,Hr(),oi&&typeof oi.onPostCommitFiberRoot=="function")try{oi.onPostCommitFiberRoot(Zh,t)}catch{}i=!0}return i}finally{ze=n,kn.transition=e}}return!1}function Sv(t,e,n){e=Jo(n,e),e=J0(t,e,1),t=Tr(t,e,1),e=Zt(),t!==null&&(lu(t,1,e),on(t,e))}function ot(t,e,n){if(t.tag===3)Sv(t,t,n);else for(;e!==null;){if(e.tag===3){Sv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ir===null||!Ir.has(i))){t=Jo(n,t),t=eE(e,t,1),e=Tr(e,t,1),t=Zt(),e!==null&&(lu(e,1,t),on(e,t));break}}e=e.return}}function SA(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Zt(),t.pingedLanes|=t.suspendedLanes&n,xt===t&&(Ot&n)===n&&(Et===4||Et===3&&(Ot&130023424)===Ot&&500>ct()-$m?_s(t,0):Wm|=n),on(t,e)}function wE(t,e){e===0&&(t.mode&1?(e=mc,mc<<=1,!(mc&130023424)&&(mc=4194304)):e=1);var n=Zt();t=Fi(t,e),t!==null&&(lu(t,e,n),on(t,n))}function PA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),wE(t,n)}function AA(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Y(314))}i!==null&&i.delete(e),wE(t,n)}var EE;EE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||rn.current)nn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return nn=!1,fA(t,e,n);nn=!!(t.flags&131072)}else nn=!1,Ye&&e.flags&1048576&&P0(e,dh,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Bc(t,e),t=e.pendingProps;var r=Ko(e,jt.current);jo(e,n),r=Fm(null,e,i,t,r,n);var o=zm();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,sn(i)?(o=!0,ch(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,bm(e),r.updater=td,e.stateNode=r,r._reactInternals=e,hp(e,i,t,n),e=pp(null,e,i,!0,o,n)):(e.tag=0,Ye&&o&&Am(e),qt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Bc(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=RA(i),t=Un(i,t),r){case 0:e=fp(null,e,i,t,n);break e;case 1:e=pv(null,e,i,t,n);break e;case 11:e=dv(null,e,i,t,n);break e;case 14:e=fv(null,e,i,Un(i.type,t),n);break e}throw Error(Y(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Un(i,r),fp(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Un(i,r),pv(t,e,i,r,n);case 3:e:{if(rE(e),t===null)throw Error(Y(387));i=e.pendingProps,o=e.memoizedState,r=o.element,L0(t,e),mh(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Jo(Error(Y(423)),e),e=mv(t,e,i,n,r);break e}else if(i!==r){r=Jo(Error(Y(424)),e),e=mv(t,e,i,n,r);break e}else for(fn=Er(e.stateNode.containerInfo.firstChild),mn=e,Ye=!0,jn=null,n=x0(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qo(),i===r){e=zi(t,e,n);break e}qt(t,e,i,n)}e=e.child}return e;case 5:return N0(e),t===null&&lp(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,l=r.children,ip(i,r)?l=null:o!==null&&ip(i,o)&&(e.flags|=32),iE(t,e),qt(t,e,l,n),e.child;case 6:return t===null&&lp(e),null;case 13:return sE(t,e,n);case 4:return Om(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Yo(e,null,i,n):qt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Un(i,r),dv(t,e,i,r,n);case 7:return qt(t,e,e.pendingProps,n),e.child;case 8:return qt(t,e,e.pendingProps.children,n),e.child;case 12:return qt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,l=r.value,$e(fh,i._currentValue),i._currentValue=l,o!==null)if(Zn(o.value,l)){if(o.children===r.children&&!rn.current){e=zi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var d=o.dependencies;if(d!==null){l=o.child;for(var h=d.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=Oi(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var g=f.pending;g===null?h.next=h:(h.next=g.next,g.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),up(o.return,n,e),d.lanes|=n;break}h=h.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(Y(341));l.lanes|=n,d=l.alternate,d!==null&&(d.lanes|=n),up(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}qt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,jo(e,n),r=Nn(r),i=i(r),e.flags|=1,qt(t,e,i,n),e.child;case 14:return i=e.type,r=Un(i,e.pendingProps),r=Un(i.type,r),fv(t,e,i,r,n);case 15:return tE(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Un(i,r),Bc(t,e),e.tag=1,sn(i)?(t=!0,ch(e)):t=!1,jo(e,n),X0(e,i,r),hp(e,i,r,n),pp(null,e,i,!0,t,n);case 19:return oE(t,e,n);case 22:return nE(t,e,n)}throw Error(Y(156,e.tag))};function TE(t,e){return Kw(t,e)}function CA(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(t,e,n,i){return new CA(t,e,n,i)}function Km(t){return t=t.prototype,!(!t||!t.isReactComponent)}function RA(t){if(typeof t=="function")return Km(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pm)return 11;if(t===mm)return 14}return 2}function Pr(t,e){var n=t.alternate;return n===null?(n=xn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wc(t,e,n,i,r,o){var l=2;if(i=t,typeof t=="function")Km(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case So:return vs(n.children,r,o,e);case fm:l=8,r|=8;break;case Mf:return t=xn(12,n,e,r|2),t.elementType=Mf,t.lanes=o,t;case Df:return t=xn(13,n,e,r),t.elementType=Df,t.lanes=o,t;case Vf:return t=xn(19,n,e,r),t.elementType=Vf,t.lanes=o,t;case Nw:return rd(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kw:l=10;break e;case Lw:l=9;break e;case pm:l=11;break e;case mm:l=14;break e;case sr:l=16,i=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=xn(l,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function vs(t,e,n,i){return t=xn(7,t,i,e),t.lanes=n,t}function rd(t,e,n,i){return t=xn(22,t,i,e),t.elementType=Nw,t.lanes=n,t.stateNode={isHidden:!1},t}function _f(t,e,n){return t=xn(6,t,null,e),t.lanes=n,t}function vf(t,e,n){return e=xn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xA(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yd(0),this.expirationTimes=Yd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yd(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Qm(t,e,n,i,r,o,l,d,h){return t=new xA(t,e,n,d,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=xn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bm(o),t}function kA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Io,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function IE(t){if(!t)return br;t=t._reactInternals;e:{if(Os(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(sn(n))return I0(t,n,e)}return e}function SE(t,e,n,i,r,o,l,d,h){return t=Qm(n,i,!0,t,r,o,l,d,h),t.context=IE(null),n=t.current,i=Zt(),r=Sr(n),o=Oi(i,r),o.callback=e??null,Tr(n,o,r),t.current.lanes=r,lu(t,r,i),on(t,i),t}function sd(t,e,n,i){var r=e.current,o=Zt(),l=Sr(r);return n=IE(n),e.context===null?e.context=n:e.pendingContext=n,e=Oi(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Tr(r,e,l),t!==null&&($n(t,r,l,o),Fc(t,r,l)),l}function Ih(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Pv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ym(t,e){Pv(t,e),(t=t.alternate)&&Pv(t,e)}function LA(){return null}var PE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xm(t){this._internalRoot=t}od.prototype.render=Xm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));sd(t,e,null,null)};od.prototype.unmount=Xm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ss(function(){sd(null,t,null,null)}),e[Vi]=null}};function od(t){this._internalRoot=t}od.prototype.unstable_scheduleHydration=function(t){if(t){var e=n0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ar.length&&e!==0&&e<ar[n].priority;n++);ar.splice(n,0,t),n===0&&r0(t)}};function Jm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ad(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Av(){}function NA(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=Ih(l);o.call(f)}}var l=SE(e,i,t,0,null,!1,!1,"",Av);return t._reactRootContainer=l,t[Vi]=l.current,Wl(t.nodeType===8?t.parentNode:t),Ss(),l}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var d=i;i=function(){var f=Ih(h);d.call(f)}}var h=Qm(t,0,!1,null,null,!1,!1,"",Av);return t._reactRootContainer=h,t[Vi]=h.current,Wl(t.nodeType===8?t.parentNode:t),Ss(function(){sd(e,h,n,i)}),h}function ld(t,e,n,i,r){var o=n._reactRootContainer;if(o){var l=o;if(typeof r=="function"){var d=r;r=function(){var h=Ih(l);d.call(h)}}sd(e,l,t,r)}else l=NA(n,e,t,r,i);return Ih(l)}e0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=dl(e.pendingLanes);n!==0&&(vm(e,n|1),on(e,ct()),!(Me&6)&&(ea=ct()+500,Hr()))}break;case 13:Ss(function(){var i=Fi(t,1);if(i!==null){var r=Zt();$n(i,t,1,r)}}),Ym(t,1)}};ym=function(t){if(t.tag===13){var e=Fi(t,134217728);if(e!==null){var n=Zt();$n(e,t,134217728,n)}Ym(t,134217728)}};t0=function(t){if(t.tag===13){var e=Sr(t),n=Fi(t,e);if(n!==null){var i=Zt();$n(n,t,e,i)}Ym(t,e)}};n0=function(){return ze};i0=function(t,e){var n=ze;try{return ze=t,e()}finally{ze=n}};Gf=function(t,e,n){switch(e){case"input":if(Uf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Xh(i);if(!r)throw Error(Y(90));Ow(i),Uf(i,r)}}}break;case"textarea":Dw(t,n);break;case"select":e=n.value,e!=null&&Fo(t,!!n.multiple,e,!1)}};Hw=qm;Ww=Ss;var bA={usingClientEntryPoint:!1,Events:[cu,Ro,Xh,Bw,jw,qm]},ul={findFiberByHostInstance:fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OA={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$i.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Gw(t),t===null?null:t.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||LA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ac.isDisabled&&Ac.supportsFiber)try{Zh=Ac.inject(OA),oi=Ac}catch{}}_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bA;_n.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jm(e))throw Error(Y(200));return kA(t,e,null,n)};_n.createRoot=function(t,e){if(!Jm(t))throw Error(Y(299));var n=!1,i="",r=PE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Qm(t,1,!1,null,null,n,!1,i,r),t[Vi]=e.current,Wl(t.nodeType===8?t.parentNode:t),new Xm(e)};_n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=Gw(e),t=t===null?null:t.stateNode,t};_n.flushSync=function(t){return Ss(t)};_n.hydrate=function(t,e,n){if(!ad(e))throw Error(Y(200));return ld(null,t,e,!0,n)};_n.hydrateRoot=function(t,e,n){if(!Jm(t))throw Error(Y(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",l=PE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=SE(e,null,t,1,n??null,r,!1,o,l),t[Vi]=e.current,Wl(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new od(e)};_n.render=function(t,e,n){if(!ad(e))throw Error(Y(200));return ld(null,t,e,!1,n)};_n.unmountComponentAtNode=function(t){if(!ad(t))throw Error(Y(40));return t._reactRootContainer?(Ss(function(){ld(null,null,t,!1,function(){t._reactRootContainer=null,t[Vi]=null})}),!0):!1};_n.unstable_batchedUpdates=qm;_n.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!ad(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return ld(t,e,n,!1,i)};_n.version="18.3.1-next-f1338f8080-20240426";function AE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AE)}catch(t){console.error(t)}}AE(),Aw.exports=_n;var CE=Aw.exports,Cv=CE;bf.createRoot=Cv.createRoot,bf.hydrateRoot=Cv.hydrateRoot;const MA="modulepreload",DA=function(t){return"/"+t},Rv={},Ap=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));r=Promise.allSettled(n.map(h=>{if(h=DA(h),h in Rv)return;Rv[h]=!0;const f=h.endsWith(".css"),g=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":MA,f||(v.as="script"),v.crossOrigin="",v.href=h,d&&v.setAttribute("nonce",d),document.head.appendChild(v),f)return new Promise((w,S)=>{v.addEventListener("load",w),v.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return r.then(l=>{for(const d of l||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})},VA=()=>{};var xv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},FA=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],l=t[n++],d=t[n++],h=((r&7)<<18|(o&63)<<12|(l&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},xE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],l=r+1<t.length,d=l?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,g=o>>2,v=(o&3)<<4|d>>4;let w=(d&15)<<2|f>>6,S=f&63;h||(S=64,l||(w=64)),i.push(n[g],n[v],n[w],n[S])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(RE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):FA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],d=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const v=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||d==null||f==null||v==null)throw new zA;const w=o<<2|d>>4;if(i.push(w),f!==64){const S=d<<4&240|f>>2;if(i.push(S),v!==64){const C=f<<6&192|v;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class zA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UA=function(t){const e=RE(t);return xE.encodeByteArray(e,!0)},Sh=function(t){return UA(t).replace(/\./g,"")},kE=function(t){try{return xE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=()=>BA().__FIREBASE_DEFAULTS__,HA=()=>{if(typeof process>"u"||typeof xv>"u")return;const t=xv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},WA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&kE(t[1]);return e&&JSON.parse(e)},ud=()=>{try{return VA()||jA()||HA()||WA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},LE=t=>{var e,n;return(n=(e=ud())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},NE=t=>{const e=LE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},bE=()=>{var t;return(t=ud())===null||t===void 0?void 0:t.config},OE=t=>{var e;return(e=ud())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Sh(JSON.stringify(n)),Sh(JSON.stringify(l)),""].join(".")}const Rl={};function GA(){const t={prod:[],emulator:[]};for(const e of Object.keys(Rl))Rl[e]?t.emulator.push(e):t.prod.push(e);return t}function ZA(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let kv=!1;function tg(t,e){if(typeof window>"u"||typeof document>"u"||!Ms(window.location.host)||Rl[t]===e||Rl[t]||kv)return;Rl[t]=e;function n(w){return`__firebase__banner__${w}`}const i="__firebase__banner",o=GA().prod.length>0;function l(){const w=document.getElementById(i);w&&w.remove()}function d(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function h(w,S){w.setAttribute("width","24"),w.setAttribute("id",S),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function f(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{kv=!0,l()},w}function g(w,S){w.setAttribute("id",S),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function v(){const w=ZA(i),S=n("text"),C=document.getElementById(S)||document.createElement("span"),N=n("learnmore"),z=document.getElementById(N)||document.createElement("a"),k=n("preprendIcon"),P=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const R=w.element;d(R),g(z,N);const j=f();h(P,k),R.append(P,C,z,j),document.body.appendChild(R)}o?(C.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function QA(){var t;const e=(t=ud())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function XA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function JA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eC(){const t=Ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function tC(){return!QA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nC(){try{return typeof indexedDB=="object"}catch{return!1}}function iC(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="FirebaseError";class mi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=rC,Object.setPrototypeOf(this,mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,du.prototype.create)}}class du{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?sC(o,i):"Error",d=`${this.serviceName}: ${l} (${r}).`;return new mi(r,d,i)}}function sC(t,e){return t.replace(oC,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const oC=/\{\$([^}]+)}/g;function aC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ps(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],l=e[r];if(Lv(o)&&Lv(l)){if(!Ps(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Lv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function pl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function ml(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function lC(t,e){const n=new uC(t,e);return n.subscribe.bind(n)}class uC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");cC(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=yf),r.error===void 0&&(r.error=yf),r.complete===void 0&&(r.complete=yf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function yf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(t){return t&&t._delegate?t._delegate:t}class Or{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new $A;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fC(e))try{this.getOrInitializeService({instanceIdentifier:hs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hs){return this.instances.has(e)}getOptions(e=hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);i===d&&l.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:dC(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=hs){return this.component?this.component.multipleInstances?e:hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dC(t){return t===hs?void 0:t}function fC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const mC={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},gC=xe.INFO,_C={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},vC=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=_C[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ng{constructor(e){this.name=e,this._logLevel=gC,this._logHandler=vC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const yC=(t,e)=>e.some(n=>t instanceof n);let Nv,bv;function wC(){return Nv||(Nv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EC(){return bv||(bv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ME=new WeakMap,Cp=new WeakMap,DE=new WeakMap,wf=new WeakMap,ig=new WeakMap;function TC(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Ar(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&ME.set(n,t)}).catch(()=>{}),ig.set(e,t),e}function IC(t){if(Cp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Cp.set(t,e)}let Rp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Cp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||DE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ar(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function SC(t){Rp=t(Rp)}function PC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Ef(this),e,...n);return DE.set(i,e.sort?e.sort():[e]),Ar(i)}:EC().includes(t)?function(...e){return t.apply(Ef(this),e),Ar(ME.get(this))}:function(...e){return Ar(t.apply(Ef(this),e))}}function AC(t){return typeof t=="function"?PC(t):(t instanceof IDBTransaction&&IC(t),yC(t,wC())?new Proxy(t,Rp):t)}function Ar(t){if(t instanceof IDBRequest)return TC(t);if(wf.has(t))return wf.get(t);const e=AC(t);return e!==t&&(wf.set(t,e),ig.set(e,t)),e}const Ef=t=>ig.get(t);function CC(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(t,e),d=Ar(l);return i&&l.addEventListener("upgradeneeded",h=>{i(Ar(l.result),h.oldVersion,h.newVersion,Ar(l.transaction),h)}),n&&l.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),d.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),d}const RC=["get","getKey","getAll","getAllKeys","count"],xC=["put","add","delete","clear"],Tf=new Map;function Ov(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Tf.get(e))return Tf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=xC.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||RC.includes(n)))return;const o=async function(l,...d){const h=this.transaction(l,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(d.shift())),(await Promise.all([f[n](...d),r&&h.done]))[0]};return Tf.set(e,o),o}SC(t=>({...t,get:(e,n,i)=>Ov(e,n)||t.get(e,n,i),has:(e,n)=>!!Ov(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(LC(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function LC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xp="@firebase/app",Mv="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new ng("@firebase/app"),NC="@firebase/app-compat",bC="@firebase/analytics-compat",OC="@firebase/analytics",MC="@firebase/app-check-compat",DC="@firebase/app-check",VC="@firebase/auth",FC="@firebase/auth-compat",zC="@firebase/database",UC="@firebase/data-connect",BC="@firebase/database-compat",jC="@firebase/functions",HC="@firebase/functions-compat",WC="@firebase/installations",$C="@firebase/installations-compat",qC="@firebase/messaging",GC="@firebase/messaging-compat",ZC="@firebase/performance",KC="@firebase/performance-compat",QC="@firebase/remote-config",YC="@firebase/remote-config-compat",XC="@firebase/storage",JC="@firebase/storage-compat",eR="@firebase/firestore",tR="@firebase/ai",nR="@firebase/firestore-compat",iR="firebase",rR="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="[DEFAULT]",sR={[xp]:"fire-core",[NC]:"fire-core-compat",[OC]:"fire-analytics",[bC]:"fire-analytics-compat",[DC]:"fire-app-check",[MC]:"fire-app-check-compat",[VC]:"fire-auth",[FC]:"fire-auth-compat",[zC]:"fire-rtdb",[UC]:"fire-data-connect",[BC]:"fire-rtdb-compat",[jC]:"fire-fn",[HC]:"fire-fn-compat",[WC]:"fire-iid",[$C]:"fire-iid-compat",[qC]:"fire-fcm",[GC]:"fire-fcm-compat",[ZC]:"fire-perf",[KC]:"fire-perf-compat",[QC]:"fire-rc",[YC]:"fire-rc-compat",[XC]:"fire-gcs",[JC]:"fire-gcs-compat",[eR]:"fire-fst",[nR]:"fire-fst-compat",[tR]:"fire-vertex","fire-js":"fire-js",[iR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph=new Map,oR=new Map,Lp=new Map;function Dv(t,e){try{t.container.addComponent(e)}catch(n){Ui.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function As(t){const e=t.name;if(Lp.has(e))return Ui.debug(`There were multiple attempts to register component ${e}.`),!1;Lp.set(e,t);for(const n of Ph.values())Dv(n,t);for(const n of oR.values())Dv(n,t);return!0}function cd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cr=new du("app","Firebase",aR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Or("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=rR;function VE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:kp,automaticDataCollectionEnabled:!0},e),r=i.name;if(typeof r!="string"||!r)throw Cr.create("bad-app-name",{appName:String(r)});if(n||(n=bE()),!n)throw Cr.create("no-options");const o=Ph.get(r);if(o){if(Ps(n,o.options)&&Ps(i,o.config))return o;throw Cr.create("duplicate-app",{appName:r})}const l=new pC(r);for(const h of Lp.values())l.addComponent(h);const d=new lR(n,i,l);return Ph.set(r,d),d}function rg(t=kp){const e=Ph.get(t);if(!e&&t===kp&&bE())return VE();if(!e)throw Cr.create("no-app",{appName:t});return e}function li(t,e,n){var i;let r=(i=sR[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const d=[`Unable to register library "${r}" with version "${e}":`];o&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ui.warn(d.join(" "));return}As(new Or(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="firebase-heartbeat-database",cR=1,Jl="firebase-heartbeat-store";let If=null;function FE(){return If||(If=CC(uR,cR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Jl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Cr.create("idb-open",{originalErrorMessage:t.message})})),If}async function hR(t){try{const n=(await FE()).transaction(Jl),i=await n.objectStore(Jl).get(zE(t));return await n.done,i}catch(e){if(e instanceof mi)Ui.warn(e.message);else{const n=Cr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ui.warn(n.message)}}}async function Vv(t,e){try{const i=(await FE()).transaction(Jl,"readwrite");await i.objectStore(Jl).put(e,zE(t)),await i.done}catch(n){if(n instanceof mi)Ui.warn(n.message);else{const i=Cr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ui.warn(i.message)}}}function zE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=1024,fR=30;class pR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gR(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Fv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>fR){const l=_R(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ui.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Fv(),{heartbeatsToSend:i,unsentEntries:r}=mR(this._heartbeatsCache.heartbeats),o=Sh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ui.warn(n),""}}}function Fv(){return new Date().toISOString().substring(0,10)}function mR(t,e=dR){const n=[];let i=t.slice();for(const r of t){const o=n.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),zv(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),zv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class gR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nC()?iC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Vv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Vv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function zv(t){return Sh(JSON.stringify({version:2,heartbeats:t})).length}function _R(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(t){As(new Or("platform-logger",e=>new kC(e),"PRIVATE")),As(new Or("heartbeat",e=>new pR(e),"PRIVATE")),li(xp,Mv,t),li(xp,Mv,"esm2017"),li("fire-js","")}vR("");function sg(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function UE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yR=UE,BE=new du("auth","Firebase",UE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah=new ng("@firebase/auth");function wR(t,...e){Ah.logLevel<=xe.WARN&&Ah.warn(`Auth (${da}): ${t}`,...e)}function $c(t,...e){Ah.logLevel<=xe.ERROR&&Ah.error(`Auth (${da}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(t,...e){throw og(t,...e)}function ui(t,...e){return og(t,...e)}function jE(t,e,n){const i=Object.assign(Object.assign({},yR()),{[e]:n});return new du("auth","Firebase",i).create(e,{appName:t.name})}function Mi(t){return jE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function og(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return BE.create(t,...e)}function fe(t,e,...n){if(!t)throw og(e,...n)}function Ni(t){const e="INTERNAL ASSERTION FAILED: "+t;throw $c(e),new Error(e)}function Bi(t,e){t||Ni(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ER(){return Uv()==="http:"||Uv()==="https:"}function Uv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ER()||XA()||"connection"in navigator)?navigator.onLine:!0}function IR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Bi(n>e,"Short delay should be less than long delay!"),this.isMobile=KA()||JA()}get(){return TR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(t,e){Bi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ni("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ni("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ni("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],AR=new pu(3e4,6e4);function Wr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function $r(t,e,n,i,r={}){return WE(t,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const d=fu(Object.assign({key:t.config.apiKey},l)).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:h},o);return YA()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Ms(t.emulatorConfig.host)&&(f.credentials="include"),HE.fetch()(await $E(t,t.config.apiHost,n,d),f)})}async function WE(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},SR),e);try{const r=new RR(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Cc(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const d=o.ok?l.errorMessage:l.error.message,[h,f]=d.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cc(t,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Cc(t,"email-already-in-use",l);if(h==="USER_DISABLED")throw Cc(t,"user-disabled",l);const g=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw jE(t,g,f);Kn(t,g)}}catch(r){if(r instanceof mi)throw r;Kn(t,"network-request-failed",{message:String(r)})}}async function mu(t,e,n,i,r={}){const o=await $r(t,e,n,i,r);return"mfaPendingCredential"in o&&Kn(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function $E(t,e,n,i){const r=`${e}${n}?${i}`,o=t,l=o.config.emulator?ag(t.config,r):`${t.config.apiScheme}://${r}`;return PR.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function CR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ui(this.auth,"network-request-failed")),AR.get())})}}function Cc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=ui(t,e,i);return r.customData._tokenResponse=n,r}function Bv(t){return t!==void 0&&t.enterprise!==void 0}class xR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return CR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kR(t,e){return $r(t,"GET","/v2/recaptchaConfig",Wr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LR(t,e){return $r(t,"POST","/v1/accounts:delete",e)}async function Ch(t,e){return $r(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NR(t,e=!1){const n=ht(t),i=await n.getIdToken(e),r=lg(i);fe(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:xl(Sf(r.auth_time)),issuedAtTime:xl(Sf(r.iat)),expirationTime:xl(Sf(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Sf(t){return Number(t)*1e3}function lg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return $c("JWT malformed, contained fewer than 3 sections"),null;try{const r=kE(n);return r?JSON.parse(r):($c("Failed to decode base64 JWT payload"),null)}catch(r){return $c("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function jv(t){const e=lg(t);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof mi&&bR(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function bR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xl(this.lastLoginAt),this.creationTime=xl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rh(t){var e;const n=t.auth,i=await t.getIdToken(),r=await eu(t,Ch(n,{idToken:i}));fe(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?qE(o.providerUserInfo):[],d=DR(t.providerData,l),h=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(d!=null&&d.length),g=h?f:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new bp(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(t,v)}async function MR(t){const e=ht(t);await Rh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DR(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function qE(t){return t.map(e=>{var{providerId:n}=e,i=sg(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(t,e){const n=await WE(t,{},async()=>{const i=fu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,l=await $E(t,r,"/v1/token",`key=${o}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:d,body:i};return t.emulatorConfig&&Ms(t.emulatorConfig.host)&&(h.credentials="include"),HE.fetch()(l,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function FR(t,e){return $r(t,"POST","/v2/accounts:revokeToken",Wr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){fe(e.length!==0,"internal-error");const n=jv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await VR(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,l=new Wo;return i&&(fe(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(fe(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(fe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wo,this.toJSON())}_performRefresh(){return Ni("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(t,e){fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Hn{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=sg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new OR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new bp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await eu(this,this.stsTokenManager.getToken(this.auth,e));return fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return NR(this,e)}reload(){return MR(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Rh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hn(this.auth.app))return Promise.reject(Mi(this.auth));const e=await this.getIdToken();return await eu(this,LR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,l,d,h,f,g;const v=(i=n.displayName)!==null&&i!==void 0?i:void 0,w=(r=n.email)!==null&&r!==void 0?r:void 0,S=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,C=(l=n.photoURL)!==null&&l!==void 0?l:void 0,N=(d=n.tenantId)!==null&&d!==void 0?d:void 0,z=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,k=(f=n.createdAt)!==null&&f!==void 0?f:void 0,P=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:R,emailVerified:j,isAnonymous:K,providerData:$,stsTokenManager:A}=n;fe(R&&A,e,"internal-error");const T=Wo.fromJSON(this.name,A);fe(typeof R=="string",e,"internal-error"),rr(v,e.name),rr(w,e.name),fe(typeof j=="boolean",e,"internal-error"),fe(typeof K=="boolean",e,"internal-error"),rr(S,e.name),rr(C,e.name),rr(N,e.name),rr(z,e.name),rr(k,e.name),rr(P,e.name);const x=new Hn({uid:R,auth:e,email:w,emailVerified:j,displayName:v,isAnonymous:K,photoURL:C,phoneNumber:S,tenantId:N,stsTokenManager:T,createdAt:k,lastLoginAt:P});return $&&Array.isArray($)&&(x.providerData=$.map(b=>Object.assign({},b))),z&&(x._redirectEventId=z),x}static async _fromIdTokenResponse(e,n,i=!1){const r=new Wo;r.updateFromServerResponse(n);const o=new Hn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Rh(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];fe(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?qE(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),d=new Wo;d.updateFromIdToken(i);const h=new Hn({uid:r.localId,auth:e,stsTokenManager:d,isAnonymous:l}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new bp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=new Map;function bi(t){Bi(t instanceof Function,"Expected a class definition");let e=Hv.get(t);return e?(Bi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Hv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}GE.type="NONE";const Wv=GE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(t,e,n){return`firebase:${t}:${e}:${n}`}class $o{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=qc(this.userKey,r.apiKey,o),this.fullPersistenceKey=qc("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ch(this.auth,{idToken:e}).catch(()=>{});return n?Hn._fromGetAccountInfoResponse(this.auth,n,e):null}return Hn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new $o(bi(Wv),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||bi(Wv);const l=qc(i,e.config.apiKey,e.name);let d=null;for(const f of n)try{const g=await f._get(l);if(g){let v;if(typeof g=="string"){const w=await Ch(e,{idToken:g}).catch(()=>{});if(!w)break;v=await Hn._fromGetAccountInfoResponse(e,w,g)}else v=Hn._fromJSON(e,g);f!==o&&(d=v),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new $o(o,e,i):(o=h[0],d&&await o._set(l,d.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new $o(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(YE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(JE(e))return"Blackberry";if(eT(e))return"Webos";if(KE(e))return"Safari";if((e.includes("chrome/")||QE(e))&&!e.includes("edge/"))return"Chrome";if(XE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function ZE(t=Ht()){return/firefox\//i.test(t)}function KE(t=Ht()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QE(t=Ht()){return/crios\//i.test(t)}function YE(t=Ht()){return/iemobile/i.test(t)}function XE(t=Ht()){return/android/i.test(t)}function JE(t=Ht()){return/blackberry/i.test(t)}function eT(t=Ht()){return/webos/i.test(t)}function ug(t=Ht()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function zR(t=Ht()){var e;return ug(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function UR(){return eC()&&document.documentMode===10}function tT(t=Ht()){return ug(t)||XE(t)||eT(t)||JE(t)||/windows phone/i.test(t)||YE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(t,e=[]){let n;switch(t){case"Browser":n=$v(Ht());break;case"Worker":n=`${$v(Ht())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${da}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,d)=>{try{const h=e(o);l(h)}catch(h){d(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(t,e={}){return $r(t,"GET","/v2/passwordPolicy",Wr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=6;class WR{constructor(e){var n,i,r,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:HR,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,o,l,d;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(i=h.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(r=h.containsLowercaseLetter)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(l=h.containsNumericCharacter)!==null&&l!==void 0?l:!0),h.isValid&&(h.isValid=(d=h.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),h}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qv(this),this.idTokenSubscription=new qv(this),this.beforeStateQueue=new BR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=bi(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await $o.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ch(this,{idToken:e}),i=await Hn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(hn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===d)&&(h!=null&&h.user)&&(r=h.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hn(this.app))return Promise.reject(Mi(this));const n=e?ht(e):null;return n&&fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hn(this.app)?Promise.reject(Mi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hn(this.app)?Promise.reject(Mi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jR(this),n=new WR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new du("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await FR(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&bi(e)||this._popupRedirectResolver;fe(n,this,"argument-error"),this.redirectPersistenceManager=await $o.create(this,[bi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(d,this,"internal-error"),d.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,r);return()=>{l=!0,h()}}else{const h=e.addObserver(n);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&wR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ds(t){return ht(t)}class qv{constructor(e){this.auth=e,this.observer=null,this.addObserver=lC(n=>this.observer=n)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qR(t){hd=t}function iT(t){return hd.loadJS(t)}function GR(){return hd.recaptchaEnterpriseScript}function ZR(){return hd.gapiScript}function KR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class QR{constructor(){this.enterprise=new YR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class YR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const XR="recaptcha-enterprise",rT="NO_RECAPTCHA";class JR{constructor(e){this.type=XR,this.auth=Ds(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,d)=>{kR(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const f=new xR(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(h=>{d(h)})})}function r(o,l,d){const h=window.grecaptcha;Bv(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(rT)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new QR().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{i(this.auth).then(d=>{if(!n&&Bv(window.grecaptcha))r(d,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=GR();h.length!==0&&(h+=d),iT(h).then(()=>{r(d,o,l)}).catch(f=>{l(f)})}}).catch(d=>{l(d)})})}}async function Gv(t,e,n,i=!1,r=!1){const o=new JR(t);let l;if(r)l=rT;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const d=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const h=d.phoneEnrollmentInfo.phoneNumber,f=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const h=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:l}):Object.assign(d,{captchaResponse:l}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Op(t,e,n,i,r){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Gv(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Gv(t,e,n,n==="getOobCode");return i(t,d)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(t,e){const n=cd(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(Ps(o,e??{}))return r;Kn(r,"already-initialized")}return n.initialize({options:e})}function tx(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(bi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function sT(t,e,n){const i=Ds(t);fe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=oT(e),{host:l,port:d}=nx(e),h=d===null?"":`:${d}`,f={url:`${o}//${l}${h}/`},g=Object.freeze({host:l,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){fe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),fe(Ps(f,i.config.emulator)&&Ps(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,Ms(l)?(eg(`${o}//${l}${h}`),tg("Auth",!0)):ix()}function oT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function nx(t){const e=oT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:Zv(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:Zv(l)}}}function Zv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ix(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ni("not implemented")}_getIdTokenResponse(e){return Ni("not implemented")}_linkToIdToken(e,n){return Ni("not implemented")}_getReauthenticationResolver(e){return Ni("not implemented")}}async function rx(t,e){return $r(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sx(t,e){return mu(t,"POST","/v1/accounts:signInWithPassword",Wr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ox(t,e){return mu(t,"POST","/v1/accounts:signInWithEmailLink",Wr(t,e))}async function ax(t,e){return mu(t,"POST","/v1/accounts:signInWithEmailLink",Wr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends cg{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new tu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new tu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Op(e,n,"signInWithPassword",sx);case"emailLink":return ox(e,{email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Op(e,i,"signUpPassword",rx);case"emailLink":return ax(e,{idToken:n,email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(t,e){return mu(t,"POST","/v1/accounts:signInWithIdp",Wr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx="http://localhost";class Cs extends cg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Cs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Kn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=sg(n,["providerId","signInMethod"]);if(!i||!r)return null;const l=new Cs(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return qo(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,qo(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qo(e,n)}buildRequest(){const e={requestUri:lx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cx(t){const e=pl(ml(t)).link,n=e?pl(ml(e)).deep_link_id:null,i=pl(ml(t)).deep_link_id;return(i?pl(ml(i)).link:null)||i||n||e||t}class hg{constructor(e){var n,i,r,o,l,d;const h=pl(ml(e)),f=(n=h.apiKey)!==null&&n!==void 0?n:null,g=(i=h.oobCode)!==null&&i!==void 0?i:null,v=ux((r=h.mode)!==null&&r!==void 0?r:null);fe(f&&g&&v,"argument-error"),this.apiKey=f,this.operation=v,this.code=g,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=h.lang)!==null&&l!==void 0?l:null,this.tenantId=(d=h.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const n=cx(e);try{return new hg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(){this.providerId=fa.PROVIDER_ID}static credential(e,n){return tu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=hg.parseLink(n);return fe(i,"argument-error"),tu._fromEmailAndCode(e,i.code,i.tenantId)}}fa.PROVIDER_ID="password";fa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";fa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu extends aT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends gu{constructor(){super("facebook.com")}static credential(e){return Cs._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ur.credential(e.oauthAccessToken)}catch{return null}}}ur.FACEBOOK_SIGN_IN_METHOD="facebook.com";ur.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends gu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Cs._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return cr.credential(n,i)}catch{return null}}}cr.GOOGLE_SIGN_IN_METHOD="google.com";cr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends gu{constructor(){super("github.com")}static credential(e){return Cs._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.GITHUB_SIGN_IN_METHOD="github.com";hr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends gu{constructor(){super("twitter.com")}static credential(e,n){return Cs._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return dr.credential(n,i)}catch{return null}}}dr.TWITTER_SIGN_IN_METHOD="twitter.com";dr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hx(t,e){return mu(t,"POST","/v1/accounts:signUp",Wr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await Hn._fromIdTokenResponse(e,i,r),l=Kv(i);return new Rs({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Kv(i);return new Rs({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Kv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh extends mi{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,xh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new xh(e,n,i,r)}}function lT(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?xh._fromErrorAndOperation(t,o,e,i):o})}async function dx(t,e,n=!1){const i=await eu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Rs._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fx(t,e,n=!1){const{auth:i}=t;if(hn(i.app))return Promise.reject(Mi(i));const r="reauthenticate";try{const o=await eu(t,lT(i,r,e,t),n);fe(o.idToken,i,"internal-error");const l=lg(o.idToken);fe(l,i,"internal-error");const{sub:d}=l;return fe(t.uid===d,i,"user-mismatch"),Rs._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Kn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uT(t,e,n=!1){if(hn(t.app))return Promise.reject(Mi(t));const i="signIn",r=await lT(t,i,e),o=await Rs._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function px(t,e){return uT(Ds(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cT(t){const e=Ds(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function mx(t,e,n){if(hn(t.app))return Promise.reject(Mi(t));const i=Ds(t),l=await Op(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hx).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&cT(t),h}),d=await Rs._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(d.user),d}function gx(t,e,n){return hn(t.app)?Promise.reject(Mi(t)):px(ht(t),fa.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&cT(t),i})}function _x(t,e,n,i){return ht(t).onIdTokenChanged(e,n,i)}function vx(t,e,n){return ht(t).beforeAuthStateChanged(e,n)}function yx(t,e,n,i){return ht(t).onAuthStateChanged(e,n,i)}function wx(t){return ht(t).signOut()}const kh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kh,"1"),this.storage.removeItem(kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex=1e3,Tx=10;class dT extends hT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,d,h)=>{this.notifyListeners(l,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);UR()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Tx):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},Ex)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}dT.type="LOCAL";const Ix=dT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT extends hT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}fT.type="SESSION";const pT=fT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new dd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const d=Array.from(l).map(async f=>f(n.origin,o)),h=await Sx(d);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((d,h)=>{const f=dg("",20);r.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(v){const w=v;if(w.data.eventId===f)switch(w.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(w.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(){return window}function Ax(t){ci().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(){return typeof ci().WorkerGlobalScope<"u"&&typeof ci().importScripts=="function"}async function Cx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Rx(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function xx(){return mT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="firebaseLocalStorageDb",kx=1,Lh="firebaseLocalStorage",_T="fbase_key";class _u{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function fd(t,e){return t.transaction([Lh],e?"readwrite":"readonly").objectStore(Lh)}function Lx(){const t=indexedDB.deleteDatabase(gT);return new _u(t).toPromise()}function Mp(){const t=indexedDB.open(gT,kx);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Lh,{keyPath:_T})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Lh)?e(i):(i.close(),await Lx(),e(await Mp()))})})}async function Qv(t,e,n){const i=fd(t,!0).put({[_T]:e,value:n});return new _u(i).toPromise()}async function Nx(t,e){const n=fd(t,!1).get(e),i=await new _u(n).toPromise();return i===void 0?null:i.value}function Yv(t,e){const n=fd(t,!0).delete(e);return new _u(n).toPromise()}const bx=800,Ox=3;class vT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>Ox)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dd._getInstance(xx()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Cx(),!this.activeServiceWorker)return;this.sender=new Px(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Rx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mp();return await Qv(e,kh,"1"),await Yv(e,kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Qv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>Nx(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Yv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=fd(r,!1).getAll();return new _u(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vT.type="LOCAL";const Mx=vT;new pu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t,e){return e?bi(e):(fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg extends cg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Vx(t){return uT(t.auth,new fg(t),t.bypassAuthState)}function Fx(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),fx(n,new fg(t),t.bypassAuthState)}async function zx(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),dx(n,new fg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:l,type:d}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Vx;case"linkViaPopup":case"linkViaRedirect":return zx;case"reauthViaPopup":case"reauthViaRedirect":return Fx;default:Kn(this.auth,"internal-error")}}resolve(e){Bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=new pu(2e3,1e4);class Mo extends yT{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Mo.currentPopupAction&&Mo.currentPopupAction.cancel(),Mo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){Bi(this.filter.length===1,"Popup operations only handle one event");const e=dg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ui(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ui(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ui(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ux.get())};e()}}Mo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx="pendingRedirect",Gc=new Map;class jx extends yT{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Gc.get(this.auth._key());if(!e){try{const i=await Hx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Gc.set(this.auth._key(),e)}return this.bypassAuthState||Gc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Hx(t,e){const n=qx(e),i=$x(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function Wx(t,e){Gc.set(t._key(),e)}function $x(t){return bi(t._redirectPersistence)}function qx(t){return qc(Bx,t.config.apiKey,t.name)}async function Gx(t,e,n=!1){if(hn(t.app))return Promise.reject(Mi(t));const i=Ds(t),r=Dx(i,e),l=await new jx(i,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=10*60*1e3;class Kx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Qx(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!wT(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(ui(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Zx&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xv(e))}saveEventToCache(e){this.cachedEventUids.add(Xv(e)),this.lastProcessedEventTime=Date.now()}}function Xv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function wT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Qx(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yx(t,e={}){return $r(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jx=/^https?/;async function ek(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Yx(t);for(const n of e)try{if(tk(n))return}catch{}Kn(t,"unauthorized-domain")}function tk(t){const e=Np(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!Jx.test(n))return!1;if(Xx.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=new pu(3e4,6e4);function Jv(){const t=ci().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ik(t){return new Promise((e,n)=>{var i,r,o;function l(){Jv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Jv(),n(ui(t,"network-request-failed"))},timeout:nk.get()})}if(!((r=(i=ci().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=ci().gapi)===null||o===void 0)&&o.load)l();else{const d=KR("iframefcb");return ci()[d]=()=>{gapi.load?l():n(ui(t,"network-request-failed"))},iT(`${ZR()}?onload=${d}`).catch(h=>n(h))}}).catch(e=>{throw Zc=null,e})}let Zc=null;function rk(t){return Zc=Zc||ik(t),Zc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=new pu(5e3,15e3),ok="__/auth/iframe",ak="emulator/auth/iframe",lk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ck(t){const e=t.config;fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ag(e,ak):`https://${t.config.authDomain}/${ok}`,i={apiKey:e.apiKey,appName:t.name,v:da},r=uk.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${fu(i).slice(1)}`}async function hk(t){const e=await rk(t),n=ci().gapi;return fe(n,t,"internal-error"),e.open({where:document.body,url:ck(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lk,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=ui(t,"network-request-failed"),d=ci().setTimeout(()=>{o(l)},sk.get());function h(){ci().clearTimeout(d),r(i)}i.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fk=500,pk=600,mk="_blank",gk="http://localhost";class ey{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _k(t,e,n,i=fk,r=pk){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const h=Object.assign(Object.assign({},dk),{width:i.toString(),height:r.toString(),top:o,left:l}),f=Ht().toLowerCase();n&&(d=QE(f)?mk:n),ZE(f)&&(e=e||gk,h.scrollbars="yes");const g=Object.entries(h).reduce((w,[S,C])=>`${w}${S}=${C},`,"");if(zR(f)&&d!=="_self")return vk(e||"",d),new ey(null);const v=window.open(e||"",d,g);fe(v,t,"popup-blocked");try{v.focus()}catch{}return new ey(v)}function vk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk="__/auth/handler",wk="emulator/auth/handler",Ek=encodeURIComponent("fac");async function ty(t,e,n,i,r,o){fe(t.config.authDomain,t,"auth-domain-config-required"),fe(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:da,eventId:r};if(e instanceof aT){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",aC(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))l[g]=v}if(e instanceof gu){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(l.scopes=g.join(","))}t.tenantId&&(l.tid=t.tenantId);const d=l;for(const g of Object.keys(d))d[g]===void 0&&delete d[g];const h=await t._getAppCheckToken(),f=h?`#${Ek}=${encodeURIComponent(h)}`:"";return`${Tk(t)}?${fu(d).slice(1)}${f}`}function Tk({config:t}){return t.emulator?ag(t,wk):`https://${t.authDomain}/${yk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="webStorageSupport";class Ik{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pT,this._completeRedirectFn=Gx,this._overrideRedirectResult=Wx}async _openPopup(e,n,i,r){var o;Bi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await ty(e,n,i,Np(),r);return _k(e,l,dg())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await ty(e,n,i,Np(),r);return Ax(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(Bi(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await hk(e),i=new Kx(e);return n.register("authEvent",r=>(fe(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pf,{type:Pf},r=>{var o;const l=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[Pf];l!==void 0&&n(!!l),Kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ek(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return tT()||KE()||ug()}}const Sk=Ik;var ny="@firebase/auth",iy="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ck(t){As(new Or("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=i.options;fe(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:l,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nT(t)},f=new $R(i,r,o,h);return tx(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),As(new Or("auth-internal",e=>{const n=Ds(e.getProvider("auth").getImmediate());return(i=>new Pk(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),li(ny,iy,Ak(t)),li(ny,iy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=5*60,xk=OE("authIdTokenMaxAge")||Rk;let ry=null;const kk=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>xk)return;const r=n==null?void 0:n.token;ry!==r&&(ry=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Lk(t=rg()){const e=cd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ex(t,{popupRedirectResolver:Sk,persistence:[Mx,Ix,pT]}),i=OE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=kk(o.toString());vx(n,l,()=>l(n.currentUser)),_x(n,d=>l(d))}}const r=LE("auth");return r&&sT(n,`http://${r}`),n}function Nk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}qR({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=ui("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",Nk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ck("Browser");var bk="firebase",Ok="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */li(bk,Ok,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk="type.googleapis.com/google.protobuf.Int64Value",Dk="type.googleapis.com/google.protobuf.UInt64Value";function ET(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function Nh(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Nh(e));if(typeof t=="function"||typeof t=="object")return ET(t,e=>Nh(e));throw new Error("Data cannot be encoded in JSON: "+t)}function ta(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case Mk:case Dk:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>ta(e)):typeof t=="function"||typeof t=="object"?ET(t,e=>ta(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Gt extends mi{constructor(e,n,i){super(`${pg}/${e}`,n||""),this.details=i,Object.setPrototypeOf(this,Gt.prototype)}}function Vk(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function bh(t,e){let n=Vk(t),i=n,r;try{const o=e&&e.error;if(o){const l=o.status;if(typeof l=="string"){if(!sy[l])return new Gt("internal","internal");n=sy[l],i=l}const d=o.message;typeof d=="string"&&(i=d),r=o.details,r!==void 0&&(r=ta(r))}}catch{}return n==="ok"?null:new Gt(n,i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,n,i,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,hn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||i.get().then(o=>this.messaging=o,()=>{}),this.appCheck||r==null||r.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),r=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="us-central1",zk=/^data: (.*?)(?:\n|$)/;function Uk(t){let e=null;return{promise:new Promise((n,i)=>{e=setTimeout(()=>{i(new Gt("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Bk{constructor(e,n,i,r,o=Dp,l=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new Fk(e,n,i,r),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(o);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=Dp}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function jk(t,e,n){const i=Ms(e);t.emulatorOrigin=`http${i?"s":""}://${e}:${n}`,i&&(eg(t.emulatorOrigin),tg("Functions",!0))}function Hk(t,e,n){const i=r=>$k(t,e,r,n||{});return i.stream=(r,o)=>Gk(t,e,r,o),i}async function Wk(t,e,n,i){n["Content-Type"]="application/json";let r;try{r=await i(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await r.json()}catch{}return{status:r.status,json:o}}async function TT(t,e){const n={},i=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(n.Authorization="Bearer "+i.authToken),i.messagingToken&&(n["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=i.appCheckToken),n}function $k(t,e,n,i){const r=t._url(e);return qk(t,r,n,i)}async function qk(t,e,n,i){n=Nh(n);const r={data:n},o=await TT(t,i),l=i.timeout||7e4,d=Uk(l),h=await Promise.race([Wk(e,r,o,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!h)throw new Gt("cancelled","Firebase Functions instance was deleted.");const f=bh(h.status,h.json);if(f)throw f;if(!h.json)throw new Gt("internal","Response is not valid JSON object.");let g=h.json.data;if(typeof g>"u"&&(g=h.json.result),typeof g>"u")throw new Gt("internal","Response is missing data field.");return{data:ta(g)}}function Gk(t,e,n,i){const r=t._url(e);return Zk(t,r,n,i||{})}async function Zk(t,e,n,i){var r;n=Nh(n);const o={data:n},l=await TT(t,i);l["Content-Type"]="application/json",l.Accept="text/event-stream";let d;try{d=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:l,signal:i==null?void 0:i.signal})}catch(S){if(S instanceof Error&&S.name==="AbortError"){const N=new Gt("cancelled","Request was cancelled.");return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}const C=bh(0,null);return{data:Promise.reject(C),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(C)}}}}}}let h,f;const g=new Promise((S,C)=>{h=S,f=C});(r=i==null?void 0:i.signal)===null||r===void 0||r.addEventListener("abort",()=>{const S=new Gt("cancelled","Request was cancelled.");f(S)});const v=d.body.getReader(),w=Kk(v,h,f,i==null?void 0:i.signal);return{stream:{[Symbol.asyncIterator](){const S=w.getReader();return{async next(){const{value:C,done:N}=await S.read();return{value:C,done:N}},async return(){return await S.cancel(),{done:!0,value:void 0}}}}},data:g}}function Kk(t,e,n,i){const r=(l,d)=>{const h=l.match(zk);if(!h)return;const f=h[1];try{const g=JSON.parse(f);if("result"in g){e(ta(g.result));return}if("message"in g){d.enqueue(ta(g.message));return}if("error"in g){const v=bh(0,g);d.error(v),n(v);return}}catch(g){if(g instanceof Gt){d.error(g),n(g);return}}},o=new TextDecoder;return new ReadableStream({start(l){let d="";return h();async function h(){if(i!=null&&i.aborted){const f=new Gt("cancelled","Request was cancelled");return l.error(f),n(f),Promise.resolve()}try{const{value:f,done:g}=await t.read();if(g){d.trim()&&r(d.trim(),l),l.close();return}if(i!=null&&i.aborted){const w=new Gt("cancelled","Request was cancelled");l.error(w),n(w),await t.cancel();return}d+=o.decode(f,{stream:!0});const v=d.split(`
`);d=v.pop()||"";for(const w of v)w.trim()&&r(w.trim(),l);return h()}catch(f){const g=f instanceof Gt?f:bh(0,null);l.error(g),n(g)}}},cancel(){return t.cancel()}})}const oy="@firebase/functions",ay="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="auth-internal",Yk="app-check-internal",Xk="messaging-internal";function Jk(t){const e=(n,{instanceIdentifier:i})=>{const r=n.getProvider("app").getImmediate(),o=n.getProvider(Qk),l=n.getProvider(Xk),d=n.getProvider(Yk);return new Bk(r,o,l,d,i)};As(new Or(pg,e,"PUBLIC").setMultipleInstances(!0)),li(oy,ay,t),li(oy,ay,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(t=rg(),e=Dp){const i=cd(ht(t),pg).getImmediate({identifier:e}),r=NE("functions");return r&&mg(i,...r),i}function mg(t,e,n){jk(ht(t),e,n)}function gg(t,e,n){return Hk(ht(t),e,n)}Jk();const ly=Object.freeze(Object.defineProperty({__proto__:null,FunctionsError:Gt,connectFunctionsEmulator:mg,getFunctions:IT,httpsCallable:gg},Symbol.toStringTag,{value:"Module"}));var uy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rr,ST;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,T){function x(){}x.prototype=T.prototype,A.D=T.prototype,A.prototype=new x,A.prototype.constructor=A,A.C=function(b,O,F){for(var M=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)M[ce-2]=arguments[ce];return T.prototype[O].apply(b,M)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(A,T,x){x||(x=0);var b=Array(16);if(typeof T=="string")for(var O=0;16>O;++O)b[O]=T.charCodeAt(x++)|T.charCodeAt(x++)<<8|T.charCodeAt(x++)<<16|T.charCodeAt(x++)<<24;else for(O=0;16>O;++O)b[O]=T[x++]|T[x++]<<8|T[x++]<<16|T[x++]<<24;T=A.g[0],x=A.g[1],O=A.g[2];var F=A.g[3],M=T+(F^x&(O^F))+b[0]+3614090360&4294967295;T=x+(M<<7&4294967295|M>>>25),M=F+(O^T&(x^O))+b[1]+3905402710&4294967295,F=T+(M<<12&4294967295|M>>>20),M=O+(x^F&(T^x))+b[2]+606105819&4294967295,O=F+(M<<17&4294967295|M>>>15),M=x+(T^O&(F^T))+b[3]+3250441966&4294967295,x=O+(M<<22&4294967295|M>>>10),M=T+(F^x&(O^F))+b[4]+4118548399&4294967295,T=x+(M<<7&4294967295|M>>>25),M=F+(O^T&(x^O))+b[5]+1200080426&4294967295,F=T+(M<<12&4294967295|M>>>20),M=O+(x^F&(T^x))+b[6]+2821735955&4294967295,O=F+(M<<17&4294967295|M>>>15),M=x+(T^O&(F^T))+b[7]+4249261313&4294967295,x=O+(M<<22&4294967295|M>>>10),M=T+(F^x&(O^F))+b[8]+1770035416&4294967295,T=x+(M<<7&4294967295|M>>>25),M=F+(O^T&(x^O))+b[9]+2336552879&4294967295,F=T+(M<<12&4294967295|M>>>20),M=O+(x^F&(T^x))+b[10]+4294925233&4294967295,O=F+(M<<17&4294967295|M>>>15),M=x+(T^O&(F^T))+b[11]+2304563134&4294967295,x=O+(M<<22&4294967295|M>>>10),M=T+(F^x&(O^F))+b[12]+1804603682&4294967295,T=x+(M<<7&4294967295|M>>>25),M=F+(O^T&(x^O))+b[13]+4254626195&4294967295,F=T+(M<<12&4294967295|M>>>20),M=O+(x^F&(T^x))+b[14]+2792965006&4294967295,O=F+(M<<17&4294967295|M>>>15),M=x+(T^O&(F^T))+b[15]+1236535329&4294967295,x=O+(M<<22&4294967295|M>>>10),M=T+(O^F&(x^O))+b[1]+4129170786&4294967295,T=x+(M<<5&4294967295|M>>>27),M=F+(x^O&(T^x))+b[6]+3225465664&4294967295,F=T+(M<<9&4294967295|M>>>23),M=O+(T^x&(F^T))+b[11]+643717713&4294967295,O=F+(M<<14&4294967295|M>>>18),M=x+(F^T&(O^F))+b[0]+3921069994&4294967295,x=O+(M<<20&4294967295|M>>>12),M=T+(O^F&(x^O))+b[5]+3593408605&4294967295,T=x+(M<<5&4294967295|M>>>27),M=F+(x^O&(T^x))+b[10]+38016083&4294967295,F=T+(M<<9&4294967295|M>>>23),M=O+(T^x&(F^T))+b[15]+3634488961&4294967295,O=F+(M<<14&4294967295|M>>>18),M=x+(F^T&(O^F))+b[4]+3889429448&4294967295,x=O+(M<<20&4294967295|M>>>12),M=T+(O^F&(x^O))+b[9]+568446438&4294967295,T=x+(M<<5&4294967295|M>>>27),M=F+(x^O&(T^x))+b[14]+3275163606&4294967295,F=T+(M<<9&4294967295|M>>>23),M=O+(T^x&(F^T))+b[3]+4107603335&4294967295,O=F+(M<<14&4294967295|M>>>18),M=x+(F^T&(O^F))+b[8]+1163531501&4294967295,x=O+(M<<20&4294967295|M>>>12),M=T+(O^F&(x^O))+b[13]+2850285829&4294967295,T=x+(M<<5&4294967295|M>>>27),M=F+(x^O&(T^x))+b[2]+4243563512&4294967295,F=T+(M<<9&4294967295|M>>>23),M=O+(T^x&(F^T))+b[7]+1735328473&4294967295,O=F+(M<<14&4294967295|M>>>18),M=x+(F^T&(O^F))+b[12]+2368359562&4294967295,x=O+(M<<20&4294967295|M>>>12),M=T+(x^O^F)+b[5]+4294588738&4294967295,T=x+(M<<4&4294967295|M>>>28),M=F+(T^x^O)+b[8]+2272392833&4294967295,F=T+(M<<11&4294967295|M>>>21),M=O+(F^T^x)+b[11]+1839030562&4294967295,O=F+(M<<16&4294967295|M>>>16),M=x+(O^F^T)+b[14]+4259657740&4294967295,x=O+(M<<23&4294967295|M>>>9),M=T+(x^O^F)+b[1]+2763975236&4294967295,T=x+(M<<4&4294967295|M>>>28),M=F+(T^x^O)+b[4]+1272893353&4294967295,F=T+(M<<11&4294967295|M>>>21),M=O+(F^T^x)+b[7]+4139469664&4294967295,O=F+(M<<16&4294967295|M>>>16),M=x+(O^F^T)+b[10]+3200236656&4294967295,x=O+(M<<23&4294967295|M>>>9),M=T+(x^O^F)+b[13]+681279174&4294967295,T=x+(M<<4&4294967295|M>>>28),M=F+(T^x^O)+b[0]+3936430074&4294967295,F=T+(M<<11&4294967295|M>>>21),M=O+(F^T^x)+b[3]+3572445317&4294967295,O=F+(M<<16&4294967295|M>>>16),M=x+(O^F^T)+b[6]+76029189&4294967295,x=O+(M<<23&4294967295|M>>>9),M=T+(x^O^F)+b[9]+3654602809&4294967295,T=x+(M<<4&4294967295|M>>>28),M=F+(T^x^O)+b[12]+3873151461&4294967295,F=T+(M<<11&4294967295|M>>>21),M=O+(F^T^x)+b[15]+530742520&4294967295,O=F+(M<<16&4294967295|M>>>16),M=x+(O^F^T)+b[2]+3299628645&4294967295,x=O+(M<<23&4294967295|M>>>9),M=T+(O^(x|~F))+b[0]+4096336452&4294967295,T=x+(M<<6&4294967295|M>>>26),M=F+(x^(T|~O))+b[7]+1126891415&4294967295,F=T+(M<<10&4294967295|M>>>22),M=O+(T^(F|~x))+b[14]+2878612391&4294967295,O=F+(M<<15&4294967295|M>>>17),M=x+(F^(O|~T))+b[5]+4237533241&4294967295,x=O+(M<<21&4294967295|M>>>11),M=T+(O^(x|~F))+b[12]+1700485571&4294967295,T=x+(M<<6&4294967295|M>>>26),M=F+(x^(T|~O))+b[3]+2399980690&4294967295,F=T+(M<<10&4294967295|M>>>22),M=O+(T^(F|~x))+b[10]+4293915773&4294967295,O=F+(M<<15&4294967295|M>>>17),M=x+(F^(O|~T))+b[1]+2240044497&4294967295,x=O+(M<<21&4294967295|M>>>11),M=T+(O^(x|~F))+b[8]+1873313359&4294967295,T=x+(M<<6&4294967295|M>>>26),M=F+(x^(T|~O))+b[15]+4264355552&4294967295,F=T+(M<<10&4294967295|M>>>22),M=O+(T^(F|~x))+b[6]+2734768916&4294967295,O=F+(M<<15&4294967295|M>>>17),M=x+(F^(O|~T))+b[13]+1309151649&4294967295,x=O+(M<<21&4294967295|M>>>11),M=T+(O^(x|~F))+b[4]+4149444226&4294967295,T=x+(M<<6&4294967295|M>>>26),M=F+(x^(T|~O))+b[11]+3174756917&4294967295,F=T+(M<<10&4294967295|M>>>22),M=O+(T^(F|~x))+b[2]+718787259&4294967295,O=F+(M<<15&4294967295|M>>>17),M=x+(F^(O|~T))+b[9]+3951481745&4294967295,A.g[0]=A.g[0]+T&4294967295,A.g[1]=A.g[1]+(O+(M<<21&4294967295|M>>>11))&4294967295,A.g[2]=A.g[2]+O&4294967295,A.g[3]=A.g[3]+F&4294967295}i.prototype.u=function(A,T){T===void 0&&(T=A.length);for(var x=T-this.blockSize,b=this.B,O=this.h,F=0;F<T;){if(O==0)for(;F<=x;)r(this,A,F),F+=this.blockSize;if(typeof A=="string"){for(;F<T;)if(b[O++]=A.charCodeAt(F++),O==this.blockSize){r(this,b),O=0;break}}else for(;F<T;)if(b[O++]=A[F++],O==this.blockSize){r(this,b),O=0;break}}this.h=O,this.o+=T},i.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var T=1;T<A.length-8;++T)A[T]=0;var x=8*this.o;for(T=A.length-8;T<A.length;++T)A[T]=x&255,x/=256;for(this.u(A),A=Array(16),T=x=0;4>T;++T)for(var b=0;32>b;b+=8)A[x++]=this.g[T]>>>b&255;return A};function o(A,T){var x=d;return Object.prototype.hasOwnProperty.call(x,A)?x[A]:x[A]=T(A)}function l(A,T){this.h=T;for(var x=[],b=!0,O=A.length-1;0<=O;O--){var F=A[O]|0;b&&F==T||(x[O]=F,b=!1)}this.g=x}var d={};function h(A){return-128<=A&&128>A?o(A,function(T){return new l([T|0],0>T?-1:0)}):new l([A|0],0>A?-1:0)}function f(A){if(isNaN(A)||!isFinite(A))return v;if(0>A)return z(f(-A));for(var T=[],x=1,b=0;A>=x;b++)T[b]=A/x|0,x*=4294967296;return new l(T,0)}function g(A,T){if(A.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(A.charAt(0)=="-")return z(g(A.substring(1),T));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=f(Math.pow(T,8)),b=v,O=0;O<A.length;O+=8){var F=Math.min(8,A.length-O),M=parseInt(A.substring(O,O+F),T);8>F?(F=f(Math.pow(T,F)),b=b.j(F).add(f(M))):(b=b.j(x),b=b.add(f(M)))}return b}var v=h(0),w=h(1),S=h(16777216);t=l.prototype,t.m=function(){if(N(this))return-z(this).m();for(var A=0,T=1,x=0;x<this.g.length;x++){var b=this.i(x);A+=(0<=b?b:4294967296+b)*T,T*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(C(this))return"0";if(N(this))return"-"+z(this).toString(A);for(var T=f(Math.pow(A,6)),x=this,b="";;){var O=j(x,T).g;x=k(x,O.j(T));var F=((0<x.g.length?x.g[0]:x.h)>>>0).toString(A);if(x=O,C(x))return F+b;for(;6>F.length;)F="0"+F;b=F+b}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function C(A){if(A.h!=0)return!1;for(var T=0;T<A.g.length;T++)if(A.g[T]!=0)return!1;return!0}function N(A){return A.h==-1}t.l=function(A){return A=k(this,A),N(A)?-1:C(A)?0:1};function z(A){for(var T=A.g.length,x=[],b=0;b<T;b++)x[b]=~A.g[b];return new l(x,~A.h).add(w)}t.abs=function(){return N(this)?z(this):this},t.add=function(A){for(var T=Math.max(this.g.length,A.g.length),x=[],b=0,O=0;O<=T;O++){var F=b+(this.i(O)&65535)+(A.i(O)&65535),M=(F>>>16)+(this.i(O)>>>16)+(A.i(O)>>>16);b=M>>>16,F&=65535,M&=65535,x[O]=M<<16|F}return new l(x,x[x.length-1]&-2147483648?-1:0)};function k(A,T){return A.add(z(T))}t.j=function(A){if(C(this)||C(A))return v;if(N(this))return N(A)?z(this).j(z(A)):z(z(this).j(A));if(N(A))return z(this.j(z(A)));if(0>this.l(S)&&0>A.l(S))return f(this.m()*A.m());for(var T=this.g.length+A.g.length,x=[],b=0;b<2*T;b++)x[b]=0;for(b=0;b<this.g.length;b++)for(var O=0;O<A.g.length;O++){var F=this.i(b)>>>16,M=this.i(b)&65535,ce=A.i(O)>>>16,ue=A.i(O)&65535;x[2*b+2*O]+=M*ue,P(x,2*b+2*O),x[2*b+2*O+1]+=F*ue,P(x,2*b+2*O+1),x[2*b+2*O+1]+=M*ce,P(x,2*b+2*O+1),x[2*b+2*O+2]+=F*ce,P(x,2*b+2*O+2)}for(b=0;b<T;b++)x[b]=x[2*b+1]<<16|x[2*b];for(b=T;b<2*T;b++)x[b]=0;return new l(x,0)};function P(A,T){for(;(A[T]&65535)!=A[T];)A[T+1]+=A[T]>>>16,A[T]&=65535,T++}function R(A,T){this.g=A,this.h=T}function j(A,T){if(C(T))throw Error("division by zero");if(C(A))return new R(v,v);if(N(A))return T=j(z(A),T),new R(z(T.g),z(T.h));if(N(T))return T=j(A,z(T)),new R(z(T.g),T.h);if(30<A.g.length){if(N(A)||N(T))throw Error("slowDivide_ only works with positive integers.");for(var x=w,b=T;0>=b.l(A);)x=K(x),b=K(b);var O=$(x,1),F=$(b,1);for(b=$(b,2),x=$(x,2);!C(b);){var M=F.add(b);0>=M.l(A)&&(O=O.add(x),F=M),b=$(b,1),x=$(x,1)}return T=k(A,O.j(T)),new R(O,T)}for(O=v;0<=A.l(T);){for(x=Math.max(1,Math.floor(A.m()/T.m())),b=Math.ceil(Math.log(x)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),F=f(x),M=F.j(T);N(M)||0<M.l(A);)x-=b,F=f(x),M=F.j(T);C(F)&&(F=w),O=O.add(F),A=k(A,M)}return new R(O,A)}t.A=function(A){return j(this,A).h},t.and=function(A){for(var T=Math.max(this.g.length,A.g.length),x=[],b=0;b<T;b++)x[b]=this.i(b)&A.i(b);return new l(x,this.h&A.h)},t.or=function(A){for(var T=Math.max(this.g.length,A.g.length),x=[],b=0;b<T;b++)x[b]=this.i(b)|A.i(b);return new l(x,this.h|A.h)},t.xor=function(A){for(var T=Math.max(this.g.length,A.g.length),x=[],b=0;b<T;b++)x[b]=this.i(b)^A.i(b);return new l(x,this.h^A.h)};function K(A){for(var T=A.g.length+1,x=[],b=0;b<T;b++)x[b]=A.i(b)<<1|A.i(b-1)>>>31;return new l(x,A.h)}function $(A,T){var x=T>>5;T%=32;for(var b=A.g.length-x,O=[],F=0;F<b;F++)O[F]=0<T?A.i(F+x)>>>T|A.i(F+x+1)<<32-T:A.i(F+x);return new l(O,A.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,ST=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=g,Rr=l}).apply(typeof uy<"u"?uy:typeof self<"u"?self:typeof window<"u"?window:{});var Rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PT,gl,AT,Kc,Vp,CT,RT,xT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,y){return u==Array.prototype||u==Object.prototype||(u[m]=y.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rc=="object"&&Rc];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function r(u,m){if(m)e:{var y=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var U=u[I];if(!(U in y))break e;y=y[U]}u=u[u.length-1],I=y[u],m=m(I),m!=I&&m!=null&&e(y,u,{configurable:!0,writable:!0,value:m})}}function o(u,m){u instanceof String&&(u+="");var y=0,I=!1,U={next:function(){if(!I&&y<u.length){var W=y++;return{value:m(W,u[W]),done:!1}}return I=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}r("Array.prototype.values",function(u){return u||function(){return o(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},d=this||self;function h(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function f(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,y){return u.call.apply(u.bind,arguments)}function v(u,m,y){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,I),u.apply(m,U)}}return function(){return u.apply(m,arguments)}}function w(u,m,y){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:v,w.apply(null,arguments)}function S(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var I=y.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function C(u,m){function y(){}y.prototype=m.prototype,u.aa=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(I,U,W){for(var ee=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)ee[Fe-2]=arguments[Fe];return m.prototype[U].apply(I,ee)}}function N(u){const m=u.length;if(0<m){const y=Array(m);for(let I=0;I<m;I++)y[I]=u[I];return y}return[]}function z(u,m){for(let y=1;y<arguments.length;y++){const I=arguments[y];if(h(I)){const U=u.length||0,W=I.length||0;u.length=U+W;for(let ee=0;ee<W;ee++)u[U+ee]=I[ee]}else u.push(I)}}class k{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function P(u){return/^[\s\xa0]*$/.test(u)}function R(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function j(u){return j[" "](u),u}j[" "]=function(){};var K=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function $(u,m,y){for(const I in u)m.call(y,u[I],I,u)}function A(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function T(u){const m={};for(const y in u)m[y]=u[y];return m}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(u,m){let y,I;for(let U=1;U<arguments.length;U++){I=arguments[U];for(y in I)u[y]=I[y];for(let W=0;W<x.length;W++)y=x[W],Object.prototype.hasOwnProperty.call(I,y)&&(u[y]=I[y])}}function O(u){var m=1;u=u.split(":");const y=[];for(;0<m&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function F(u){d.setTimeout(()=>{throw u},0)}function M(){var u=ae;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ce{constructor(){this.h=this.g=null}add(m,y){const I=ue.get();I.set(m,y),this.h?this.h.next=I:this.g=I,this.h=I}}var ue=new k(()=>new Le,u=>u.reset());class Le{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Ne,q=!1,ae=new ce,X=()=>{const u=d.Promise.resolve(void 0);Ne=()=>{u.then(le)}};var le=()=>{for(var u;u=M();){try{u.h.call(u.g)}catch(y){F(y)}var m=ue;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}q=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var De=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};d.addEventListener("test",y,m),d.removeEventListener("test",y,m)}catch{}return u}();function Ie(u,m){if(Ee.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(K){e:{try{j(m.nodeName);var U=!0;break e}catch{}U=!1}U||(m=null)}}else y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ve[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ie.aa.h.call(this)}}C(Ie,Ee);var ve={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var yt="closure_listenable_"+(1e6*Math.random()|0),Yn=0;function Ru(u,m,y,I,U){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!I,this.ha=U,this.key=++Yn,this.da=this.fa=!1}function qi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Gi(u){this.src=u,this.g={},this.h=0}Gi.prototype.add=function(u,m,y,I,U){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var ee=Kr(u,m,I,U);return-1<ee?(m=u[ee],y||(m.fa=!1)):(m=new Ru(m,this.src,W,!!I,U),m.fa=y,u.push(m)),m};function gi(u,m){var y=m.type;if(y in u.g){var I=u.g[y],U=Array.prototype.indexOf.call(I,m,void 0),W;(W=0<=U)&&Array.prototype.splice.call(I,U,1),W&&(qi(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function Kr(u,m,y,I){for(var U=0;U<u.length;++U){var W=u[U];if(!W.da&&W.listener==m&&W.capture==!!y&&W.ha==I)return U}return-1}var wa="closure_lm_"+(1e6*Math.random()|0),Us={};function Ea(u,m,y,I,U){if(Array.isArray(m)){for(var W=0;W<m.length;W++)Ea(u,m[W],y,I,U);return null}return y=Lu(y),u&&u[yt]?u.K(m,y,f(I)?!!I.capture:!1,U):Ta(u,m,y,!1,I,U)}function Ta(u,m,y,I,U,W){if(!m)throw Error("Invalid event type");var ee=f(U)?!!U.capture:!!U,Fe=Ws(u);if(Fe||(u[wa]=Fe=new Gi(u)),y=Fe.add(m,y,I,ee,W),y.proxy)return y;if(I=Bs(),y.proxy=I,I.src=u,I.listener=y,u.addEventListener)De||(U=ee),U===void 0&&(U=!1),u.addEventListener(m.toString(),I,U);else if(u.attachEvent)u.attachEvent(Hs(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Bs(){function u(y){return m.call(u.src,u.listener,y)}const m=ku;return u}function xu(u,m,y,I,U){if(Array.isArray(m))for(var W=0;W<m.length;W++)xu(u,m[W],y,I,U);else I=f(I)?!!I.capture:!!I,y=Lu(y),u&&u[yt]?(u=u.i,m=String(m).toString(),m in u.g&&(W=u.g[m],y=Kr(W,y,I,U),-1<y&&(qi(W[y]),Array.prototype.splice.call(W,y,1),W.length==0&&(delete u.g[m],u.h--)))):u&&(u=Ws(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Kr(m,y,I,U)),(y=-1<u?m[u]:null)&&js(y))}function js(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[yt])gi(m.i,u);else{var y=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(y,I,u.capture):m.detachEvent?m.detachEvent(Hs(y),I):m.addListener&&m.removeListener&&m.removeListener(I),(y=Ws(m))?(gi(y,u),y.h==0&&(y.src=null,m[wa]=null)):qi(u)}}}function Hs(u){return u in Us?Us[u]:Us[u]="on"+u}function ku(u,m){if(u.da)u=!0;else{m=new Ie(m,this);var y=u.listener,I=u.ha||u.src;u.fa&&js(u),u=y.call(I,m)}return u}function Ws(u){return u=u[wa],u instanceof Gi?u:null}var Ia="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lu(u){return typeof u=="function"?u:(u[Ia]||(u[Ia]=function(m){return u.handleEvent(m)}),u[Ia])}function dt(){me.call(this),this.i=new Gi(this),this.M=this,this.F=null}C(dt,me),dt.prototype[yt]=!0,dt.prototype.removeEventListener=function(u,m,y,I){xu(this,u,m,y,I)};function It(u,m){var y,I=u.F;if(I)for(y=[];I;I=I.F)y.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new Ee(m,u);else if(m instanceof Ee)m.target=m.target||u;else{var U=m;m=new Ee(I,u),b(m,U)}if(U=!0,y)for(var W=y.length-1;0<=W;W--){var ee=m.g=y[W];U=Qr(ee,I,!0,m)&&U}if(ee=m.g=u,U=Qr(ee,I,!0,m)&&U,U=Qr(ee,I,!1,m)&&U,y)for(W=0;W<y.length;W++)ee=m.g=y[W],U=Qr(ee,I,!1,m)&&U}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var y=u.g[m],I=0;I<y.length;I++)qi(y[I]);delete u.g[m],u.h--}}this.F=null},dt.prototype.K=function(u,m,y,I){return this.i.add(String(u),m,!1,y,I)},dt.prototype.L=function(u,m,y,I){return this.i.add(String(u),m,!0,y,I)};function Qr(u,m,y,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,W=0;W<m.length;++W){var ee=m[W];if(ee&&!ee.da&&ee.capture==y){var Fe=ee.listener,ft=ee.ha||ee.src;ee.fa&&gi(u.i,ee),U=Fe.call(ft,I)!==!1&&U}}return U&&!I.defaultPrevented}function Nu(u,m,y){if(typeof u=="function")y&&(u=w(u,y));else if(u&&typeof u.handleEvent=="function")u=w(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(u,m||0)}function Sa(u){u.g=Nu(()=>{u.g=null,u.i&&(u.i=!1,Sa(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class bu extends me{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Sa(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yr(u){me.call(this),this.h=u,this.g={}}C(Yr,me);var Pa=[];function $s(u){$(u.g,function(m,y){this.g.hasOwnProperty(y)&&js(m)},u),u.g={}}Yr.prototype.N=function(){Yr.aa.N.call(this),$s(this)},Yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qs=d.JSON.stringify,Fd=d.JSON.parse,Xr=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Aa(){}Aa.prototype.h=null;function Ou(u){return u.h||(u.h=u.i())}function Ca(){}var Zi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gs(){Ee.call(this,"d")}C(Gs,Ee);function Ra(){Ee.call(this,"c")}C(Ra,Ee);var _i={},Mu=null;function Zs(){return Mu=Mu||new dt}_i.La="serverreachability";function Du(u){Ee.call(this,_i.La,u)}C(Du,Ee);function Jr(u){const m=Zs();It(m,new Du(m))}_i.STAT_EVENT="statevent";function Ks(u,m){Ee.call(this,_i.STAT_EVENT,u),this.stat=m}C(Ks,Ee);function Lt(u){const m=Zs();It(m,new Ks(m,u))}_i.Ma="timingevent";function Vu(u,m){Ee.call(this,_i.Ma,u),this.size=m}C(Vu,Ee);function es(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function ts(){this.g=!0}ts.prototype.xa=function(){this.g=!1};function yn(u,m,y,I,U,W){u.info(function(){if(u.g)if(W)for(var ee="",Fe=W.split("&"),ft=0;ft<Fe.length;ft++){var be=Fe[ft].split("=");if(1<be.length){var Be=be[0];be=be[1];var Je=Be.split("_");ee=2<=Je.length&&Je[1]=="type"?ee+(Be+"="+be+"&"):ee+(Be+"=redacted&")}}else ee=null;else ee=W;return"XMLHTTP REQ ("+I+") [attempt "+U+"]: "+m+`
`+y+`
`+ee})}function se(u,m,y,I,U,W,ee){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+U+"]: "+m+`
`+y+`
`+W+" "+ee})}function vi(u,m,y,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+zu(u,y)+(I?" "+I:"")})}function Fu(u,m){u.info(function(){return"TIMEOUT: "+m})}ts.prototype.info=function(){};function zu(u,m){if(!u.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var I=y[u];if(!(2>I.length)){var U=I[1];if(Array.isArray(U)&&!(1>U.length)){var W=U[0];if(W!="noop"&&W!="stop"&&W!="close")for(var ee=1;ee<U.length;ee++)U[ee]=""}}}}return qs(y)}catch{return m}}var ns={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ys;function On(){}C(On,Aa),On.prototype.g=function(){return new XMLHttpRequest},On.prototype.i=function(){return{}},Ys=new On;function Mn(u,m,y,I){this.j=u,this.i=m,this.l=y,this.R=I||1,this.U=new Yr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Uu}function Uu(){this.i=null,this.g="",this.h=!1}var Bu={},xa={};function ka(u,m,y){u.L=1,u.v=En(rt(m)),u.m=y,u.P=!0,La(u,null)}function La(u,m){u.F=Date.now(),Js(u),u.A=rt(u.v);var y=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Wu(y.i,"t",I),u.C=0,y=u.j.J,u.h=new Uu,u.g=Yu(u.j,y?m:null,!u.m),0<u.O&&(u.M=new bu(w(u.Y,u,u.g),u.O)),m=u.U,y=u.g,I=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(Pa[0]=U.toString()),U=Pa);for(var W=0;W<U.length;W++){var ee=Ea(y,U[W],I||m.handleEvent,!1,m.h||m);if(!ee)break;m.g[ee.key]=ee}m=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Jr(),yn(u.i,u.u,u.A,u.l,u.R,u.m)}Mn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Wt(u)==3?m.j():this.Y(u)},Mn.prototype.Y=function(u){try{if(u==this.g)e:{const Je=Wt(this.g);var m=this.g.Ba();const tr=this.g.Z();if(!(3>Je)&&(Je!=3||this.g&&(this.h.h||this.g.oa()||Ga(this.g)))){this.J||Je!=4||m==7||(m==8||0>=tr?Jr(3):Jr(2)),Na(this);var y=this.g.Z();this.X=y;t:if(ju(this)){var I=Ga(this.g);u="";var U=I.length,W=Wt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yi(this),is(this);var ee="";break t}this.h.i=new d.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,u+=this.h.i.decode(I[m],{stream:!(W&&m==U-1)});I.length=0,this.h.g+=u,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=y==200,se(this.i,this.u,this.A,this.l,this.R,Je,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,ft=this.g;if((Fe=ft.g?ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Fe)){var be=Fe;break t}}be=null}if(y=be)vi(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rs(this,y);else{this.o=!1,this.s=3,Lt(12),yi(this),is(this);break e}}if(this.P){y=!0;let lt;for(;!this.J&&this.C<ee.length;)if(lt=Xs(this,ee),lt==xa){Je==4&&(this.s=4,Lt(14),y=!1),vi(this.i,this.l,null,"[Incomplete Response]");break}else if(lt==Bu){this.s=4,Lt(15),vi(this.i,this.l,ee,"[Invalid Chunk]"),y=!1;break}else vi(this.i,this.l,lt,null),rs(this,lt);if(ju(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Je!=4||ee.length!=0||this.h.h||(this.s=1,Lt(16),y=!1),this.o=this.o&&y,!y)vi(this.i,this.l,ee,"[Invalid Chunked Response]"),yi(this),is(this);else if(0<ee.length&&!this.W){this.W=!0;var Be=this.j;Be.g==this&&Be.ba&&!Be.M&&(Be.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),lo(Be),Be.M=!0,Lt(11))}}else vi(this.i,this.l,ee,null),rs(this,ee);Je==4&&yi(this),this.o&&!this.J&&(Je==4?Ka(this.j,this):(this.o=!1,Js(this)))}else zd(this.g),y==400&&0<ee.indexOf("Unknown SID")?(this.s=3,Lt(12)):(this.s=0,Lt(13)),yi(this),is(this)}}}catch{}finally{}};function ju(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Xs(u,m){var y=u.C,I=m.indexOf(`
`,y);return I==-1?xa:(y=Number(m.substring(y,I)),isNaN(y)?Bu:(I+=1,I+y>m.length?xa:(m=m.slice(I,I+y),u.C=I+y,m)))}Mn.prototype.cancel=function(){this.J=!0,yi(this)};function Js(u){u.S=Date.now()+u.I,Hu(u,u.I)}function Hu(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=es(w(u.ba,u),m)}function Na(u){u.B&&(d.clearTimeout(u.B),u.B=null)}Mn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Fu(this.i,this.A),this.L!=2&&(Jr(),Lt(17)),yi(this),this.s=2,is(this)):Hu(this,this.S-u)};function is(u){u.j.G==0||u.J||Ka(u.j,u)}function yi(u){Na(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,$s(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function rs(u,m){try{var y=u.j;if(y.G!=0&&(y.g==u||Re(y.h,u))){if(!u.K&&Re(y.h,u)&&y.G==3){try{var I=y.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var U=I;if(U[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)co(y),oo(y);else break e;ao(y),Lt(18)}}else y.za=U[1],0<y.za-y.T&&37500>U[2]&&y.F&&y.v==0&&!y.C&&(y.C=es(w(y.Za,y),6e3));if(1>=Ki(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Si(y,11)}else if((u.K||y.g==u)&&co(y),!P(m))for(U=y.Da.g.parse(m),m=0;m<U.length;m++){let be=U[m];if(y.T=be[0],be=be[1],y.G==2)if(be[0]=="c"){y.K=be[1],y.ia=be[2];const Be=be[3];Be!=null&&(y.la=Be,y.j.info("VER="+y.la));const Je=be[4];Je!=null&&(y.Aa=Je,y.j.info("SVER="+y.Aa));const tr=be[5];tr!=null&&typeof tr=="number"&&0<tr&&(I=1.5*tr,y.L=I,y.j.info("backChannelRequestTimeoutMs_="+I)),I=y;const lt=u.g;if(lt){const fo=lt.g?lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fo){var W=I.h;W.g||fo.indexOf("spdy")==-1&&fo.indexOf("quic")==-1&&fo.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(He(W,W.h),W.h=null))}if(I.D){const ei=lt.g?lt.g.getResponseHeader("X-HTTP-Session-Id"):null;ei&&(I.ya=ei,ge(I.I,I.D,ei))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),I=y;var ee=u;if(I.qa=ho(I,I.J?I.ia:null,I.W),ee.K){os(I.h,ee);var Fe=ee,ft=I.L;ft&&(Fe.I=ft),Fe.B&&(Na(Fe),Js(Fe)),I.g=ee}else Fn(I);0<y.i.length&&er(y)}else be[0]!="stop"&&be[0]!="close"||Si(y,7);else y.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?Si(y,7):so(y):be[0]!="noop"&&y.l&&y.l.ta(be),y.v=0)}}Jr(4)}catch{}}var ss=class{constructor(u,m){this.g=u,this.map=m}};function ba(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Oa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ki(u){return u.h?1:u.g?u.g.size:0}function Re(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function He(u,m){u.g?u.g.add(m):u.h=m}function os(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}ba.prototype.cancel=function(){if(this.i=wi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function wi(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.D);return m}return N(u.i)}function Qi(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(h(u)){for(var m=[],y=u.length,I=0;I<y;I++)m.push(u[I]);return m}m=[],y=0;for(I in u)m[y++]=u[I];return m}function Ma(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(h(u)||typeof u=="string"){var m=[];u=u.length;for(var y=0;y<u;y++)m.push(y);return m}m=[],y=0;for(const I in u)m[y++]=I;return m}}}function we(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(h(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var y=Ma(u),I=Qi(u),U=I.length,W=0;W<U;W++)m.call(void 0,I[W],y&&y[W],u)}var Ke=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Da(u,m){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var I=u[y].indexOf("="),U=null;if(0<=I){var W=u[y].substring(0,I);U=u[y].substring(I+1)}else W=u[y];m(W,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function wn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof wn){this.h=u.h,eo(this,u.j),this.o=u.o,this.g=u.g,Ei(this,u.s),this.l=u.l;var m=u.i,y=new Ti;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),Xn(this,y),this.m=u.m}else u&&(m=String(u).match(Ke))?(this.h=!1,eo(this,m[1]||"",!0),this.o=Dn(m[2]||""),this.g=Dn(m[3]||"",!0),Ei(this,m[4]),this.l=Dn(m[5]||"",!0),Xn(this,m[6]||"",!0),this.m=Dn(m[7]||"")):(this.h=!1,this.i=new Ti(null,this.h))}wn.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Vn(m,Yi,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Vn(m,Yi,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Vn(y,y.charAt(0)=="/"?za:Fa,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Vn(y,Ua)),u.join("")};function rt(u){return new wn(u)}function eo(u,m,y){u.j=y?Dn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Ei(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Xn(u,m,y){m instanceof Ti?(u.i=m,Tn(u.i,u.h)):(y||(m=Vn(m,to)),u.i=new Ti(m,u.h))}function ge(u,m,y){u.i.set(m,y)}function En(u){return ge(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Dn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Vn(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,Va),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Va(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Yi=/[#\/\?@]/g,Fa=/[#\?:]/g,za=/[#\?]/g,to=/[#\?@]/g,Ua=/#/g;function Ti(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function an(u){u.g||(u.g=new Map,u.h=0,u.i&&Da(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=Ti.prototype,t.add=function(u,m){an(this),this.i=null,u=he(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function Ba(u,m){an(u),m=he(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function no(u,m){return an(u),m=he(u,m),u.g.has(m)}t.forEach=function(u,m){an(this),this.g.forEach(function(y,I){y.forEach(function(U){u.call(m,U,I,this)},this)},this)},t.na=function(){an(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let I=0;I<m.length;I++){const U=u[I];for(let W=0;W<U.length;W++)y.push(m[I])}return y},t.V=function(u){an(this);let m=[];if(typeof u=="string")no(this,u)&&(m=m.concat(this.g.get(he(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)m=m.concat(u[y])}return m},t.set=function(u,m){return an(this),this.i=null,u=he(this,u),no(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Wu(u,m,y){Ba(u,m),0<y.length&&(u.i=null,u.g.set(he(u,m),N(y)),u.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var I=m[y];const W=encodeURIComponent(String(I)),ee=this.V(I);for(I=0;I<ee.length;I++){var U=W;ee[I]!==""&&(U+="="+encodeURIComponent(String(ee[I]))),u.push(U)}}return this.i=u.join("&")};function he(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Tn(u,m){m&&!u.j&&(an(u),u.i=null,u.g.forEach(function(y,I){var U=I.toLowerCase();I!=U&&(Ba(this,I),Wu(this,U,y))},u)),u.j=m}function Ue(u,m){const y=new ts;if(d.Image){const I=new Image;I.onload=S(In,y,"TestLoadImage: loaded",!0,m,I),I.onerror=S(In,y,"TestLoadImage: error",!1,m,I),I.onabort=S(In,y,"TestLoadImage: abort",!1,m,I),I.ontimeout=S(In,y,"TestLoadImage: timeout",!1,m,I),d.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function $u(u,m){const y=new ts,I=new AbortController,U=setTimeout(()=>{I.abort(),In(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(W=>{clearTimeout(U),W.ok?In(y,"TestPingServer: ok",!0,m):In(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),In(y,"TestPingServer: error",!1,m)})}function In(u,m,y,I,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),I(y)}catch{}}function ja(){this.g=new Xr}function Ha(u,m,y){const I=y||"";try{we(u,function(U,W){let ee=U;f(U)&&(ee=qs(U)),m.push(I+W+"="+encodeURIComponent(ee))})}catch(U){throw m.push(I+"type="+encodeURIComponent("_badmap")),U}}function Sn(u){this.l=u.Ub||null,this.j=u.eb||!1}C(Sn,Aa),Sn.prototype.g=function(){return new Xi(this.l,this.j)},Sn.prototype.i=function(u){return function(){return u}}({});function Xi(u,m){dt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Xi,dt),t=Xi.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,ln(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xe(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ln(this)),this.g&&(this.readyState=3,ln(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ji(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ji(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Xe(this):ln(this),this.readyState==3&&Ji(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Xe(this))},t.Qa=function(u){this.g&&(this.response=u,Xe(this))},t.ga=function(){this.g&&Xe(this)};function Xe(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ln(u)}t.setRequestHeader=function(u,m){this.u.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function ln(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Wa(u){let m="";return $(u,function(y,I){m+=I,m+=":",m+=y,m+=`\r
`}),m}function io(u,m,y){e:{for(I in y){var I=!1;break e}I=!0}I||(y=Wa(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):ge(u,m,y))}function Qe(u){dt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Qe,dt);var qu=/^https?$/i,$a=["POST","PUT"];t=Qe.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,m,y,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ys.g(),this.v=this.o?Ou(this.o):Ou(Ys),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(W){Gu(this,W);return}if(u=y||"",y=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var U in I)y.set(U,I[U]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const W of I.keys())y.set(W,I.get(W));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(y.keys()).find(W=>W.toLowerCase()=="content-type"),U=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call($a,m,void 0))||I||U||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,ee]of y)this.g.setRequestHeader(W,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Yt(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){Gu(this,W)}};function Gu(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,qa(u),ro(u)}function qa(u){u.A||(u.A=!0,It(u,"complete"),It(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,It(this,"complete"),It(this,"abort"),ro(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ro(this,!0)),Qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Pe(this):this.bb())},t.bb=function(){Pe(this)};function Pe(u){if(u.h&&typeof l<"u"&&(!u.v[1]||Wt(u)!=4||u.Z()!=2)){if(u.u&&Wt(u)==4)Nu(u.Ea,0,u);else if(It(u,"readystatechange"),Wt(u)==4){u.h=!1;try{const ee=u.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var I;if(I=ee===0){var U=String(u.D).match(Ke)[1]||null;!U&&d.self&&d.self.location&&(U=d.self.location.protocol.slice(0,-1)),I=!qu.test(U?U.toLowerCase():"")}y=I}if(y)It(u,"complete"),It(u,"success");else{u.m=6;try{var W=2<Wt(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",qa(u)}}finally{ro(u)}}}}function ro(u,m){if(u.g){Yt(u);const y=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||It(u,"ready");try{y.onreadystatechange=I}catch{}}}function Yt(u){u.I&&(d.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Wt(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Wt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Fd(m)}};function Ga(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function zd(u){const m={};u=(u.g&&2<=Wt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(P(u[I]))continue;var y=O(u[I]);const U=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const W=m[U]||[];m[U]=W,W.push(y)}A(m,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ii(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function Zu(u){this.Aa=0,this.i=[],this.j=new ts,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ii("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ii("baseRetryDelayMs",5e3,u),this.cb=Ii("retryDelaySeedMs",1e4,u),this.Wa=Ii("forwardChannelMaxRetries",2,u),this.wa=Ii("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ba(u&&u.concurrentRequestLimit),this.Da=new ja,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Zu.prototype,t.la=8,t.G=1,t.connect=function(u,m,y,I){Lt(0),this.W=u,this.H=m||{},y&&I!==void 0&&(this.H.OSID=y,this.H.OAID=I),this.F=this.X,this.I=ho(this,null,this.W),er(this)};function so(u){if(Ku(u),u.G==3){var m=u.U++,y=rt(u.I);if(ge(y,"SID",u.K),ge(y,"RID",m),ge(y,"TYPE","terminate"),as(u,y),m=new Mn(u,u.j,m),m.L=2,m.v=En(rt(y)),y=!1,d.navigator&&d.navigator.sendBeacon)try{y=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&d.Image&&(new Image().src=m.v,y=!0),y||(m.g=Yu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Js(m)}Qu(u)}function oo(u){u.g&&(lo(u),u.g.cancel(),u.g=null)}function Ku(u){oo(u),u.u&&(d.clearTimeout(u.u),u.u=null),co(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function er(u){if(!Oa(u.h)&&!u.s){u.s=!0;var m=u.Ga;Ne||X(),q||(Ne(),q=!0),ae.add(m,u),u.B=0}}function Ud(u,m){return Ki(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=es(w(u.Ga,u,m),Qa(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new Mn(this,this.j,u);let W=this.o;if(this.S&&(W?(W=T(W),b(W,this.S)):W=this.S),this.m!==null||this.O||(U.H=W,W=null),this.P)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var I=this.i[y];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=Za(this,U,m),y=rt(this.I),ge(y,"RID",u),ge(y,"CVER",22),this.D&&ge(y,"X-HTTP-Session-Id",this.D),as(this,y),W&&(this.O?m="headers="+encodeURIComponent(String(Wa(W)))+"&"+m:this.m&&io(y,this.m,W)),He(this.h,U),this.Ua&&ge(y,"TYPE","init"),this.P?(ge(y,"$req",m),ge(y,"SID","null"),U.T=!0,ka(U,y,null)):ka(U,y,m),this.G=2}}else this.G==3&&(u?un(this,u):this.i.length==0||Oa(this.h)||un(this))};function un(u,m){var y;m?y=m.l:y=u.U++;const I=rt(u.I);ge(I,"SID",u.K),ge(I,"RID",y),ge(I,"AID",u.T),as(u,I),u.m&&u.o&&io(I,u.m,u.o),y=new Mn(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Za(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),He(u.h,y),ka(y,I,m)}function as(u,m){u.H&&$(u.H,function(y,I){ge(m,I,y)}),u.l&&we({},function(y,I){ge(m,I,y)})}function Za(u,m,y){y=Math.min(u.i.length,y);var I=u.l?w(u.l.Na,u.l,u):null;e:{var U=u.i;let W=-1;for(;;){const ee=["count="+y];W==-1?0<y?(W=U[0].g,ee.push("ofs="+W)):W=0:ee.push("ofs="+W);let Fe=!0;for(let ft=0;ft<y;ft++){let be=U[ft].g;const Be=U[ft].map;if(be-=W,0>be)W=Math.max(0,U[ft].g-100),Fe=!1;else try{Ha(Be,ee,"req"+be+"_")}catch{I&&I(Be)}}if(Fe){I=ee.join("&");break e}}}return u=u.i.splice(0,y),m.D=u,I}function Fn(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Ne||X(),q||(Ne(),q=!0),ae.add(m,u),u.v=0}}function ao(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=es(w(u.Fa,u),Qa(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,uo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=es(w(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Lt(10),oo(this),uo(this))};function lo(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function uo(u){u.g=new Mn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=rt(u.qa);ge(m,"RID","rpc"),ge(m,"SID",u.K),ge(m,"AID",u.T),ge(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&ge(m,"TO",u.ja),ge(m,"TYPE","xmlhttp"),as(u,m),u.m&&u.o&&io(m,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=En(rt(m)),y.m=null,y.P=!0,La(y,u)}t.Za=function(){this.C!=null&&(this.C=null,oo(this),ao(this),Lt(19))};function co(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Ka(u,m){var y=null;if(u.g==m){co(u),lo(u),u.g=null;var I=2}else if(Re(u.h,m))y=m.D,os(u.h,m),I=1;else return;if(u.G!=0){if(m.o)if(I==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var U=u.B;I=Zs(),It(I,new Vu(I,y)),er(u)}else Fn(u);else if(U=m.s,U==3||U==0&&0<m.X||!(I==1&&Ud(u,m)||I==2&&ao(u)))switch(y&&0<y.length&&(m=u.h,m.i=m.i.concat(y)),U){case 1:Si(u,5);break;case 4:Si(u,10);break;case 3:Si(u,6);break;default:Si(u,2)}}}function Qa(u,m){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*m}function Si(u,m){if(u.j.info("Error code "+m),m==2){var y=w(u.fb,u),I=u.Xa;const U=!I;I=new wn(I||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||eo(I,"https"),En(I),U?Ue(I.toString(),y):$u(I.toString(),y)}else Lt(2);u.G=0,u.l&&u.l.sa(m),Qu(u),Ku(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function Qu(u){if(u.G=0,u.ka=[],u.l){const m=wi(u.h);(m.length!=0||u.i.length!=0)&&(z(u.ka,m),z(u.ka,u.i),u.h.i.length=0,N(u.i),u.i.length=0),u.l.ra()}}function ho(u,m,y){var I=y instanceof wn?rt(y):new wn(y);if(I.g!="")m&&(I.g=m+"."+I.g),Ei(I,I.s);else{var U=d.location;I=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var W=new wn(null);I&&eo(W,I),m&&(W.g=m),U&&Ei(W,U),y&&(W.l=y),I=W}return y=u.D,m=u.ya,y&&m&&ge(I,y,m),ge(I,"VER",u.la),as(u,I),I}function Yu(u,m,y){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Qe(new Sn({eb:y})):new Qe(u.pa),m.Ha(u.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ya(){}t=Ya.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ls(){}ls.prototype.g=function(u,m){return new St(u,m)};function St(u,m){dt.call(this),this.g=new Zu(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!P(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!P(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Pn(this)}C(St,dt),St.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},St.prototype.close=function(){so(this.g)},St.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=qs(u),u=y);m.i.push(new ss(m.Ya++,u)),m.G==3&&er(m)},St.prototype.N=function(){this.g.l=null,delete this.j,so(this.g),delete this.g,St.aa.N.call(this)};function Jn(u){Gs.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const y in m){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}C(Jn,Gs);function Xu(){Ra.call(this),this.status=1}C(Xu,Ra);function Pn(u){this.g=u}C(Pn,Ya),Pn.prototype.ua=function(){It(this.g,"a")},Pn.prototype.ta=function(u){It(this.g,new Jn(u))},Pn.prototype.sa=function(u){It(this.g,new Xu)},Pn.prototype.ra=function(){It(this.g,"b")},ls.prototype.createWebChannel=ls.prototype.g,St.prototype.send=St.prototype.o,St.prototype.open=St.prototype.m,St.prototype.close=St.prototype.close,xT=function(){return new ls},RT=function(){return Zs()},CT=_i,Vp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ns.NO_ERROR=0,ns.TIMEOUT=8,ns.HTTP_ERROR=6,Kc=ns,Qs.COMPLETE="complete",AT=Qs,Ca.EventType=Zi,Zi.OPEN="a",Zi.CLOSE="b",Zi.ERROR="c",Zi.MESSAGE="d",dt.prototype.listen=dt.prototype.K,gl=Ca,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,PT=Qe}).apply(typeof Rc<"u"?Rc:typeof self<"u"?self:typeof window<"u"?window:{});const cy="@firebase/firestore",hy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pa="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new ng("@firebase/firestore");function yo(){return xs.logLevel}function ie(t,...e){if(xs.logLevel<=xe.DEBUG){const n=e.map(_g);xs.debug(`Firestore (${pa}): ${t}`,...n)}}function ji(t,...e){if(xs.logLevel<=xe.ERROR){const n=e.map(_g);xs.error(`Firestore (${pa}): ${t}`,...n)}}function Hi(t,...e){if(xs.logLevel<=xe.WARN){const n=e.map(_g);xs.warn(`Firestore (${pa}): ${t}`,...n)}}function _g(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,kT(t,i,n)}function kT(t,e,n){let i=`FIRESTORE (${pa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw ji(i),new Error(i)}function Ve(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||kT(e,r,i)}function ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends mi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(zt.UNAUTHENTICATED))}shutdown(){}}class eL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class tL{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ve(this.o===void 0,42304);let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new xr,e.enqueueRetryable(()=>r(this.currentUser))};const l=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},d=h=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(h=>d(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?d(h):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new xr)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ve(typeof i.accessToken=="string",31837,{l:i}),new LT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ve(e===null||typeof e=="string",2055,{h:e}),new zt(e)}}class nL{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class iL{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new nL(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rL{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ve(this.o===void 0,3512);const i=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new dy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new dy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=sL(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function Te(t,e){return t<e?-1:t>e?1:0}function Fp(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),r=e.codePointAt(n);if(i!==r){if(i<128&&r<128)return Te(i,r);{const o=bT(),l=oL(o.encode(fy(t,n)),o.encode(fy(e,n)));return l!==0?l:Te(i,r)}}n+=i>65535?2:1}return Te(t.length,e.length)}function fy(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function oL(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Te(t[n],e[n]);return Te(t.length,e.length)}function na(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="__name__";class ri{constructor(e,n,i){n===void 0?n=0:n>e.length&&pe(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&pe(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ri.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ri?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=ri.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return Te(e.length,n.length)}static compareSegments(e,n){const i=ri.isNumericId(e),r=ri.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?ri.extractNumericId(e).compare(ri.extractNumericId(n)):Fp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Rr.fromString(e.substring(4,e.length-2))}}class Ge extends ri{construct(e,n,i){return new Ge(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ne(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Ge(n)}static emptyPath(){return new Ge([])}}const aL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rt extends ri{construct(e,n,i){return new Rt(e,n,i)}static isValidIdentifier(e){return aL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===py}static keyField(){return new Rt([py])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ne(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;r<e.length;){const d=e[r];if(d==="\\"){if(r+1===e.length)throw new ne(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ne(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else d==="`"?(l=!l,r++):d!=="."||l?(i+=d,r++):(o(),r++)}if(o(),l)throw new ne(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rt(n)}static emptyPath(){return new Rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Ge.fromString(e))}static fromName(e){return new oe(Ge.fromString(e).popFirst(5))}static empty(){return new oe(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Ge(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(t,e,n){if(!n)throw new ne(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function MT(t,e,n,i){if(e===!0&&i===!0)throw new ne(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function my(t){if(!oe.isDocumentKey(t))throw new ne(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function DT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function md(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe(12329,{type:typeof t})}function Ln(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=md(t);throw new ne(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t,e){const n={typeString:t};return e&&(n.value=e),n}function vu(t,e){if(!DT(t))throw new ne(G.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(r&&typeof l!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new ne(G.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=-62135596800,_y=1e6;class We{static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*_y);return new We(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<gy)throw new ne(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_y}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:We._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vu(e,We._jsonSchema))return new We(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-gy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}We._jsonSchemaVersion="firestore/timestamp/1.0",We._jsonSchema={type:vt("string",We._jsonSchemaVersion),seconds:vt("number"),nanoseconds:vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{static fromTimestamp(e){return new _e(e)}static min(){return new _e(new We(0,0))}static max(){return new _e(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu=-1;function lL(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=_e.fromTimestamp(i===1e9?new We(n+1,0):new We(n,i));return new Mr(r,oe.empty(),e)}function uL(t){return new Mr(t.readTime,t.key,nu)}class Mr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Mr(_e.min(),oe.empty(),nu)}static max(){return new Mr(_e.max(),oe.empty(),nu)}}function cL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ma(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==hL)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,i)=>{n(e)})}static reject(e){return new Z((n,i)=>{i(e)})}static waitFor(e){return new Z((n,i)=>{let r=0,o=0,l=!1;e.forEach(d=>{++r,d.next(()=>{++o,l&&o===r&&n()},h=>i(h))}),l=!0,o===r&&n()})}static or(e){let n=Z.resolve(!1);for(const i of e)n=n.next(r=>r?Z.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new Z((i,r)=>{const o=e.length,l=new Array(o);let d=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next(g=>{l[f]=g,++d,d===o&&i(l)},g=>r(g))}})}static doWhile(e,n){return new Z((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function fL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ga(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}gd.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg=-1;function _d(t){return t==null}function Oh(t){return t===0&&1/t==-1/0}function pL(t){return typeof t=="number"&&Number.isInteger(t)&&!Oh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="";function mL(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=vy(e)),e=gL(t.get(n),e);return vy(e)}function gL(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case VT:n+="";break;default:n+=o}}return n}function vy(t){return t+VT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function FT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n){this.comparator=e,this.root=n||bt.EMPTY}insert(e,n){return new it(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xc(this.root,e,this.comparator,!1)}getReverseIterator(){return new xc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xc(this.root,e,this.comparator,!0)}}class xc{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??bt.RED,this.left=r??bt.EMPTY,this.right=o??bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new bt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return bt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1;bt.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wy(this.data.getIterator())}getIteratorFrom(e){return new wy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Tt(this.comparator);return n.data=e,n}}class wy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new pn([])}unionWith(e){let n=new Tt(Rt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new pn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return na(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new zT("Invalid base64 string: "+o):o}}(e);return new kt(n)}static fromUint8Array(e){const n=function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o}(e);return new kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const _L=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dr(t){if(Ve(!!t,39018),typeof t=="string"){let e=0;const n=_L.exec(t);if(Ve(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ut(t.seconds),nanos:ut(t.nanos)}}function ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vr(t){return typeof t=="string"?kt.fromBase64String(t):kt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="server_timestamp",BT="__type__",jT="__previous_value__",HT="__local_write_time__";function yg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[BT])===null||n===void 0?void 0:n.stringValue)===UT}function vd(t){const e=t.mapValue.fields[jT];return yg(e)?vd(e):e}function iu(t){const e=Dr(t.mapValue.fields[HT].timestampValue);return new We(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e,n,i,r,o,l,d,h,f,g){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=g}}const Mh="(default)";class ia{constructor(e,n){this.projectId=e,this.database=n||Mh}static empty(){return new ia("","")}get isDefaultDatabase(){return this.database===Mh}isEqual(e){return e instanceof ia&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="__type__",yL="__max__",kc={mapValue:{}},$T="__vector__",Dh="value";function Fr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yg(t)?4:EL(t)?9007199254740991:wL(t)?10:11:pe(28295,{value:t})}function pi(t,e){if(t===e)return!0;const n=Fr(t);if(n!==Fr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return iu(t).isEqual(iu(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=Dr(r.timestampValue),d=Dr(o.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return Vr(r.bytesValue).isEqual(Vr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return ut(r.geoPointValue.latitude)===ut(o.geoPointValue.latitude)&&ut(r.geoPointValue.longitude)===ut(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ut(r.integerValue)===ut(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=ut(r.doubleValue),d=ut(o.doubleValue);return l===d?Oh(l)===Oh(d):isNaN(l)&&isNaN(d)}return!1}(t,e);case 9:return na(t.arrayValue.values||[],e.arrayValue.values||[],pi);case 10:case 11:return function(r,o){const l=r.mapValue.fields||{},d=o.mapValue.fields||{};if(yy(l)!==yy(d))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(d[h]===void 0||!pi(l[h],d[h])))return!1;return!0}(t,e);default:return pe(52216,{left:t})}}function ru(t,e){return(t.values||[]).find(n=>pi(n,e))!==void 0}function ra(t,e){if(t===e)return 0;const n=Fr(t),i=Fr(e);if(n!==i)return Te(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return function(o,l){const d=ut(o.integerValue||o.doubleValue),h=ut(l.integerValue||l.doubleValue);return d<h?-1:d>h?1:d===h?0:isNaN(d)?isNaN(h)?0:-1:1}(t,e);case 3:return Ey(t.timestampValue,e.timestampValue);case 4:return Ey(iu(t),iu(e));case 5:return Fp(t.stringValue,e.stringValue);case 6:return function(o,l){const d=Vr(o),h=Vr(l);return d.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const d=o.split("/"),h=l.split("/");for(let f=0;f<d.length&&f<h.length;f++){const g=Te(d[f],h[f]);if(g!==0)return g}return Te(d.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const d=Te(ut(o.latitude),ut(l.latitude));return d!==0?d:Te(ut(o.longitude),ut(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ty(t.arrayValue,e.arrayValue);case 10:return function(o,l){var d,h,f,g;const v=o.fields||{},w=l.fields||{},S=(d=v[Dh])===null||d===void 0?void 0:d.arrayValue,C=(h=w[Dh])===null||h===void 0?void 0:h.arrayValue,N=Te(((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0,((g=C==null?void 0:C.values)===null||g===void 0?void 0:g.length)||0);return N!==0?N:Ty(S,C)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===kc.mapValue&&l===kc.mapValue)return 0;if(o===kc.mapValue)return 1;if(l===kc.mapValue)return-1;const d=o.fields||{},h=Object.keys(d),f=l.fields||{},g=Object.keys(f);h.sort(),g.sort();for(let v=0;v<h.length&&v<g.length;++v){const w=Fp(h[v],g[v]);if(w!==0)return w;const S=ra(d[h[v]],f[g[v]]);if(S!==0)return S}return Te(h.length,g.length)}(t.mapValue,e.mapValue);default:throw pe(23264,{le:n})}}function Ey(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);const n=Dr(t),i=Dr(e),r=Te(n.seconds,i.seconds);return r!==0?r:Te(n.nanos,i.nanos)}function Ty(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=ra(n[r],i[r]);if(o)return o}return Te(n.length,i.length)}function sa(t){return zp(t)}function zp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Dr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=zp(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const l of i)o?o=!1:r+=",",r+=`${l}:${zp(n.fields[l])}`;return r+"}"}(t.mapValue):pe(61005,{value:t})}function Qc(t){switch(Fr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vd(t);return e?16+Qc(e):16;case 5:return 2*t.stringValue.length;case 6:return Vr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+Qc(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return qr(i.fields,(o,l)=>{r+=o.length+Qc(l)}),r}(t.mapValue);default:throw pe(13486,{value:t})}}function Iy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Up(t){return!!t&&"integerValue"in t}function wg(t){return!!t&&"arrayValue"in t}function Sy(t){return!!t&&"nullValue"in t}function Py(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yc(t){return!!t&&"mapValue"in t}function wL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[WT])===null||n===void 0?void 0:n.stringValue)===$T}function kl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return qr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=kl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=kl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function EL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===yL}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Yc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=kl(n)}setAll(e){let n=Rt.emptyPath(),i={},r=[];e.forEach((l,d)=>{if(!n.isImmediateParentOf(d)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=d.popLast()}l?i[d.lastSegment()]=kl(l):r.push(d.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Yc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Yc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){qr(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new tn(kl(this.value))}}function qT(t){const e=[];return qr(t.fields,(n,i)=>{const r=new Rt([n]);if(Yc(i)){const o=qT(i.mapValue).fields;if(o.length===0)e.push(r);else for(const l of o)e.push(r.child(l))}else e.push(r)}),new pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n,i,r,o,l,d){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=d}static newInvalidDocument(e){return new Bt(e,0,_e.min(),_e.min(),_e.min(),tn.empty(),0)}static newFoundDocument(e,n,i,r){return new Bt(e,1,n,_e.min(),i,r,0)}static newNoDocument(e,n){return new Bt(e,2,n,_e.min(),_e.min(),tn.empty(),0)}static newUnknownDocument(e,n){return new Bt(e,3,n,_e.min(),_e.min(),tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n){this.position=e,this.inclusive=n}}function Ay(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],l=t.position[r];if(o.field.isKeyField()?i=oe.comparator(oe.fromName(l.referenceValue),n.key):i=ra(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Cy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n="asc"){this.field=e,this.dir=n}}function TL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{}class _t extends GT{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new SL(e,n,i):n==="array-contains"?new CL(e,i):n==="in"?new RL(e,i):n==="not-in"?new xL(e,i):n==="array-contains-any"?new kL(e,i):new _t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new PL(e,i):new AL(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ra(n,this.value)):n!==null&&Fr(this.value)===Fr(n)&&this.matchesComparison(ra(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qn extends GT{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Qn(e,n)}matches(e){return ZT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function ZT(t){return t.op==="and"}function KT(t){return IL(t)&&ZT(t)}function IL(t){for(const e of t.filters)if(e instanceof Qn)return!1;return!0}function Bp(t){if(t instanceof _t)return t.field.canonicalString()+t.op.toString()+sa(t.value);if(KT(t))return t.filters.map(e=>Bp(e)).join(",");{const e=t.filters.map(n=>Bp(n)).join(",");return`${t.op}(${e})`}}function QT(t,e){return t instanceof _t?function(i,r){return r instanceof _t&&i.op===r.op&&i.field.isEqual(r.field)&&pi(i.value,r.value)}(t,e):t instanceof Qn?function(i,r){return r instanceof Qn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,l,d)=>o&&QT(l,r.filters[d]),!0):!1}(t,e):void pe(19439)}function YT(t){return t instanceof _t?function(n){return`${n.field.canonicalString()} ${n.op} ${sa(n.value)}`}(t):t instanceof Qn?function(n){return n.op.toString()+" {"+n.getFilters().map(YT).join(" ,")+"}"}(t):"Filter"}class SL extends _t{constructor(e,n,i){super(e,n,i),this.key=oe.fromName(i.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class PL extends _t{constructor(e,n){super(e,"in",n),this.keys=XT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class AL extends _t{constructor(e,n){super(e,"not-in",n),this.keys=XT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function XT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>oe.fromName(i.referenceValue))}class CL extends _t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return wg(n)&&ru(n.arrayValue,this.value)}}class RL extends _t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ru(this.value.arrayValue,n)}}class xL extends _t{constructor(e,n){super(e,"not-in",n)}matches(e){if(ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ru(this.value.arrayValue,n)}}class kL extends _t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!wg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>ru(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e,n=null,i=[],r=[],o=null,l=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=d,this.Pe=null}}function Ry(t,e=null,n=[],i=[],r=null,o=null,l=null){return new LL(t,e,n,i,r,o,l)}function Eg(t){const e=ye(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Bp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),_d(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>sa(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>sa(i)).join(",")),e.Pe=n}return e.Pe}function Tg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!TL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!QT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Cy(t.startAt,e.startAt)&&Cy(t.endAt,e.endAt)}function jp(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n=null,i=[],r=[],o=null,l="F",d=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=d,this.endAt=h,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function NL(t,e,n,i,r,o,l,d){return new _a(t,e,n,i,r,o,l,d)}function yd(t){return new _a(t)}function xy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function JT(t){return t.collectionGroup!==null}function Ll(t){const e=ye(t);if(e.Te===null){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let d=new Tt(Rt.comparator);return l.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(d=d.add(f.field))})}),d})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Fh(o,i))}),n.has(Rt.keyField().canonicalString())||e.Te.push(new Fh(Rt.keyField(),i))}return e.Te}function hi(t){const e=ye(t);return e.Ie||(e.Ie=bL(e,Ll(t))),e.Ie}function bL(t,e){if(t.limitType==="F")return Ry(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Fh(r.field,o)});const n=t.endAt?new Vh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Vh(t.startAt.position,t.startAt.inclusive):null;return Ry(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Hp(t,e){const n=t.filters.concat([e]);return new _a(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Wp(t,e,n){return new _a(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wd(t,e){return Tg(hi(t),hi(e))&&t.limitType===e.limitType}function eI(t){return`${Eg(hi(t))}|lt:${t.limitType}`}function wo(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>YT(r)).join(", ")}]`),_d(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>sa(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>sa(r)).join(",")),`Target(${i})`}(hi(t))}; limitType=${t.limitType})`}function Ed(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):oe.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of Ll(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(l,d,h){const f=Ay(l,d,h);return l.inclusive?f<=0:f<0}(i.startAt,Ll(i),r)||i.endAt&&!function(l,d,h){const f=Ay(l,d,h);return l.inclusive?f>=0:f>0}(i.endAt,Ll(i),r))}(t,e)}function OL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tI(t){return(e,n)=>{let i=!1;for(const r of Ll(t)){const o=ML(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function ML(t,e,n){const i=t.field.isKeyField()?oe.comparator(e.key,n.key):function(o,l,d){const h=l.data.field(o),f=d.data.field(o);return h!==null&&f!==null?ra(h,f):pe(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return pe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){qr(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return FT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL=new it(oe.comparator);function Wi(){return DL}const nI=new it(oe.comparator);function _l(...t){let e=nI;for(const n of t)e=e.insert(n.key,n);return e}function iI(t){let e=nI;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function gs(){return Nl()}function rI(){return Nl()}function Nl(){return new Vs(t=>t.toString(),(t,e)=>t.isEqual(e))}const VL=new it(oe.comparator),FL=new Tt(oe.comparator);function ke(...t){let e=FL;for(const n of t)e=e.add(n);return e}const zL=new Tt(Te);function UL(){return zL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oh(e)?"-0":e}}function sI(t){return{integerValue:""+t}}function BL(t,e){return pL(e)?sI(e):Ig(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(){this._=void 0}}function jL(t,e,n){return t instanceof zh?function(r,o){const l={fields:{[BT]:{stringValue:UT},[HT]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&yg(o)&&(o=vd(o)),o&&(l.fields[jT]=o),{mapValue:l}}(n,e):t instanceof su?aI(t,e):t instanceof ou?lI(t,e):function(r,o){const l=oI(r,o),d=ky(l)+ky(r.Ee);return Up(l)&&Up(r.Ee)?sI(d):Ig(r.serializer,d)}(t,e)}function HL(t,e,n){return t instanceof su?aI(t,e):t instanceof ou?lI(t,e):n}function oI(t,e){return t instanceof Uh?function(i){return Up(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class zh extends Td{}class su extends Td{constructor(e){super(),this.elements=e}}function aI(t,e){const n=uI(e);for(const i of t.elements)n.some(r=>pi(r,i))||n.push(i);return{arrayValue:{values:n}}}class ou extends Td{constructor(e){super(),this.elements=e}}function lI(t,e){let n=uI(e);for(const i of t.elements)n=n.filter(r=>!pi(r,i));return{arrayValue:{values:n}}}class Uh extends Td{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function ky(t){return ut(t.integerValue||t.doubleValue)}function uI(t){return wg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function WL(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof su&&r instanceof su||i instanceof ou&&r instanceof ou?na(i.elements,r.elements,pi):i instanceof Uh&&r instanceof Uh?pi(i.Ee,r.Ee):i instanceof zh&&r instanceof zh}(t.transform,e.transform)}class $L{constructor(e,n){this.version=e,this.transformResults=n}}class di{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new di}static exists(e){return new di(void 0,e)}static updateTime(e){return new di(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Id{}function cI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new dI(t.key,di.none()):new yu(t.key,t.data,di.none());{const n=t.data,i=tn.empty();let r=new Tt(Rt.comparator);for(let o of e.fields)if(!r.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new Gr(t.key,i,new pn(r.toArray()),di.none())}}function qL(t,e,n){t instanceof yu?function(r,o,l){const d=r.value.clone(),h=Ny(r.fieldTransforms,o,l.transformResults);d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):t instanceof Gr?function(r,o,l){if(!Xc(r.precondition,o))return void o.convertToUnknownDocument(l.version);const d=Ny(r.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(hI(r)),h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):function(r,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function bl(t,e,n,i){return t instanceof yu?function(o,l,d,h){if(!Xc(o.precondition,l))return d;const f=o.value.clone(),g=by(o.fieldTransforms,h,l);return f.setAll(g),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof Gr?function(o,l,d,h){if(!Xc(o.precondition,l))return d;const f=by(o.fieldTransforms,h,l),g=l.data;return g.setAll(hI(o)),g.setAll(f),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(t,e,n,i):function(o,l,d){return Xc(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d}(t,e,n)}function GL(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=oI(i.transform,r||null);o!=null&&(n===null&&(n=tn.empty()),n.set(i.field,o))}return n||null}function Ly(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&na(i,r,(o,l)=>WL(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yu extends Id{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Gr extends Id{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function hI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Ny(t,e,n){const i=new Map;Ve(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let r=0;r<n.length;r++){const o=t[r],l=o.transform,d=e.data.field(o.field);i.set(o.field,HL(l,d,n[r]))}return i}function by(t,e,n){const i=new Map;for(const r of t){const o=r.transform,l=n.data.field(r.field);i.set(r.field,jL(o,l,e))}return i}class dI extends Id{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZL extends Id{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&qL(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=bl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=bl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=rI();return this.mutations.forEach(r=>{const o=e.get(r.key),l=o.overlayedDocument;let d=this.applyToLocalView(l,o.mutatedFields);d=n.has(r.key)?null:d;const h=cI(l,d);h!==null&&i.set(r.key,h),l.isValidDocument()||l.convertToNoDocument(_e.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&na(this.mutations,e.mutations,(n,i)=>Ly(n,i))&&na(this.baseMutations,e.baseMutations,(n,i)=>Ly(n,i))}}class Sg{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Ve(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let r=function(){return VL}();const o=e.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new Sg(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Oe;function XL(t){switch(t){case G.OK:return pe(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return pe(15467,{code:t})}}function fI(t){if(t===void 0)return ji("GRPC error has no .code"),G.UNKNOWN;switch(t){case mt.OK:return G.OK;case mt.CANCELLED:return G.CANCELLED;case mt.UNKNOWN:return G.UNKNOWN;case mt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case mt.INTERNAL:return G.INTERNAL;case mt.UNAVAILABLE:return G.UNAVAILABLE;case mt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case mt.NOT_FOUND:return G.NOT_FOUND;case mt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case mt.ABORTED:return G.ABORTED;case mt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case mt.DATA_LOSS:return G.DATA_LOSS;default:return pe(39323,{code:t})}}(Oe=mt||(mt={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL=new Rr([4294967295,4294967295],0);function Oy(t){const e=bT().encode(t),n=new ST;return n.update(e),new Uint8Array(n.digest())}function My(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Rr([n,i],0),new Rr([r,o],0)]}class Pg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new vl(`Invalid padding: ${n}`);if(i<0)throw new vl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new vl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new vl(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Rr.fromNumber(this.fe)}pe(e,n,i){let r=e.add(n.multiply(Rr.fromNumber(i)));return r.compare(JL)===1&&(r=new Rr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Oy(e),[i,r]=My(n);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,r,o);if(!this.ye(l))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Pg(o,r,n);return i.forEach(d=>l.insert(d)),l}insert(e){if(this.fe===0)return;const n=Oy(e),[i,r]=My(n);for(let o=0;o<this.hashCount;o++){const l=this.pe(i,r,o);this.we(l)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class vl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Sd(_e.min(),r,new it(Te),Wi(),ke())}}class wu{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new wu(i,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n,i,r){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=r}}class pI{constructor(e,n){this.targetId=e,this.De=n}}class mI{constructor(e,n,i=kt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Dy{constructor(){this.ve=0,this.Ce=Vy(),this.Fe=kt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ke(),n=ke(),i=ke();return this.Ce.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:pe(38017,{changeType:o})}}),new wu(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=Vy()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ve(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class e2{constructor(e){this.We=e,this.Ge=new Map,this.ze=Wi(),this.je=Lc(),this.Je=Lc(),this.He=new it(Te)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:pe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((i,r)=>{this.nt(r)&&n(r)})}it(e){const n=e.targetId,i=e.De.count,r=this.st(n);if(r){const o=r.target;if(jp(o))if(i===0){const l=new oe(o.path);this.Xe(n,l,Bt.newNoDocument(l,_e.min()))}else Ve(i===1,20013,{expectedCount:i});else{const l=this.ot(n);if(l!==i){const d=this._t(e),h=d?this.ut(d,e,l):1;if(h!==0){this.rt(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let l,d;try{l=Vr(i).toUint8Array()}catch(h){if(h instanceof zT)return Hi("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{d=new Pg(l,r,o)}catch(h){return Hi(h instanceof vl?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return d.fe===0?null:d}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const l=this.We.lt(),d=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.Xe(n,o,null),r++)}),r}Pt(e){const n=new Map;this.Ge.forEach((o,l)=>{const d=this.st(l);if(d){if(o.current&&jp(d.target)){const h=new oe(d.target.path);this.Tt(h).has(l)||this.It(l,h)||this.Xe(l,h,Bt.newNoDocument(h,e))}o.Ne&&(n.set(l,o.Le()),o.ke())}});let i=ke();this.Je.forEach((o,l)=>{let d=!0;l.forEachWhile(h=>{const f=this.st(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(o))}),this.ze.forEach((o,l)=>l.setReadTime(e));const r=new Sd(e,n,this.He,this.ze,i);return this.ze=Wi(),this.je=Lc(),this.Je=Lc(),this.He=new it(Te),r}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const r=this.tt(e);this.It(e,n)?r.qe(n,1):r.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Dy,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Tt(Te),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Tt(Te),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Dy),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Lc(){return new it(oe.comparator)}function Vy(){return new it(oe.comparator)}const t2={asc:"ASCENDING",desc:"DESCENDING"},n2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},i2={and:"AND",or:"OR"};class r2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $p(t,e){return t.useProto3Json||_d(e)?e:{value:e}}function Bh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function s2(t,e){return Bh(t,e.toTimestamp())}function fi(t){return Ve(!!t,49232),_e.fromTimestamp(function(n){const i=Dr(n);return new We(i.seconds,i.nanos)}(t))}function Ag(t,e){return qp(t,e).canonicalString()}function qp(t,e){const n=function(r){return new Ge(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function _I(t){const e=Ge.fromString(t);return Ve(TI(e),10190,{key:e.toString()}),e}function Gp(t,e){return Ag(t.databaseId,e.path)}function Af(t,e){const n=_I(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(yI(n))}function vI(t,e){return Ag(t.databaseId,e)}function o2(t){const e=_I(t);return e.length===4?Ge.emptyPath():yI(e)}function Zp(t){return new Ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yI(t){return Ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Fy(t,e,n){return{name:Gp(t,e),fields:n.value.mapValue.fields}}function a2(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:pe(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,g){return f.useProto3Json?(Ve(g===void 0||typeof g=="string",58123),kt.fromBase64String(g||"")):(Ve(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),kt.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(f){const g=f.code===void 0?G.UNKNOWN:fI(f.code);return new ne(g,f.message||"")}(l);n=new mI(i,r,o,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Af(t,i.document.name),o=fi(i.document.updateTime),l=i.document.createTime?fi(i.document.createTime):_e.min(),d=new tn({mapValue:{fields:i.document.fields}}),h=Bt.newFoundDocument(r,o,l,d),f=i.targetIds||[],g=i.removedTargetIds||[];n=new Jc(f,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Af(t,i.document),o=i.readTime?fi(i.readTime):_e.min(),l=Bt.newNoDocument(r,o),d=i.removedTargetIds||[];n=new Jc([],d,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Af(t,i.document),o=i.removedTargetIds||[];n=new Jc([],o,r,null)}else{if(!("filter"in e))return pe(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new YL(r,o),d=i.targetId;n=new pI(d,l)}}return n}function l2(t,e){let n;if(e instanceof yu)n={update:Fy(t,e.key,e.value)};else if(e instanceof dI)n={delete:Gp(t,e.key)};else if(e instanceof Gr)n={update:Fy(t,e.key,e.data),updateMask:_2(e.fieldMask)};else{if(!(e instanceof ZL))return pe(16599,{Rt:e.type});n={verify:Gp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,l){const d=l.transform;if(d instanceof zh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof su)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ou)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Uh)return{fieldPath:l.field.canonicalString(),increment:d.Ee};throw pe(20930,{transform:l.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:s2(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:pe(27497)}(t,e.precondition)),n}function u2(t,e){return t&&t.length>0?(Ve(e!==void 0,14353),t.map(n=>function(r,o){let l=r.updateTime?fi(r.updateTime):fi(o);return l.isEqual(_e.min())&&(l=fi(o)),new $L(l,r.transformResults||[])}(n,e))):[]}function c2(t,e){return{documents:[vI(t,e.path)]}}function h2(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=vI(t,r);const o=function(f){if(f.length!==0)return EI(Qn.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(f){if(f.length!==0)return f.map(g=>function(w){return{field:Eo(w.field),direction:p2(w.dir)}}(g))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const d=$p(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{Vt:n,parent:r}}function d2(t){let e=o2(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ve(i===1,65062);const g=n.from[0];g.allDescendants?r=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=function(v){const w=wI(v);return w instanceof Qn&&KT(w)?w.getFilters():[w]}(n.where));let l=[];n.orderBy&&(l=function(v){return v.map(w=>function(C){return new Fh(To(C.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(w))}(n.orderBy));let d=null;n.limit&&(d=function(v){let w;return w=typeof v=="object"?v.value:v,_d(w)?null:w}(n.limit));let h=null;n.startAt&&(h=function(v){const w=!!v.before,S=v.values||[];return new Vh(S,w)}(n.startAt));let f=null;return n.endAt&&(f=function(v){const w=!v.before,S=v.values||[];return new Vh(S,w)}(n.endAt)),NL(e,r,l,o,d,"F",h,f)}function f2(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=To(n.unaryFilter.field);return _t.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=To(n.unaryFilter.field);return _t.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=To(n.unaryFilter.field);return _t.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=To(n.unaryFilter.field);return _t.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}}(t):t.fieldFilter!==void 0?function(n){return _t.create(To(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Qn.create(n.compositeFilter.filters.map(i=>wI(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return pe(1026)}}(n.compositeFilter.op))}(t):pe(30097,{filter:t})}function p2(t){return t2[t]}function m2(t){return n2[t]}function g2(t){return i2[t]}function Eo(t){return{fieldPath:t.canonicalString()}}function To(t){return Rt.fromServerFormat(t.fieldPath)}function EI(t){return t instanceof _t?function(n){if(n.op==="=="){if(Py(n.value))return{unaryFilter:{field:Eo(n.field),op:"IS_NAN"}};if(Sy(n.value))return{unaryFilter:{field:Eo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Py(n.value))return{unaryFilter:{field:Eo(n.field),op:"IS_NOT_NAN"}};if(Sy(n.value))return{unaryFilter:{field:Eo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Eo(n.field),op:m2(n.op),value:n.value}}}(t):t instanceof Qn?function(n){const i=n.getFilters().map(r=>EI(r));return i.length===1?i[0]:{compositeFilter:{op:g2(n.op),filters:i}}}(t):pe(54877,{filter:t})}function _2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function TI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n,i,r,o=_e.min(),l=_e.min(),d=kt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=h}withSequenceNumber(e){return new mr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e){this.gt=e}}function y2(t){const e=d2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Wp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(){this.Dn=new E2}addToCollectionParentIndex(e,n){return this.Dn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(Mr.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(Mr.min())}updateCollectionGroup(e,n,i){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class E2{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Tt(Ge.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Tt(Ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},II=41943040;class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(II,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new oa(0)}static ur(){return new oa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="LruGarbageCollector",T2=1048576;function By([t,e],[n,i]){const r=Te(t,n);return r===0?Te(e,i):r}class I2{constructor(e){this.Tr=e,this.buffer=new Tt(By),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();By(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class S2{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ie(Uy,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ga(n)?ie(Uy,"Ignoring IndexedDB error during garbage collection: ",n):await ma(n)}await this.Rr(3e5)})}}class P2{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(gd.ue);const i=new I2(n);return this.Vr.forEachTarget(e,r=>i.Er(r.sequenceNumber)).next(()=>this.Vr.gr(e,r=>i.Er(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(zy)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zy):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,r,o,l,d,h,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),r=this.params.maximumSequenceNumbersToCollect):r=v,l=Date.now(),this.nthSequenceNumber(e,r))).next(v=>(i=v,d=Date.now(),this.removeTargets(e,i,n))).next(v=>(o=v,h=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(f=Date.now(),yo()<=xe.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${r} in `+(d-l)+`ms
	Removed ${o} targets in `+(h-d)+`ms
	Removed ${v} documents in `+(f-h)+`ms
Total Duration: ${f-g}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:v})))}}function A2(t,e){return new P2(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(){this.changes=new Vs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Z.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&bl(i.mutation,r,pn.empty(),We.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ke()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ke()){const r=gs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let l=_l();return o.forEach((d,h)=>{l=l.insert(d,h.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=gs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ke()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((l,d)=>{n.set(l,d)})})}computeViews(e,n,i,r){let o=Wi();const l=Nl(),d=function(){return Nl()}();return n.forEach((h,f)=>{const g=i.get(f.key);r.has(f.key)&&(g===void 0||g.mutation instanceof Gr)?o=o.insert(f.key,f):g!==void 0?(l.set(f.key,g.mutation.getFieldMask()),bl(g.mutation,f,g.mutation.getFieldMask(),We.now())):l.set(f.key,pn.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,g)=>l.set(f,g)),n.forEach((f,g)=>{var v;return d.set(f,new R2(g,(v=l.get(f))!==null&&v!==void 0?v:null))}),d))}recalculateAndSaveOverlays(e,n){const i=Nl();let r=new it((l,d)=>l-d),o=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const d of l)d.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let g=i.get(h)||pn.empty();g=d.applyToLocalView(f,g),i.set(h,g);const v=(r.get(d.batchId)||ke()).add(h);r=r.insert(d.batchId,v)})}).next(()=>{const l=[],d=r.getReverseIterator();for(;d.hasNext();){const h=d.getNext(),f=h.key,g=h.value,v=rI();g.forEach(w=>{if(!o.has(w)){const S=cI(n.get(w),i.get(w));S!==null&&v.set(w,S),o=o.add(w)}}),l.push(this.documentOverlayCache.saveOverlays(e,f,v))}return Z.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(l){return oe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):JT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):Z.resolve(gs());let d=nu,h=o;return l.next(f=>Z.forEach(f,(g,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),o.get(g)?Z.resolve():this.remoteDocumentCache.getEntry(e,g).next(w=>{h=h.insert(g,w)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,ke())).next(g=>({batchId:d,changes:iI(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(i=>{let r=_l();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let l=_l();return this.indexManager.getCollectionParents(e,o).next(d=>Z.forEach(d,h=>{const f=function(v,w){return new _a(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(g=>{g.forEach((v,w)=>{l=l.insert(v,w)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(l=>{o.forEach((h,f)=>{const g=f.getKey();l.get(g)===null&&(l=l.insert(g,Bt.newInvalidDocument(g)))});let d=_l();return l.forEach((h,f)=>{const g=o.get(h);g!==void 0&&bl(g.mutation,f,pn.empty(),We.now()),Ed(n,f)&&(d=d.insert(h,f))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(r){return{id:r.id,version:r.version,createTime:fi(r.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(r){return{name:r.name,query:y2(r.bundledQuery),readTime:fi(r.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(){this.overlays=new it(oe.comparator),this.kr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const i=gs();return Z.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.wt(e,n,o)}),Z.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.kr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(i)),Z.resolve()}getOverlaysForCollection(e,n,i){const r=gs(),o=n.length+1,l=new oe(n.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const h=d.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return Z.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new it((f,g)=>f-g);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let g=o.get(f.largestBatchId);g===null&&(g=gs(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const d=gs(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,g)=>d.set(f,g)),!(d.size()>=r)););return Z.resolve(d)}wt(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.kr.get(r.largestBatchId).delete(i.key);this.kr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new QL(n,i));let o=this.kr.get(n);o===void 0&&(o=ke(),this.kr.set(n,o)),this.kr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(){this.qr=new Tt(At.Qr),this.$r=new Tt(At.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new At(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Wr(new At(e,n))}Gr(e,n){e.forEach(i=>this.removeReference(i,n))}zr(e){const n=new oe(new Ge([])),i=new At(n,e),r=new At(n,e+1),o=[];return this.$r.forEachInRange([i,r],l=>{this.Wr(l),o.push(l.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new oe(new Ge([])),i=new At(n,e),r=new At(n,e+1);let o=ke();return this.$r.forEachInRange([i,r],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new At(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class At{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return oe.comparator(e.key,n.key)||Te(e.Hr,n.Hr)}static Ur(e,n){return Te(e.Hr,n.Hr)||oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Tt(At.Qr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new KL(o,n,i,r);this.mutationQueue.push(l);for(const d of r)this.Yr=this.Yr.add(new At(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return Z.resolve(l)}lookupMutationBatch(e,n){return Z.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Xr(i),o=r<0?0:r;return Z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?vg:this.er-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new At(n,0),r=new At(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([i,r],l=>{const d=this.Zr(l.Hr);o.push(d)}),Z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Tt(Te);return n.forEach(r=>{const o=new At(r,0),l=new At(r,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,l],d=>{i=i.add(d.Hr)})}),Z.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;oe.isDocumentKey(o)||(o=o.child(""));const l=new At(new oe(o),0);let d=new Tt(Te);return this.Yr.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(d=d.add(h.Hr)),!0)},l),Z.resolve(this.ei(d))}ei(e){const n=[];return e.forEach(i=>{const r=this.Zr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ve(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return Z.forEach(n.mutations,r=>{const o=new At(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,n){const i=new At(n,0),r=this.Yr.firstAfterOrEqual(i);return Z.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e){this.ni=e,this.docs=function(){return new it(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,l=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Z.resolve(i?i.document.mutableCopy():Bt.newInvalidDocument(n))}getEntries(e,n){let i=Wi();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Bt.newInvalidDocument(r))}),Z.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=Wi();const l=n.path,d=new oe(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(d);for(;h.hasNext();){const{key:f,value:{document:g}}=h.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||cL(uL(g),i)<=0||(r.has(g.key)||Ed(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return Z.resolve(o)}getAllFromCollectionGroup(e,n,i,r){pe(9500)}ri(e,n){return Z.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new M2(this)}getSize(e){return Z.resolve(this.size)}}class M2 extends C2{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Or.addEntry(e,r)):this.Or.removeEntry(i)}),Z.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e){this.persistence=e,this.ii=new Vs(n=>Eg(n),Tg),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.si=0,this.oi=new Cg,this.targetCount=0,this._i=oa.ar()}forEachTarget(e,n){return this.ii.forEach((i,r)=>n(r)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),Z.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new oa(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.hr(n),Z.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.ii.forEach((l,d)=>{d.sequenceNumber<=n&&i.get(d.targetId)===null&&(this.ii.delete(l),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)}),Z.waitFor(o).next(()=>r)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return Z.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),Z.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(l=>{o.push(r.markPotentiallyOrphaned(e,l))}),Z.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return Z.resolve(i)}containsKey(e,n){return Z.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,n){this.ai={},this.overlays={},this.ui=new gd(0),this.ci=!1,this.ci=!0,this.li=new N2,this.referenceDelegate=e(this),this.hi=new D2(this),this.indexManager=new w2,this.remoteDocumentCache=function(r){return new O2(r)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new v2(n),this.Ti=new k2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new L2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new b2(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){ie("MemoryPersistence","Starting transaction:",e);const r=new V2(this.ui.next());return this.referenceDelegate.Ii(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ei(e,n){return Z.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,n)))}}class V2 extends dL{constructor(e){super(),this.currentSequenceNumber=e}}class Rg{constructor(e){this.persistence=e,this.Ai=new Cg,this.Ri=null}static Vi(e){return new Rg(e)}get mi(){if(this.Ri)return this.Ri;throw pe(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),Z.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(r=>this.mi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.mi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.mi,i=>{const r=oe.fromPath(i);return this.fi(e,r).next(o=>{o||n.removeEntry(r,_e.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return Z.or([()=>Z.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class jh{constructor(e,n){this.persistence=e,this.gi=new Vs(i=>mL(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=A2(this,n)}static Vi(e,n){return new jh(e,n)}Ii(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}yr(e){let n=0;return this.gr(e,i=>{n++}).next(()=>n)}gr(e,n){return Z.forEach(this.gi,(i,r)=>this.Sr(e,i,r).next(o=>o?Z.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ri(e,l=>this.Sr(e,l,n).next(d=>{d||(i++,o.removeEntry(l,_e.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),Z.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Qc(e.data.value)),n}Sr(e,n,i){return Z.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.gi.get(n);return Z.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=r}static Es(e,n){let i=ke(),r=ke();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new xg(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return tC()?8:fL(Ht())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ps(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ys(e,n,r,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new F2;return this.ws(e,n,l).next(d=>{if(o.result=d,this.Rs)return this.Ss(e,n,l,d.size)})}).next(()=>o.result)}Ss(e,n,i,r){return i.documentReadCount<this.Vs?(yo()<=xe.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",wo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Z.resolve()):(yo()<=xe.DEBUG&&ie("QueryEngine","Query:",wo(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.fs*r?(yo()<=xe.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",wo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hi(n))):Z.resolve())}ps(e,n){if(xy(n))return Z.resolve(null);let i=hi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Wp(n,null,"F"),i=hi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=ke(...o);return this.gs.getDocuments(e,l).next(d=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.bs(n,d);return this.Ds(n,f,l,h.readTime)?this.ps(e,Wp(n,null,"F")):this.vs(e,f,n,h)}))})))}ys(e,n,i,r){return xy(n)||r.isEqual(_e.min())?Z.resolve(null):this.gs.getDocuments(e,i).next(o=>{const l=this.bs(n,o);return this.Ds(n,l,i,r)?Z.resolve(null):(yo()<=xe.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),wo(n)),this.vs(e,l,n,lL(r,nu)).next(d=>d))})}bs(e,n){let i=new Tt(tI(e));return n.forEach((r,o)=>{Ed(e,o)&&(i=i.add(o))}),i}Ds(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}ws(e,n,i){return yo()<=xe.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",wo(n)),this.gs.getDocumentsMatchingQuery(e,n,Mr.min(),i)}vs(e,n,i,r){return this.gs.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="LocalStore",U2=3e8;class B2{constructor(e,n,i,r){this.persistence=e,this.Cs=n,this.serializer=r,this.Fs=new it(Te),this.Ms=new Vs(o=>Eg(o),Tg),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new x2(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function j2(t,e,n,i){return new B2(t,e,n,i)}async function PI(t,e){const n=ye(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],d=[];let h=ke();for(const f of r){l.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}for(const f of o){d.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}return n.localDocuments.getDocuments(i,h).next(f=>({Bs:f,removedBatchIds:l,addedBatchIds:d}))})})}function H2(t,e){const n=ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(d,h,f,g){const v=f.batch,w=v.keys();let S=Z.resolve();return w.forEach(C=>{S=S.next(()=>g.getEntry(h,C)).next(N=>{const z=f.docVersions.get(C);Ve(z!==null,48541),N.version.compareTo(z)<0&&(v.applyToRemoteDocument(N,f),N.isValidDocument()&&(N.setReadTime(f.commitVersion),g.addEntry(N)))})}),S.next(()=>d.mutationQueue.removeMutationBatch(h,v))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let h=ke();for(let f=0;f<d.mutationResults.length;++f)d.mutationResults[f].transformResults.length>0&&(h=h.add(d.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function AI(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function W2(t,e){const n=ye(t),i=e.snapshotVersion;let r=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Os.newChangeBuffer({trackRemovals:!0});r=n.Fs;const d=[];e.targetChanges.forEach((g,v)=>{const w=r.get(v);if(!w)return;d.push(n.hi.removeMatchingKeys(o,g.removedDocuments,v).next(()=>n.hi.addMatchingKeys(o,g.addedDocuments,v)));let S=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?S=S.withResumeToken(kt.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):g.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(g.resumeToken,i)),r=r.insert(v,S),function(N,z,k){return N.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=U2?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(w,S,g)&&d.push(n.hi.updateTargetData(o,S))});let h=Wi(),f=ke();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))}),d.push($2(o,l,e.documentUpdates).next(g=>{h=g.Ls,f=g.ks})),!i.isEqual(_e.min())){const g=n.hi.getLastRemoteSnapshotVersion(o).next(v=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,i));d.push(g)}return Z.waitFor(d).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(n.Fs=r,o))}function $2(t,e,n){let i=ke(),r=ke();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=Wi();return n.forEach((d,h)=>{const f=o.get(d);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(d)),h.isNoDocument()&&h.version.isEqual(_e.min())?(e.removeEntry(d,h.readTime),l=l.insert(d,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),l=l.insert(d,h)):ie(kg,"Ignoring outdated watch update for ",d,". Current version:",f.version," Watch version:",h.version)}),{Ls:l,ks:r}})}function q2(t,e){const n=ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=vg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function G2(t,e){const n=ye(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.hi.getTargetData(i,e).next(o=>o?(r=o,Z.resolve(r)):n.hi.allocateTargetId(i).next(l=>(r=new mr(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Fs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i})}async function Kp(t,e,n){const i=ye(t),r=i.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,r))}catch(l){if(!ga(l))throw l;ie(kg,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(r.target)}function jy(t,e,n){const i=ye(t);let r=_e.min(),o=ke();return i.persistence.runTransaction("Execute query","readwrite",l=>function(h,f,g){const v=ye(h),w=v.Ms.get(g);return w!==void 0?Z.resolve(v.Fs.get(w)):v.hi.getTargetData(f,g)}(i,l,hi(e)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(l,d.targetId).next(h=>{o=h})}).next(()=>i.Cs.getDocumentsMatchingQuery(l,e,n?r:_e.min(),n?o:ke())).next(d=>(Z2(i,OL(e),d),{documents:d,qs:o})))}function Z2(t,e,n){let i=t.xs.get(e)||_e.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.xs.set(e,i)}class Hy{constructor(){this.activeTargetIds=UL()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class K2{constructor(){this.Fo=new Hy,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Hy,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="ConnectivityMonitor";class $y{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ie(Wy,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ie(Wy,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nc=null;function Qp(){return Nc===null?Nc=function(){return 268435456+Math.round(2147483648*Math.random())}():Nc++,"0x"+Nc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf="RestConnection",Y2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class X2{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.Ko=this.databaseId.database===Mh?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,n,i,r,o){const l=Qp(),d=this.Go(e,n.toUriEncodedString());ie(Cf,`Sending RPC '${e}' ${l}:`,d,i);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(h,r,o);const{host:f}=new URL(d),g=Ms(f);return this.jo(e,d,h,i,g).then(v=>(ie(Cf,`Received RPC '${e}' ${l}: `,v),v),v=>{throw Hi(Cf,`RPC '${e}' ${l} failed with error: `,v,"url: ",d,"request:",i),v})}Jo(e,n,i,r,o,l){return this.Wo(e,n,i,r,o)}zo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}Go(e,n){const i=Y2[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection";class eN extends X2{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,r,o){const l=Qp();return new Promise((d,h)=>{const f=new PT;f.setWithCredentials(!0),f.listenOnce(AT.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Kc.NO_ERROR:const v=f.getResponseJson();ie(Ft,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),d(v);break;case Kc.TIMEOUT:ie(Ft,`RPC '${e}' ${l} timed out`),h(new ne(G.DEADLINE_EXCEEDED,"Request time out"));break;case Kc.HTTP_ERROR:const w=f.getStatus();if(ie(Ft,`RPC '${e}' ${l} failed with status:`,w,"response text:",f.getResponseText()),w>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const C=S==null?void 0:S.error;if(C&&C.status&&C.message){const N=function(k){const P=k.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(P)>=0?P:G.UNKNOWN}(C.status);h(new ne(N,C.message))}else h(new ne(G.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new ne(G.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{c_:e,streamId:l,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{ie(Ft,`RPC '${e}' ${l} completed.`)}});const g=JSON.stringify(r);ie(Ft,`RPC '${e}' ${l} sending request:`,r),f.send(n,"POST",g,i,15)})}P_(e,n,i){const r=Qp(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=xT(),d=RT(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.zo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const g=o.join("");ie(Ft,`Creating RPC '${e}' stream ${r}: ${g}`,h);const v=l.createWebChannel(g,h);this.T_(v);let w=!1,S=!1;const C=new J2({Ho:z=>{S?ie(Ft,`Not sending because RPC '${e}' stream ${r} is closed:`,z):(w||(ie(Ft,`Opening RPC '${e}' stream ${r} transport.`),v.open(),w=!0),ie(Ft,`RPC '${e}' stream ${r} sending:`,z),v.send(z))},Yo:()=>v.close()}),N=(z,k,P)=>{z.listen(k,R=>{try{P(R)}catch(j){setTimeout(()=>{throw j},0)}})};return N(v,gl.EventType.OPEN,()=>{S||(ie(Ft,`RPC '${e}' stream ${r} transport opened.`),C.s_())}),N(v,gl.EventType.CLOSE,()=>{S||(S=!0,ie(Ft,`RPC '${e}' stream ${r} transport closed`),C.__(),this.I_(v))}),N(v,gl.EventType.ERROR,z=>{S||(S=!0,Hi(Ft,`RPC '${e}' stream ${r} transport errored. Name:`,z.name,"Message:",z.message),C.__(new ne(G.UNAVAILABLE,"The operation could not be completed")))}),N(v,gl.EventType.MESSAGE,z=>{var k;if(!S){const P=z.data[0];Ve(!!P,16349);const R=P,j=(R==null?void 0:R.error)||((k=R[0])===null||k===void 0?void 0:k.error);if(j){ie(Ft,`RPC '${e}' stream ${r} received error:`,j);const K=j.status;let $=function(x){const b=mt[x];if(b!==void 0)return fI(b)}(K),A=j.message;$===void 0&&($=G.INTERNAL,A="Unknown error status: "+K+" with message "+j.message),S=!0,C.__(new ne($,A)),v.close()}else ie(Ft,`RPC '${e}' stream ${r} received:`,P),C.a_(P)}}),N(d,CT.STAT_EVENT,z=>{z.stat===Vp.PROXY?ie(Ft,`RPC '${e}' stream ${r} detected buffering proxy`):z.stat===Vp.NOPROXY&&ie(Ft,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{C.o_()},0),C}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Rf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(t){return new r2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=r,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),r=Math.max(0,n-i);r>0&&ie("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,r,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="PersistentStream";class RI{constructor(e,n,i,r,o,l,d,h){this.Fi=e,this.w_=i,this.S_=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=h,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new CI(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(ji(n.toString()),ji("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.b_===n&&this.W_(i,r)},i=>{e(()=>{const r=new ne(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(r)})})}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(r=>{i(()=>this.G_(r))}),this.stream.onMessage(r=>{i(()=>++this.C_==1?this.j_(r):this.onNext(r))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ie(qy,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(ie(qy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tN extends RI{constructor(e,n,i,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=a2(this.serializer,e),i=function(o){if(!("targetChange"in o))return _e.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?_e.min():l.readTime?fi(l.readTime):_e.min()}(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=Zp(this.serializer),n.addTarget=function(o,l){let d;const h=l.target;if(d=jp(h)?{documents:c2(o,h)}:{query:h2(o,h).Vt},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){d.resumeToken=gI(o,l.resumeToken);const f=$p(o,l.expectedCount);f!==null&&(d.expectedCount=f)}else if(l.snapshotVersion.compareTo(_e.min())>0){d.readTime=Bh(o,l.snapshotVersion.toTimestamp());const f=$p(o,l.expectedCount);f!==null&&(d.expectedCount=f)}return d}(this.serializer,e);const i=f2(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=Zp(this.serializer),n.removeTarget=e,this.k_(n)}}class nN extends RI{constructor(e,n,i,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=u2(e.writeResults,e.commitTime),i=fi(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=Zp(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>l2(this.serializer,i))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{}class rN extends iN{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ra=!1}ia(){if(this.ra)throw new ne(G.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Wo(e,qp(n,i),r,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(G.UNKNOWN,o.toString())})}Jo(e,n,i,r,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,d])=>this.connection.Jo(e,qp(n,i),r,l,d,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ne(G.UNKNOWN,l.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class sN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ji(n),this._a=!1):ie("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="RemoteStore";class oN{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(l=>{i.enqueueAndForget(async()=>{Fs(this)&&(ie(ks,"Restarting streams for network reachability change."),await async function(h){const f=ye(h);f.Ia.add(4),await Eu(f),f.Aa.set("Unknown"),f.Ia.delete(4),await Ad(f)}(this))})}),this.Aa=new sN(i,r)}}async function Ad(t){if(Fs(t))for(const e of t.da)await e(!0)}async function Eu(t){for(const e of t.da)await e(!1)}function xI(t,e){const n=ye(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Og(n)?bg(n):va(n).x_()&&Ng(n,e))}function Lg(t,e){const n=ye(t),i=va(n);n.Ta.delete(e),i.x_()&&kI(n,e),n.Ta.size===0&&(i.x_()?i.B_():Fs(n)&&n.Aa.set("Unknown"))}function Ng(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}va(t).H_(e)}function kI(t,e){t.Ra.$e(e),va(t).Y_(e)}function bg(t){t.Ra=new e2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),va(t).start(),t.Aa.aa()}function Og(t){return Fs(t)&&!va(t).M_()&&t.Ta.size>0}function Fs(t){return ye(t).Ia.size===0}function LI(t){t.Ra=void 0}async function aN(t){t.Aa.set("Online")}async function lN(t){t.Ta.forEach((e,n)=>{Ng(t,e)})}async function uN(t,e){LI(t),Og(t)?(t.Aa.la(e),bg(t)):t.Aa.set("Unknown")}async function cN(t,e,n){if(t.Aa.set("Online"),e instanceof mI&&e.state===2&&e.cause)try{await async function(r,o){const l=o.cause;for(const d of o.targetIds)r.Ta.has(d)&&(await r.remoteSyncer.rejectListen(d,l),r.Ta.delete(d),r.Ra.removeTarget(d))}(t,e)}catch(i){ie(ks,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Hh(t,i)}else if(e instanceof Jc?t.Ra.Ye(e):e instanceof pI?t.Ra.it(e):t.Ra.et(e),!n.isEqual(_e.min()))try{const i=await AI(t.localStore);n.compareTo(i)>=0&&await function(o,l){const d=o.Ra.Pt(l);return d.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const g=o.Ta.get(f);g&&o.Ta.set(f,g.withResumeToken(h.resumeToken,l))}}),d.targetMismatches.forEach((h,f)=>{const g=o.Ta.get(h);if(!g)return;o.Ta.set(h,g.withResumeToken(kt.EMPTY_BYTE_STRING,g.snapshotVersion)),kI(o,h);const v=new mr(g.target,h,f,g.sequenceNumber);Ng(o,v)}),o.remoteSyncer.applyRemoteEvent(d)}(t,n)}catch(i){ie(ks,"Failed to raise snapshot:",i),await Hh(t,i)}}async function Hh(t,e,n){if(!ga(e))throw e;t.Ia.add(1),await Eu(t),t.Aa.set("Offline"),n||(n=()=>AI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie(ks,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Ad(t)})}function NI(t,e){return e().catch(n=>Hh(t,n,e))}async function Cd(t){const e=ye(t),n=zr(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:vg;for(;hN(e);)try{const r=await q2(e.localStore,i);if(r===null){e.Pa.length===0&&n.B_();break}i=r.batchId,dN(e,r)}catch(r){await Hh(e,r)}bI(e)&&OI(e)}function hN(t){return Fs(t)&&t.Pa.length<10}function dN(t,e){t.Pa.push(e);const n=zr(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function bI(t){return Fs(t)&&!zr(t).M_()&&t.Pa.length>0}function OI(t){zr(t).start()}async function fN(t){zr(t).na()}async function pN(t){const e=zr(t);for(const n of t.Pa)e.X_(n.mutations)}async function mN(t,e,n){const i=t.Pa.shift(),r=Sg.from(i,e,n);await NI(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Cd(t)}async function gN(t,e){e&&zr(t).Z_&&await async function(i,r){if(function(l){return XL(l)&&l!==G.ABORTED}(r.code)){const o=i.Pa.shift();zr(i).N_(),await NI(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await Cd(i)}}(t,e),bI(t)&&OI(t)}async function Gy(t,e){const n=ye(t);n.asyncQueue.verifyOperationInProgress(),ie(ks,"RemoteStore received new credentials");const i=Fs(n);n.Ia.add(3),await Eu(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Ad(n)}async function _N(t,e){const n=ye(t);e?(n.Ia.delete(2),await Ad(n)):e||(n.Ia.add(2),await Eu(n),n.Aa.set("Unknown"))}function va(t){return t.Va||(t.Va=function(n,i,r){const o=ye(n);return o.ia(),new tN(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Zo:aN.bind(null,t),e_:lN.bind(null,t),n_:uN.bind(null,t),J_:cN.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Og(t)?bg(t):t.Aa.set("Unknown")):(await t.Va.stop(),LI(t))})),t.Va}function zr(t){return t.ma||(t.ma=function(n,i,r){const o=ye(n);return o.ia(),new nN(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:fN.bind(null,t),n_:gN.bind(null,t),ea:pN.bind(null,t),ta:mN.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Cd(t)):(await t.ma.stop(),t.Pa.length>0&&(ie(ks,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const l=Date.now()+i,d=new Mg(e,n,l,r,o);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dg(t,e){if(ji("AsyncQueue",`${e}: ${t}`),ga(t))return new ne(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{static emptySet(e){return new Go(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||oe.comparator(n.key,i.key):(n,i)=>oe.comparator(n.key,i.key),this.keyedMap=_l(),this.sortedSet=new it(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Go)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Go;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(){this.fa=new it(oe.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):pe(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,i)=>{e.push(i)}),e}}class aa{constructor(e,n,i,r,o,l,d,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const l=[];return n.forEach(d=>{l.push({type:0,doc:d})}),new aa(e,n,Go.emptySet(n),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class yN{constructor(){this.queries=Ky(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const r=ye(n),o=r.queries;r.queries=Ky(),o.forEach((l,d)=>{for(const h of d.wa)h.onError(i)})})(this,new ne(G.ABORTED,"Firestore shutting down"))}}function Ky(){return new Vs(t=>eI(t),wd)}async function MI(t,e){const n=ye(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.Sa()&&e.ba()&&(i=2):(o=new vN,i=e.ba()?0:1);try{switch(i){case 0:o.ya=await n.onListen(r,!0);break;case 1:o.ya=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(l){const d=Dg(l,`Initialization of query '${wo(e.query)}' failed`);return void e.onError(d)}n.queries.set(r,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&Vg(n)}async function DI(t,e){const n=ye(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const l=o.wa.indexOf(e);l>=0&&(o.wa.splice(l,1),o.wa.length===0?r=e.ba()?0:1:!o.Sa()&&e.ba()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function wN(t,e){const n=ye(t);let i=!1;for(const r of e){const o=r.query,l=n.queries.get(o);if(l){for(const d of l.wa)d.Ca(r)&&(i=!0);l.ya=r}}i&&Vg(n)}function EN(t,e,n){const i=ye(t),r=i.queries.get(e);if(r)for(const o of r.wa)o.onError(n);i.queries.delete(e)}function Vg(t){t.Da.forEach(e=>{e.next()})}var Yp,Qy;(Qy=Yp||(Yp={})).Fa="default",Qy.Cache="cache";class VI{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new aa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=aa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Yp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.key=e}}class zI{constructor(e){this.key=e}}class TN{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ke(),this.mutatedKeys=ke(),this.Xa=tI(e),this.eu=new Go(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new Zy,r=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,l=r,d=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((g,v)=>{const w=r.get(g),S=Ed(this.query,v)?v:null,C=!!w&&this.mutatedKeys.has(w.key),N=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let z=!1;w&&S?w.data.isEqual(S.data)?C!==N&&(i.track({type:3,doc:S}),z=!0):this.iu(w,S)||(i.track({type:2,doc:S}),z=!0,(h&&this.Xa(S,h)>0||f&&this.Xa(S,f)<0)&&(d=!0)):!w&&S?(i.track({type:0,doc:S}),z=!0):w&&!S&&(i.track({type:1,doc:w}),z=!0,(h||f)&&(d=!0)),z&&(S?(l=l.add(S),o=N?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{eu:l,ru:i,Ds:d,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort((g,v)=>function(S,C){const N=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{At:z})}};return N(S)-N(C)}(g.type,v.type)||this.Xa(g.doc,v.doc)),this.su(i),r=r!=null&&r;const d=n&&!r?this.ou():[],h=this.Za.size===0&&this.current&&!r?1:0,f=h!==this.Ya;return this.Ya=h,l.length!==0||f?{snapshot:new aa(this.query,e.eu,o,l,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Zy,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ke(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const n=[];return e.forEach(i=>{this.Za.has(i)||n.push(new zI(i))}),this.Za.forEach(i=>{e.has(i)||n.push(new FI(i))}),n}uu(e){this.Ha=e.qs,this.Za=ke();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return aa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Fg="SyncEngine";class IN{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class SN{constructor(e){this.key=e,this.lu=!1}}class PN{constructor(e,n,i,r,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new Vs(d=>eI(d),wd),this.Tu=new Map,this.Iu=new Set,this.du=new it(oe.comparator),this.Eu=new Map,this.Au=new Cg,this.Ru={},this.Vu=new Map,this.mu=oa.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function AN(t,e,n=!0){const i=$I(t);let r;const o=i.Pu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.cu()):r=await UI(i,e,n,!0),r}async function CN(t,e){const n=$I(t);await UI(n,e,!0,!1)}async function UI(t,e,n,i){const r=await G2(t.localStore,hi(e)),o=r.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let d;return i&&(d=await RN(t,e,o,l==="current",r.resumeToken)),t.isPrimaryClient&&n&&xI(t.remoteStore,r),d}async function RN(t,e,n,i,r){t.gu=(v,w,S)=>async function(N,z,k,P){let R=z.view.nu(k);R.Ds&&(R=await jy(N.localStore,z.query,!1).then(({documents:A})=>z.view.nu(A,R)));const j=P&&P.targetChanges.get(z.targetId),K=P&&P.targetMismatches.get(z.targetId)!=null,$=z.view.applyChanges(R,N.isPrimaryClient,j,K);return Xy(N,z.targetId,$._u),$.snapshot}(t,v,w,S);const o=await jy(t.localStore,e,!0),l=new TN(e,o.qs),d=l.nu(o.documents),h=wu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=l.applyChanges(d,t.isPrimaryClient,h);Xy(t,n,f._u);const g=new IN(e,n,l);return t.Pu.set(e,g),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),f.snapshot}async function xN(t,e,n){const i=ye(t),r=i.Pu.get(e),o=i.Tu.get(r.targetId);if(o.length>1)return i.Tu.set(r.targetId,o.filter(l=>!wd(l,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Kp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Lg(i.remoteStore,r.targetId),Xp(i,r.targetId)}).catch(ma)):(Xp(i,r.targetId),await Kp(i.localStore,r.targetId,!0))}async function kN(t,e){const n=ye(t),i=n.Pu.get(e),r=n.Tu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Lg(n.remoteStore,i.targetId))}async function LN(t,e,n){const i=FN(t);try{const r=await function(l,d){const h=ye(l),f=We.now(),g=d.reduce((S,C)=>S.add(C.key),ke());let v,w;return h.persistence.runTransaction("Locally write mutations","readwrite",S=>{let C=Wi(),N=ke();return h.Os.getEntries(S,g).next(z=>{C=z,C.forEach((k,P)=>{P.isValidDocument()||(N=N.add(k))})}).next(()=>h.localDocuments.getOverlayedDocuments(S,C)).next(z=>{v=z;const k=[];for(const P of d){const R=GL(P,v.get(P.key).overlayedDocument);R!=null&&k.push(new Gr(P.key,R,qT(R.value.mapValue),di.exists(!0)))}return h.mutationQueue.addMutationBatch(S,f,k,d)}).next(z=>{w=z;const k=z.applyToLocalDocumentSet(v,N);return h.documentOverlayCache.saveOverlays(S,z.batchId,k)})}).then(()=>({batchId:w.batchId,changes:iI(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(l,d,h){let f=l.Ru[l.currentUser.toKey()];f||(f=new it(Te)),f=f.insert(d,h),l.Ru[l.currentUser.toKey()]=f}(i,r.batchId,n),await Tu(i,r.changes),await Cd(i.remoteStore)}catch(r){const o=Dg(r,"Failed to persist write");n.reject(o)}}async function BI(t,e){const n=ye(t);try{const i=await W2(n.localStore,e);e.targetChanges.forEach((r,o)=>{const l=n.Eu.get(o);l&&(Ve(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.lu=!0:r.modifiedDocuments.size>0?Ve(l.lu,14607):r.removedDocuments.size>0&&(Ve(l.lu,42227),l.lu=!1))}),await Tu(n,i,e)}catch(i){await ma(i)}}function Yy(t,e,n){const i=ye(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Pu.forEach((o,l)=>{const d=l.view.va(e);d.snapshot&&r.push(d.snapshot)}),function(l,d){const h=ye(l);h.onlineState=d;let f=!1;h.queries.forEach((g,v)=>{for(const w of v.wa)w.va(d)&&(f=!0)}),f&&Vg(h)}(i.eventManager,e),r.length&&i.hu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function NN(t,e,n){const i=ye(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Eu.get(e),o=r&&r.key;if(o){let l=new it(oe.comparator);l=l.insert(o,Bt.newNoDocument(o,_e.min()));const d=ke().add(o),h=new Sd(_e.min(),new Map,new it(Te),l,d);await BI(i,h),i.du=i.du.remove(o),i.Eu.delete(e),zg(i)}else await Kp(i.localStore,e,!1).then(()=>Xp(i,e,n)).catch(ma)}async function bN(t,e){const n=ye(t),i=e.batch.batchId;try{const r=await H2(n.localStore,e);HI(n,i,null),jI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Tu(n,r)}catch(r){await ma(r)}}async function ON(t,e,n){const i=ye(t);try{const r=await function(l,d){const h=ye(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return h.mutationQueue.lookupMutationBatch(f,d).next(v=>(Ve(v!==null,37113),g=v.keys(),h.mutationQueue.removeMutationBatch(f,v))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,g,d)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>h.localDocuments.getDocuments(f,g))})}(i.localStore,e);HI(i,e,n),jI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Tu(i,r)}catch(r){await ma(r)}}function jI(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function HI(t,e,n){const i=ye(t);let r=i.Ru[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Ru[i.currentUser.toKey()]=r}}function Xp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(i=>{t.Au.containsKey(i)||WI(t,i)})}function WI(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Lg(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),zg(t))}function Xy(t,e,n){for(const i of n)i instanceof FI?(t.Au.addReference(i.key,e),MN(t,i)):i instanceof zI?(ie(Fg,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||WI(t,i.key)):pe(19791,{yu:i})}function MN(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(ie(Fg,"New document in limbo: "+n),t.Iu.add(i),zg(t))}function zg(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new oe(Ge.fromString(e)),i=t.mu.next();t.Eu.set(i,new SN(n)),t.du=t.du.insert(n,i),xI(t.remoteStore,new mr(hi(yd(n.path)),i,"TargetPurposeLimboResolution",gd.ue))}}async function Tu(t,e,n){const i=ye(t),r=[],o=[],l=[];i.Pu.isEmpty()||(i.Pu.forEach((d,h)=>{l.push(i.gu(h,e,n).then(f=>{var g;if((f||n)&&i.isPrimaryClient){const v=f?!f.fromCache:(g=n==null?void 0:n.targetChanges.get(h.targetId))===null||g===void 0?void 0:g.current;i.sharedClientState.updateQueryState(h.targetId,v?"current":"not-current")}if(f){r.push(f);const v=xg.Es(h.targetId,f);o.push(v)}}))}),await Promise.all(l),i.hu.J_(r),await async function(h,f){const g=ye(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>Z.forEach(f,w=>Z.forEach(w.Is,S=>g.persistence.referenceDelegate.addReference(v,w.targetId,S)).next(()=>Z.forEach(w.ds,S=>g.persistence.referenceDelegate.removeReference(v,w.targetId,S)))))}catch(v){if(!ga(v))throw v;ie(kg,"Failed to update sequence numbers: "+v)}for(const v of f){const w=v.targetId;if(!v.fromCache){const S=g.Fs.get(w),C=S.snapshotVersion,N=S.withLastLimboFreeSnapshotVersion(C);g.Fs=g.Fs.insert(w,N)}}}(i.localStore,o))}async function DN(t,e){const n=ye(t);if(!n.currentUser.isEqual(e)){ie(Fg,"User change. New user:",e.toKey());const i=await PI(n.localStore,e);n.currentUser=e,function(o,l){o.Vu.forEach(d=>{d.forEach(h=>{h.reject(new ne(G.CANCELLED,l))})}),o.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Tu(n,i.Bs)}}function VN(t,e){const n=ye(t),i=n.Eu.get(e);if(i&&i.lu)return ke().add(i.key);{let r=ke();const o=n.Tu.get(e);if(!o)return r;for(const l of o){const d=n.Pu.get(l);r=r.unionWith(d.view.tu)}return r}}function $I(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=BI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NN.bind(null,e),e.hu.J_=wN.bind(null,e.eventManager),e.hu.pu=EN.bind(null,e.eventManager),e}function FN(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ON.bind(null,e),e}class Wh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return j2(this.persistence,new z2,e.initialUser,this.serializer)}Du(e){return new SI(Rg.Vi,this.serializer)}bu(e){return new K2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wh.provider={build:()=>new Wh};class zN extends Wh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ve(this.persistence.referenceDelegate instanceof jh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new S2(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new SI(i=>jh.Vi(i,n),this.serializer)}}class Jp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Yy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=DN.bind(null,this.syncEngine),await _N(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yN}()}createDatastore(e){const n=Pd(e.databaseInfo.databaseId),i=function(o){return new eN(o)}(e.databaseInfo);return function(o,l,d,h){return new rN(o,l,d,h)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,l,d){return new oN(i,r,o,l,d)}(this.localStore,this.datastore,e.asyncQueue,n=>Yy(this.syncEngine,n,0),function(){return $y.C()?new $y:new Q2}())}createSyncEngine(e,n){return function(r,o,l,d,h,f,g){const v=new PN(r,o,l,d,h,f);return g&&(v.fu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=ye(r);ie(ks,"RemoteStore shutting down."),o.Ia.add(5),await Eu(o),o.Ea.shutdown(),o.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Jp.provider={build:()=>new Jp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ji("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="FirestoreClient";class UN{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=zt.UNAUTHENTICATED,this.clientId=pd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{ie(Ur,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(ie(Ur,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Dg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function xf(t,e){t.asyncQueue.verifyOperationInProgress(),ie(Ur,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await PI(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>{Hi("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{ie("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(r=>{Hi("Terminating Firestore due to IndexedDb database deletion failed",r)})}),t._offlineComponents=e}async function Jy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await BN(t);ie(Ur,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Gy(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Gy(e.remoteStore,r)),t._onlineComponents=e}async function BN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie(Ur,"Using user provided OfflineComponentProvider");try{await xf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===G.FAILED_PRECONDITION||r.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Hi("Error using user provided cache. Falling back to memory cache: "+n),await xf(t,new Wh)}}else ie(Ur,"Using default OfflineComponentProvider"),await xf(t,new zN(void 0));return t._offlineComponents}async function GI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie(Ur,"Using user provided OnlineComponentProvider"),await Jy(t,t._uninitializedComponentsProvider._online)):(ie(Ur,"Using default OnlineComponentProvider"),await Jy(t,new Jp))),t._onlineComponents}function jN(t){return GI(t).then(e=>e.syncEngine)}async function em(t){const e=await GI(t),n=e.eventManager;return n.onListen=AN.bind(null,e.syncEngine),n.onUnlisten=xN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=kN.bind(null,e.syncEngine),n}function HN(t,e,n={}){const i=new xr;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,d,h,f){const g=new qI({next:w=>{g.Ou(),l.enqueueAndForget(()=>DI(o,v));const S=w.docs.has(d);!S&&w.fromCache?f.reject(new ne(G.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&w.fromCache&&h&&h.source==="server"?f.reject(new ne(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(w)},error:w=>f.reject(w)}),v=new VI(yd(d.path),g,{includeMetadataChanges:!0,ka:!0});return MI(o,v)}(await em(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="firestore.googleapis.com",tw=!0;class nw{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=KI,this.ssl=tw}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:tw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=II;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<T2)throw new ne(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZI((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rd{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new NT;switch(i.type){case"firstParty":return new iL(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ne(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=ew.get(n);i&&(ie("ComponentProvider","Removing Datastore"),ew.delete(n),i.terminate())}(this),Promise.resolve()}}function Ug(t,e,n,i={}){var r;t=Ln(t,Rd);const o=Ms(e),l=t._getSettings(),d=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),h=`${e}:${n}`;o&&(eg(`https://${h}`),tg("Firestore",!0)),l.host!==KI&&l.host!==h&&Hi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},l),{host:h,ssl:o,emulatorOptions:i});if(!Ps(f,d)&&(t._setSettings(f),i.mockUserToken)){let g,v;if(typeof i.mockUserToken=="string")g=i.mockUserToken,v=zt.MOCK_USER;else{g=qA(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new ne(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new zt(w)}t._authCredentials=new eL(new LT(g,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Zr(this.firestore,e,this._query)}}class at{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new la(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new at(this.firestore,e,this._key)}toJSON(){return{type:at._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(vu(n,at._jsonSchema))return new at(e,i||null,new oe(Ge.fromString(n.referencePath)))}}at._jsonSchemaVersion="firestore/documentReference/1.0",at._jsonSchema={type:vt("string",at._jsonSchemaVersion),referencePath:vt("string")};class la extends Zr{constructor(e,n,i){super(e,n,yd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new oe(e))}withConverter(e){return new la(this.firestore,e,this._path)}}function QI(t,e){if(t=Ln(t,Rd),OT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ne(G.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zr(t,null,function(i){return new _a(Ge.emptyPath(),i)}(e))}function Iu(t,e,...n){if(t=ht(t),arguments.length===1&&(e=pd.newId()),OT("doc","path",e),t instanceof Rd){const i=Ge.fromString(e,...n);return my(i),new at(t,null,new oe(i))}{if(!(t instanceof at||t instanceof la))throw new ne(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ge.fromString(e,...n));return my(i),new at(t.firestore,t instanceof la?t.converter:null,new oe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="AsyncQueue";class rw{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new CI(this,"async_queue_retry"),this.oc=()=>{const i=Rf();i&&ie(iw,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=Rf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Rf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new xr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ga(e))throw e;ie(iw,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,ji("INTERNAL UNHANDLED ERROR: ",sw(i)),i}).then(i=>(this.nc=!1,i))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const r=Mg.createAndSchedule(this,e,n,i,o=>this.lc(o));return this.ec.push(r),r}ac(){this.tc&&pe(47125,{hc:sw(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function sw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Ls extends Rd{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new rw,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rw(e),this._firestoreClient=void 0,await e}}}function YI(t,e){const n=typeof t=="object"?t:rg(),i=typeof t=="string"?t:Mh,r=cd(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=NE("firestore");o&&Ug(r,...o)}return r}function xd(t){if(t._terminated)throw new ne(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||WN(t),t._firestoreClient}function WN(t){var e,n,i;const r=t._freezeSettings(),o=function(d,h,f,g){return new vL(d,h,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,ZI(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new UN(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(d){const h=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dn(kt.fromBase64String(e))}catch(n){throw new ne(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new dn(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:dn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vu(e,dn._jsonSchema))return dn.fromBase64String(e.bytes)}}dn._jsonSchemaVersion="firestore/bytes/1.0",dn._jsonSchema={type:vt("string",dn._jsonSchemaVersion),bytes:vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qn._jsonSchemaVersion}}static fromJSON(e){if(vu(e,qn._jsonSchema))return new qn(e.latitude,e.longitude)}}qn._jsonSchemaVersion="firestore/geoPoint/1.0",qn._jsonSchema={type:vt("string",qn._jsonSchemaVersion),latitude:vt("number"),longitude:vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Gn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vu(e,Gn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Gn(e.vectorValues);throw new ne(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gn._jsonSchemaVersion="firestore/vectorValue/1.0",Gn._jsonSchema={type:vt("string",Gn._jsonSchemaVersion),vectorValues:vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=/^__.*__$/;class qN{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms):new yu(e,this.data,n,this.fieldTransforms)}}class XI{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function JI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ec:t})}}class Bg{constructor(e,n,i,r,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Bg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.fc(e),r}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Rc({path:i,mc:!1});return r.Ac(),r}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return $h(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(JI(this.Ec)&&$N.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class GN{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Pd(e)}Dc(e,n,i,r=!1){return new Bg({Ec:e,methodName:n,bc:i,path:Rt.emptyPath(),mc:!1,Sc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jg(t){const e=t._freezeSettings(),n=Pd(t._databaseId);return new GN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ZN(t,e,n,i,r,o={}){const l=t.Dc(o.merge||o.mergeFields?2:0,e,n,r);Hg("Data must be an object, but it was:",l,i);const d=eS(i,l);let h,f;if(o.merge)h=new pn(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const v of o.mergeFields){const w=tm(e,v,n);if(!l.contains(w))throw new ne(G.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);nS(g,w)||g.push(w)}h=new pn(g),f=l.fieldTransforms.filter(v=>h.covers(v.field))}else h=null,f=l.fieldTransforms;return new qN(new tn(d),h,f)}class Ld extends kd{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ld}}function KN(t,e,n,i){const r=t.Dc(1,e,n);Hg("Data must be an object, but it was:",r,i);const o=[],l=tn.empty();qr(i,(h,f)=>{const g=Wg(e,h,n);f=ht(f);const v=r.gc(g);if(f instanceof Ld)o.push(g);else{const w=Pu(f,v);w!=null&&(o.push(g),l.set(g,w))}});const d=new pn(o);return new XI(l,d,r.fieldTransforms)}function QN(t,e,n,i,r,o){const l=t.Dc(1,e,n),d=[tm(e,i,n)],h=[r];if(o.length%2!=0)throw new ne(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)d.push(tm(e,o[w])),h.push(o[w+1]);const f=[],g=tn.empty();for(let w=d.length-1;w>=0;--w)if(!nS(f,d[w])){const S=d[w];let C=h[w];C=ht(C);const N=l.gc(S);if(C instanceof Ld)f.push(S);else{const z=Pu(C,N);z!=null&&(f.push(S),g.set(S,z))}}const v=new pn(f);return new XI(g,v,l.fieldTransforms)}function YN(t,e,n,i=!1){return Pu(n,t.Dc(i?4:3,e))}function Pu(t,e){if(tS(t=ht(t)))return Hg("Unsupported field value:",e,t),eS(t,e);if(t instanceof kd)return function(i,r){if(!JI(r.Ec))throw r.wc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.wc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(i,r){const o=[];let l=0;for(const d of i){let h=Pu(d,r.yc(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=ht(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return BL(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=We.fromDate(i);return{timestampValue:Bh(r.serializer,o)}}if(i instanceof We){const o=new We(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Bh(r.serializer,o)}}if(i instanceof qn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof dn)return{bytesValue:gI(r.serializer,i._byteString)};if(i instanceof at){const o=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw r.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ag(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Gn)return function(l,d){return{mapValue:{fields:{[WT]:{stringValue:$T},[Dh]:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw d.wc("VectorValues must only contain numeric values.");return Ig(d.serializer,f)})}}}}}}(i,r);throw r.wc(`Unsupported field value: ${md(i)}`)}(t,e)}function eS(t,e){const n={};return FT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qr(t,(i,r)=>{const o=Pu(r,e.Vc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function tS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof qn||t instanceof dn||t instanceof at||t instanceof kd||t instanceof Gn)}function Hg(t,e,n){if(!tS(n)||!DT(n)){const i=md(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function tm(t,e,n){if((e=ht(e))instanceof Su)return e._internalPath;if(typeof e=="string")return Wg(t,e);throw $h("Field path arguments must be of type string or ",t,!1,void 0,n)}const XN=new RegExp("[~\\*/\\[\\]]");function Wg(t,e,n){if(e.search(XN)>=0)throw $h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Su(...e.split("."))._internalPath}catch{throw $h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $h(t,e,n,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${i}`),l&&(h+=` in document ${r}`),h+=")"),new ne(G.INVALID_ARGUMENT,d+t+h)}function nS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($g("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class JN extends iS{data(){return super.data()}}function $g(t,e){return typeof e=="string"?Wg(t,e):e instanceof Su?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qg{}class rS extends qg{}function sS(t,e,...n){let i=[];e instanceof qg&&i.push(e),i=i.concat(n),function(o){const l=o.filter(h=>h instanceof Nd).length,d=o.filter(h=>h instanceof Au).length;if(l>1||l>0&&d>0)throw new ne(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Au extends rS{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Au(e,n,i)}_apply(e){const n=this._parse(e);return aS(e._query,n),new Zr(e.firestore,e.converter,Hp(e._query,n))}_parse(e){const n=jg(e.firestore);return function(o,l,d,h,f,g,v){let w;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ne(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){lw(v,g);const C=[];for(const N of v)C.push(aw(h,o,N));w={arrayValue:{values:C}}}else w=aw(h,o,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||lw(v,g),w=YN(d,l,v,g==="in"||g==="not-in");return _t.create(f,g,w)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function oS(t,e,n){const i=e,r=$g("where",t);return Au._create(r,i,n)}class Nd extends qg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Nd(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Qn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let l=r;const d=o.getFlattenedFilters();for(const h of d)aS(l,h),l=Hp(l,h)}(e._query,n),new Zr(e.firestore,e.converter,Hp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function aw(t,e,n){if(typeof(n=ht(n))=="string"){if(n==="")throw new ne(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JT(e)&&n.indexOf("/")!==-1)throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ge.fromString(n));if(!oe.isDocumentKey(i))throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Iy(t,new oe(i))}if(n instanceof at)return Iy(t,n._key);throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${md(n)}.`)}function lw(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aS(t,e){const n=function(r,o){for(const l of r)for(const d of l.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class lS{convertValue(e,n="none"){switch(Fr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return qr(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,r;const o=(r=(i=(n=e.fields)===null||n===void 0?void 0:n[Dh].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(l=>ut(l.doubleValue));return new Gn(o)}convertGeoPoint(e){return new qn(ut(e.latitude),ut(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=vd(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(iu(e));default:return null}}convertTimestamp(e){const n=Dr(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ge.fromString(e);Ve(TI(i),9688,{name:e});const r=new ia(i.get(1),i.get(3)),o=new oe(i.popFirst(5));return r.isEqual(n)||ji(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Do{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kr extends iS{constructor(e,n,i,r,o,l){super(e,n,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ol(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field($g("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=kr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}kr._jsonSchemaVersion="firestore/documentSnapshot/1.0",kr._jsonSchema={type:vt("string",kr._jsonSchemaVersion),bundleSource:vt("string","DocumentSnapshot"),bundleName:vt("string"),bundle:vt("string")};class Ol extends kr{data(e={}){return super.data(e)}}class ys{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Do(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Ol(this._firestore,this._userDataWriter,i.key,i,new Do(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(d=>{const h=new Ol(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Do(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}})}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||d.type!==3).map(d=>{const h=new Ol(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Do(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,g=-1;return d.type!==0&&(f=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),d.type!==1&&(l=l.add(d.doc),g=l.indexOf(d.doc.key)),{type:nb(d.type),doc:h,oldIndex:f,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ys._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(t){t=Ln(t,at);const e=Ln(t.firestore,Ls);return HN(xd(e),t._key).then(n=>hS(e,t,n))}ys._jsonSchemaVersion="firestore/querySnapshot/1.0",ys._jsonSchema={type:vt("string",ys._jsonSchemaVersion),bundleSource:vt("string","QuerySnapshot"),bundleName:vt("string"),bundle:vt("string")};class uS extends lS{constructor(e){super(),this.firestore=e}convertBytes(e){return new dn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,n)}}function rb(t,e,n){t=Ln(t,at);const i=Ln(t.firestore,Ls),r=tb(t.converter,e,n);return Gg(i,[ZN(jg(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,di.none())])}function cS(t,e,n,...i){t=Ln(t,at);const r=Ln(t.firestore,Ls),o=jg(r);let l;return l=typeof(e=ht(e))=="string"||e instanceof Su?QN(o,"updateDoc",t._key,e,n,i):KN(o,"updateDoc",t._key,e),Gg(r,[l.toMutation(t._key,di.exists(!0))])}function Cu(t,...e){var n,i,r;t=ht(t);let o={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||ow(e[l])||(o=e[l++]);const d={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(ow(e[l])){const v=e[l];e[l]=(n=v.next)===null||n===void 0?void 0:n.bind(v),e[l+1]=(i=v.error)===null||i===void 0?void 0:i.bind(v),e[l+2]=(r=v.complete)===null||r===void 0?void 0:r.bind(v)}let h,f,g;if(t instanceof at)f=Ln(t.firestore,Ls),g=yd(t._key.path),h={next:v=>{e[l]&&e[l](hS(f,t,v))},error:e[l+1],complete:e[l+2]};else{const v=Ln(t,Zr);f=Ln(v.firestore,Ls),g=v._query;const w=new uS(f);h={next:S=>{e[l]&&e[l](new ys(f,w,v,S))},error:e[l+1],complete:e[l+2]},eb(t._query)}return function(w,S,C,N){const z=new qI(N),k=new VI(S,z,C);return w.asyncQueue.enqueueAndForget(async()=>MI(await em(w),k)),()=>{z.Ou(),w.asyncQueue.enqueueAndForget(async()=>DI(await em(w),k))}}(xd(f),g,d,h)}function Gg(t,e){return function(i,r){const o=new xr;return i.asyncQueue.enqueueAndForget(async()=>LN(await jN(i),r,o)),o.promise}(xd(t),e)}function hS(t,e,n){const i=n.docs.get(e._key),r=new uS(t);return new kr(t,r,e._key,i,new Do(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){pa=r})(da),As(new Or("firestore",(i,{instanceIdentifier:r,options:o})=>{const l=i.getProvider("app").getImmediate(),d=new Ls(new tL(i.getProvider("auth-internal")),new rL(l,i.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ne(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ia(f.options.projectId,g)}(l,r),l);return o=Object.assign({useFetchStreams:n},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),li(cy,hy,e),li(cy,hy,"esm2017")})();const sb=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:lS,Bytes:dn,CollectionReference:la,DocumentReference:at,DocumentSnapshot:kr,FieldPath:Su,FieldValue:kd,Firestore:Ls,FirestoreError:ne,GeoPoint:qn,Query:Zr,QueryCompositeFilterConstraint:Nd,QueryConstraint:rS,QueryDocumentSnapshot:Ol,QueryFieldFilterConstraint:Au,QuerySnapshot:ys,SnapshotMetadata:Do,Timestamp:We,VectorValue:Gn,_AutoId:pd,_ByteString:kt,_DatabaseId:ia,_DocumentKey:oe,_EmptyAuthCredentialsProvider:NT,_FieldPath:Rt,_cast:Ln,_logWarn:Hi,_validateIsNotUsedTogether:MT,collectionGroup:QI,connectFirestoreEmulator:Ug,doc:Iu,ensureFirestoreConfigured:xd,executeWrite:Gg,getDoc:ib,getFirestore:YI,onSnapshot:Cu,query:sS,setDoc:rb,updateDoc:cS,where:oS},Symbol.toStringTag,{value:"Module"})),ob="shiftx-driver-client";let ds=null,gr=null,_r=null;function bd(){if(!gr||!_r)throw new Error("Driver client is not initialized. Call initDriverClient first.");return{functions:gr,firestore:_r}}function ab(t){return ds||(ds=VE(t.firebaseConfig,ob)),_r||(_r=YI(ds),t.emulator&&Ug(_r,t.emulator.firestoreHost,t.emulator.firestorePort)),gr||(gr=IT(ds),t.emulator&&mg(gr,t.emulator.functionsHost,t.emulator.functionsPort)),{app:ds,functions:gr,firestore:_r}}async function Lr(t,e){const{functions:n}=bd();return(await gg(n,t)(e)).data}async function lb(t){return Lr("driverSetOnline",{online:t})}async function kf(t){return Lr("driverHeartbeat",{location:t})}async function dS(t){return Lr("acceptRide",{rideId:t})}async function fS(t){return Lr("declineOffer",{rideId:t})}async function ub(t,e){switch(e){case"started":return Lr("startRide",{rideId:t});case"in_progress":return Lr("progressRide",{rideId:t});case"completed":return Lr("completeRide",{rideId:t});default:throw new Error(`Unsupported status: ${e}`)}}async function cb(t){return Lr("createTestRide",t)}function hb(t,e,n){const{firestore:i}=bd();return Cu(Iu(i,"drivers",t),r=>{e(r.exists()?r.data():null)},n)}function pS(t,e,n){const{firestore:i}=bd();return Cu(Iu(i,"rides",t),r=>{e(r.exists()?r.data():null)},n)}function db(t,e,n){const{firestore:i}=bd(),r=sS(QI(i,"offers"),oS("driverId","==",t));return Cu(r,o=>{const l=o.docs.map(d=>{var h,f,g,v;return{rideId:((f=(h=d.ref.parent)==null?void 0:h.parent)==null?void 0:f.id)??"",offer:{...d.data(),rideId:((v=(g=d.ref.parent)==null?void 0:g.parent)==null?void 0:v.id)??""}}});e(l)},n)}function Ml(){if(!ds||!gr||!_r)throw new Error("Driver client not initialized");return{app:ds,functions:gr,firestore:_r}}const mS={firestoreHost:"localhost",firestorePort:8081,functionsHost:"localhost",functionsPort:5002},gS=je.createContext({toasts:[],show:()=>{},dismiss:()=>{}});function fb({children:t}){const[e,n]=J.useState([]),i=(o,l="info")=>{const d=`toast-${Date.now()}`;n(h=>[...h,{id:d,message:o,type:l}]),setTimeout(()=>r(d),4e3)},r=o=>{n(l=>l.filter(d=>d.id!==o))};return D.jsxs(gS.Provider,{value:{toasts:e,show:i,dismiss:r},children:[t,D.jsx(pb,{toasts:e,dismiss:r})]})}function zs(){const t=je.useContext(gS);if(!t)throw new Error("useToast must be used within ToastProvider");return t}function pb({toasts:t,dismiss:e}){return D.jsx("div",{className:"toast-container",children:t.map(n=>D.jsxs("div",{className:`toast toast-${n.type}`,children:[D.jsx("span",{children:n.message}),D.jsx("button",{className:"toast-close",onClick:()=>e(n.id),children:""})]},n.id))})}function mb({user:t,auth:e,loading:n=!1,children:i}){const{show:r}=zs(),[o,l]=je.useState(!1),[d,h]=je.useState(!1),[f,g]=je.useState(""),[v,w]=je.useState(""),S=async N=>{if(N.preventDefault(),!f||!v){r("Email and password required","error");return}l(!0);try{d?(await mx(e,f,v),r("Account created successfully","success")):(await gx(e,f,v),r("Signed in successfully","success"))}catch(z){const k=z;k.code==="auth/user-not-found"||k.code==="auth/wrong-password"?r("Invalid email or password","error"):k.code==="auth/email-already-in-use"?r("Email already in use","error"):r(`Authentication failed: ${k.message}`,"error")}finally{l(!1)}},C=async()=>{try{await wx(e),r("Signed out","info")}catch(N){r(`Sign out failed: ${N.message}`,"error")}};return n?D.jsx("div",{className:"auth-gate",children:D.jsx("div",{className:"spinner",children:"Loading..."})}):t?D.jsxs("div",{className:"auth-wrapper",children:[D.jsxs("div",{className:"app-header",children:[D.jsx("h1",{children:"ShiftX Driver"}),D.jsx("button",{onClick:C,className:"secondary-button",children:"Sign out"})]}),D.jsx("div",{className:"app-content",children:i})]}):D.jsx("div",{className:"auth-gate",children:D.jsxs("div",{className:"auth-card",children:[D.jsx("h1",{children:"ShiftX Driver"}),D.jsx("p",{children:d?"Create your driver account":"Sign in to get started"}),D.jsxs("form",{onSubmit:S,style:{width:"100%"},children:[D.jsx("input",{type:"email",placeholder:"Email",value:f,onChange:N=>g(N.target.value),style:{width:"100%",padding:"12px",marginBottom:"12px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(255,255,255,0.05)",color:"#fff",fontSize:"14px"}}),D.jsx("input",{type:"password",placeholder:"Password",value:v,onChange:N=>w(N.target.value),style:{width:"100%",padding:"12px",marginBottom:"12px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(255,255,255,0.05)",color:"#fff",fontSize:"14px"}}),D.jsx("button",{type:"submit",disabled:o,className:"primary-button",children:o?"Please wait...":d?"Create Account":"Sign In"})]}),D.jsx("button",{onClick:()=>h(!d),style:{marginTop:"12px",background:"none",border:"none",color:"#60a5fa",cursor:"pointer",fontSize:"14px"},children:d?"Already have an account? Sign in":"Don't have an account? Sign up"})]})})}function gb(t,e,n,i){const o=t*Math.PI/180,l=n*Math.PI/180,d=(n-t)*Math.PI/180,h=(i-e)*Math.PI/180,f=Math.sin(d/2)*Math.sin(d/2)+Math.cos(o)*Math.cos(l)*Math.sin(h/2)*Math.sin(h/2);return 6371e3*(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)))}function _S(t,e=5e3){const n=J.useRef(null),i=J.useRef(null),[r,o]=J.useState(null),l=J.useRef(null);return J.useEffect(()=>{if(!t){n.current&&(clearInterval(n.current),n.current=null),i.current!==null&&(navigator.geolocation.clearWatch(i.current),i.current=null),o(null),l.current=null;return}return"geolocation"in navigator&&(i.current=navigator.geolocation.watchPosition(d=>{const h={lat:d.coords.latitude,lng:d.coords.longitude};o(h);const f=Date.now(),g=l.current;if(!g)kf(h).catch(console.error),l.current={...h,timestamp:f};else{const v=gb(g.lat,g.lng,h.lat,h.lng),w=f-g.timestamp;(v>20||w>=5e3)&&(kf(h).catch(console.error),l.current={...h,timestamp:f})}},d=>{console.error("GPS error:",d)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:5e3})),n.current=setInterval(()=>{const d=l.current;(!d||Date.now()-d.timestamp>=e)&&(kf(r||void 0).catch(console.error),r&&(l.current={...r,timestamp:Date.now()}))},e),()=>{n.current&&(clearInterval(n.current),n.current=null),i.current!==null&&(navigator.geolocation.clearWatch(i.current),i.current=null)}},[t,e,r]),r}const _b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],vb=Array.from({length:24},(t,e)=>e);function uw(t){const e=Math.floor(t/60),n=t%60;return`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function cw(t){const[e,n]=t.split(":").map(Number);return e*60+n}function yb(t){return t===0?"12 AM":t<12?`${t} AM`:t===12?"12 PM":`${t-12} PM`}function wb(){const{show:t}=zs(),[e,n]=J.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),[i,r]=J.useState({}),[o,l]=J.useState(!1),[d,h]=J.useState(null),[f,g]=J.useState(!0),[v,w]=J.useState(new Set),[S,C]=J.useState("09:00"),[N,z]=J.useState("17:00"),k=$=>{const A=new Set(v);A.has($)?A.delete($):A.add($),w(A)},P=$=>{if(v.size===0){t("Please select at least one hour","error");return}const A=Array.from(v).sort((O,F)=>O-F),T=[];let x=A[0],b=A[0];for(let O=1;O<A.length;O++)A[O]===b+1||(T.push({startMinutes:x*60,endMinutes:(b+1)*60}),x=A[O]),b=A[O];T.push({startMinutes:x*60,endMinutes:(b+1)*60}),r({...i,[$]:[...i[$]||[],...T]}),w(new Set),h(null)},R=$=>{const A=cw(S),T=cw(N);if(A>=T){t("Start time must be before end time","error");return}r({...i,[$]:[...i[$]||[],{startMinutes:A,endMinutes:T}]}),h(null),C("09:00"),z("17:00")},j=($,A)=>{const T=i[$];r({...i,[$]:T.filter((x,b)=>b!==A)})},K=async()=>{l(!0);try{const{functions:$}=Ml(),A=gg($,"setDriverAvailability"),T=[];Object.entries(i).forEach(([x,b])=>{b.forEach(O=>{T.push({dayOfWeek:Number(x),startMinutes:O.startMinutes,endMinutes:O.endMinutes})})}),await A({timezone:e,intervals:T}),t("Availability saved successfully","success")}catch($){t(`Failed to save availability: ${$.message}`,"error")}finally{l(!1)}};return D.jsxs("div",{className:"availability",children:[D.jsx("h2",{children:" Set Your Availability"}),D.jsx("p",{className:"text-muted",children:"Set the hours when you're available to accept scheduled rides"}),D.jsx("div",{style:{marginTop:"1rem",marginBottom:"1rem"},children:D.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem"},children:["Timezone: ",D.jsx("strong",{children:e})]})}),D.jsx("div",{style:{marginTop:"1.5rem"},children:_b.map(($,A)=>D.jsxs("div",{style:{marginBottom:"1rem",padding:"1rem",background:"rgba(255,255,255,0.05)",borderRadius:"8px"},children:[D.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[D.jsx("strong",{children:$}),D.jsx("button",{onClick:()=>h(d===A?null:A),className:"secondary-button",style:{fontSize:"0.8rem",padding:"4px 12px"},children:d===A?"Cancel":"+ Add hours"})]}),i[A]&&i[A].length>0&&D.jsx("div",{style:{marginTop:"0.75rem"},children:i[A].map((T,x)=>D.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",background:"rgba(255,255,255,0.05)",borderRadius:"4px",marginBottom:"0.5rem"},children:[D.jsxs("span",{children:[uw(T.startMinutes)," - ",uw(T.endMinutes)]}),D.jsx("button",{onClick:()=>j(A,x),style:{background:"transparent",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"1rem"},children:""})]},x))}),d===A&&D.jsxs("div",{style:{marginTop:"0.75rem"},children:[D.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem",fontSize:"0.85rem"},children:[D.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[D.jsx("input",{type:"radio",checked:f,onChange:()=>{g(!0),w(new Set)},style:{marginRight:"0.35rem"}}),"Hourly"]}),D.jsxs("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[D.jsx("input",{type:"radio",checked:!f,onChange:()=>g(!1),style:{marginRight:"0.35rem"}}),"Time Range"]})]}),f?D.jsxs(D.Fragment,{children:[D.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:"0.4rem",marginBottom:"0.75rem"},children:vb.map(T=>D.jsx("button",{type:"button",onClick:()=>k(T),style:{padding:"0.4rem 0.3rem",fontSize:"0.75rem",borderRadius:"4px",border:"none",cursor:"pointer",background:v.has(T)?"#10b981":"rgba(255,255,255,0.1)",color:v.has(T)?"white":"rgba(255,255,255,0.8)",fontWeight:v.has(T)?"600":"400"},children:yb(T)},T))}),D.jsx("button",{onClick:()=>P(A),disabled:v.size===0,className:"primary-button",style:{fontSize:"0.8rem",padding:"8px 12px",width:"100%"},children:"Add Selected Hours"})]}):D.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[D.jsx("input",{type:"time",value:S,onChange:T=>C(T.target.value),style:{flex:1,padding:"0.5rem",borderRadius:"4px",border:"none"}}),D.jsx("span",{children:"to"}),D.jsx("input",{type:"time",value:N,onChange:T=>z(T.target.value),style:{flex:1,padding:"0.5rem",borderRadius:"4px",border:"none"}}),D.jsx("button",{onClick:()=>R(A),className:"primary-button",style:{fontSize:"0.8rem",padding:"8px 12px"},children:"Add"})]})]})]},A))}),D.jsx("button",{onClick:K,disabled:o,className:"primary-button",style:{width:"100%",marginTop:"1rem"},children:o?"Saving...":"Save Availability"})]})}var Eb=Object.defineProperty,qh=Object.getOwnPropertySymbols,vS=Object.prototype.hasOwnProperty,yS=Object.prototype.propertyIsEnumerable,hw=(t,e,n)=>e in t?Eb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nm=(t,e)=>{for(var n in e||(e={}))vS.call(e,n)&&hw(t,n,e[n]);if(qh)for(var n of qh(e))yS.call(e,n)&&hw(t,n,e[n]);return t},im=(t,e)=>{var n={};for(var i in t)vS.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&qh)for(var i of qh(t))e.indexOf(i)<0&&yS.call(t,i)&&(n[i]=t[i]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Ns;(t=>{const e=class Ae{constructor(h,f,g,v){if(this.version=h,this.errorCorrectionLevel=f,this.modules=[],this.isFunction=[],h<Ae.MIN_VERSION||h>Ae.MAX_VERSION)throw new RangeError("Version value out of range");if(v<-1||v>7)throw new RangeError("Mask value out of range");this.size=h*4+17;let w=[];for(let C=0;C<this.size;C++)w.push(!1);for(let C=0;C<this.size;C++)this.modules.push(w.slice()),this.isFunction.push(w.slice());this.drawFunctionPatterns();const S=this.addEccAndInterleave(g);if(this.drawCodewords(S),v==-1){let C=1e9;for(let N=0;N<8;N++){this.applyMask(N),this.drawFormatBits(N);const z=this.getPenaltyScore();z<C&&(v=N,C=z),this.applyMask(N)}}r(0<=v&&v<=7),this.mask=v,this.applyMask(v),this.drawFormatBits(v),this.isFunction=[]}static encodeText(h,f){const g=t.QrSegment.makeSegments(h);return Ae.encodeSegments(g,f)}static encodeBinary(h,f){const g=t.QrSegment.makeBytes(h);return Ae.encodeSegments([g],f)}static encodeSegments(h,f,g=1,v=40,w=-1,S=!0){if(!(Ae.MIN_VERSION<=g&&g<=v&&v<=Ae.MAX_VERSION)||w<-1||w>7)throw new RangeError("Invalid value");let C,N;for(C=g;;C++){const R=Ae.getNumDataCodewords(C,f)*8,j=l.getTotalBits(h,C);if(j<=R){N=j;break}if(C>=v)throw new RangeError("Data too long")}for(const R of[Ae.Ecc.MEDIUM,Ae.Ecc.QUARTILE,Ae.Ecc.HIGH])S&&N<=Ae.getNumDataCodewords(C,R)*8&&(f=R);let z=[];for(const R of h){n(R.mode.modeBits,4,z),n(R.numChars,R.mode.numCharCountBits(C),z);for(const j of R.getData())z.push(j)}r(z.length==N);const k=Ae.getNumDataCodewords(C,f)*8;r(z.length<=k),n(0,Math.min(4,k-z.length),z),n(0,(8-z.length%8)%8,z),r(z.length%8==0);for(let R=236;z.length<k;R^=253)n(R,8,z);let P=[];for(;P.length*8<z.length;)P.push(0);return z.forEach((R,j)=>P[j>>>3]|=R<<7-(j&7)),new Ae(C,f,P,w)}getModule(h,f){return 0<=h&&h<this.size&&0<=f&&f<this.size&&this.modules[f][h]}getModules(){return this.modules}drawFunctionPatterns(){for(let g=0;g<this.size;g++)this.setFunctionModule(6,g,g%2==0),this.setFunctionModule(g,6,g%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const h=this.getAlignmentPatternPositions(),f=h.length;for(let g=0;g<f;g++)for(let v=0;v<f;v++)g==0&&v==0||g==0&&v==f-1||g==f-1&&v==0||this.drawAlignmentPattern(h[g],h[v]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(h){const f=this.errorCorrectionLevel.formatBits<<3|h;let g=f;for(let w=0;w<10;w++)g=g<<1^(g>>>9)*1335;const v=(f<<10|g)^21522;r(v>>>15==0);for(let w=0;w<=5;w++)this.setFunctionModule(8,w,i(v,w));this.setFunctionModule(8,7,i(v,6)),this.setFunctionModule(8,8,i(v,7)),this.setFunctionModule(7,8,i(v,8));for(let w=9;w<15;w++)this.setFunctionModule(14-w,8,i(v,w));for(let w=0;w<8;w++)this.setFunctionModule(this.size-1-w,8,i(v,w));for(let w=8;w<15;w++)this.setFunctionModule(8,this.size-15+w,i(v,w));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let h=this.version;for(let g=0;g<12;g++)h=h<<1^(h>>>11)*7973;const f=this.version<<12|h;r(f>>>18==0);for(let g=0;g<18;g++){const v=i(f,g),w=this.size-11+g%3,S=Math.floor(g/3);this.setFunctionModule(w,S,v),this.setFunctionModule(S,w,v)}}drawFinderPattern(h,f){for(let g=-4;g<=4;g++)for(let v=-4;v<=4;v++){const w=Math.max(Math.abs(v),Math.abs(g)),S=h+v,C=f+g;0<=S&&S<this.size&&0<=C&&C<this.size&&this.setFunctionModule(S,C,w!=2&&w!=4)}}drawAlignmentPattern(h,f){for(let g=-2;g<=2;g++)for(let v=-2;v<=2;v++)this.setFunctionModule(h+v,f+g,Math.max(Math.abs(v),Math.abs(g))!=1)}setFunctionModule(h,f,g){this.modules[f][h]=g,this.isFunction[f][h]=!0}addEccAndInterleave(h){const f=this.version,g=this.errorCorrectionLevel;if(h.length!=Ae.getNumDataCodewords(f,g))throw new RangeError("Invalid argument");const v=Ae.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][f],w=Ae.ECC_CODEWORDS_PER_BLOCK[g.ordinal][f],S=Math.floor(Ae.getNumRawDataModules(f)/8),C=v-S%v,N=Math.floor(S/v);let z=[];const k=Ae.reedSolomonComputeDivisor(w);for(let R=0,j=0;R<v;R++){let K=h.slice(j,j+N-w+(R<C?0:1));j+=K.length;const $=Ae.reedSolomonComputeRemainder(K,k);R<C&&K.push(0),z.push(K.concat($))}let P=[];for(let R=0;R<z[0].length;R++)z.forEach((j,K)=>{(R!=N-w||K>=C)&&P.push(j[R])});return r(P.length==S),P}drawCodewords(h){if(h.length!=Math.floor(Ae.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let f=0;for(let g=this.size-1;g>=1;g-=2){g==6&&(g=5);for(let v=0;v<this.size;v++)for(let w=0;w<2;w++){const S=g-w,N=(g+1&2)==0?this.size-1-v:v;!this.isFunction[N][S]&&f<h.length*8&&(this.modules[N][S]=i(h[f>>>3],7-(f&7)),f++)}}r(f==h.length*8)}applyMask(h){if(h<0||h>7)throw new RangeError("Mask value out of range");for(let f=0;f<this.size;f++)for(let g=0;g<this.size;g++){let v;switch(h){case 0:v=(g+f)%2==0;break;case 1:v=f%2==0;break;case 2:v=g%3==0;break;case 3:v=(g+f)%3==0;break;case 4:v=(Math.floor(g/3)+Math.floor(f/2))%2==0;break;case 5:v=g*f%2+g*f%3==0;break;case 6:v=(g*f%2+g*f%3)%2==0;break;case 7:v=((g+f)%2+g*f%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[f][g]&&v&&(this.modules[f][g]=!this.modules[f][g])}}getPenaltyScore(){let h=0;for(let w=0;w<this.size;w++){let S=!1,C=0,N=[0,0,0,0,0,0,0];for(let z=0;z<this.size;z++)this.modules[w][z]==S?(C++,C==5?h+=Ae.PENALTY_N1:C>5&&h++):(this.finderPenaltyAddHistory(C,N),S||(h+=this.finderPenaltyCountPatterns(N)*Ae.PENALTY_N3),S=this.modules[w][z],C=1);h+=this.finderPenaltyTerminateAndCount(S,C,N)*Ae.PENALTY_N3}for(let w=0;w<this.size;w++){let S=!1,C=0,N=[0,0,0,0,0,0,0];for(let z=0;z<this.size;z++)this.modules[z][w]==S?(C++,C==5?h+=Ae.PENALTY_N1:C>5&&h++):(this.finderPenaltyAddHistory(C,N),S||(h+=this.finderPenaltyCountPatterns(N)*Ae.PENALTY_N3),S=this.modules[z][w],C=1);h+=this.finderPenaltyTerminateAndCount(S,C,N)*Ae.PENALTY_N3}for(let w=0;w<this.size-1;w++)for(let S=0;S<this.size-1;S++){const C=this.modules[w][S];C==this.modules[w][S+1]&&C==this.modules[w+1][S]&&C==this.modules[w+1][S+1]&&(h+=Ae.PENALTY_N2)}let f=0;for(const w of this.modules)f=w.reduce((S,C)=>S+(C?1:0),f);const g=this.size*this.size,v=Math.ceil(Math.abs(f*20-g*10)/g)-1;return r(0<=v&&v<=9),h+=v*Ae.PENALTY_N4,r(0<=h&&h<=2568888),h}getAlignmentPatternPositions(){if(this.version==1)return[];{const h=Math.floor(this.version/7)+2,f=this.version==32?26:Math.ceil((this.version*4+4)/(h*2-2))*2;let g=[6];for(let v=this.size-7;g.length<h;v-=f)g.splice(1,0,v);return g}}static getNumRawDataModules(h){if(h<Ae.MIN_VERSION||h>Ae.MAX_VERSION)throw new RangeError("Version number out of range");let f=(16*h+128)*h+64;if(h>=2){const g=Math.floor(h/7)+2;f-=(25*g-10)*g-55,h>=7&&(f-=36)}return r(208<=f&&f<=29648),f}static getNumDataCodewords(h,f){return Math.floor(Ae.getNumRawDataModules(h)/8)-Ae.ECC_CODEWORDS_PER_BLOCK[f.ordinal][h]*Ae.NUM_ERROR_CORRECTION_BLOCKS[f.ordinal][h]}static reedSolomonComputeDivisor(h){if(h<1||h>255)throw new RangeError("Degree out of range");let f=[];for(let v=0;v<h-1;v++)f.push(0);f.push(1);let g=1;for(let v=0;v<h;v++){for(let w=0;w<f.length;w++)f[w]=Ae.reedSolomonMultiply(f[w],g),w+1<f.length&&(f[w]^=f[w+1]);g=Ae.reedSolomonMultiply(g,2)}return f}static reedSolomonComputeRemainder(h,f){let g=f.map(v=>0);for(const v of h){const w=v^g.shift();g.push(0),f.forEach((S,C)=>g[C]^=Ae.reedSolomonMultiply(S,w))}return g}static reedSolomonMultiply(h,f){if(h>>>8||f>>>8)throw new RangeError("Byte out of range");let g=0;for(let v=7;v>=0;v--)g=g<<1^(g>>>7)*285,g^=(f>>>v&1)*h;return r(g>>>8==0),g}finderPenaltyCountPatterns(h){const f=h[1];r(f<=this.size*3);const g=f>0&&h[2]==f&&h[3]==f*3&&h[4]==f&&h[5]==f;return(g&&h[0]>=f*4&&h[6]>=f?1:0)+(g&&h[6]>=f*4&&h[0]>=f?1:0)}finderPenaltyTerminateAndCount(h,f,g){return h&&(this.finderPenaltyAddHistory(f,g),f=0),f+=this.size,this.finderPenaltyAddHistory(f,g),this.finderPenaltyCountPatterns(g)}finderPenaltyAddHistory(h,f){f[0]==0&&(h+=this.size),f.pop(),f.unshift(h)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function n(d,h,f){if(h<0||h>31||d>>>h)throw new RangeError("Value out of range");for(let g=h-1;g>=0;g--)f.push(d>>>g&1)}function i(d,h){return(d>>>h&1)!=0}function r(d){if(!d)throw new Error("Assertion error")}const o=class st{constructor(h,f,g){if(this.mode=h,this.numChars=f,this.bitData=g,f<0)throw new RangeError("Invalid argument");this.bitData=g.slice()}static makeBytes(h){let f=[];for(const g of h)n(g,8,f);return new st(st.Mode.BYTE,h.length,f)}static makeNumeric(h){if(!st.isNumeric(h))throw new RangeError("String contains non-numeric characters");let f=[];for(let g=0;g<h.length;){const v=Math.min(h.length-g,3);n(parseInt(h.substring(g,g+v),10),v*3+1,f),g+=v}return new st(st.Mode.NUMERIC,h.length,f)}static makeAlphanumeric(h){if(!st.isAlphanumeric(h))throw new RangeError("String contains unencodable characters in alphanumeric mode");let f=[],g;for(g=0;g+2<=h.length;g+=2){let v=st.ALPHANUMERIC_CHARSET.indexOf(h.charAt(g))*45;v+=st.ALPHANUMERIC_CHARSET.indexOf(h.charAt(g+1)),n(v,11,f)}return g<h.length&&n(st.ALPHANUMERIC_CHARSET.indexOf(h.charAt(g)),6,f),new st(st.Mode.ALPHANUMERIC,h.length,f)}static makeSegments(h){return h==""?[]:st.isNumeric(h)?[st.makeNumeric(h)]:st.isAlphanumeric(h)?[st.makeAlphanumeric(h)]:[st.makeBytes(st.toUtf8ByteArray(h))]}static makeEci(h){let f=[];if(h<0)throw new RangeError("ECI assignment value out of range");if(h<128)n(h,8,f);else if(h<16384)n(2,2,f),n(h,14,f);else if(h<1e6)n(6,3,f),n(h,21,f);else throw new RangeError("ECI assignment value out of range");return new st(st.Mode.ECI,0,f)}static isNumeric(h){return st.NUMERIC_REGEX.test(h)}static isAlphanumeric(h){return st.ALPHANUMERIC_REGEX.test(h)}getData(){return this.bitData.slice()}static getTotalBits(h,f){let g=0;for(const v of h){const w=v.mode.numCharCountBits(f);if(v.numChars>=1<<w)return 1/0;g+=4+w+v.bitData.length}return g}static toUtf8ByteArray(h){h=encodeURI(h);let f=[];for(let g=0;g<h.length;g++)h.charAt(g)!="%"?f.push(h.charCodeAt(g)):(f.push(parseInt(h.substring(g+1,g+3),16)),g+=2);return f}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let l=o;t.QrSegment=o})(Ns||(Ns={}));(t=>{(e=>{const n=class{constructor(r,o){this.ordinal=r,this.formatBits=o}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(Ns||(Ns={}));(t=>{(e=>{const n=class{constructor(r,o){this.modeBits=r,this.numBitsCharCount=o}numCharCountBits(r){return this.numBitsCharCount[Math.floor((r+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(Ns||(Ns={}));var Vo=Ns;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Tb={L:Vo.QrCode.Ecc.LOW,M:Vo.QrCode.Ecc.MEDIUM,Q:Vo.QrCode.Ecc.QUARTILE,H:Vo.QrCode.Ecc.HIGH},wS=128,ES="L",TS="#FFFFFF",IS="#000000",SS=!1,PS=1,Ib=4,Sb=0,Pb=.1;function AS(t,e=0){const n=[];return t.forEach(function(i,r){let o=null;i.forEach(function(l,d){if(!l&&o!==null){n.push(`M${o+e} ${r+e}h${d-o}v1H${o+e}z`),o=null;return}if(d===i.length-1){if(!l)return;o===null?n.push(`M${d+e},${r+e} h1v1H${d+e}z`):n.push(`M${o+e},${r+e} h${d+1-o}v1H${o+e}z`);return}l&&o===null&&(o=d)})}),n.join("")}function CS(t,e){return t.slice().map((n,i)=>i<e.y||i>=e.y+e.h?n:n.map((r,o)=>o<e.x||o>=e.x+e.w?r:!1))}function Ab(t,e,n,i){if(i==null)return null;const r=t.length+n*2,o=Math.floor(e*Pb),l=r/e,d=(i.width||o)*l,h=(i.height||o)*l,f=i.x==null?t.length/2-d/2:i.x*l,g=i.y==null?t.length/2-h/2:i.y*l,v=i.opacity==null?1:i.opacity;let w=null;if(i.excavate){let C=Math.floor(f),N=Math.floor(g),z=Math.ceil(d+f-C),k=Math.ceil(h+g-N);w={x:C,y:N,w:z,h:k}}const S=i.crossOrigin;return{x:f,y:g,h,w:d,excavation:w,opacity:v,crossOrigin:S}}function Cb(t,e){return e!=null?Math.max(Math.floor(e),0):t?Ib:Sb}function RS({value:t,level:e,minVersion:n,includeMargin:i,marginSize:r,imageSettings:o,size:l,boostLevel:d}){let h=je.useMemo(()=>{const C=(Array.isArray(t)?t:[t]).reduce((N,z)=>(N.push(...Vo.QrSegment.makeSegments(z)),N),[]);return Vo.QrCode.encodeSegments(C,Tb[e],n,void 0,void 0,d)},[t,e,n,d]);const{cells:f,margin:g,numCells:v,calculatedImageSettings:w}=je.useMemo(()=>{let S=h.getModules();const C=Cb(i,r),N=S.length+C*2,z=Ab(S,l,C,o);return{cells:S,margin:C,numCells:N,calculatedImageSettings:z}},[h,l,o,i,r]);return{qrcode:h,margin:g,cells:f,numCells:v,calculatedImageSettings:w}}var Rb=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),xb=je.forwardRef(function(e,n){const i=e,{value:r,size:o=wS,level:l=ES,bgColor:d=TS,fgColor:h=IS,includeMargin:f=SS,minVersion:g=PS,boostLevel:v,marginSize:w,imageSettings:S}=i,N=im(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:z}=N,k=im(N,["style"]),P=S==null?void 0:S.src,R=je.useRef(null),j=je.useRef(null),K=je.useCallback(ce=>{R.current=ce,typeof n=="function"?n(ce):n&&(n.current=ce)},[n]),[$,A]=je.useState(!1),{margin:T,cells:x,numCells:b,calculatedImageSettings:O}=RS({value:r,level:l,minVersion:g,boostLevel:v,includeMargin:f,marginSize:w,imageSettings:S,size:o});je.useEffect(()=>{if(R.current!=null){const ce=R.current,ue=ce.getContext("2d");if(!ue)return;let Le=x;const Ne=j.current,q=O!=null&&Ne!==null&&Ne.complete&&Ne.naturalHeight!==0&&Ne.naturalWidth!==0;q&&O.excavation!=null&&(Le=CS(x,O.excavation));const ae=window.devicePixelRatio||1;ce.height=ce.width=o*ae;const X=o/b*ae;ue.scale(X,X),ue.fillStyle=d,ue.fillRect(0,0,b,b),ue.fillStyle=h,Rb?ue.fill(new Path2D(AS(Le,T))):x.forEach(function(le,me){le.forEach(function(Ee,De){Ee&&ue.fillRect(De+T,me+T,1,1)})}),O&&(ue.globalAlpha=O.opacity),q&&ue.drawImage(Ne,O.x+T,O.y+T,O.w,O.h)}}),je.useEffect(()=>{A(!1)},[P]);const F=nm({height:o,width:o},z);let M=null;return P!=null&&(M=je.createElement("img",{src:P,key:P,style:{display:"none"},onLoad:()=>{A(!0)},ref:j,crossOrigin:O==null?void 0:O.crossOrigin})),je.createElement(je.Fragment,null,je.createElement("canvas",nm({style:F,height:o,width:o,ref:K,role:"img"},k)),M)});xb.displayName="QRCodeCanvas";var Zg=je.forwardRef(function(e,n){const i=e,{value:r,size:o=wS,level:l=ES,bgColor:d=TS,fgColor:h=IS,includeMargin:f=SS,minVersion:g=PS,boostLevel:v,title:w,marginSize:S,imageSettings:C}=i,N=im(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:z,cells:k,numCells:P,calculatedImageSettings:R}=RS({value:r,level:l,minVersion:g,boostLevel:v,includeMargin:f,marginSize:S,imageSettings:C,size:o});let j=k,K=null;C!=null&&R!=null&&(R.excavation!=null&&(j=CS(k,R.excavation)),K=je.createElement("image",{href:C.src,height:R.h,width:R.w,x:R.x+z,y:R.y+z,preserveAspectRatio:"none",opacity:R.opacity,crossOrigin:R.crossOrigin}));const $=AS(j,z);return je.createElement("svg",nm({height:o,width:o,viewBox:`0 0 ${P} ${P}`,ref:n,role:"img"},N),!!w&&je.createElement("title",null,w),je.createElement("path",{fill:d,d:`M0,0 h${P}v${P}H0z`,shapeRendering:"crispEdges"}),je.createElement("path",{fill:h,d:$,shapeRendering:"crispEdges"}),K)});Zg.displayName="QRCodeSVG";function kb({driverId:t,profile:e,hasActiveRide:n,activeRideId:i,onCreateTestRide:r,onViewActiveRide:o}){const{show:l}=zs(),d=(e==null?void 0:e.isOnline)??!1,[h,f]=J.useState(!1),[g,v]=J.useState(!1),[w,S]=J.useState(!1),[C,N]=J.useState(!1);_S(d);const z=async()=>{f(!0);try{await lb(!d),l(d?"Going offline":"Going online","success")}catch($){l(`Failed to toggle online status: ${$.message}`,"error")}finally{f(!1)}},k=async()=>{v(!0);try{await r(),l("Test ride created","success")}catch($){l(`Failed to create test ride: ${$.message}`,"error")}finally{v(!1)}},P=async($,A)=>{N(!0);try{const{functions:T}=Ml(),{getFunctions:x,httpsCallable:b}=await Ap(async()=>{const{getFunctions:ce,httpsCallable:ue}=await Promise.resolve().then(()=>ly);return{getFunctions:ce,httpsCallable:ue}},void 0),M=(await b(T,"devSeedDrivers")({count:$,online:A})).data;l(` ${M.message}`,"success")}catch(T){l(`Failed to spawn drivers: ${T.message}`,"error")}finally{N(!1)}},R=async()=>{N(!0);try{const{functions:$}=Ml(),{httpsCallable:A}=await Ap(async()=>{const{httpsCallable:O}=await Promise.resolve().then(()=>ly);return{httpsCallable:O}},void 0),b=(await A($,"manualCleanup")({})).data;l(` Cleanup: ${b.cancelledRides} rides cancelled, ${b.expiredOffers} offers expired, ${b.offlineDrivers} drivers offline`,"success")}catch($){l(`Failed to run cleanup: ${$.message}`,"error")}finally{N(!1)}},j=`${window.location.origin}/invite?driver=${t}`,K=()=>{navigator.clipboard.writeText(j),l("Invite link copied to clipboard","success")};return D.jsxs("div",{className:"driver-home",style:{paddingBottom:"80px"},children:[D.jsxs("div",{className:"driver-header",children:[D.jsxs("div",{className:"driver-info",children:[D.jsxs("p",{className:"driver-id",children:["Driver ID: ",D.jsx("code",{children:t})]}),D.jsx("p",{className:"driver-status",children:D.jsx("span",{className:`status-badge ${d?"online":"offline"}`,children:d?" Online":" Offline"})})]}),D.jsx("button",{onClick:z,disabled:h||n,className:`toggle-button ${d?"going-offline":"going-online"}`,children:h?"Updating...":d?"Go offline":"Go online"})]}),n&&D.jsx("div",{className:"info-banner clickable",onClick:o,style:{cursor:"pointer"},children:D.jsxs("p",{children:[" You have an active ride: ",D.jsx("code",{children:i}),D.jsx("br",{}),D.jsx("strong",{children:"Click here to view it, or "}),D.jsx("button",{onClick:async $=>{$.stopPropagation();try{const{firestore:A}=Ml();await cS(Iu(A,"drivers",t),{isBusy:!1,currentRideId:null,currentRideStatus:null}),l("Driver state cleared","success")}catch(A){l(`Failed to clear state: ${A.message}`,"error")}},style:{marginLeft:"8px",padding:"4px 8px",fontSize:"12px",background:"#ef4444",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"force clear"})]})}),D.jsxs("div",{className:"test-section",children:[D.jsx("h2",{children:" Invite Preferred Customers"}),D.jsx("p",{className:"text-muted",children:"Share this QR code or link with customers to become their preferred driver"}),D.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",marginTop:"12px"},children:[D.jsx(Zg,{value:j,size:180}),D.jsx("button",{onClick:K,className:"secondary-button",children:" Copy Invite Link"})]})]}),D.jsxs("div",{className:"test-section",children:[D.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[D.jsx("h2",{style:{margin:0},children:" Scheduled Rides"}),D.jsx("button",{onClick:()=>S(!w),className:"secondary-button",style:{fontSize:"0.9rem"},children:w?"Hide":"Set Availability"})]}),w?D.jsx(wb,{}):D.jsx("p",{className:"text-muted",children:"Set your weekly availability to accept scheduled rides from preferred customers"})]}),D.jsxs("div",{className:"test-section",children:[D.jsx("h2",{children:"Test Ride"}),D.jsx("p",{className:"text-muted",children:"Create a test ride to receive an offer"}),D.jsx("button",{onClick:k,disabled:g||!d,className:"primary-button",children:g?"Creating...":"Create test ride"}),!d&&D.jsx("p",{className:"text-muted small",children:"Go online to create test rides"})]}),D.jsxs("div",{className:"test-section",children:[D.jsx("h2",{children:" Dev Tools"}),D.jsx("p",{className:"text-muted",children:"Spawn fake drivers for testing"}),D.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px"},children:[D.jsx("button",{onClick:()=>P(5,!0),disabled:C,className:"secondary-button",children:C?"Spawning...":"5 Online Drivers"}),D.jsx("button",{onClick:()=>P(10,!0),disabled:C,className:"secondary-button",children:C?"Spawning...":"10 Online Drivers"}),D.jsx("button",{onClick:()=>P(5,!1),disabled:C,className:"secondary-button",children:C?"Spawning...":"5 Offline Drivers"})]}),D.jsxs("div",{style:{marginTop:"12px"},children:[D.jsx("button",{onClick:R,disabled:C,className:"secondary-button",style:{width:"100%"},children:C?"Running...":" Run Cleanup Job"}),D.jsx("p",{className:"text-muted small",style:{marginTop:"8px"},children:"Cancels stuck rides, expires old offers, marks ghost drivers offline"})]})]})]})}const dw=6e4;function Lb({rideId:t,offer:e,onAccepted:n,onExpired:i}){const{show:r}=zs(),[o,l]=J.useState(dw),[d,h]=J.useState(!1),[f,g]=J.useState(null),v=J.useRef(!1),w=J.useRef(!1);J.useEffect(()=>{if(!t)return;const P=pS(t,R=>{g(R)},R=>{console.error("Error watching ride:",R),r("Failed to load ride details","error")});return()=>P()},[t,r]),J.useEffect(()=>{if(!e.expiresAtMs)return;const P=Date.now();if(Math.max(0,e.expiresAtMs-P)===0&&!w.current){w.current=!0,v.current||(v.current=!0,r("Offer expired","warning")),setTimeout(()=>i(),100);return}const j=setInterval(()=>{const K=Date.now(),$=Math.max(0,e.expiresAtMs-K);l($),$===0&&!w.current&&(w.current=!0,clearInterval(j),v.current||(v.current=!0,r("Offer expired","warning")),setTimeout(()=>i(),500))},100);return()=>{clearInterval(j)}},[e.expiresAtMs,t,i,r]);const S=async()=>{h(!0);try{await dS(t),r("Ride accepted","success"),n()}catch(P){const R=P.message;R.includes("expired")?(r("Offer already expired","warning"),i()):R.includes("no longer")?(r("Offer no longer available","warning"),i()):r(`Failed to accept offer: ${R}`,"error")}finally{h(!1)}},C=async()=>{h(!0);try{await fS(t),r("Offer declined","info"),i()}catch(P){r(`Failed to decline offer: ${P.message}`,"error")}finally{h(!1)}},N=Math.ceil(o/1e3),z=o/dw*100,k=N<=10;return D.jsx("div",{className:"modal-overlay",children:D.jsxs("div",{className:"offer-modal",children:[D.jsxs("div",{className:"offer-header",children:[D.jsx("h2",{children:"New Ride Offer!"}),D.jsxs("p",{className:"ride-id",children:["Ride: ",D.jsxs("code",{children:[t.slice(0,8),"..."]})]})]}),D.jsx("div",{className:"offer-details",children:f?D.jsxs(D.Fragment,{children:[D.jsxs("div",{className:"detail-row",children:[D.jsx("span",{className:"label",children:"Pickup"}),D.jsxs("span",{className:"value",children:[f.pickup.lat.toFixed(4),", ",f.pickup.lng.toFixed(4)]})]}),D.jsxs("div",{className:"detail-row",children:[D.jsx("span",{className:"label",children:"Dropoff"}),D.jsxs("span",{className:"value",children:[f.dropoff.lat.toFixed(4),", ",f.dropoff.lng.toFixed(4)]})]}),D.jsxs("div",{className:"detail-row",children:[D.jsx("span",{className:"label",children:"Estimated fare"}),D.jsxs("span",{className:"value",children:["$",((f.priceCents??0)/100).toFixed(2)]})]})]}):D.jsx("div",{className:"detail-row",children:D.jsx("span",{className:"value",children:"Loading ride details..."})})}),D.jsxs("div",{className:`countdown ${k?"expiring":""}`,children:[D.jsx("div",{className:"countdown-bar",children:D.jsx("div",{className:"countdown-progress",style:{width:`${z}%`}})}),D.jsxs("p",{className:"countdown-text",children:[N,"s remaining"]})]}),D.jsxs("div",{className:"offer-actions",children:[D.jsx("button",{onClick:C,disabled:d||N<=0,className:"reject-button secondary-button",children:d?"Rejecting...":"Reject"}),D.jsx("button",{onClick:S,disabled:d||N<=0,className:"accept-button primary-button",children:d?"Accepting...":"Accept Ride"})]})]})})}function Nb({offers:t,onOfferAccepted:e,onOfferDeclined:n}){const{show:i}=zs(),[r,o]=J.useState([]),[l,d]=J.useState(null),[h,f]=J.useState(null);J.useEffect(()=>{const S=[],C=new Map;t.forEach((z,k)=>{C.set(k,null);const P=pS(k,R=>{C.set(k,R),N()},R=>{console.error(`Error watching ride ${k}:`,R)});S.push(P)});const N=()=>{const z=[];t.forEach((k,P)=>{z.push({rideId:P,offer:k,ride:C.get(P)||null})}),z.sort((k,P)=>{const R=k.offer.status!=="pending"||Date.now()>(k.offer.expiresAtMs||0),j=P.offer.status!=="pending"||Date.now()>(P.offer.expiresAtMs||0);return!R&&j?-1:R&&!j?1:!R&&!j?(k.offer.expiresAtMs||0)-(P.offer.expiresAtMs||0):0}),o(z)};return N(),()=>{S.forEach(z=>z())}},[t]);const g=async S=>{d(S);try{await dS(S),i("Ride accepted!","success"),e(S)}catch(C){const N=C.message.toLowerCase();N.includes("expired")?(i(" This offer has expired","warning"),n(S)):N.includes("no longer pending")||N.includes("not offered")?(i(" This ride was taken by another driver","warning"),n(S)):N.includes("busy")?i(" You already have an active ride","warning"):N.includes("not found")?(i(" Ride not found","error"),n(S)):i(`Failed to accept ride: ${N}`,"error")}finally{d(null)}},v=async S=>{f(S);try{await fS(S),i("Offer declined","info"),n(S)}catch(C){const N=C.message.toLowerCase();N.includes("not found")?(i("Offer already removed","info"),n(S)):N.includes("not pending")?(i("Offer is no longer available","info"),n(S)):i(`Failed to decline: ${N}`,"error")}finally{f(null)}},w=S=>{const C=Math.max(0,S-Date.now()),N=Math.floor(C/1e3);if(N===0)return"Expired";if(N<60)return`${N}s`;const z=Math.floor(N/60),k=N%60;return`${z}:${k.toString().padStart(2,"0")}`};return r.length===0?D.jsxs("div",{className:"available-rides-empty",children:[D.jsx("p",{children:"No available ride offers"}),D.jsx("p",{className:"subtitle",children:"Offers will appear here when riders request a ride"})]}):D.jsxs("div",{className:"available-rides",children:[D.jsxs("h2",{children:["Available Rides (",r.length,")"]}),D.jsx("div",{className:"rides-list",children:r.map(({rideId:S,offer:C,ride:N})=>{const z=Date.now(),k=w(C.expiresAtMs||0),P=C.status!=="pending"||z>(C.expiresAtMs||0),R=C.status==="pending"&&z<=(C.expiresAtMs||0),j=l===S,K=h===S;return D.jsxs("div",{className:`ride-card ${P?"expired":""}`,children:[D.jsxs("div",{className:"ride-header",children:[D.jsx("span",{className:"ride-id",children:S.slice(0,8)}),D.jsx("span",{className:`time-badge ${P?"expired":""}`,children:k})]}),N?D.jsxs("div",{className:"ride-details",children:[D.jsxs("div",{className:"detail-row",children:[D.jsx("span",{className:"label",children:" Pickup"}),D.jsxs("span",{className:"value",children:[N.pickup.lat.toFixed(4),", ",N.pickup.lng.toFixed(4)]})]}),D.jsxs("div",{className:"detail-row",children:[D.jsx("span",{className:"label",children:" Dropoff"}),D.jsxs("span",{className:"value",children:[N.dropoff.lat.toFixed(4),", ",N.dropoff.lng.toFixed(4)]})]}),D.jsxs("div",{className:"detail-row",children:[D.jsx("span",{className:"label",children:" Fare"}),D.jsxs("span",{className:"value",children:["$",((N.priceCents??0)/100).toFixed(2)]})]})]}):D.jsx("div",{className:"ride-details",children:D.jsx("p",{className:"loading",children:"Loading ride details..."})}),D.jsxs("div",{className:"ride-actions",children:[D.jsx("button",{onClick:()=>v(S),disabled:K||j,className:"decline-button",children:K?"Declining...":"Decline"}),D.jsx("button",{onClick:()=>g(S),disabled:!R||j||K,className:"accept-button",title:R?"":"Offer expired or unavailable",children:j?"Accepting...":P?"Expired":"Accept"})]})]},S)})})]})}function xS(t,e){const n=J.useRef(e);J.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const bb=1;function Ob(t){return Object.freeze({__version:bb,map:t})}function kS(t,e){return Object.freeze({...t,...e})}const LS=J.createContext(null),NS=LS.Provider;function Od(){const t=J.useContext(LS);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function bS(t){function e(n,i){const{instance:r,context:o}=t(n).current;return J.useImperativeHandle(i,()=>r),n.children==null?null:je.createElement(NS,{value:o},n.children)}return J.forwardRef(e)}function Mb(t){function e(n,i){const[r,o]=J.useState(!1),{instance:l}=t(n,o).current;J.useImperativeHandle(i,()=>l),J.useEffect(function(){r&&l.update()},[l,r,n.children]);const d=l._contentNode;return d?CE.createPortal(n.children,d):null}return J.forwardRef(e)}function Db(t){function e(n,i){const{instance:r}=t(n).current;return J.useImperativeHandle(i,()=>r),null}return J.forwardRef(e)}function Kg(t,e){const n=J.useRef();J.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Md(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function Vb(t,e){return function(i,r){const o=Od(),l=t(Md(i,o),o);return xS(o.map,i.attribution),Kg(l.current,i.eventHandlers),e(l.current,o,i,r),l}}var rm={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(uP,function(n){var i="1.9.4";function r(s){var a,c,p,_;for(c=1,p=arguments.length;c<p;c++){_=arguments[c];for(a in _)s[a]=_[a]}return s}var o=Object.create||function(){function s(){}return function(a){return s.prototype=a,new s}}();function l(s,a){var c=Array.prototype.slice;if(s.bind)return s.bind.apply(s,c.call(arguments,1));var p=c.call(arguments,2);return function(){return s.apply(a,p.length?p.concat(c.call(arguments)):arguments)}}var d=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++d),s._leaflet_id}function f(s,a,c){var p,_,E,V;return V=function(){p=!1,_&&(E.apply(c,_),_=!1)},E=function(){p?_=arguments:(s.apply(c,arguments),setTimeout(V,a),p=!0)},E}function g(s,a,c){var p=a[1],_=a[0],E=p-_;return s===p&&c?s:((s-_)%E+E)%E+_}function v(){return!1}function w(s,a){if(a===!1)return s;var c=Math.pow(10,a===void 0?6:a);return Math.round(s*c)/c}function S(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function C(s){return S(s).split(/\s+/)}function N(s,a){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var c in a)s.options[c]=a[c];return s.options}function z(s,a,c){var p=[];for(var _ in s)p.push(encodeURIComponent(c?_.toUpperCase():_)+"="+encodeURIComponent(s[_]));return(!a||a.indexOf("?")===-1?"?":"&")+p.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function P(s,a){return s.replace(k,function(c,p){var _=a[p];if(_===void 0)throw new Error("No value provided for variable "+c);return typeof _=="function"&&(_=_(a)),_})}var R=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function j(s,a){for(var c=0;c<s.length;c++)if(s[c]===a)return c;return-1}var K="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function $(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var A=0;function T(s){var a=+new Date,c=Math.max(0,16-(a-A));return A=a+c,window.setTimeout(s,c)}var x=window.requestAnimationFrame||$("RequestAnimationFrame")||T,b=window.cancelAnimationFrame||$("CancelAnimationFrame")||$("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function O(s,a,c){if(c&&x===T)s.call(a);else return x.call(window,l(s,a))}function F(s){s&&b.call(window,s)}var M={__proto__:null,extend:r,create:o,bind:l,get lastId(){return d},stamp:h,throttle:f,wrapNum:g,falseFn:v,formatNum:w,trim:S,splitWords:C,setOptions:N,getParamString:z,template:P,isArray:R,indexOf:j,emptyImageUrl:K,requestFn:x,cancelFn:b,requestAnimFrame:O,cancelAnimFrame:F};function ce(){}ce.extend=function(s){var a=function(){N(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,p=o(c);p.constructor=a,a.prototype=p;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(a[_]=this[_]);return s.statics&&r(a,s.statics),s.includes&&(ue(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=c.options?o(c.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,V=p._initHooks.length;E<V;E++)p._initHooks[E].call(this)}},a},ce.include=function(s){var a=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=a,this.mergeOptions(s.options)),this},ce.mergeOptions=function(s){return r(this.prototype.options,s),this},ce.addInitHook=function(s){var a=Array.prototype.slice.call(arguments,1),c=typeof s=="function"?s:function(){this[s].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function ue(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=R(s)?s:[s];for(var a=0;a<s.length;a++)s[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Le={on:function(s,a,c){if(typeof s=="object")for(var p in s)this._on(p,s[p],a);else{s=C(s);for(var _=0,E=s.length;_<E;_++)this._on(s[_],a,c)}return this},off:function(s,a,c){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],a);else{s=C(s);for(var _=arguments.length===1,E=0,V=s.length;E<V;E++)_?this._off(s[E]):this._off(s[E],a,c)}return this},_on:function(s,a,c,p){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(s,a,c)===!1){c===this&&(c=void 0);var _={fn:a,ctx:c};p&&(_.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(_)}},_off:function(s,a,c){var p,_,E;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(_=0,E=p.length;_<E;_++)p[_].fn=v;delete this._events[s];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var V=this._listens(s,a,c);if(V!==!1){var B=p[V];this._firingCount&&(B.fn=v,this._events[s]=p=p.slice()),p.splice(V,1)}}},fire:function(s,a,c){if(!this.listens(s,c))return this;var p=r({},a,{type:s,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var _=this._events[s];if(_){this._firingCount=this._firingCount+1||1;for(var E=0,V=_.length;E<V;E++){var B=_[E],H=B.fn;B.once&&this.off(s,H,B.ctx),H.call(B.ctx||this,p)}this._firingCount--}}return c&&this._propagateEvent(p),this},listens:function(s,a,c,p){typeof s!="string"&&console.warn('"string" type argument expected');var _=a;typeof a!="function"&&(p=!!a,_=void 0,c=void 0);var E=this._events&&this._events[s];if(E&&E.length&&this._listens(s,_,c)!==!1)return!0;if(p){for(var V in this._eventParents)if(this._eventParents[V].listens(s,a,c,p))return!0}return!1},_listens:function(s,a,c){if(!this._events)return!1;var p=this._events[s]||[];if(!a)return!!p.length;c===this&&(c=void 0);for(var _=0,E=p.length;_<E;_++)if(p[_].fn===a&&p[_].ctx===c)return _;return!1},once:function(s,a,c){if(typeof s=="object")for(var p in s)this._on(p,s[p],a,!0);else{s=C(s);for(var _=0,E=s.length;_<E;_++)this._on(s[_],a,c,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var a in this._eventParents)this._eventParents[a].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};Le.addEventListener=Le.on,Le.removeEventListener=Le.clearAllEventListeners=Le.off,Le.addOneTimeEventListener=Le.once,Le.fireEvent=Le.fire,Le.hasEventListeners=Le.listens;var Ne=ce.extend(Le);function q(s,a,c){this.x=c?Math.round(s):s,this.y=c?Math.round(a):a}var ae=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};q.prototype={clone:function(){return new q(this.x,this.y)},add:function(s){return this.clone()._add(X(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(X(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new q(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new q(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ae(this.x),this.y=ae(this.y),this},distanceTo:function(s){s=X(s);var a=s.x-this.x,c=s.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(s){return s=X(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=X(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+w(this.x)+", "+w(this.y)+")"}};function X(s,a,c){return s instanceof q?s:R(s)?new q(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new q(s.x,s.y):new q(s,a,c)}function le(s,a){if(s)for(var c=a?[s,a]:s,p=0,_=c.length;p<_;p++)this.extend(c[p])}le.prototype={extend:function(s){var a,c;if(!s)return this;if(s instanceof q||typeof s[0]=="number"||"x"in s)a=c=X(s);else if(s=me(s),a=s.min,c=s.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(s){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var a,c;return typeof s[0]=="number"||s instanceof q?s=X(s):s=me(s),s instanceof le?(a=s.min,c=s.max):a=c=s,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(s){s=me(s);var a=this.min,c=this.max,p=s.min,_=s.max,E=_.x>=a.x&&p.x<=c.x,V=_.y>=a.y&&p.y<=c.y;return E&&V},overlaps:function(s){s=me(s);var a=this.min,c=this.max,p=s.min,_=s.max,E=_.x>a.x&&p.x<c.x,V=_.y>a.y&&p.y<c.y;return E&&V},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var a=this.min,c=this.max,p=Math.abs(a.x-c.x)*s,_=Math.abs(a.y-c.y)*s;return me(X(a.x-p,a.y-_),X(c.x+p,c.y+_))},equals:function(s){return s?(s=me(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function me(s,a){return!s||s instanceof le?s:new le(s,a)}function Ee(s,a){if(s)for(var c=a?[s,a]:s,p=0,_=c.length;p<_;p++)this.extend(c[p])}Ee.prototype={extend:function(s){var a=this._southWest,c=this._northEast,p,_;if(s instanceof Ie)p=s,_=s;else if(s instanceof Ee){if(p=s._southWest,_=s._northEast,!p||!_)return this}else return s?this.extend(ve(s)||De(s)):this;return!a&&!c?(this._southWest=new Ie(p.lat,p.lng),this._northEast=new Ie(_.lat,_.lng)):(a.lat=Math.min(p.lat,a.lat),a.lng=Math.min(p.lng,a.lng),c.lat=Math.max(_.lat,c.lat),c.lng=Math.max(_.lng,c.lng)),this},pad:function(s){var a=this._southWest,c=this._northEast,p=Math.abs(a.lat-c.lat)*s,_=Math.abs(a.lng-c.lng)*s;return new Ee(new Ie(a.lat-p,a.lng-_),new Ie(c.lat+p,c.lng+_))},getCenter:function(){return new Ie((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ie(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ie(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Ie||"lat"in s?s=ve(s):s=De(s);var a=this._southWest,c=this._northEast,p,_;return s instanceof Ee?(p=s.getSouthWest(),_=s.getNorthEast()):p=_=s,p.lat>=a.lat&&_.lat<=c.lat&&p.lng>=a.lng&&_.lng<=c.lng},intersects:function(s){s=De(s);var a=this._southWest,c=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),E=_.lat>=a.lat&&p.lat<=c.lat,V=_.lng>=a.lng&&p.lng<=c.lng;return E&&V},overlaps:function(s){s=De(s);var a=this._southWest,c=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),E=_.lat>a.lat&&p.lat<c.lat,V=_.lng>a.lng&&p.lng<c.lng;return E&&V},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,a){return s?(s=De(s),this._southWest.equals(s.getSouthWest(),a)&&this._northEast.equals(s.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function De(s,a){return s instanceof Ee?s:new Ee(s,a)}function Ie(s,a,c){if(isNaN(s)||isNaN(a))throw new Error("Invalid LatLng object: ("+s+", "+a+")");this.lat=+s,this.lng=+a,c!==void 0&&(this.alt=+c)}Ie.prototype={equals:function(s,a){if(!s)return!1;s=ve(s);var c=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return c<=(a===void 0?1e-9:a)},toString:function(s){return"LatLng("+w(this.lat,s)+", "+w(this.lng,s)+")"},distanceTo:function(s){return Yn.distance(this,ve(s))},wrap:function(){return Yn.wrapLatLng(this)},toBounds:function(s){var a=180*s/40075017,c=a/Math.cos(Math.PI/180*this.lat);return De([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new Ie(this.lat,this.lng,this.alt)}};function ve(s,a,c){return s instanceof Ie?s:R(s)&&typeof s[0]!="object"?s.length===3?new Ie(s[0],s[1],s[2]):s.length===2?new Ie(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Ie(s.lat,"lng"in s?s.lng:s.lon,s.alt):a===void 0?null:new Ie(s,a,c)}var yt={latLngToPoint:function(s,a){var c=this.projection.project(s),p=this.scale(a);return this.transformation._transform(c,p)},pointToLatLng:function(s,a){var c=this.scale(a),p=this.transformation.untransform(s,c);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(s),p=this.transformation.transform(a.min,c),_=this.transformation.transform(a.max,c);return new le(p,_)},infinite:!1,wrapLatLng:function(s){var a=this.wrapLng?g(s.lng,this.wrapLng,!0):s.lng,c=this.wrapLat?g(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new Ie(c,a,p)},wrapLatLngBounds:function(s){var a=s.getCenter(),c=this.wrapLatLng(a),p=a.lat-c.lat,_=a.lng-c.lng;if(p===0&&_===0)return s;var E=s.getSouthWest(),V=s.getNorthEast(),B=new Ie(E.lat-p,E.lng-_),H=new Ie(V.lat-p,V.lng-_);return new Ee(B,H)}},Yn=r({},yt,{wrapLng:[-180,180],R:6371e3,distance:function(s,a){var c=Math.PI/180,p=s.lat*c,_=a.lat*c,E=Math.sin((a.lat-s.lat)*c/2),V=Math.sin((a.lng-s.lng)*c/2),B=E*E+Math.cos(p)*Math.cos(_)*V*V,H=2*Math.atan2(Math.sqrt(B),Math.sqrt(1-B));return this.R*H}}),Ru=6378137,qi={R:Ru,MAX_LATITUDE:85.0511287798,project:function(s){var a=Math.PI/180,c=this.MAX_LATITUDE,p=Math.max(Math.min(c,s.lat),-c),_=Math.sin(p*a);return new q(this.R*s.lng*a,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(s){var a=180/Math.PI;return new Ie((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*a,s.x*a/this.R)},bounds:function(){var s=Ru*Math.PI;return new le([-s,-s],[s,s])}()};function Gi(s,a,c,p){if(R(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=a,this._c=c,this._d=p}Gi.prototype={transform:function(s,a){return this._transform(s.clone(),a)},_transform:function(s,a){return a=a||1,s.x=a*(this._a*s.x+this._b),s.y=a*(this._c*s.y+this._d),s},untransform:function(s,a){return a=a||1,new q((s.x/a-this._b)/this._a,(s.y/a-this._d)/this._c)}};function gi(s,a,c,p){return new Gi(s,a,c,p)}var Kr=r({},Yn,{code:"EPSG:3857",projection:qi,transformation:function(){var s=.5/(Math.PI*qi.R);return gi(s,.5,-s,.5)}()}),wa=r({},Kr,{code:"EPSG:900913"});function Us(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Ea(s,a){var c="",p,_,E,V,B,H;for(p=0,E=s.length;p<E;p++){for(B=s[p],_=0,V=B.length;_<V;_++)H=B[_],c+=(_?"L":"M")+H.x+" "+H.y;c+=a?se.svg?"z":"x":""}return c||"M0 0"}var Ta=document.documentElement.style,Bs="ActiveXObject"in window,xu=Bs&&!document.addEventListener,js="msLaunchUri"in navigator&&!("documentMode"in document),Hs=yn("webkit"),ku=yn("android"),Ws=yn("android 2")||yn("android 3"),Ia=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Lu=ku&&yn("Google")&&Ia<537&&!("AudioNode"in window),dt=!!window.opera,It=!js&&yn("chrome"),Qr=yn("gecko")&&!Hs&&!dt&&!Bs,Nu=!It&&yn("safari"),Sa=yn("phantom"),bu="OTransition"in Ta,Yr=navigator.platform.indexOf("Win")===0,Pa=Bs&&"transition"in Ta,$s="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ws,qs="MozPerspective"in Ta,Fd=!window.L_DISABLE_3D&&(Pa||$s||qs)&&!bu&&!Sa,Xr=typeof orientation<"u"||yn("mobile"),Aa=Xr&&Hs,Ou=Xr&&$s,Ca=!window.PointerEvent&&window.MSPointerEvent,Zi=!!(window.PointerEvent||Ca),Gs="ontouchstart"in window||!!window.TouchEvent,Ra=!window.L_NO_TOUCH&&(Gs||Zi),_i=Xr&&dt,Mu=Xr&&Qr,Zs=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Du=function(){var s=!1;try{var a=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",v,a),window.removeEventListener("testPassiveEventSupport",v,a)}catch{}return s}(),Jr=function(){return!!document.createElement("canvas").getContext}(),Ks=!!(document.createElementNS&&Us("svg").createSVGRect),Lt=!!Ks&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Vu=!Ks&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var a=s.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),es=navigator.platform.indexOf("Mac")===0,ts=navigator.platform.indexOf("Linux")===0;function yn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var se={ie:Bs,ielt9:xu,edge:js,webkit:Hs,android:ku,android23:Ws,androidStock:Lu,opera:dt,chrome:It,gecko:Qr,safari:Nu,phantom:Sa,opera12:bu,win:Yr,ie3d:Pa,webkit3d:$s,gecko3d:qs,any3d:Fd,mobile:Xr,mobileWebkit:Aa,mobileWebkit3d:Ou,msPointer:Ca,pointer:Zi,touch:Ra,touchNative:Gs,mobileOpera:_i,mobileGecko:Mu,retina:Zs,passiveEvents:Du,canvas:Jr,svg:Ks,vml:Vu,inlineSvg:Lt,mac:es,linux:ts},vi=se.msPointer?"MSPointerDown":"pointerdown",Fu=se.msPointer?"MSPointerMove":"pointermove",zu=se.msPointer?"MSPointerUp":"pointerup",ns=se.msPointer?"MSPointerCancel":"pointercancel",Qs={touchstart:vi,touchmove:Fu,touchend:zu,touchcancel:ns},Ys={touchstart:Js,touchmove:Xs,touchend:Xs,touchcancel:Xs},On={},Mn=!1;function Uu(s,a,c){return a==="touchstart"&&ju(),Ys[a]?(c=Ys[a].bind(this,c),s.addEventListener(Qs[a],c,!1),c):(console.warn("wrong event specified:",a),v)}function Bu(s,a,c){if(!Qs[a]){console.warn("wrong event specified:",a);return}s.removeEventListener(Qs[a],c,!1)}function xa(s){On[s.pointerId]=s}function ka(s){On[s.pointerId]&&(On[s.pointerId]=s)}function La(s){delete On[s.pointerId]}function ju(){Mn||(document.addEventListener(vi,xa,!0),document.addEventListener(Fu,ka,!0),document.addEventListener(zu,La,!0),document.addEventListener(ns,La,!0),Mn=!0)}function Xs(s,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in On)a.touches.push(On[c]);a.changedTouches=[a],s(a)}}function Js(s,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&Xe(a),Xs(s,a)}function Hu(s){var a={},c,p;for(p in s)c=s[p],a[p]=c&&c.bind?c.bind(s):c;return s=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var Na=200;function is(s,a){s.addEventListener("dblclick",a);var c=0,p;function _(E){if(E.detail!==1){p=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var V=Wa(E);if(!(V.some(function(H){return H instanceof HTMLLabelElement&&H.attributes.for})&&!V.some(function(H){return H instanceof HTMLInputElement||H instanceof HTMLSelectElement}))){var B=Date.now();B-c<=Na?(p++,p===2&&a(Hu(E))):p=1,c=B}}}return s.addEventListener("click",_),{dblclick:a,simDblclick:_}}function yi(s,a){s.removeEventListener("dblclick",a.dblclick),s.removeEventListener("click",a.simDblclick)}var rs=Ei(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ss=Ei(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ba=ss==="webkitTransition"||ss==="OTransition"?ss+"End":"transitionend";function Oa(s){return typeof s=="string"?document.getElementById(s):s}function Ki(s,a){var c=s.style[a]||s.currentStyle&&s.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);c=p?p[a]:null}return c==="auto"?null:c}function Re(s,a,c){var p=document.createElement(s);return p.className=a||"",c&&c.appendChild(p),p}function He(s){var a=s.parentNode;a&&a.removeChild(s)}function os(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function wi(s){var a=s.parentNode;a&&a.lastChild!==s&&a.appendChild(s)}function Qi(s){var a=s.parentNode;a&&a.firstChild!==s&&a.insertBefore(s,a.firstChild)}function Ma(s,a){if(s.classList!==void 0)return s.classList.contains(a);var c=wn(s);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function we(s,a){if(s.classList!==void 0)for(var c=C(a),p=0,_=c.length;p<_;p++)s.classList.add(c[p]);else if(!Ma(s,a)){var E=wn(s);Da(s,(E?E+" ":"")+a)}}function Ke(s,a){s.classList!==void 0?s.classList.remove(a):Da(s,S((" "+wn(s)+" ").replace(" "+a+" "," ")))}function Da(s,a){s.className.baseVal===void 0?s.className=a:s.className.baseVal=a}function wn(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function rt(s,a){"opacity"in s.style?s.style.opacity=a:"filter"in s.style&&eo(s,a)}function eo(s,a){var c=!1,p="DXImageTransform.Microsoft.Alpha";try{c=s.filters.item(p)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):s.style.filter+=" progid:"+p+"(opacity="+a+")"}function Ei(s){for(var a=document.documentElement.style,c=0;c<s.length;c++)if(s[c]in a)return s[c];return!1}function Xn(s,a,c){var p=a||new q(0,0);s.style[rs]=(se.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(c?" scale("+c+")":"")}function ge(s,a){s._leaflet_pos=a,se.any3d?Xn(s,a):(s.style.left=a.x+"px",s.style.top=a.y+"px")}function En(s){return s._leaflet_pos||new q(0,0)}var Dn,Vn,Va;if("onselectstart"in document)Dn=function(){he(window,"selectstart",Xe)},Vn=function(){Ue(window,"selectstart",Xe)};else{var Yi=Ei(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Dn=function(){if(Yi){var s=document.documentElement.style;Va=s[Yi],s[Yi]="none"}},Vn=function(){Yi&&(document.documentElement.style[Yi]=Va,Va=void 0)}}function Fa(){he(window,"dragstart",Xe)}function za(){Ue(window,"dragstart",Xe)}var to,Ua;function Ti(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(an(),to=s,Ua=s.style.outlineStyle,s.style.outlineStyle="none",he(window,"keydown",an))}function an(){to&&(to.style.outlineStyle=Ua,to=void 0,Ua=void 0,Ue(window,"keydown",an))}function Ba(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function no(s){var a=s.getBoundingClientRect();return{x:a.width/s.offsetWidth||1,y:a.height/s.offsetHeight||1,boundingClientRect:a}}var Wu={__proto__:null,TRANSFORM:rs,TRANSITION:ss,TRANSITION_END:ba,get:Oa,getStyle:Ki,create:Re,remove:He,empty:os,toFront:wi,toBack:Qi,hasClass:Ma,addClass:we,removeClass:Ke,setClass:Da,getClass:wn,setOpacity:rt,testProp:Ei,setTransform:Xn,setPosition:ge,getPosition:En,get disableTextSelection(){return Dn},get enableTextSelection(){return Vn},disableImageDrag:Fa,enableImageDrag:za,preventOutline:Ti,restoreOutline:an,getSizedParentNode:Ba,getScale:no};function he(s,a,c,p){if(a&&typeof a=="object")for(var _ in a)ja(s,_,a[_],c);else{a=C(a);for(var E=0,V=a.length;E<V;E++)ja(s,a[E],c,p)}return this}var Tn="_leaflet_events";function Ue(s,a,c,p){if(arguments.length===1)$u(s),delete s[Tn];else if(a&&typeof a=="object")for(var _ in a)Ha(s,_,a[_],c);else if(a=C(a),arguments.length===2)$u(s,function(B){return j(a,B)!==-1});else for(var E=0,V=a.length;E<V;E++)Ha(s,a[E],c,p);return this}function $u(s,a){for(var c in s[Tn]){var p=c.split(/\d/)[0];(!a||a(p))&&Ha(s,p,null,null,c)}}var In={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ja(s,a,c,p){var _=a+h(c)+(p?"_"+h(p):"");if(s[Tn]&&s[Tn][_])return this;var E=function(B){return c.call(p||s,B||window.event)},V=E;!se.touchNative&&se.pointer&&a.indexOf("touch")===0?E=Uu(s,a,E):se.touch&&a==="dblclick"?E=is(s,E):"addEventListener"in s?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?s.addEventListener(In[a]||a,E,se.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(E=function(B){B=B||window.event,$a(s,B)&&V(B)},s.addEventListener(In[a],E,!1)):s.addEventListener(a,V,!1):s.attachEvent("on"+a,E),s[Tn]=s[Tn]||{},s[Tn][_]=E}function Ha(s,a,c,p,_){_=_||a+h(c)+(p?"_"+h(p):"");var E=s[Tn]&&s[Tn][_];if(!E)return this;!se.touchNative&&se.pointer&&a.indexOf("touch")===0?Bu(s,a,E):se.touch&&a==="dblclick"?yi(s,E):"removeEventListener"in s?s.removeEventListener(In[a]||a,E,!1):s.detachEvent("on"+a,E),s[Tn][_]=null}function Sn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Xi(s){return ja(s,"wheel",Sn),this}function Ji(s){return he(s,"mousedown touchstart dblclick contextmenu",Sn),s._leaflet_disable_click=!0,this}function Xe(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function ln(s){return Xe(s),Sn(s),this}function Wa(s){if(s.composedPath)return s.composedPath();for(var a=[],c=s.target;c;)a.push(c),c=c.parentNode;return a}function io(s,a){if(!a)return new q(s.clientX,s.clientY);var c=no(a),p=c.boundingClientRect;return new q((s.clientX-p.left)/c.x-a.clientLeft,(s.clientY-p.top)/c.y-a.clientTop)}var Qe=se.linux&&se.chrome?window.devicePixelRatio:se.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function qu(s){return se.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Qe:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function $a(s,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==s;)c=c.parentNode}catch{return!1}return c!==s}var Gu={__proto__:null,on:he,off:Ue,stopPropagation:Sn,disableScrollPropagation:Xi,disableClickPropagation:Ji,preventDefault:Xe,stop:ln,getPropagationPath:Wa,getMousePosition:io,getWheelDelta:qu,isExternalTarget:$a,addListener:he,removeListener:Ue},qa=Ne.extend({run:function(s,a,c,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=En(s),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=O(this._animate,this),this._step()},_step:function(s){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),s):(this._runFrame(1),this._complete())},_runFrame:function(s,a){var c=this._startPos.add(this._offset.multiplyBy(s));a&&c._round(),ge(this._el,c),this.fire("step")},_complete:function(){F(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Pe=Ne.extend({options:{crs:Kr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,a){a=N(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(ve(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ss&&se.any3d&&!se.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),he(this._proxy,ba,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),s=this._limitCenter(ve(s),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=r({animate:c.animate},c.zoom),c.pan=r({animate:c.animate,duration:c.duration},c.pan));var p=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,a,c.zoom):this._tryAnimatedPan(s,c.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(s,a){return this._loaded?this.setView(this.getCenter(),s,{zoom:a}):(this._zoom=s,this)},zoomIn:function(s,a){return s=s||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,a)},zoomOut:function(s,a){return s=s||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,a)},setZoomAround:function(s,a,c){var p=this.getZoomScale(a),_=this.getSize().divideBy(2),E=s instanceof q?s:this.latLngToContainerPoint(s),V=E.subtract(_).multiplyBy(1-1/p),B=this.containerPointToLatLng(_.add(V));return this.setView(B,a,{zoom:c})},_getBoundsCenterZoom:function(s,a){a=a||{},s=s.getBounds?s.getBounds():De(s);var c=X(a.paddingTopLeft||a.padding||[0,0]),p=X(a.paddingBottomRight||a.padding||[0,0]),_=this.getBoundsZoom(s,!1,c.add(p));if(_=typeof a.maxZoom=="number"?Math.min(a.maxZoom,_):_,_===1/0)return{center:s.getCenter(),zoom:_};var E=p.subtract(c).divideBy(2),V=this.project(s.getSouthWest(),_),B=this.project(s.getNorthEast(),_),H=this.unproject(V.add(B).divideBy(2).add(E),_);return{center:H,zoom:_}},fitBounds:function(s,a){if(s=De(s),!s.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(s,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,a){return this.setView(s,this._zoom,{pan:a})},panBy:function(s,a){if(s=X(s).round(),a=a||{},!s.x&&!s.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new qa,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){we(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,a,c){if(c=c||{},c.animate===!1||!se.any3d)return this.setView(s,a,c);this._stop();var p=this.project(this.getCenter()),_=this.project(s),E=this.getSize(),V=this._zoom;s=ve(s),a=a===void 0?V:a;var B=Math.max(E.x,E.y),H=B*this.getZoomScale(V,a),Q=_.distanceTo(p)||1,te=1.42,de=te*te;function Se(pt){var uc=pt?-1:1,sP=pt?H:B,oP=H*H-B*B+uc*de*de*Q*Q,aP=2*sP*de*Q,$d=oP/aP,v_=Math.sqrt($d*$d+1)-$d,lP=v_<1e-9?-18:Math.log(v_);return lP}function $t(pt){return(Math.exp(pt)-Math.exp(-pt))/2}function Pt(pt){return(Math.exp(pt)+Math.exp(-pt))/2}function An(pt){return $t(pt)/Pt(pt)}var Xt=Se(0);function _o(pt){return B*(Pt(Xt)/Pt(Xt+te*pt))}function tP(pt){return B*(Pt(Xt)*An(Xt+te*pt)-$t(Xt))/de}function nP(pt){return 1-Math.pow(1-pt,1.5)}var iP=Date.now(),g_=(Se(1)-Xt)/te,rP=c.duration?1e3*c.duration:1e3*g_*.8;function __(){var pt=(Date.now()-iP)/rP,uc=nP(pt)*g_;pt<=1?(this._flyToFrame=O(__,this),this._move(this.unproject(p.add(_.subtract(p).multiplyBy(tP(uc)/Q)),V),this.getScaleZoom(B/_o(uc),V),{flyTo:!0})):this._move(s,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),__.call(this),this},flyToBounds:function(s,a){var c=this._getBoundsCenterZoom(s,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(s){return s=De(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var a=this.options.minZoom;return this.options.minZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var a=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,a){this._enforcingBounds=!0;var c=this.getCenter(),p=this._limitCenter(c,this._zoom,De(s));return c.equals(p)||this.panTo(p,a),this._enforcingBounds=!1,this},panInside:function(s,a){a=a||{};var c=X(a.paddingTopLeft||a.padding||[0,0]),p=X(a.paddingBottomRight||a.padding||[0,0]),_=this.project(this.getCenter()),E=this.project(s),V=this.getPixelBounds(),B=me([V.min.add(c),V.max.subtract(p)]),H=B.getSize();if(!B.contains(E)){this._enforcingBounds=!0;var Q=E.subtract(B.getCenter()),te=B.extend(E).getSize().subtract(H);_.x+=Q.x<0?-te.x:te.x,_.y+=Q.y<0?-te.y:te.y,this.panTo(this.unproject(_),a),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),p=a.divideBy(2).round(),_=c.divideBy(2).round(),E=p.subtract(_);return!E.x&&!E.y?this:(s.animate&&s.pan?this.panBy(E):(s.pan&&this._rawPanBy(E),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,s):navigator.geolocation.getCurrentPosition(a,c,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var a=s.code,c=s.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var a=s.coords.latitude,c=s.coords.longitude,p=new Ie(a,c),_=p.toBounds(s.coords.accuracy*2),E=this._locateOptions;if(E.setView){var V=this.getBoundsZoom(_);this.setView(p,E.maxZoom?Math.min(V,E.maxZoom):V)}var B={latlng:p,bounds:_,timestamp:s.timestamp};for(var H in s.coords)typeof s.coords[H]=="number"&&(B[H]=s.coords[H]);this.fire("locationfound",B)}},addHandler:function(s,a){if(!a)return this;var c=this[s]=new a(this);return this._handlers.push(c),this.options[s]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),He(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(F(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)He(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,a){var c="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Re("div",c,a||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),a=this.unproject(s.getBottomLeft()),c=this.unproject(s.getTopRight());return new Ee(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,a,c){s=De(s),c=X(c||[0,0]);var p=this.getZoom()||0,_=this.getMinZoom(),E=this.getMaxZoom(),V=s.getNorthWest(),B=s.getSouthEast(),H=this.getSize().subtract(c),Q=me(this.project(B,p),this.project(V,p)).getSize(),te=se.any3d?this.options.zoomSnap:1,de=H.x/Q.x,Se=H.y/Q.y,$t=a?Math.max(de,Se):Math.min(de,Se);return p=this.getScaleZoom($t,p),te&&(p=Math.round(p/(te/100))*(te/100),p=a?Math.ceil(p/te)*te:Math.floor(p/te)*te),Math.max(_,Math.min(E,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,a){var c=this._getTopLeftPoint(s,a);return new le(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(s)/c.scale(a)},getScaleZoom:function(s,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var p=c.zoom(s*c.scale(a));return isNaN(p)?1/0:p},project:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(ve(s),a)},unproject:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(X(s),a)},layerPointToLatLng:function(s){var a=X(s).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(s){var a=this.project(ve(s))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ve(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(De(s))},distance:function(s,a){return this.options.crs.distance(ve(s),ve(a))},containerPointToLayerPoint:function(s){return X(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return X(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var a=this.containerPointToLayerPoint(X(s));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ve(s)))},mouseEventToContainerPoint:function(s){return io(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var a=this._container=Oa(s);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");he(a,"scroll",this._onScroll,this),this._containerId=h(a)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&se.any3d,we(s,"leaflet-container"+(se.touch?" leaflet-touch":"")+(se.retina?" leaflet-retina":"")+(se.ielt9?" leaflet-oldie":"")+(se.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=Ki(s,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ge(this._mapPane,new q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(we(s.markerPane,"leaflet-zoom-hide"),we(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,a,c){ge(this._mapPane,new q(0,0));var p=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var _=this._zoom!==a;this._moveStart(_,c)._move(s,a)._moveEnd(_),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,a){return s&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(s,a,c,p){a===void 0&&(a=this._zoom);var _=this._zoom!==a;return this._zoom=a,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?c&&c.pinch&&this.fire("zoom",c):((_||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return F(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){ge(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var a=s?Ue:he;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),se.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){F(this._resizeRequest),this._resizeRequest=O(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,a){for(var c=[],p,_=a==="mouseout"||a==="mouseover",E=s.target||s.srcElement,V=!1;E;){if(p=this._targets[h(E)],p&&(a==="click"||a==="preclick")&&this._draggableMoved(p)){V=!0;break}if(p&&p.listens(a,!0)&&(_&&!$a(E,s)||(c.push(p),_))||E===this._container)break;E=E.parentNode}return!c.length&&!V&&!_&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var a=s.target||s.srcElement;if(!(!this._loaded||a._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(a))){var c=s.type;c==="mousedown"&&Ti(a),this._fireDOMEvent(s,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,a,c){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,c)}var _=this._findEventTargets(s,a);if(c){for(var E=[],V=0;V<c.length;V++)c[V].listens(a,!0)&&E.push(c[V]);_=E.concat(_)}if(_.length){a==="contextmenu"&&Xe(s);var B=_[0],H={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Q=B.getLatLng&&(!B._radius||B._radius<=10);H.containerPoint=Q?this.latLngToContainerPoint(B.getLatLng()):this.mouseEventToContainerPoint(s),H.layerPoint=this.containerPointToLayerPoint(H.containerPoint),H.latlng=Q?B.getLatLng():this.layerPointToLatLng(H.layerPoint)}for(V=0;V<_.length;V++)if(_[V].fire(a,H,!0),H.originalEvent._stopped||_[V].options.bubblingMouseEvents===!1&&j(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,a=this._handlers.length;s<a;s++)this._handlers[s].disable()},whenReady:function(s,a){return this._loaded?s.call(a||this,{target:this}):this.on("load",s,a),this},_getMapPanePos:function(){return En(this._mapPane)||new q(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,a){var c=s&&a!==void 0?this._getNewPixelOrigin(s,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,a){var c=this.getSize()._divideBy(2);return this.project(s,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,a,c){var p=this._getNewPixelOrigin(c,a);return this.project(s,a)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,a,c){var p=this._getNewPixelOrigin(c,a);return me([this.project(s.getSouthWest(),a)._subtract(p),this.project(s.getNorthWest(),a)._subtract(p),this.project(s.getSouthEast(),a)._subtract(p),this.project(s.getNorthEast(),a)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,a,c){if(!c)return s;var p=this.project(s,a),_=this.getSize().divideBy(2),E=new le(p.subtract(_),p.add(_)),V=this._getBoundsOffset(E,c,a);return Math.abs(V.x)<=1&&Math.abs(V.y)<=1?s:this.unproject(p.add(V),a)},_limitOffset:function(s,a){if(!a)return s;var c=this.getPixelBounds(),p=new le(c.min.add(s),c.max.add(s));return s.add(this._getBoundsOffset(p,a))},_getBoundsOffset:function(s,a,c){var p=me(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),_=p.min.subtract(s.min),E=p.max.subtract(s.max),V=this._rebound(_.x,-E.x),B=this._rebound(_.y,-E.y);return new q(V,B)},_rebound:function(s,a){return s+a>0?Math.round(s-a)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(a))},_limitZoom:function(s){var a=this.getMinZoom(),c=this.getMaxZoom(),p=se.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(a,Math.min(c,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ke(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,a){var c=this._getCenterOffset(s)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var s=this._proxy=Re("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(a){var c=rs,p=this._proxy.style[c];Xn(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),p===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){He(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),a=this.getZoom();Xn(this._proxy,this.project(s,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(a),_=this._getCenterOffset(s)._divideBy(1-1/p);return c.animate!==!0&&!this.getSize().contains(_)?!1:(O(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(s,a,!0)},this),!0)},_animateZoom:function(s,a,c,p){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=a,we(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:a,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ke(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ro(s,a){return new Pe(s,a)}var Yt=ce.extend({options:{position:"topright"},initialize:function(s){N(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var a=this._map;return a&&a.removeControl(this),this.options.position=s,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var a=this._container=this.onAdd(s),c=this.getPosition(),p=s._controlCorners[c];return we(a,"leaflet-control"),c.indexOf("bottom")!==-1?p.insertBefore(a,p.firstChild):p.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(He(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Wt=function(s){return new Yt(s)};Pe.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},a="leaflet-",c=this._controlContainer=Re("div",a+"control-container",this._container);function p(_,E){var V=a+_+" "+a+E;s[_+E]=Re("div",V,c)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)He(this._controlCorners[s]);He(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ga=Yt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,a,c,p){return c<p?-1:p<c?1:0}},initialize:function(s,a,c){N(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in a)this._addLayer(a[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Yt.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,a){return this._addLayer(s,a),this._map?this._update():this},addOverlay:function(s,a){return this._addLayer(s,a,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var a=this._getLayer(h(s));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){we(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(we(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Ke(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ke(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",a=this._container=Re("div",s),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),Ji(a),Xi(a);var p=this._section=Re("section",s+"-list");c&&(this._map.on("click",this.collapse,this),he(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=Re("a",s+"-toggle",a);_.href="#",_.title="Layers",_.setAttribute("role","button"),he(_,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){Xe(E),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Re("div",s+"-base",p),this._separator=Re("div",s+"-separator",p),this._overlaysList=Re("div",s+"-overlays",p),a.appendChild(p)},_getLayer:function(s){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&h(this._layers[a].layer)===s)return this._layers[a]},_addLayer:function(s,a,c){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(p,_){return this.options.sortFunction(p.layer,_.layer,p.name,_.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;os(this._baseLayersList),os(this._overlaysList),this._layerControlInputs=[];var s,a,c,p,_=0;for(c=0;c<this._layers.length;c++)p=this._layers[c],this._addItem(p),a=a||p.overlay,s=s||!p.overlay,_+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&_>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=a&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var a=this._getLayer(h(s.target)),c=a.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(s,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(a?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=c,p.firstChild},_addItem:function(s){var a=document.createElement("label"),c=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=c):p=this._createRadioElement("leaflet-base-layers_"+h(this),c),this._layerControlInputs.push(p),p.layerId=h(s.layer),he(p,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+s.name;var E=document.createElement("span");a.appendChild(E),E.appendChild(p),E.appendChild(_);var V=s.overlay?this._overlaysList:this._baseLayersList;return V.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,a,c,p=[],_=[];this._handlingClick=!0;for(var E=s.length-1;E>=0;E--)a=s[E],c=this._getLayer(a.layerId).layer,a.checked?p.push(c):a.checked||_.push(c);for(E=0;E<_.length;E++)this._map.hasLayer(_[E])&&this._map.removeLayer(_[E]);for(E=0;E<p.length;E++)this._map.hasLayer(p[E])||this._map.addLayer(p[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,a,c,p=this._map.getZoom(),_=s.length-1;_>=0;_--)a=s[_],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&p<c.options.minZoom||c.options.maxZoom!==void 0&&p>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,he(s,"click",Xe),this.expand();var a=this;setTimeout(function(){Ue(s,"click",Xe),a._preventClick=!1})}}),zd=function(s,a,c){return new Ga(s,a,c)},Ii=Yt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var a="leaflet-control-zoom",c=Re("div",a+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,a,c,p,_){var E=Re("a",c,p);return E.innerHTML=s,E.href="#",E.title=a,E.setAttribute("role","button"),E.setAttribute("aria-label",a),Ji(E),he(E,"click",ln),he(E,"click",_,this),he(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var s=this._map,a="leaflet-disabled";Ke(this._zoomInButton,a),Ke(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(we(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(we(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Pe.mergeOptions({zoomControl:!0}),Pe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ii,this.addControl(this.zoomControl))});var Zu=function(s){return new Ii(s)},so=Yt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var a="leaflet-control-scale",c=Re("div",a),p=this.options;return this._addScales(p,a+"-line",c),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),c},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,a,c){s.metric&&(this._mScale=Re("div",a,c)),s.imperial&&(this._iScale=Re("div",a,c))},_update:function(){var s=this._map,a=s.getSize().y/2,c=s.distance(s.containerPointToLatLng([0,a]),s.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var a=this._getRoundNum(s),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/s)},_updateImperial:function(s){var a=s*3.2808399,c,p,_;a>5280?(c=a/5280,p=this._getRoundNum(c),this._updateScale(this._iScale,p+" mi",p/c)):(_=this._getRoundNum(a),this._updateScale(this._iScale,_+" ft",_/a))},_updateScale:function(s,a,c){s.style.width=Math.round(this.options.maxWidth*c)+"px",s.innerHTML=a},_getRoundNum:function(s){var a=Math.pow(10,(Math.floor(s)+"").length-1),c=s/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),oo=function(s){return new so(s)},Ku='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',er=Yt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(se.inlineSvg?Ku+" ":"")+"Leaflet</a>"},initialize:function(s){N(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Re("div","leaflet-control-attribution"),Ji(this._container);for(var a in s._layers)s._layers[a].getAttribution&&this.addAttribution(s._layers[a].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var a in this._attributions)this._attributions[a]&&s.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),s.length&&c.push(s.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Pe.mergeOptions({attributionControl:!0}),Pe.addInitHook(function(){this.options.attributionControl&&new er().addTo(this)});var Ud=function(s){return new er(s)};Yt.Layers=Ga,Yt.Zoom=Ii,Yt.Scale=so,Yt.Attribution=er,Wt.layers=zd,Wt.zoom=Zu,Wt.scale=oo,Wt.attribution=Ud;var un=ce.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});un.addTo=function(s,a){return s.addHandler(a,this),this};var as={Events:Le},Za=se.touch?"touchstart mousedown":"mousedown",Fn=Ne.extend({options:{clickTolerance:3},initialize:function(s,a,c,p){N(this,p),this._element=s,this._dragStartTarget=a||s,this._preventOutline=c},enable:function(){this._enabled||(he(this._dragStartTarget,Za,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Fn._dragging===this&&this.finishDrag(!0),Ue(this._dragStartTarget,Za,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Ma(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Fn._dragging===this&&this.finishDrag();return}if(!(Fn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Fn._dragging=this,this._preventOutline&&Ti(this._element),Fa(),Dn(),!this._moving)){this.fire("down");var a=s.touches?s.touches[0]:s,c=Ba(this._element);this._startPoint=new q(a.clientX,a.clientY),this._startPos=En(this._element),this._parentScale=no(c);var p=s.type==="mousedown";he(document,p?"mousemove":"touchmove",this._onMove,this),he(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var a=s.touches&&s.touches.length===1?s.touches[0]:s,c=new q(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,Xe(s),this._moved||(this.fire("dragstart"),this._moved=!0,we(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),we(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),ge(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Ke(document.body,"leaflet-dragging"),this._lastTarget&&(Ke(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ue(document,"mousemove touchmove",this._onMove,this),Ue(document,"mouseup touchend touchcancel",this._onUp,this),za(),Vn();var a=this._moved&&this._moving;this._moving=!1,Fn._dragging=!1,a&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function ao(s,a,c){var p,_=[1,4,2,8],E,V,B,H,Q,te,de,Se;for(E=0,te=s.length;E<te;E++)s[E]._code=Jn(s[E],a);for(B=0;B<4;B++){for(de=_[B],p=[],E=0,te=s.length,V=te-1;E<te;V=E++)H=s[E],Q=s[V],H._code&de?Q._code&de||(Se=St(Q,H,de,a,c),Se._code=Jn(Se,a),p.push(Se)):(Q._code&de&&(Se=St(Q,H,de,a,c),Se._code=Jn(Se,a),p.push(Se)),p.push(H));s=p}return s}function lo(s,a){var c,p,_,E,V,B,H,Q,te;if(!s||s.length===0)throw new Error("latlngs not passed");u(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var de=ve([0,0]),Se=De(s),$t=Se.getNorthWest().distanceTo(Se.getSouthWest())*Se.getNorthEast().distanceTo(Se.getNorthWest());$t<1700&&(de=uo(s));var Pt=s.length,An=[];for(c=0;c<Pt;c++){var Xt=ve(s[c]);An.push(a.project(ve([Xt.lat-de.lat,Xt.lng-de.lng])))}for(B=H=Q=0,c=0,p=Pt-1;c<Pt;p=c++)_=An[c],E=An[p],V=_.y*E.x-E.y*_.x,H+=(_.x+E.x)*V,Q+=(_.y+E.y)*V,B+=V*3;B===0?te=An[0]:te=[H/B,Q/B];var _o=a.unproject(X(te));return ve([_o.lat+de.lat,_o.lng+de.lng])}function uo(s){for(var a=0,c=0,p=0,_=0;_<s.length;_++){var E=ve(s[_]);a+=E.lat,c+=E.lng,p++}return ve([a/p,c/p])}var co={__proto__:null,clipPolygon:ao,polygonCenter:lo,centroid:uo};function Ka(s,a){if(!a||!s.length)return s.slice();var c=a*a;return s=Yu(s,c),s=Qu(s,c),s}function Qa(s,a,c){return Math.sqrt(Pn(s,a,c,!0))}function Si(s,a,c){return Pn(s,a,c)}function Qu(s,a){var c=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,_=new p(c);_[0]=_[c-1]=1,ho(s,_,a,0,c-1);var E,V=[];for(E=0;E<c;E++)_[E]&&V.push(s[E]);return V}function ho(s,a,c,p,_){var E=0,V,B,H;for(B=p+1;B<=_-1;B++)H=Pn(s[B],s[p],s[_],!0),H>E&&(V=B,E=H);E>c&&(a[V]=1,ho(s,a,c,p,V),ho(s,a,c,V,_))}function Yu(s,a){for(var c=[s[0]],p=1,_=0,E=s.length;p<E;p++)Xu(s[p],s[_])>a&&(c.push(s[p]),_=p);return _<E-1&&c.push(s[E-1]),c}var Ya;function ls(s,a,c,p,_){var E=p?Ya:Jn(s,c),V=Jn(a,c),B,H,Q;for(Ya=V;;){if(!(E|V))return[s,a];if(E&V)return!1;B=E||V,H=St(s,a,B,c,_),Q=Jn(H,c),B===E?(s=H,E=Q):(a=H,V=Q)}}function St(s,a,c,p,_){var E=a.x-s.x,V=a.y-s.y,B=p.min,H=p.max,Q,te;return c&8?(Q=s.x+E*(H.y-s.y)/V,te=H.y):c&4?(Q=s.x+E*(B.y-s.y)/V,te=B.y):c&2?(Q=H.x,te=s.y+V*(H.x-s.x)/E):c&1&&(Q=B.x,te=s.y+V*(B.x-s.x)/E),new q(Q,te,_)}function Jn(s,a){var c=0;return s.x<a.min.x?c|=1:s.x>a.max.x&&(c|=2),s.y<a.min.y?c|=4:s.y>a.max.y&&(c|=8),c}function Xu(s,a){var c=a.x-s.x,p=a.y-s.y;return c*c+p*p}function Pn(s,a,c,p){var _=a.x,E=a.y,V=c.x-_,B=c.y-E,H=V*V+B*B,Q;return H>0&&(Q=((s.x-_)*V+(s.y-E)*B)/H,Q>1?(_=c.x,E=c.y):Q>0&&(_+=V*Q,E+=B*Q)),V=s.x-_,B=s.y-E,p?V*V+B*B:new q(_,E)}function u(s){return!R(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function m(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),u(s)}function y(s,a){var c,p,_,E,V,B,H,Q;if(!s||s.length===0)throw new Error("latlngs not passed");u(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var te=ve([0,0]),de=De(s),Se=de.getNorthWest().distanceTo(de.getSouthWest())*de.getNorthEast().distanceTo(de.getNorthWest());Se<1700&&(te=uo(s));var $t=s.length,Pt=[];for(c=0;c<$t;c++){var An=ve(s[c]);Pt.push(a.project(ve([An.lat-te.lat,An.lng-te.lng])))}for(c=0,p=0;c<$t-1;c++)p+=Pt[c].distanceTo(Pt[c+1])/2;if(p===0)Q=Pt[0];else for(c=0,E=0;c<$t-1;c++)if(V=Pt[c],B=Pt[c+1],_=V.distanceTo(B),E+=_,E>p){H=(E-p)/_,Q=[B.x-H*(B.x-V.x),B.y-H*(B.y-V.y)];break}var Xt=a.unproject(X(Q));return ve([Xt.lat+te.lat,Xt.lng+te.lng])}var I={__proto__:null,simplify:Ka,pointToSegmentDistance:Qa,closestPointOnSegment:Si,clipSegment:ls,_getEdgeIntersection:St,_getBitCode:Jn,_sqClosestPointOnSegment:Pn,isFlat:u,_flat:m,polylineCenter:y},U={project:function(s){return new q(s.lng,s.lat)},unproject:function(s){return new Ie(s.y,s.x)},bounds:new le([-180,-90],[180,90])},W={R:6378137,R_MINOR:6356752314245179e-9,bounds:new le([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var a=Math.PI/180,c=this.R,p=s.lat*a,_=this.R_MINOR/c,E=Math.sqrt(1-_*_),V=E*Math.sin(p),B=Math.tan(Math.PI/4-p/2)/Math.pow((1-V)/(1+V),E/2);return p=-c*Math.log(Math.max(B,1e-10)),new q(s.lng*a*c,p)},unproject:function(s){for(var a=180/Math.PI,c=this.R,p=this.R_MINOR/c,_=Math.sqrt(1-p*p),E=Math.exp(-s.y/c),V=Math.PI/2-2*Math.atan(E),B=0,H=.1,Q;B<15&&Math.abs(H)>1e-7;B++)Q=_*Math.sin(V),Q=Math.pow((1-Q)/(1+Q),_/2),H=Math.PI/2-2*Math.atan(E*Q)-V,V+=H;return new Ie(V*a,s.x*a/c)}},ee={__proto__:null,LonLat:U,Mercator:W,SphericalMercator:qi},Fe=r({},Yn,{code:"EPSG:3395",projection:W,transformation:function(){var s=.5/(Math.PI*W.R);return gi(s,.5,-s,.5)}()}),ft=r({},Yn,{code:"EPSG:4326",projection:U,transformation:gi(1/180,1,-1/180,.5)}),be=r({},yt,{projection:U,transformation:gi(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,a){var c=a.lng-s.lng,p=a.lat-s.lat;return Math.sqrt(c*c+p*p)},infinite:!0});yt.Earth=Yn,yt.EPSG3395=Fe,yt.EPSG3857=Kr,yt.EPSG900913=wa,yt.EPSG4326=ft,yt.Simple=be;var Be=Ne.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var a=s.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Pe.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var a=h(s);return this._layers[a]?this:(this._layers[a]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var a=h(s);return this._layers[a]?(this._loaded&&s.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,a){for(var c in this._layers)s.call(a,this._layers[c]);return this},_addLayers:function(s){s=s?R(s)?s:[s]:[];for(var a=0,c=s.length;a<c;a++)this.addLayer(s[a])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var a=h(s);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,a=-1/0,c=this._getZoomSpan();for(var p in this._zoomBoundLayers){var _=this._zoomBoundLayers[p].options;s=_.minZoom===void 0?s:Math.min(s,_.minZoom),a=_.maxZoom===void 0?a:Math.max(a,_.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=s===1/0?void 0:s,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Je=Be.extend({initialize:function(s,a){N(this,a),this._layers={};var c,p;if(s)for(c=0,p=s.length;c<p;c++)this.addLayer(s[c])},addLayer:function(s){var a=this.getLayerId(s);return this._layers[a]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var a=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(s){var a=typeof s=="number"?s:this.getLayerId(s);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var a=Array.prototype.slice.call(arguments,1),c,p;for(c in this._layers)p=this._layers[c],p[s]&&p[s].apply(p,a);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,a){for(var c in this._layers)s.call(a,this._layers[c]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),tr=function(s,a){return new Je(s,a)},lt=Je.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Je.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Je.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Ee;for(var a in this._layers){var c=this._layers[a];s.extend(c.getBounds?c.getBounds():c.getLatLng())}return s}}),fo=function(s,a){return new lt(s,a)},ei=ce.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){N(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,a){var c=this._getIconUrl(s);if(!c){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,a){var c=this.options,p=c[a+"Size"];typeof p=="number"&&(p=[p,p]);var _=X(p),E=X(a==="shadow"&&c.shadowAnchor||c.iconAnchor||_&&_.divideBy(2,!0));s.className="leaflet-marker-"+a+" "+(c.className||""),E&&(s.style.marginLeft=-E.x+"px",s.style.marginTop=-E.y+"px"),_&&(s.style.width=_.x+"px",s.style.height=_.y+"px")},_createImg:function(s,a){return a=a||document.createElement("img"),a.src=s,a},_getIconUrl:function(s){return se.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function DS(s){return new ei(s)}var Xa=ei.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Xa.imagePath!="string"&&(Xa.imagePath=this._detectIconPath()),(this.options.imagePath||Xa.imagePath)+ei.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var a=function(c,p,_){var E=p.exec(c);return E&&E[_]};return s=a(s,/^url\((['"])?(.+)\1\)$/,2),s&&a(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Re("div","leaflet-default-icon-path",document.body),a=Ki(s,"background-image")||Ki(s,"backgroundImage");if(document.body.removeChild(s),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),Yg=un.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Fn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),we(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ke(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var a=this._marker,c=a._map,p=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,E=En(a._icon),V=c.getPixelBounds(),B=c.getPixelOrigin(),H=me(V.min._subtract(B).add(_),V.max._subtract(B).subtract(_));if(!H.contains(E)){var Q=X((Math.max(H.max.x,E.x)-H.max.x)/(V.max.x-H.max.x)-(Math.min(H.min.x,E.x)-H.min.x)/(V.min.x-H.min.x),(Math.max(H.max.y,E.y)-H.max.y)/(V.max.y-H.max.y)-(Math.min(H.min.y,E.y)-H.min.y)/(V.min.y-H.min.y)).multiplyBy(p);c.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),ge(a._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=O(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(F(this._panRequest),this._panRequest=O(this._adjustPan.bind(this,s)))},_onDrag:function(s){var a=this._marker,c=a._shadow,p=En(a._icon),_=a._map.layerPointToLatLng(p);c&&ge(c,p),a._latlng=_,s.latlng=_,s.oldLatLng=this._oldLatLng,a.fire("move",s).fire("drag",s)},_onDragEnd:function(s){F(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Ju=Be.extend({options:{icon:new Xa,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,a){N(this,a),this._latlng=ve(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var a=this._latlng;return this._latlng=ve(s),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=s.icon.createIcon(this._icon),p=!1;c!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(c.title=s.title),c.tagName==="IMG"&&(c.alt=s.alt||"")),we(c,a),s.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&he(c,"focus",this._panOnFocus,this);var _=s.icon.createShadow(this._shadow),E=!1;_!==this._shadow&&(this._removeShadow(),E=!0),_&&(we(_,a),_.alt=""),this._shadow=_,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&E&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ue(this._icon,"focus",this._panOnFocus,this),He(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&He(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&ge(this._icon,s),this._shadow&&ge(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(we(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Yg)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Yg(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&rt(this._icon,s),this._shadow&&rt(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var a=this.options.icon.options,c=a.iconSize?X(a.iconSize):X(0,0),p=a.iconAnchor?X(a.iconAnchor):X(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:c.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function VS(s,a){return new Ju(s,a)}var nr=Be.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return N(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ec=nr.extend({options:{fill:!0,radius:10},initialize:function(s,a){N(this,a),this._latlng=ve(s),this._radius=this.options.radius},setLatLng:function(s){var a=this._latlng;return this._latlng=ve(s),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var a=s&&s.radius||this._radius;return nr.prototype.setStyle.call(this,s),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,a=this._radiusY||s,c=this._clickTolerance(),p=[s+c,a+c];this._pxBounds=new le(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function FS(s,a){return new ec(s,a)}var Bd=ec.extend({initialize:function(s,a,c){if(typeof a=="number"&&(a=r({},c,{radius:a})),N(this,a),this._latlng=ve(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Ee(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:nr.prototype.setStyle,_project:function(){var s=this._latlng.lng,a=this._latlng.lat,c=this._map,p=c.options.crs;if(p.distance===Yn.distance){var _=Math.PI/180,E=this._mRadius/Yn.R/_,V=c.project([a+E,s]),B=c.project([a-E,s]),H=V.add(B).divideBy(2),Q=c.unproject(H).lat,te=Math.acos((Math.cos(E*_)-Math.sin(a*_)*Math.sin(Q*_))/(Math.cos(a*_)*Math.cos(Q*_)))/_;(isNaN(te)||te===0)&&(te=E/Math.cos(Math.PI/180*a)),this._point=H.subtract(c.getPixelOrigin()),this._radius=isNaN(te)?0:H.x-c.project([Q,s-te]).x,this._radiusY=H.y-V.y}else{var de=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(de).x}this._updateBounds()}});function zS(s,a,c){return new Bd(s,a,c)}var Pi=nr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,a){N(this,a),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var a=1/0,c=null,p=Pn,_,E,V=0,B=this._parts.length;V<B;V++)for(var H=this._parts[V],Q=1,te=H.length;Q<te;Q++){_=H[Q-1],E=H[Q];var de=p(s,_,E,!0);de<a&&(a=de,c=p(s,_,E))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return y(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,a){return a=a||this._defaultShape(),s=ve(s),a.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Ee,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return u(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var a=[],c=u(s),p=0,_=s.length;p<_;p++)c?(a[p]=ve(s[p]),this._bounds.extend(a[p])):a[p]=this._convertLatLngs(s[p]);return a},_project:function(){var s=new le;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),a=new q(s,s);this._rawPxBounds&&(this._pxBounds=new le([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(s,a,c){var p=s[0]instanceof Ie,_=s.length,E,V;if(p){for(V=[],E=0;E<_;E++)V[E]=this._map.latLngToLayerPoint(s[E]),c.extend(V[E]);a.push(V)}else for(E=0;E<_;E++)this._projectLatlngs(s[E],a,c)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,p,_,E,V,B,H;for(c=0,_=0,E=this._rings.length;c<E;c++)for(H=this._rings[c],p=0,V=H.length;p<V-1;p++)B=ls(H[p],H[p+1],s,p,!0),B&&(a[_]=a[_]||[],a[_].push(B[0]),(B[1]!==H[p+1]||p===V-2)&&(a[_].push(B[1]),_++))}},_simplifyPoints:function(){for(var s=this._parts,a=this.options.smoothFactor,c=0,p=s.length;c<p;c++)s[c]=Ka(s[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,a){var c,p,_,E,V,B,H=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(c=0,E=this._parts.length;c<E;c++)for(B=this._parts[c],p=0,V=B.length,_=V-1;p<V;_=p++)if(!(!a&&p===0)&&Qa(s,B[_],B[p])<=H)return!0;return!1}});function US(s,a){return new Pi(s,a)}Pi._flat=m;var po=Pi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return lo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var a=Pi.prototype._convertLatLngs.call(this,s),c=a.length;return c>=2&&a[0]instanceof Ie&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(s){Pi.prototype._setLatLngs.call(this,s),u(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return u(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,a=this.options.weight,c=new q(a,a);if(s=new le(s.min.subtract(c),s.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,_=this._rings.length,E;p<_;p++)E=ao(this._rings[p],s,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var a=!1,c,p,_,E,V,B,H,Q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(E=0,H=this._parts.length;E<H;E++)for(c=this._parts[E],V=0,Q=c.length,B=Q-1;V<Q;B=V++)p=c[V],_=c[B],p.y>s.y!=_.y>s.y&&s.x<(_.x-p.x)*(s.y-p.y)/(_.y-p.y)+p.x&&(a=!a);return a||Pi.prototype._containsPoint.call(this,s,!0)}});function BS(s,a){return new po(s,a)}var Ai=lt.extend({initialize:function(s,a){N(this,a),this._layers={},s&&this.addData(s)},addData:function(s){var a=R(s)?s:s.features,c,p,_;if(a){for(c=0,p=a.length;c<p;c++)_=a[c],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var E=this.options;if(E.filter&&!E.filter(s))return this;var V=tc(s,E);return V?(V.feature=rc(s),V.defaultOptions=V.options,this.resetStyle(V),E.onEachFeature&&E.onEachFeature(s,V),this.addLayer(V)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(a){this._setLayerStyle(a,s)},this)},_setLayerStyle:function(s,a){s.setStyle&&(typeof a=="function"&&(a=a(s.feature)),s.setStyle(a))}});function tc(s,a){var c=s.type==="Feature"?s.geometry:s,p=c?c.coordinates:null,_=[],E=a&&a.pointToLayer,V=a&&a.coordsToLatLng||jd,B,H,Q,te;if(!p&&!c)return null;switch(c.type){case"Point":return B=V(p),Xg(E,s,B,a);case"MultiPoint":for(Q=0,te=p.length;Q<te;Q++)B=V(p[Q]),_.push(Xg(E,s,B,a));return new lt(_);case"LineString":case"MultiLineString":return H=nc(p,c.type==="LineString"?0:1,V),new Pi(H,a);case"Polygon":case"MultiPolygon":return H=nc(p,c.type==="Polygon"?1:2,V),new po(H,a);case"GeometryCollection":for(Q=0,te=c.geometries.length;Q<te;Q++){var de=tc({geometry:c.geometries[Q],type:"Feature",properties:s.properties},a);de&&_.push(de)}return new lt(_);case"FeatureCollection":for(Q=0,te=c.features.length;Q<te;Q++){var Se=tc(c.features[Q],a);Se&&_.push(Se)}return new lt(_);default:throw new Error("Invalid GeoJSON object.")}}function Xg(s,a,c,p){return s?s(a,c):new Ju(c,p&&p.markersInheritOptions&&p)}function jd(s){return new Ie(s[1],s[0],s[2])}function nc(s,a,c){for(var p=[],_=0,E=s.length,V;_<E;_++)V=a?nc(s[_],a-1,c):(c||jd)(s[_]),p.push(V);return p}function Hd(s,a){return s=ve(s),s.alt!==void 0?[w(s.lng,a),w(s.lat,a),w(s.alt,a)]:[w(s.lng,a),w(s.lat,a)]}function ic(s,a,c,p){for(var _=[],E=0,V=s.length;E<V;E++)_.push(a?ic(s[E],u(s[E])?0:a-1,c,p):Hd(s[E],p));return!a&&c&&_.length>0&&_.push(_[0].slice()),_}function mo(s,a){return s.feature?r({},s.feature,{geometry:a}):rc(a)}function rc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Wd={toGeoJSON:function(s){return mo(this,{type:"Point",coordinates:Hd(this.getLatLng(),s)})}};Ju.include(Wd),Bd.include(Wd),ec.include(Wd),Pi.include({toGeoJSON:function(s){var a=!u(this._latlngs),c=ic(this._latlngs,a?1:0,!1,s);return mo(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),po.include({toGeoJSON:function(s){var a=!u(this._latlngs),c=a&&!u(this._latlngs[0]),p=ic(this._latlngs,c?2:a?1:0,!0,s);return a||(p=[p]),mo(this,{type:(c?"Multi":"")+"Polygon",coordinates:p})}}),Je.include({toMultiPoint:function(s){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(s).geometry.coordinates)}),mo(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(s){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(s);var c=a==="GeometryCollection",p=[];return this.eachLayer(function(_){if(_.toGeoJSON){var E=_.toGeoJSON(s);if(c)p.push(E.geometry);else{var V=rc(E);V.type==="FeatureCollection"?p.push.apply(p,V.features):p.push(V)}}}),c?mo(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function Jg(s,a){return new Ai(s,a)}var jS=Jg,sc=Be.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,a,c){this._url=s,this._bounds=De(a),N(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(we(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){He(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&wi(this._image),this},bringToBack:function(){return this._map&&Qi(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=De(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",a=this._image=s?this._url:Re("img");if(we(a,"leaflet-image-layer"),this._zoomAnimated&&we(a,"leaflet-zoom-animated"),this.options.className&&we(a,this.options.className),a.onselectstart=v,a.onmousemove=v,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(s){var a=this._map.getZoomScale(s.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Xn(this._image,c,a)},_reset:function(){var s=this._image,a=new le(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();ge(s,a.min),s.style.width=c.x+"px",s.style.height=c.y+"px"},_updateOpacity:function(){rt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),HS=function(s,a,c){return new sc(s,a,c)},e_=sc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",a=this._image=s?this._url:Re("video");if(we(a,"leaflet-image-layer"),this._zoomAnimated&&we(a,"leaflet-zoom-animated"),this.options.className&&we(a,this.options.className),a.onselectstart=v,a.onmousemove=v,a.onloadeddata=l(this.fire,this,"load"),s){for(var c=a.getElementsByTagName("source"),p=[],_=0;_<c.length;_++)p.push(c[_].src);this._url=c.length>0?p:[a.src];return}R(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var V=Re("source");V.src=this._url[E],a.appendChild(V)}}});function WS(s,a,c){return new e_(s,a,c)}var t_=sc.extend({_initImage:function(){var s=this._image=this._url;we(s,"leaflet-image-layer"),this._zoomAnimated&&we(s,"leaflet-zoom-animated"),this.options.className&&we(s,this.options.className),s.onselectstart=v,s.onmousemove=v}});function $S(s,a,c){return new t_(s,a,c)}var ti=Be.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,a){s&&(s instanceof Ie||R(s))?(this._latlng=ve(s),N(this,a)):(N(this,s),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&rt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&rt(this._container,1),this.bringToFront(),this.options.interactive&&(we(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(rt(this._container,0),this._removeTimeout=setTimeout(l(He,void 0,this._container),200)):He(this._container),this.options.interactive&&(Ke(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ve(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&wi(this._container),this},bringToBack:function(){return this._map&&Qi(this._container),this},_prepareOpen:function(s){var a=this._source;if(!a._map)return!1;if(a instanceof lt){a=null;var c=this._source._layers;for(var p in c)if(c[p]._map){a=c[p];break}if(!a)return!1;this._source=a}if(!s)if(a.getCenter)s=a.getCenter();else if(a.getLatLng)s=a.getLatLng();else if(a.getBounds)s=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")s.innerHTML=a;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),a=X(this.options.offset),c=this._getAnchor();this._zoomAnimated?ge(this._container,s.add(c)):a=a.add(s).add(c);var p=this._containerBottom=-a.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=p+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});Pe.include({_initOverlay:function(s,a,c,p){var _=a;return _ instanceof s||(_=new s(p).setContent(a)),c&&_.setLatLng(c),_}}),Be.include({_initOverlay:function(s,a,c,p){var _=c;return _ instanceof s?(N(_,p),_._source=this):(_=a&&!p?a:new s(p,this),_.setContent(c)),_}});var oc=ti.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,ti.prototype.openOn.call(this,s)},onAdd:function(s){ti.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof nr||this._source.on("preclick",Sn))},onRemove:function(s){ti.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof nr||this._source.off("preclick",Sn))},getEvents:function(){var s=ti.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",a=this._container=Re("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Re("div",s+"-content-wrapper",a);if(this._contentNode=Re("div",s+"-content",c),Ji(a),Xi(this._contentNode),he(a,"contextmenu",Sn),this._tipContainer=Re("div",s+"-tip-container",a),this._tip=Re("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Re("a",s+"-close-button",a);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',he(p,"click",function(_){Xe(_),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,a=s.style;a.width="",a.whiteSpace="nowrap";var c=s.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var p=s.offsetHeight,_=this.options.maxHeight,E="leaflet-popup-scrolled";_&&p>_?(a.height=_+"px",we(s,E)):Ke(s,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),c=this._getAnchor();ge(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,a=parseInt(Ki(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,p=this._containerWidth,_=new q(this._containerLeft,-c-this._containerBottom);_._add(En(this._container));var E=s.layerPointToContainerPoint(_),V=X(this.options.autoPanPadding),B=X(this.options.autoPanPaddingTopLeft||V),H=X(this.options.autoPanPaddingBottomRight||V),Q=s.getSize(),te=0,de=0;E.x+p+H.x>Q.x&&(te=E.x+p-Q.x+H.x),E.x-te-B.x<0&&(te=E.x-B.x),E.y+c+H.y>Q.y&&(de=E.y+c-Q.y+H.y),E.y-de-B.y<0&&(de=E.y-B.y),(te||de)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([te,de]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),qS=function(s,a){return new oc(s,a)};Pe.mergeOptions({closePopupOnClick:!0}),Pe.include({openPopup:function(s,a,c){return this._initOverlay(oc,s,a,c).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Be.include({bindPopup:function(s,a){return this._popup=this._initOverlay(oc,this._popup,s,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof lt||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){ln(s);var a=s.layer||s.target;if(this._popup._source===a&&!(a instanceof nr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=a,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var ac=ti.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){ti.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){ti.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=ti.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",a=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Re("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var a,c,p=this._map,_=this._container,E=p.latLngToContainerPoint(p.getCenter()),V=p.layerPointToContainerPoint(s),B=this.options.direction,H=_.offsetWidth,Q=_.offsetHeight,te=X(this.options.offset),de=this._getAnchor();B==="top"?(a=H/2,c=Q):B==="bottom"?(a=H/2,c=0):B==="center"?(a=H/2,c=Q/2):B==="right"?(a=0,c=Q/2):B==="left"?(a=H,c=Q/2):V.x<E.x?(B="right",a=0,c=Q/2):(B="left",a=H+(te.x+de.x)*2,c=Q/2),s=s.subtract(X(a,c,!0)).add(te).add(de),Ke(_,"leaflet-tooltip-right"),Ke(_,"leaflet-tooltip-left"),Ke(_,"leaflet-tooltip-top"),Ke(_,"leaflet-tooltip-bottom"),we(_,"leaflet-tooltip-"+B),ge(_,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&rt(this._container,s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(a)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),GS=function(s,a){return new ac(s,a)};Pe.include({openTooltip:function(s,a,c){return this._initOverlay(ac,s,a,c).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Be.include({bindTooltip:function(s,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ac,this._tooltip,s,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var a=s?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof lt||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&(he(a,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),he(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var a=s.latlng,c,p;this._tooltip.options.sticky&&s.originalEvent&&(c=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(a)}});var n_=ei.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var a=s&&s.tagName==="DIV"?s:document.createElement("div"),c=this.options;if(c.html instanceof Element?(os(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var p=X(c.bgPos);a.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function ZS(s){return new n_(s)}ei.Default=Xa;var Ja=Be.extend({options:{tileSize:256,opacity:1,updateWhenIdle:se.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){N(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),He(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(wi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Qi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof q?s:new q(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var a=this.getPane().children,c=-s(-1/0,1/0),p=0,_=a.length,E;p<_;p++)E=a[p].style.zIndex,a[p]!==this._container&&E&&(c=s(c,+E));isFinite(c)&&(this.options.zIndex=c+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!se.ielt9){rt(this._container,this.options.opacity);var s=+new Date,a=!1,c=!1;for(var p in this._tiles){var _=this._tiles[p];if(!(!_.current||!_.loaded)){var E=Math.min(1,(s-_.loaded)/200);rt(_.el,E),E<1?a=!0:(_.active?c=!0:this._onOpaqueTile(_),_.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(F(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=Re("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,a=this.options.maxZoom;if(s!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===s?(this._levels[c].el.style.zIndex=a-Math.abs(s-c),this._onUpdateLevel(c)):(He(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var p=this._levels[s],_=this._map;return p||(p=this._levels[s]={},p.el=Re("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=a,p.origin=_.project(_.unproject(_.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,_.getCenter(),_.getZoom()),v(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var s,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)a=this._tiles[s],a.retain=a.current;for(s in this._tiles)if(a=this._tiles[s],a.current&&!a.active){var p=a.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var a in this._tiles)this._tiles[a].coords.z===s&&this._removeTile(a)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)He(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,a,c,p){var _=Math.floor(s/2),E=Math.floor(a/2),V=c-1,B=new q(+_,+E);B.z=+V;var H=this._tileCoordsToKey(B),Q=this._tiles[H];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),V>p?this._retainParent(_,E,V,p):!1)},_retainChildren:function(s,a,c,p){for(var _=2*s;_<2*s+2;_++)for(var E=2*a;E<2*a+2;E++){var V=new q(_,E);V.z=c+1;var B=this._tileCoordsToKey(V),H=this._tiles[B];if(H&&H.active){H.retain=!0;continue}else H&&H.loaded&&(H.retain=!0);c+1<p&&this._retainChildren(_,E,c+1,p)}},_resetView:function(s){var a=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var a=this.options;return a.minNativeZoom!==void 0&&s<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<s?a.maxNativeZoom:s},_setView:function(s,a,c,p){var _=Math.round(a);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var E=this.options.updateWhenZooming&&_!==this._tileZoom;(!p||E)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(s),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(s,a)},_setZoomTransforms:function(s,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],s,a)},_setZoomTransform:function(s,a,c){var p=this._map.getZoomScale(c,s.zoom),_=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(a,c)).round();se.any3d?Xn(s.el,_,p):ge(s.el,_)},_resetGrid:function(){var s=this._map,a=s.options.crs,c=this._tileSize=this.getTileSize(),p=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,a.wrapLng[0]],p).x/c.x),Math.ceil(s.project([0,a.wrapLng[1]],p).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([a.wrapLat[0],0],p).y/c.x),Math.ceil(s.project([a.wrapLat[1],0],p).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),p=a.getZoomScale(c,this._tileZoom),_=a.project(s,this._tileZoom).floor(),E=a.getSize().divideBy(p*2);return new le(_.subtract(E),_.add(E))},_update:function(s){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(s===void 0&&(s=a.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),_=this._pxBoundsToTileRange(p),E=_.getCenter(),V=[],B=this.options.keepBuffer,H=new le(_.getBottomLeft().subtract([B,-B]),_.getTopRight().add([B,-B]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var te=this._tiles[Q].coords;(te.z!==this._tileZoom||!H.contains(new q(te.x,te.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(s,c);return}for(var de=_.min.y;de<=_.max.y;de++)for(var Se=_.min.x;Se<=_.max.x;Se++){var $t=new q(Se,de);if($t.z=this._tileZoom,!!this._isValidTile($t)){var Pt=this._tiles[this._tileCoordsToKey($t)];Pt?Pt.current=!0:V.push($t)}}if(V.sort(function(Xt,_o){return Xt.distanceTo(E)-_o.distanceTo(E)}),V.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var An=document.createDocumentFragment();for(Se=0;Se<V.length;Se++)this._addTile(V[Se],An);this._level.el.appendChild(An)}}}},_isValidTile:function(s){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(s.x<c.min.x||s.x>c.max.x)||!a.wrapLat&&(s.y<c.min.y||s.y>c.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return De(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var a=this._map,c=this.getTileSize(),p=s.scaleBy(c),_=p.add(c),E=a.unproject(p,s.z),V=a.unproject(_,s.z);return[E,V]},_tileCoordsToBounds:function(s){var a=this._tileCoordsToNwSe(s),c=new Ee(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var a=s.split(":"),c=new q(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(s){var a=this._tiles[s];a&&(He(a.el),delete this._tiles[s],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){we(s,"leaflet-tile");var a=this.getTileSize();s.style.width=a.x+"px",s.style.height=a.y+"px",s.onselectstart=v,s.onmousemove=v,se.ielt9&&this.options.opacity<1&&rt(s,this.options.opacity)},_addTile:function(s,a){var c=this._getTilePos(s),p=this._tileCoordsToKey(s),_=this.createTile(this._wrapCoords(s),l(this._tileReady,this,s));this._initTile(_),this.createTile.length<2&&O(l(this._tileReady,this,s,null,_)),ge(_,c),this._tiles[p]={el:_,coords:s,current:!0},a.appendChild(_),this.fire("tileloadstart",{tile:_,coords:s})},_tileReady:function(s,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:s});var p=this._tileCoordsToKey(s);c=this._tiles[p],c&&(c.loaded=+new Date,this._map._fadeAnimated?(rt(c.el,0),F(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(we(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),se.ielt9||!this._map._fadeAnimated?O(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var a=new q(this._wrapX?g(s.x,this._wrapX):s.x,this._wrapY?g(s.y,this._wrapY):s.y);return a.z=s.z,a},_pxBoundsToTileRange:function(s){var a=this.getTileSize();return new le(s.min.unscaleBy(a).floor(),s.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function KS(s){return new Ja(s)}var go=Ja.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,a){this._url=s,a=N(this,a),a.detectRetina&&se.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,a){return this._url===s&&a===void 0&&(a=!0),this._url=s,a||this.redraw(),this},createTile:function(s,a){var c=document.createElement("img");return he(c,"load",l(this._tileOnLoad,this,a,c)),he(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(s),c},getTileUrl:function(s){var a={r:se.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-s.y;this.options.tms&&(a.y=c),a["-y"]=c}return P(this._url,r(a,this.options))},_tileOnLoad:function(s,a){se.ielt9?setTimeout(l(s,this,null,a),0):s(null,a)},_tileOnError:function(s,a,c){var p=this.options.errorTileUrl;p&&a.getAttribute("src")!==p&&(a.src=p),s(c,a)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,p=this.options.zoomOffset;return c&&(s=a-s),s+p},_getSubdomain:function(s){var a=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var s,a;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(a=this._tiles[s].el,a.onload=v,a.onerror=v,!a.complete)){a.src=K;var c=this._tiles[s].coords;He(a),delete this._tiles[s],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(s){var a=this._tiles[s];if(a)return a.el.setAttribute("src",K),Ja.prototype._removeTile.call(this,s)},_tileReady:function(s,a,c){if(!(!this._map||c&&c.getAttribute("src")===K))return Ja.prototype._tileReady.call(this,s,a,c)}});function i_(s,a){return new go(s,a)}var r_=go.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,a){this._url=s;var c=r({},this.defaultWmsParams);for(var p in a)p in this.options||(c[p]=a[p]);a=N(this,a);var _=a.detectRetina&&se.retina?2:1,E=this.getTileSize();c.width=E.x*_,c.height=E.y*_,this.wmsParams=c},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,go.prototype.onAdd.call(this,s)},getTileUrl:function(s){var a=this._tileCoordsToNwSe(s),c=this._crs,p=me(c.project(a[0]),c.project(a[1])),_=p.min,E=p.max,V=(this._wmsVersion>=1.3&&this._crs===ft?[_.y,_.x,E.y,E.x]:[_.x,_.y,E.x,E.y]).join(","),B=go.prototype.getTileUrl.call(this,s);return B+z(this.wmsParams,B,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+V},setParams:function(s,a){return r(this.wmsParams,s),a||this.redraw(),this}});function QS(s,a){return new r_(s,a)}go.WMS=r_,i_.wms=QS;var Ci=Be.extend({options:{padding:.1},initialize:function(s){N(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),we(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,a){var c=this._map.getZoomScale(a,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,a),E=p.multiplyBy(-c).add(_).subtract(this._map._getNewPixelOrigin(s,a));se.any3d?Xn(this._container,E,c):ge(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-s)).round();this._bounds=new le(c,c.add(a.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),s_=Ci.extend({options:{tolerance:0},getEvents:function(){var s=Ci.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ci.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");he(s,"mousemove",this._onMouseMove,this),he(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),he(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){F(this._redrawRequest),delete this._ctx,He(this._container),Ue(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var a in this._layers)s=this._layers[a],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ci.prototype._update.call(this);var s=this._bounds,a=this._container,c=s.getSize(),p=se.retina?2:1;ge(a,s.min),a.width=p*c.x,a.height=p*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",se.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Ci.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var a=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var a=s._order,c=a.next,p=a.prev;c?c.prev=p:this._drawLast=p,p?p.next=c:this._drawFirst=c,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var a=s.options.dashArray.split(/[, ]+/),c=[],p,_;for(_=0;_<a.length;_++){if(p=Number(a[_]),isNaN(p))return;c.push(p)}s.options._dashArray=c}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||O(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var a=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new le,this._redrawBounds.extend(s._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(s._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var a=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!a||s._pxBounds&&s._pxBounds.intersects(a))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,a){if(this._drawing){var c,p,_,E,V=s._parts,B=V.length,H=this._ctx;if(B){for(H.beginPath(),c=0;c<B;c++){for(p=0,_=V[c].length;p<_;p++)E=V[c][p],H[p?"lineTo":"moveTo"](E.x,E.y);a&&H.closePath()}this._fillStroke(H,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var a=s._point,c=this._ctx,p=Math.max(Math.round(s._radius),1),_=(Math.max(Math.round(s._radiusY),1)||p)/p;_!==1&&(c.save(),c.scale(1,_)),c.beginPath(),c.arc(a.x,a.y/_,p,0,Math.PI*2,!1),_!==1&&c.restore(),this._fillStroke(c,s)}},_fillStroke:function(s,a){var c=a.options;c.fill&&(s.globalAlpha=c.fillOpacity,s.fillStyle=c.fillColor||c.color,s.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(s.setLineDash&&s.setLineDash(a.options&&a.options._dashArray||[]),s.globalAlpha=c.opacity,s.lineWidth=c.weight,s.strokeStyle=c.color,s.lineCap=c.lineCap,s.lineJoin=c.lineJoin,s.stroke())},_onClick:function(s){for(var a=this._map.mouseEventToLayerPoint(s),c,p,_=this._drawFirst;_;_=_.next)c=_.layer,c.options.interactive&&c._containsPoint(a)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(c))&&(p=c);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,a)}},_handleMouseOut:function(s){var a=this._hoveredLayer;a&&(Ke(this._container,"leaflet-interactive"),this._fireEvent([a],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,a){if(!this._mouseHoverThrottled){for(var c,p,_=this._drawFirst;_;_=_.next)c=_.layer,c.options.interactive&&c._containsPoint(a)&&(p=c);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(we(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,a,c){this._map._fireDOMEvent(a,c||a.type,s)},_bringToFront:function(s){var a=s._order;if(a){var c=a.next,p=a.prev;if(c)c.prev=p;else return;p?p.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(s)}},_bringToBack:function(s){var a=s._order;if(a){var c=a.next,p=a.prev;if(p)p.next=c;else return;c?c.prev=p:p&&(this._drawLast=p),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(s)}}});function o_(s){return se.canvas?new s_(s):null}var el=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),YS={_initContainer:function(){this._container=Re("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ci.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var a=s._container=el("shape");we(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",s._path=el("path"),a.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var a=s._container;this._container.appendChild(a),s.options.interactive&&s.addInteractiveTarget(a)},_removePath:function(s){var a=s._container;He(a),s.removeInteractiveTarget(a),delete this._layers[h(s)]},_updateStyle:function(s){var a=s._stroke,c=s._fill,p=s.options,_=s._container;_.stroked=!!p.stroke,_.filled=!!p.fill,p.stroke?(a||(a=s._stroke=el("stroke")),_.appendChild(a),a.weight=p.weight+"px",a.color=p.color,a.opacity=p.opacity,p.dashArray?a.dashStyle=R(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=p.lineCap.replace("butt","flat"),a.joinstyle=p.lineJoin):a&&(_.removeChild(a),s._stroke=null),p.fill?(c||(c=s._fill=el("fill")),_.appendChild(c),c.color=p.fillColor||p.color,c.opacity=p.fillOpacity):c&&(_.removeChild(c),s._fill=null)},_updateCircle:function(s){var a=s._point.round(),c=Math.round(s._radius),p=Math.round(s._radiusY||c);this._setPath(s,s._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+p+" 0,"+65535*360)},_setPath:function(s,a){s._path.v=a},_bringToFront:function(s){wi(s._container)},_bringToBack:function(s){Qi(s._container)}},lc=se.vml?el:Us,tl=Ci.extend({_initContainer:function(){this._container=lc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=lc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){He(this._container),Ue(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ci.prototype._update.call(this);var s=this._bounds,a=s.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),ge(c,s.min),c.setAttribute("viewBox",[s.min.x,s.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(s){var a=s._path=lc("path");s.options.className&&we(a,s.options.className),s.options.interactive&&we(a,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){He(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var a=s._path,c=s.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(s,a){this._setPath(s,Ea(s._parts,a))},_updateCircle:function(s){var a=s._point,c=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||c,_="a"+c+","+p+" 0 1,0 ",E=s._empty()?"M0 0":"M"+(a.x-c)+","+a.y+_+c*2+",0 "+_+-c*2+",0 ";this._setPath(s,E)},_setPath:function(s,a){s._path.setAttribute("d",a)},_bringToFront:function(s){wi(s._path)},_bringToBack:function(s){Qi(s._path)}});se.vml&&tl.include(YS);function a_(s){return se.svg||se.vml?new tl(s):null}Pe.include({getRenderer:function(s){var a=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var a=this._paneRenderers[s];return a===void 0&&(a=this._createRenderer({pane:s}),this._paneRenderers[s]=a),a},_createRenderer:function(s){return this.options.preferCanvas&&o_(s)||a_(s)}});var l_=po.extend({initialize:function(s,a){po.prototype.initialize.call(this,this._boundsToLatLngs(s),a)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=De(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function XS(s,a){return new l_(s,a)}tl.create=lc,tl.pointsToPath=Ea,Ai.geometryToLayer=tc,Ai.coordsToLatLng=jd,Ai.coordsToLatLngs=nc,Ai.latLngToCoords=Hd,Ai.latLngsToCoords=ic,Ai.getFeature=mo,Ai.asFeature=rc,Pe.mergeOptions({boxZoom:!0});var u_=un.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){he(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ue(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){He(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Dn(),Fa(),this._startPoint=this._map.mouseEventToContainerPoint(s),he(document,{contextmenu:ln,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Re("div","leaflet-zoom-box",this._container),we(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var a=new le(this._point,this._startPoint),c=a.getSize();ge(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(He(this._box),Ke(this._container,"leaflet-crosshair")),Vn(),za(),Ue(document,{contextmenu:ln,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Ee(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Pe.addInitHook("addHandler","boxZoom",u_),Pe.mergeOptions({doubleClickZoom:!0});var c_=un.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var a=this._map,c=a.getZoom(),p=a.options.zoomDelta,_=s.originalEvent.shiftKey?c-p:c+p;a.options.doubleClickZoom==="center"?a.setZoom(_):a.setZoomAround(s.containerPoint,_)}});Pe.addInitHook("addHandler","doubleClickZoom",c_),Pe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var h_=un.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Fn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}we(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ke(this._map._container,"leaflet-grab"),Ke(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=De(this._map.options.maxBounds);this._offsetLimit=me(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,a){return s-(s-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;s.x<a.min.x&&(s.x=this._viscousLimit(s.x,a.min.x)),s.y<a.min.y&&(s.y=this._viscousLimit(s.y,a.min.y)),s.x>a.max.x&&(s.x=this._viscousLimit(s.x,a.max.x)),s.y>a.max.y&&(s.y=this._viscousLimit(s.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,a=Math.round(s/2),c=this._initialWorldOffset,p=this._draggable._newPos.x,_=(p-a+c)%s+a-c,E=(p+a+c)%s-a-c,V=Math.abs(_+c)<Math.abs(E+c)?_:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=V},_onDragEnd:function(s){var a=this._map,c=a.options,p=!c.inertia||s.noInertia||this._times.length<2;if(a.fire("dragend",s),p)a.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,V=c.easeLinearity,B=_.multiplyBy(V/E),H=B.distanceTo([0,0]),Q=Math.min(c.inertiaMaxSpeed,H),te=B.multiplyBy(Q/H),de=Q/(c.inertiaDeceleration*V),Se=te.multiplyBy(-de/2).round();!Se.x&&!Se.y?a.fire("moveend"):(Se=a._limitOffset(Se,a.options.maxBounds),O(function(){a.panBy(Se,{duration:de,easeLinearity:V,noMoveStart:!0,animate:!0})}))}}});Pe.addInitHook("addHandler","dragging",h_),Pe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var d_=un.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),he(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ue(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,a=document.documentElement,c=s.scrollTop||a.scrollTop,p=s.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(p,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var a=this._panKeys={},c=this.keyCodes,p,_;for(p=0,_=c.left.length;p<_;p++)a[c.left[p]]=[-1*s,0];for(p=0,_=c.right.length;p<_;p++)a[c.right[p]]=[s,0];for(p=0,_=c.down.length;p<_;p++)a[c.down[p]]=[0,s];for(p=0,_=c.up.length;p<_;p++)a[c.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var a=this._zoomKeys={},c=this.keyCodes,p,_;for(p=0,_=c.zoomIn.length;p<_;p++)a[c.zoomIn[p]]=s;for(p=0,_=c.zoomOut.length;p<_;p++)a[c.zoomOut[p]]=-s},_addHooks:function(){he(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ue(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var a=s.keyCode,c=this._map,p;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(p=this._panKeys[a],s.shiftKey&&(p=X(p).multiplyBy(3)),c.options.maxBounds&&(p=c._limitOffset(X(p),c.options.maxBounds)),c.options.worldCopyJump){var _=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(p)));c.panTo(_)}else c.panBy(p)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;ln(s)}}});Pe.addInitHook("addHandler","keyboard",d_),Pe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var f_=un.extend({addHooks:function(){he(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ue(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var a=qu(s),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),p),ln(s)},_performZoom:function(){var s=this._map,a=s.getZoom(),c=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,E=c?Math.ceil(_/c)*c:_,V=s._limitZoom(a+(this._delta>0?E:-E))-a;this._delta=0,this._startTime=null,V&&(s.options.scrollWheelZoom==="center"?s.setZoom(a+V):s.setZoomAround(this._lastMousePos,a+V))}});Pe.addInitHook("addHandler","scrollWheelZoom",f_);var JS=600;Pe.mergeOptions({tapHold:se.touchNative&&se.safari&&se.mobile,tapTolerance:15});var p_=un.extend({addHooks:function(){he(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ue(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var a=s.touches[0];this._startPos=this._newPos=new q(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(he(document,"touchend",Xe),he(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),JS),he(document,"touchend touchcancel contextmenu",this._cancel,this),he(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Ue(document,"touchend",Xe),Ue(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Ue(document,"touchend touchcancel contextmenu",this._cancel,this),Ue(document,"touchmove",this._onMove,this)},_onMove:function(s){var a=s.touches[0];this._newPos=new q(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,a){var c=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Pe.addInitHook("addHandler","tapHold",p_),Pe.mergeOptions({touchZoom:se.touch,bounceAtZoomLimits:!0});var m_=un.extend({addHooks:function(){we(this._map._container,"leaflet-touch-zoom"),he(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ke(this._map._container,"leaflet-touch-zoom"),Ue(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var a=this._map;if(!(!s.touches||s.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(s.touches[0]),p=a.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(p)._divideBy(2))),this._startDist=c.distanceTo(p),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),he(document,"touchmove",this._onTouchMove,this),he(document,"touchend touchcancel",this._onTouchEnd,this),Xe(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(s.touches[0]),p=a.mouseEventToContainerPoint(s.touches[1]),_=c.distanceTo(p)/this._startDist;if(this._zoom=a.getScaleZoom(_,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&_<1||this._zoom>a.getMaxZoom()&&_>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var E=c._add(p)._divideBy(2)._subtract(this._centerPoint);if(_===1&&E.x===0&&E.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),F(this._animRequest);var V=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=O(V,this,!0),Xe(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,F(this._animRequest),Ue(document,"touchmove",this._onTouchMove,this),Ue(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Pe.addInitHook("addHandler","touchZoom",m_),Pe.BoxZoom=u_,Pe.DoubleClickZoom=c_,Pe.Drag=h_,Pe.Keyboard=d_,Pe.ScrollWheelZoom=f_,Pe.TapHold=p_,Pe.TouchZoom=m_,n.Bounds=le,n.Browser=se,n.CRS=yt,n.Canvas=s_,n.Circle=Bd,n.CircleMarker=ec,n.Class=ce,n.Control=Yt,n.DivIcon=n_,n.DivOverlay=ti,n.DomEvent=Gu,n.DomUtil=Wu,n.Draggable=Fn,n.Evented=Ne,n.FeatureGroup=lt,n.GeoJSON=Ai,n.GridLayer=Ja,n.Handler=un,n.Icon=ei,n.ImageOverlay=sc,n.LatLng=Ie,n.LatLngBounds=Ee,n.Layer=Be,n.LayerGroup=Je,n.LineUtil=I,n.Map=Pe,n.Marker=Ju,n.Mixin=as,n.Path=nr,n.Point=q,n.PolyUtil=co,n.Polygon=po,n.Polyline=Pi,n.Popup=oc,n.PosAnimation=qa,n.Projection=ee,n.Rectangle=l_,n.Renderer=Ci,n.SVG=tl,n.SVGOverlay=t_,n.TileLayer=go,n.Tooltip=ac,n.Transformation=Gi,n.Util=M,n.VideoOverlay=e_,n.bind=l,n.bounds=me,n.canvas=o_,n.circle=zS,n.circleMarker=FS,n.control=Wt,n.divIcon=ZS,n.extend=r,n.featureGroup=fo,n.geoJSON=Jg,n.geoJson=jS,n.gridLayer=KS,n.icon=DS,n.imageOverlay=HS,n.latLng=ve,n.latLngBounds=De,n.layerGroup=tr,n.map=ro,n.marker=VS,n.point=X,n.polygon=BS,n.polyline=US,n.popup=qS,n.rectangle=XS,n.setOptions=N,n.stamp=h,n.svg=a_,n.svgOverlay=$S,n.tileLayer=i_,n.tooltip=GS,n.transformation=gi,n.version=i,n.videoOverlay=WS;var eP=window.L;n.noConflict=function(){return window.L=eP,this},window.L=n})})(rm,rm.exports);var ya=rm.exports;const Qg=pw(ya);function Dd(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Vd(t,e){return e==null?function(i,r){const o=J.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=J.useRef();o.current||(o.current=t(i,r));const l=J.useRef(i),{instance:d}=o.current;return J.useEffect(function(){l.current!==i&&(e(d,i,l.current),l.current=i)},[d,i,r]),o}}function OS(t,e){J.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function MS(t){return function(n){const i=Od(),r=t(Md(n,i),i);return xS(i.map,n.attribution),Kg(r.current,n.eventHandlers),OS(r.current,i),r}}function Fb(t,e){const n=J.useRef();J.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function zb(t){return function(n){const i=Od(),r=t(Md(n,i),i);return Kg(r.current,n.eventHandlers),OS(r.current,i),Fb(r.current,n),r}}function Ub(t,e){const n=Vd(t,e),i=MS(n);return bS(i)}function Bb(t,e){const n=Vd(t),i=Vb(n,e);return Mb(i)}function jb(t,e){const n=Vd(t,e),i=zb(n);return bS(i)}function Hb(t,e){const n=Vd(t,e),i=MS(n);return Db(i)}function Wb(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function $b(){return Od().map}function sm(){return sm=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},sm.apply(this,arguments)}function qb({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:l,style:d,whenReady:h,zoom:f,...g},v){const[w]=J.useState({className:r,id:o,style:d}),[S,C]=J.useState(null);J.useImperativeHandle(v,()=>(S==null?void 0:S.map)??null,[S]);const N=J.useCallback(k=>{if(k!==null&&S===null){const P=new ya.Map(k,g);n!=null&&f!=null?P.setView(n,f):t!=null&&P.fitBounds(t,e),h!=null&&P.whenReady(h),C(Ob(P))}},[]);J.useEffect(()=>()=>{S==null||S.map.remove()},[S]);const z=S?je.createElement(NS,{value:S},i):l??null;return je.createElement("div",sm({},w,{ref:N}),z)}const Gb=J.forwardRef(qb),Lf=Ub(function({position:e,...n},i){const r=new ya.Marker(e,n);return Dd(r,kS(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),Zb=jb(function({positions:e,...n},i){const r=new ya.Polyline(e,n);return Dd(r,kS(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),Nf=Bb(function(e,n){const i=new ya.Popup(e,n.overlayContainer);return Dd(i,n)},function(e,n,{position:i},r){J.useEffect(function(){const{instance:l}=e;function d(f){f.popup===l&&(l.update(),r(!0))}function h(f){f.popup===l&&r(!1)}return n.map.on({popupopen:d,popupclose:h}),n.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){var g;n.map.off({popupopen:d,popupclose:h}),(g=n.overlayContainer)==null||g.unbindPopup(),n.map.removeLayer(l)}},[e,n,r,i])}),Kb=Hb(function({url:e,...n},i){const r=new ya.TileLayer(e,Md(n,i));return Dd(r,i)},function(e,n,i){Wb(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});async function Qb(t,e){var d;const n=`https://router.project-osrm.org/route/v1/driving/${t.lng},${t.lat};${e.lng},${e.lat}?overview=full&geometries=geojson`,r=await(await fetch(n)).json();if(r.code!=="Ok"||!((d=r.routes)!=null&&d[0]))throw new Error(`OSRM error: ${r.code}`);const o=r.routes[0];return{latlngs:o.geometry.coordinates.map(([h,f])=>[f,h]),distanceMeters:o.distance,durationSeconds:o.duration}}const Yb=Qg.divIcon({className:"",html:`
    <div style="
      width: 34px; height: 34px;
      border-radius: 999px;
      background: rgba(255,255,255,0.95);
      box-shadow: 0 6px 16px rgba(0,0,0,0.35);
      display:flex; align-items:center; justify-content:center;
      border: 2px solid rgba(0,0,0,0.15);
    ">
      <div style="font-size:18px; line-height:18px;"></div>
    </div>
  `,iconSize:[34,34],iconAnchor:[17,17]}),Xb=Qg.divIcon({className:"",html:`
    <div style="
      width: 18px; height: 18px;
      border-radius: 999px;
      background: rgba(0,255,140,0.95);
      border: 3px solid rgba(0,0,0,0.25);
      box-shadow: 0 6px 16px rgba(0,0,0,0.25);
    "></div>
  `,iconSize:[18,18],iconAnchor:[9,9]}),Jb=Qg.divIcon({className:"",html:`
    <div style="
      width: 18px; height: 18px;
      border-radius: 999px;
      background: rgba(80,160,255,0.95);
      border: 3px solid rgba(0,0,0,0.25);
      box-shadow: 0 6px 16px rgba(0,0,0,0.25);
    "></div>
  `,iconSize:[18,18],iconAnchor:[9,9]});function eO({bounds:t}){const e=$b();return J.useEffect(()=>{t&&e.fitBounds(t,{padding:[50,50]})},[t,e]),null}function tO({rideId:t,currentStatus:e,onStatusUpdate:n}){const{show:i}=zs(),[r,o]=J.useState(!1),[l,d]=J.useState(null),[h,f]=J.useState([]),[g,v]=J.useState(0),[w,S]=J.useState(0),[C,N]=J.useState(null),z=J.useRef(new Map),k=_S(!0);J.useEffect(()=>{const{firestore:F}=Ml(),M=Cu(Iu(F,"rides",t),async ce=>{if(ce.exists()){const ue=ce.data();if(d(ue),ue.pickup&&ue.dropoff){const Le=`${ue.pickup.lat},${ue.pickup.lng}-${ue.dropoff.lat},${ue.dropoff.lng}`;if(z.current.has(Le)){const Ne=z.current.get(Le);f(Ne),P(ue.pickup,ue.dropoff,Ne);return}try{const Ne=await Qb(ue.pickup,ue.dropoff);f(Ne.latlngs),v(Ne.distanceMeters),S(Ne.durationSeconds),z.current.set(Le,Ne.latlngs),P(ue.pickup,ue.dropoff,Ne.latlngs)}catch(Ne){console.warn("OSRM failed, using fallback:",Ne);const q=[[ue.pickup.lat,ue.pickup.lng],[ue.dropoff.lat,ue.dropoff.lng]];f(q),P(ue.pickup,ue.dropoff,q)}}}});return()=>M()},[t]);const P=(F,M,ce)=>{const ue=window.L;if(!ue)return;const Le=ue.latLngBounds([[F.lat,F.lng],[M.lat,M.lng],...ce]);N(Le)},R=(F,M)=>{const ce=`https://maps.apple.com/?daddr=${F},${M}&dirflg=d`;window.open(ce,"_blank")},j=()=>{if(!l)return;const F=e==="accepted"?l.pickup:l.dropoff;F&&R(F.lat,F.lng)},K=(F,M)=>{var ue;return((ue={accepted:["started"],started:["in_progress"],in_progress:["completed"],completed:[]}[F])==null?void 0:ue.includes(M))??!1},$=F=>({accepted:{label:"Start Ride",nextStatus:"started"},started:{label:"Begin Trip",nextStatus:"in_progress"},in_progress:{label:"Complete Ride",nextStatus:"completed"},completed:null})[F],A=l!=null&&l.pickup&&(l!=null&&l.dropoff)?{lat:(l.pickup.lat+l.dropoff.lat)/2,lng:(l.pickup.lng+l.dropoff.lng)/2}:null,T=$(e),b={accepted:{label:"Accepted",color:"#4ade80"},started:{label:"Started",color:"#60a5fa"},in_progress:{label:"In Progress",color:"#fbbf24"},completed:{label:"Completed",color:"#8b5cf6"}}[e],O=async()=>{const F=$(e);if(!F||!K(e,F.nextStatus)){i("Invalid action","error");return}o(!0);try{await ub(t,F.nextStatus),n(F.nextStatus),i(`Ride ${F.nextStatus}`,"success")}catch(M){const ce=M.message;ce.includes("permission")?i("Permission denied","error"):i(`Failed to update status: ${ce}`,"error")}finally{o(!1)}};return D.jsxs("div",{className:"active-ride",style:{paddingBottom:"80px"},children:[D.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.8)",padding:"12px",borderRadius:"8px",marginBottom:"12px"},children:[D.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[D.jsxs("div",{children:[D.jsx("h3",{style:{margin:0,fontSize:"1.1rem"},children:"Active Ride"}),D.jsxs("p",{style:{margin:"4px 0 0",fontSize:"0.75rem",color:"rgba(255,255,255,0.6)"},children:["ID: ",D.jsxs("code",{children:[t.slice(0,12),"..."]})]})]}),D.jsx("div",{style:{backgroundColor:b.color,padding:"6px 12px",borderRadius:"4px",fontSize:"0.85rem",fontWeight:"600"},children:b.label})]}),(l==null?void 0:l.pickup)&&(l==null?void 0:l.dropoff)&&D.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.85rem",color:"rgba(255,255,255,0.8)"},children:[D.jsxs("div",{children:[" Pickup  Dropoff",g>0&&D.jsxs("span",{style:{marginLeft:"8px",color:"rgba(255,255,255,0.6)"},children:["(",(g/1e3).toFixed(1)," km)"]})]}),D.jsx("button",{onClick:j,className:"secondary-button",style:{fontSize:"0.8rem",padding:"4px 12px"},children:" Navigate"})]})]}),A&&(l==null?void 0:l.pickup)&&(l==null?void 0:l.dropoff)&&D.jsx("div",{style:{height:"300px",borderRadius:"8px",overflow:"hidden",marginBottom:"16px",border:"1px solid rgba(255,255,255,0.1)"},children:D.jsxs(Gb,{center:[A.lat,A.lng],zoom:13,style:{height:"100%",width:"100%"},children:[D.jsx(Kb,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),D.jsx(eO,{bounds:C}),D.jsx(Lf,{position:[l.pickup.lat,l.pickup.lng],icon:Xb,children:D.jsx(Nf,{children:"Pickup Location"})}),D.jsx(Lf,{position:[l.dropoff.lat,l.dropoff.lng],icon:Jb,children:D.jsx(Nf,{children:"Dropoff Location"})}),(k||l.driverLocation)&&D.jsx(Lf,{position:[(k==null?void 0:k.lat)||l.driverLocation.lat,(k==null?void 0:k.lng)||l.driverLocation.lng],icon:Yb,children:D.jsx(Nf,{children:"Driver Location"})}),h.length>0&&D.jsx(Zb,{positions:h,pathOptions:{color:"#60a5fa",weight:4,opacity:.7,dashArray:"10, 10"}})]})}),D.jsx("div",{className:"ride-header",children:D.jsx("div",{className:"ride-actions",children:T?D.jsx("button",{onClick:O,disabled:r,className:"primary-button action-button",style:{width:"100%"},children:r?"Updating...":T.label}):D.jsx("div",{className:"completion-message",children:D.jsx("p",{children:" Ride completed successfully"})})})}),D.jsxs("div",{className:"ride-timeline",children:[D.jsxs("div",{className:`timeline-step ${e==="accepted"?"active":"complete"}`,children:[D.jsx("div",{className:"timeline-dot"}),D.jsx("span",{children:"Accepted"})]}),D.jsxs("div",{className:`timeline-step ${e==="started"?"active":e==="accepted"?"pending":"complete"}`,children:[D.jsx("div",{className:"timeline-dot"}),D.jsx("span",{children:"Started"})]}),D.jsxs("div",{className:`timeline-step ${e==="in_progress"?"active":e==="accepted"||e==="started"?"pending":"complete"}`,children:[D.jsx("div",{className:"timeline-dot"}),D.jsx("span",{children:"In Progress"})]}),D.jsxs("div",{className:`timeline-step ${e==="completed"?"complete":"pending"}`,children:[D.jsx("div",{className:"timeline-dot"}),D.jsx("span",{children:"Completed"})]})]})]})}function nO({driverId:t,onboardingStatus:e}){const{show:n}=zs(),r=`${window.location.origin}?driverId=${t}`,o=()=>{navigator.clipboard.writeText(r),n("Invite link copied to clipboard","success")},l=async()=>{if(navigator.share)try{await navigator.share({title:"Become my preferred customer",text:"Set me as your preferred driver",url:r}),n("Shared successfully","success")}catch(d){d.name!=="AbortError"&&n("Share failed","error")}else o()};return D.jsxs("div",{className:"driver-home",style:{paddingBottom:"80px"},children:[D.jsx("h2",{children:" Driver Profile"}),D.jsxs("div",{className:"test-section",children:[D.jsx("h3",{children:"Account Info"}),D.jsxs("div",{style:{marginTop:"0.75rem"},children:[D.jsxs("p",{style:{marginBottom:"0.5rem"},children:[D.jsx("strong",{children:"Driver ID:"})," ",D.jsx("code",{children:t})]}),D.jsxs("p",{children:[D.jsx("strong",{children:"Status:"})," ",D.jsx("span",{style:{color:e==="active"?"#10b981":"#fbbf24",fontWeight:"600"},children:e})]})]})]}),D.jsxs("div",{className:"test-section",children:[D.jsx("h3",{children:" Invite Preferred Customers"}),D.jsx("p",{className:"text-muted",children:"Share this QR code or link with customers to become their preferred driver"}),D.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",marginTop:"12px"},children:[D.jsx(Zg,{value:r,size:180}),D.jsxs("div",{style:{display:"flex",gap:"8px",width:"100%"},children:[D.jsx("button",{onClick:o,className:"secondary-button",style:{flex:1},children:" Copy Link"}),D.jsx("button",{onClick:l,className:"primary-button",style:{flex:1},children:" Share"})]})]})]})]})}function iO({activeTab:t,onTabChange:e}){const n=[{id:"home",label:"Home",icon:""},{id:"rides",label:"Rides",icon:""},{id:"profile",label:"Profile",icon:""}];return D.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,height:"60px",background:"rgba(0, 0, 0, 0.9)",borderTop:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",justifyContent:"space-around",alignItems:"center",zIndex:1e3},children:n.map(i=>D.jsxs("button",{onClick:()=>e(i.id),style:{flex:1,height:"100%",background:"transparent",border:"none",color:t===i.id?"#60a5fa":"rgba(255, 255, 255, 0.6)",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"4px",fontSize:"0.85rem",transition:"color 0.2s"},children:[D.jsx("span",{style:{fontSize:"1.5rem"},children:i.icon}),D.jsx("span",{children:i.label})]},i.id))})}const fw="demo-no-project",rO=9099,sO={projectId:fw,apiKey:"demo",authDomain:`${fw}.firebaseapp.com`},oO=`http://${mS.functionsHost}:${rO}`;function aO(){const[t,e]=J.useState(null),[n,i]=J.useState(null),[r,o]=J.useState(new Map),[l,d]=J.useState("auth"),[h,f]=J.useState("home"),[g,v]=J.useState(!0),[w,S]=J.useState(null),C=J.useRef(new Map),[N,z]=J.useState(null),k=J.useMemo(()=>ab({firebaseConfig:sO,emulator:mS}),[]),P=J.useMemo(()=>Lk(k.app),[k.app]);J.useEffect(()=>{sT(P,oO);const b=yx(P,async O=>{var F;if(e(O),v(!1),O)try{const{firestore:M}=k,{doc:ce,getDoc:ue,setDoc:Le}=await Ap(async()=>{const{doc:le,getDoc:me,setDoc:Ee}=await Promise.resolve().then(()=>sb);return{doc:le,getDoc:me,setDoc:Ee}},void 0),Ne=ce(M,"users",O.uid);(await ue(Ne)).exists()||await Le(Ne,{email:O.email,createdAtMs:Date.now(),role:"driver"});const ae=ce(M,"drivers",O.uid),X=await ue(ae);if(!X.exists())await Le(ae,{isOnline:!1,isBusy:!1,onboardingStatus:"pending",createdAtMs:Date.now(),updatedAtMs:Date.now()}),S("pending");else{const le=((F=X.data())==null?void 0:F.onboardingStatus)||"pending";S(le)}}catch(M){console.error("Failed to create user/driver docs:",M)}else S(null)});return()=>b()},[P,k]),J.useEffect(()=>{if(!t||w!=="active"){i(null);return}const b=hb(t.uid,O=>{i(O),O!=null&&O.onboardingStatus&&S(O.onboardingStatus)},O=>console.error("Profile error:",O));return()=>b()},[t,w]),J.useEffect(()=>{if(!t||w!=="active"){o(new Map);return}const b=db(t.uid,O=>{const F=new Map;O.forEach(({rideId:M,offer:ce})=>{if(!ce)return;const ue=C.current.get(M),Le=ce.status;Le==="pending"&&ue!=="pending"&&z(M),C.current.set(M,Le),Le==="pending"&&F.set(M,ce)}),o(F)},O=>console.error("Offers error:",O));return()=>b()},[t,w]),J.useEffect(()=>{const b=n==null?void 0:n.currentRideId,O=n==null?void 0:n.currentRideStatus;console.log("Navigation state:",{user:!!t,currentRideId:b,rideStatus:O,pendingOffersCount:r.size,driverProfile:n}),d(t?b&&O&&O!=="completed"?"active-ride":"home":"auth")},[t,n==null?void 0:n.currentRideId,n==null?void 0:n.currentRideStatus,r.size]);const R=async()=>{if(!t)return;const b=`test-${Date.now()}`;await cb({rideId:b,riderId:"TEST_RIDER",pickup:{lat:37.78,lng:-122.4},dropoff:{lat:37.79,lng:-122.41},priceCents:950})},j=()=>{d("active-ride")},K=()=>{z(null)},$=()=>{z(null)},A=b=>{const O=new Map(r);O.delete(b),o(O)},T=b=>{},x=n==null?void 0:n.currentRideId;return console.log("Rendering appState:",l,{user:!!t,currentRideId:x,pendingOffersCount:r.size}),D.jsx(fb,{children:D.jsxs(mb,{user:t,auth:P,loading:g,children:[t&&w==="pending"&&D.jsx("div",{className:"auth-gate",children:D.jsxs("div",{className:"auth-card",children:[D.jsx("h2",{children:"Onboarding Pending"}),D.jsx("p",{children:"Your driver account is under review. You'll be notified when approved."}),D.jsx("p",{style:{marginTop:"16px",fontSize:"12px",color:"rgba(255,255,255,0.5)"},children:"Contact support if you have questions."})]})}),t&&w==="suspended"&&D.jsx("div",{className:"auth-gate",children:D.jsxs("div",{className:"auth-card",children:[D.jsx("h2",{children:"Account Suspended"}),D.jsx("p",{children:"Your driver account has been suspended. Please contact support for assistance."})]})}),l==="home"&&t&&w==="active"&&D.jsxs(D.Fragment,{children:[h==="home"&&D.jsx(kb,{driverId:t.uid,profile:n,hasActiveRide:!!x,activeRideId:x??void 0,onCreateTestRide:R,onViewActiveRide:j}),h==="rides"&&D.jsxs("div",{style:{paddingBottom:"80px"},children:[D.jsx("h2",{style:{marginBottom:"16px"},children:" Available Rides"}),D.jsx(Nb,{offers:r,onOfferAccepted:K,onOfferDeclined:A})]}),h==="profile"&&D.jsx(nO,{driverId:t.uid,onboardingStatus:w}),D.jsx(iO,{activeTab:h,onTabChange:f})]}),N&&r.has(N)&&w==="active"&&D.jsx(Lb,{rideId:N,offer:r.get(N),onAccepted:K,onExpired:$},N),l==="active-ride"&&t&&x&&w==="active"&&D.jsx(tO,{rideId:x,currentStatus:(n==null?void 0:n.currentRideStatus)||"accepted",onStatusUpdate:T})]})})}bf.createRoot(document.getElementById("root")).render(D.jsx(aO,{}));
